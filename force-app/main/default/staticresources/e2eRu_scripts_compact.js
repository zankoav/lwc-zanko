$j=jQuery.noConflict();var chatActivityTimeout,chatOfflineUpdateTimeout,chatOfflineOLDText,autoChatLastStep,autoChatTimeOut,apiTokenDaData="ac4d32571890162a53f3f4fe0537841d1bd0c173",pattern=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i,tabActive=!1,cardPrevCount=0,regs={phone:/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/,inn:/^\d{10}|\d{12}$/,email:/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,companyName:/^[0-9a-zA-Zа-яА-ЯёЁ\w"\s"'`/()&@,;!?$#№%.+-]+$/,numbers:/^[0-9]+$/,letters:/^[а-яА-ЯёЁ\s'-]+$/,address:/^[0-9а-яА-ЯёЁIVX\s,.'"\/()-]+$/,bankName:/^[0-9nN№а-яА-ЯёЁ\s."'()!-]+$/,position:/^[а-яА-Я\s.'-]+$/,codeWord:/^[а-яА-ЯёЁ]+$/,passportCode:/^(\d{3})([\-]{1})(\d{3})$/,date:/^(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](19|20)\d\d$/};function getQueryParams(e){e=e.split("+").join(" ");for(var t,s={},a=/[?&]?([^=]+)=([^&]*)/g;t=a.exec(e);)s[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return s}function footerPosition(){$j(document).height()>=$j(window).height()?$j("footer").css("position","relative"):$j("footer").css("position","absolute")}function tog(e){return e?"addClass":"removeClass"}function eraseInputValue(e){$("."+e).on("input",".clearable",function(){$(this)[tog(this.value)]("x"),$(this).closest(".block__inputs").hasClass("goods")&&$(this).removeClass("x")}).on("mousemove",".x",function(e){$(this)[tog(this.offsetWidth-35<e.clientX-this.getBoundingClientRect().left&&e.clientX-this.getBoundingClientRect().left<this.offsetWidth-22)]("onX")}).on("touchstart click",".onX",function(e){e.preventDefault(),$(this).removeClass("x onX").val("").change()}),$("."+e+" .clearable").blur(function(){$(this).removeClass("x")}),$("."+e+" .clearable").focus(function(){0!=$(this).val().length&&0==$(this).closest(".block__inputs").hasClass("goods")&&$(this).addClass("x")})}function scrollToTopInput(e){var t=e[0];isScrolledIntoView(t)||t.scrollIntoView()}function isScrolledIntoView(e){var t=$j(window).scrollTop(),s=t+$j(window).height(),a=$j(e).offset().top;return a+$j(e).height()<=s&&t<=a}function noScrollBackground(){$("html, body").css({overflow:"hidden",height:"auto"}),$("body").css("padding-right","17px")}function modalOpen(e){$("#"+e).on("show.bs.modal",function(){$("html, body").css({overflow:"hidden",height:"auto"}),$("body").css("padding-right","17px")})}function modalClose(e){$("#"+e).on("hidden.bs.modal",function(){$("html, body").css({overflow:"",height:""}),$("body").css("padding-right","")})}function checkPersonalDataAgreement(){var e=$j(".step-contact-details").find(".personal_data_agreement");e.is(":checked")||e.closest(".block__inputs").addClass("error")}function isCheckBoxChecked(e){return e.is(":checked")}function isInputValueValid(e,t){var s=!1,a=e.val();return""!=a.trim()&&t.test(a)?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods"),s=!0):(e.closest(".block__inputs").removeClass("goods"),e.closest(".block__inputs").addClass("error"),s=!1),s}function isInputValueValidOnInput(e,t){var s=!1,a=e.val();return""!=a.trim()&&t.test(a)?(e.closest(".block__inputs").addClass("goods"),e.closest(".block__inputs").removeClass("error"),s=!0):(e.closest(".block__inputs").removeClass("goods"),s=!1),s}function checkInputLengthOnInput(e,t){$j("."+e).val().length!=t?$j("."+e).closest(".block__inputs").removeClass("goods"):$j("."+e).closest(".block__inputs").addClass("goods")}function animateScrollToNextBlock(e){document.querySelector("#"+e).scrollIntoView()}function setActiveStep(e){return"ContactDetails"==e?($j(".step-company-information .stetps__blocks_container").slideUp(),$j(".step-contact-details .stetps__blocks_container").slideDown(),$j(".step-contact-details .headers__stepts").addClass("header-is-active"),$j(".step-contact-details.stetps__blocks").addClass("active current"),$j(".step-company-information .headers__stepts").removeClass("header-is-active"),$j(".step-company-information.stetps__blocks").removeClass("active current"),$j(".ordering__steps-item.ordering__steps-step").removeClass("active")):"CompanyInformation"==e?($j(".step-company-information .stetps__blocks_container").slideDown(),$j(".step-contact-details .stetps__blocks_container").slideUp(),$j(".stetps__blocks_container.step-3-1").slideUp(),$j(".step-contact-details .headers__stepts").addClass("header-is-active"),$j(".step-contact-details.stetps__blocks").removeClass("active current"),$j(".step-company-information .headers__stepts").addClass("header-is-active"),$j(".step-company-information.stetps__blocks").addClass("active current"),$j(".step-order-information.stetps__blocks").removeClass("active current"),$j(".step-order-information .headers__stepts").removeClass("header-is-active")):"Order"==e?($j(".step-company-information .stetps__blocks_container").slideUp(),$j(".step-company-information.stetps__blocks").removeClass("active current"),$j(".step-order-information.stetps__blocks").addClass("active current"),$j(".stetps__blocks_container.step-3-2").slideUp(),$j(".stetps__blocks_container.step-3-1").slideDown(),$j(".step-legal-and-payment-details .headers__stepts").removeClass("header-is-active")):"SummaryOrder"==e?($j(".step-company-information.stetps__blocks").removeClass("active current"),$j(".step-order-information.stetps__blocks").addClass("active current"),$j(".step-legal-and-payment-details.stetps__blocks").removeClass("active current"),$j(".step-legal-and-payment-details .headers__stepts").removeClass("header-is-active"),$j(".stetps__blocks_container.step-3-1").slideUp(),$j(".step-legal-details").slideUp(),$j(".stetps__blocks_container.step-3-2").slideDown()):"LegalDetails"==e?($j(".step-order-information.stetps__blocks").removeClass("active current"),$j(".step-legal-and-payment-details.stetps__blocks").addClass("active current"),$j(".step-legal-details").slideDown(),$j(".step-payment-details").slideUp(),$j(".stetps__blocks_container.step-3-2").slideUp()):"PaymentDetails"==e?($j(".step-order-information.stetps__blocks").removeClass("active current"),$j(".step-legal-and-payment-details.stetps__blocks").addClass("active current"),$j(".step-legal-details").slideUp(),$j(".step-congratulations").slideUp(),$j(".step-payment-details").slideDown()):"Congratulations"==e?($j(".step-congratulations.stetps__blocks").addClass("active current"),$j(".step-legal-and-payment-details.stetps__blocks").removeClass("active current"),$j(".step-company-information .headers__stepts").addClass("header-is-active"),$j(".step-congratulations .headers__stepts").addClass("header-is-active")):"ErrorMessage"==e&&($j(".step-legal-and-payment-details.stetps__blocks").hide(),$j(".step-company-information.stetps__blocks").hide(),$j(".step-contact-details.stetps__blocks").hide(),$j(".step-order-information.stetps__blocks").hide(),$j(".step-congratulations").hide()),!1}function checkInputLength(e,t){$j("."+e).blur(function(){$j("."+e).val().length!=t?$j("."+e).closest(".block__inputs").addClass("error").removeClass("goods"):$j("."+e).closest(".block__inputs").addClass("goods").removeClass("error")})}function checkForAutoPasteNumericValues(a){$j("."+a).bind("paste",function(e){var t=this,s=$j(t).val();setTimeout(function(){var e=$j(t).val();$.isNumeric(e)||$j("."+a).val(s)},0)})}function checkForAutoPasteValues(a,o){$j("."+a).bind("paste",function(e){var t=this,s=$j(t).val();setTimeout(function(){var e=$j(t).val();o.test(e)||$j("."+a).val(s)},0)})}function keyDownNumeric(e){$j("."+e).on("keydown",function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||86===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<=96||105<e.keyCode)&&e.preventDefault()})}function keyDownFirstZeroBlock(e){$j("."+e).on("keydown",function(e){0==$j(this).val().length&&48==e.keyCode&&e.preventDefault()})}function removeMultipleClick(e,t){$j("."+e).on("click",function(){setTimeout(function(){"none"==$j("."+t).css("display")&&0<$j("."+e).val().length&&$j("."+t).slideDown()},0)})}function sendRequestToDadata(e,t,s){var a=new XMLHttpRequest;a.open("POST"," https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/"+e),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Authorization","Token "+apiTokenDaData),a.onreadystatechange=function(){if(4!==this.readyState||200!==this.status)return!1;formResultList(JSON.parse(a.responseText),s)};var o='{ "query": "'+(t=t.split('"'))+'" ';o+="}",a.send(o)}function formResultList(e,t){var s,a;if("searchCompany"==t)s="list-oranization",a="oranization-item";else if("companyInn"==t)s="list-inn",a="list-inn-item";else if("searchLegalAddress"==t)s="legal-address-list",a="legal-address-item";else if("searchDocumentAddress"==t)s="document-address-list",a="document-address-item";else{if("searchBank"!=t)return!1;s="bank-name-list",a="bank-name-item"}if($j("."+s).find(".mCSB_container ."+a).remove(),null==e)return $j("."+s).hide(),$j("."+s).closest(".input__obl").removeClass("border-list-input"),!1;"searchCompany_noShow"!=t?($j("."+s).show(),$j("."+s).closest(".input__obl").addClass("border-list-input")):t="searchCompany";for(var o=e.suggestions,n=0;n<o.length;n++){var i=generateListItem(o[n],t,a);$j("."+s).find(".mCSB_container").append(i)}if(0<o.length)$j("."+s).height(82*o.length),$j("."+s).find(".mCSB_container .suggestions-hint").remove(),$j("."+s).mCustomScrollbar("scrollTo",["top",null]),o.length<=2?$j("."+s).mCustomScrollbar("disable"):$j("."+s).mCustomScrollbar("update");else if(!$j("."+s).find(".mCSB_container").find(".suggestions-hint")[0]){$j("."+s).height(40);var l="";"searchCompany"==t||"companyInn"==t?l="Неизвестная организация":"searchLegalAddress"==t||"searchDocumentAddress"==t?l="Неизвестный адрес":"searchBank"==t&&(l="Неизвестный банк"),$j("."+s).find(".mCSB_container").append('<div class="suggestions-hint">'+l+"</div>")}}function generateListItem(e,t,s){var a="";if("searchCompany"==t||"companyInn"==t)a='<div class="'+s+'" data-name="'+e.unrestricted_value+'" data-inn="'+e.data.inn+'" data-name-full="'+e.data.name.full_with_opf.split('"').join("&amp;quote")+'" data-address="'+e.data.address.value+'"><strong>'+e.unrestricted_value+"</strong><span>"+e.data.address.value+"<br/>"+e.data.inn+"</span></div>";else if("searchDocumentAddress"==t||"searchLegalAddress"==t){a='<div class="'+s+'" data-name="'+e.unrestricted_value+'" ';var o="";null!=e.data.region_with_type&&(o=e.data.region_with_type),a+=' data-region="'+o+'" ';var n="";null!=e.data.city_with_type?n=e.data.city_with_type:null!=e.data.settlement_with_type&&(n=e.data.settlement_with_type),a+=' data-city="'+n+'" ';var i="";null!=e.data.postal_code&&(i=e.data.postal_code),a+=' data-postal_code="'+i+'" ';var l="";null!=e.data.street_with_type&&(l=e.data.street_with_type),a+=' data-street="'+l+'" ',a+=' data-house="',null!=e.data.house&&(a+=e.data.house+" "),null!=e.data.block_type&&(a+=e.data.block_type+" "),null!=e.data.block&&(a+=e.data.block),a+='"> <strong>'+e.unrestricted_value+"</strong></div>"}else if("searchBank"==t){var r="";null!=e.data.address.data&&(r=e.data.address.data.city_with_type),a='<div class="'+s+'" data-name="'+e.data.name.payment.split('"').join("&amp;quote")+'" data-name-short="'+e.data.name.short+'" data-bic="'+e.data.bic+'" data-kc="'+e.data.correspondent_account+'" data-okpo="'+e.data.okpo+'" data-town="'+r+'" data-address="'+e.data.address.value+'" ><strong>'+e.data.name.payment+"</strong><span>"+e.data.bic+"<br/>"+e.data.address.value+"</span></div>"}return a}function setDaDataInputList(e,s){var t=e.parent();t.find("."+s)[0]||t.append('<div class="'+s+'"></div>'),$j(document).mouseup(function(e){var t=$j("."+s);0===t.has(e.target).length&&t.slideUp()}),$j("."+s).mCustomScrollbar({theme:"dark"})}function switchDaDaOn(){setDaDataInputList($j(".searchCompany"),"list-oranization"),setDaDataInputList($j(".companyInn"),"list-inn"),$j(".searchCompany").on("input click",function(e){var t=$j(".searchCompany").val();""!=t?(sendRequestToDadata("party",t,"searchCompany"),"input"!=e.type&&($j(".searchCompany").closest(".input__obl").hasClass("border-list-input")?$j(".searchCompany").closest(".input__obl").removeClass("border-list-input"):$j(".searchCompany").closest(".input__obl").addClass("border-list-input"))):formResultList(null,"searchCompany"),saveCompanyInformation("")}),$j(".searchCompany").blur(function(){$j(".searchCompany").closest(".input__obl").removeClass("border-list-input")}),$j(".companyInn").on("input",function(e){var t=$j(".companyInn").val();$j(".searchCompany").val(""),formResultList(null,"searchCompany"),""!=t?$.isNumeric(t)&&9<t.length&&sendRequestToDadata("party",t,"companyInn"):formResultList(null,"companyInn")}),$j(".companyInn").blur(function(){$j(".companyInn").closest(".input__obl").removeClass("border-list-input")}),removeMultipleClick("searchCompany","list-oranization"),$j("body").on("click",".oranization-item",function(e){var t=$j(this).data("inn");$j(".list-oranization").slideUp(),$j(".searchCompany").val($j(this).find("strong").text()),$j(".searchCompany").closest(".block__inputs").addClass("goods"),$j(".searchCompany").closest(".input__obl").removeClass("border-list-input"),0!=$j(".companyInn").val().length&&$j(".companyInn").closest(".block__inputs").addClass("goods"),$j(".companyInn").val(t),$j(".searchCompany").closest(".block__inputs").removeClass("error"),$j(".companyInn").closest(".block__inputs").removeClass("error"),$j(".list-oranization").addClass("good");var s=$j(".searchCompany").val();""!=s?sendRequestToDadata("party",s,"searchCompany_noShow"):formResultList(null,"searchCompany"),saveCompanyInformation($j(this).data("name-full")),saveSoleProprietorLegalAddress($j(this).data("address"))}),$j("body").on("click",".list-inn-item",function(e){var t=$j(this).find("strong").text();$j(".list-inn").slideUp(),$j(".companyInn").val($j(this).data("inn")),$j(".companyInn").closest(".block__inputs").addClass("goods"),$j(".companyInn").closest(".input__obl").removeClass("border-list-input"),$j(".searchCompany").closest(".block__inputs").addClass("goods"),$j(".searchCompany").val(t),$j(".companyInn").closest(".block__inputs").removeClass("error"),$j(".searchCompany").closest(".block__inputs").removeClass("error");var s=$j(".searchCompany").val();""!=s?sendRequestToDadata("party",s,"searchCompany_noShow"):formResultList(null,"searchCompany"),$j(".list-oranization").mCustomScrollbar("update"),$j(".list-oranization").addClass("good"),saveCompanyInformation($j(this).data("name-full")),saveSoleProprietorLegalAddress($j(this).data("address")),setTimeout(setTimeoutInterval,400)})}function companyDetailsManualEntryEvents(){var e=$j(".step-company-information"),t=e.find(".searchCompany");t.blur(function(e){isInputValueValid(t,new RegExp(regs.companyName))}),checkForAutoPasteValues("searchCompany",new RegExp(regs.companyName));var s=e.find(".companyInn");s.blur(function(e){isInputValueValid(s,new RegExp(regs.inn))}),checkForAutoPasteNumericValues("companyInn")}function setTimeoutInterval(){$j(".list-oranization").hide()}function tooltipInput_controller(e){$j("."+e).closest(".block__inputs").find(".df").on("click",function(){if($(window).width()<768){var e=$(this).closest(".block__inputs").find(".mobile__tooltips"),t=$(this).closest(".block__inputs").find(".tooltip-image");1==e.hasClass("active_input")?(e.removeClass("active_input"),t.removeClass("arrow-up").addClass("arrow-down")):(e.addClass("active_input"),t.removeClass("arrow-down").addClass("arrow-up"))}})}function tooltipCheckbox_controller(){$j(".block__dops").find(".block_checkbox").find(".tooltip-image").on("click",function(){if($(window).width()<768){var e=$(this).closest(".checkbox_helptext").find(".mobile__tooltips");1==e.hasClass("active")?(e.removeClass("active"),$(this).removeClass("arrow-up").addClass("arrow-down")):(e.addClass("active"),$(this).removeClass("arrow-down").addClass("arrow-up"))}})}function tooltipMode(){$(window).width()<768?$('[data-toggle="tooltip"]').tooltip("disable"):$('[data-toggle="tooltip"]').tooltip("enable"),$j(window).resize(function(){$(this).width()<768?$('[data-toggle="tooltip"]').tooltip("disable"):($(".tooltip-image").removeClass("arrow-down").removeClass("arrow-up"),$('[data-toggle="tooltip"]').tooltip("enable"),$(".mobile__tooltips").removeClass("active_input"),$(".mobile__tooltips").removeClass("active"))})}function setEvents_ContactDetails(){$j(".phoneNumber").mask("+7 (000) 000-00-00"),preventPressingEnterButton($j(".step-contact-details .block__inputs").find("input")),checkForAutoPasteValues("emailAddress",new RegExp(regs.email)),checkForAutoPasteNumericValues("phoneNumber"),$j(".phoneNumber").blur(function(){isInputValueValid($j(this),new RegExp(regs.phone))}),checkInputLength("phoneNumber",18),$j(".phoneNumber").on("input",function(){isInputValueValidOnInput($j(this),new RegExp(regs.phone)),checkInputLengthOnInput("phoneNumber",18)}),$j(".emailAddress").blur(function(){isInputValueValid($j(this),new RegExp(regs.email))}),$j(".emailAddress").on("input",function(){isInputValueValidOnInput($j(this),new RegExp(regs.email))}),$j(".personal_data_agreement").change(function(){1==$j(this).is(":checked")&&$j(this).closest(".block__inputs").removeClass("error"),ga("send","event","checkbox","click","personal_data"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_personal_data")}}),$j(".agreement-to-receive-information").change(function(){ga("send","event","checkbox","click","get_info"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_get_info")}}),$j(".modal-body").mCustomScrollbar({theme:"dark"}),modalOpen("myModal"),modalClose("myModal"),eraseInputValue("step-contact-details"),$(".preview-inside-button").attr("data-dismiss","modal"),tooltipMode(),tooltipInput_controller("phoneNumber"),tooltipInput_controller("emailAddress")}function validateContactDetails(){var e,t,s=$j(".step-contact-details"),a=s.find(".phoneNumber"),o=s.find(".emailAddress"),n=s.find(".personal_data_agreement"),i=[];if(i.push(isInputValueValid(a,new RegExp(regs.phone))),i.push(isInputValueValid(o,new RegExp(regs.email))),i.push(n.is(":checked")),e=-1==i.indexOf(!1),t=2==i.indexOf(!1),e)goToCompanyDetails();else if(t)updateContactPhone();else{scrollToTopInput($j(".step-contact-details .block__inputs.error"))}}function setEvents_companyDetails(){checkForAutoPasteNumericValues("companyInn"),checkForAutoPasteValues("searchCompany",new RegExp(regs.companyName)),preventPressingEnterButton($j(".step-company-information .block__inputs").find("input")),$j(".companyInn").mask("999999999999"),$j(".companyNotExist").on("change",function(){ga("send","event","checkbox","click","manually"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_manually")};$j(this).val();1==$j(this).is(":checked")?isManualEntryFunctionDaDataOff():isManualEntryFunction()});var e=document.getElementById("chat-button-online");null!=e&&(e.style.visibility="visible");var t=document.getElementById("chat-button-offline");return null!=t&&(t.style.visibility="visible"),$j(".searchCompany").on("input",function(e){$j(".searchCompany").closest(".block__inputs").removeClass("goods"),0==$j(".companyNotExist").is(":checked")&&($j(".companyInn").closest(".block__inputs").removeClass("goods"),$j(".companyInn").val(""),$j(".list-oranization").removeClass("good")),$j(".companyInn").closest(".block__inputs").removeClass("goods")}),$j(".searchCompany").blur(function(){1==$j(".companyNotExist").is(":checked")&&$j(this).closest(".block__inputs").addClass("goods")}),$j(".companyInn").on("input",function(e){$j(".companyInn").closest(".block__inputs").removeClass("goods"),0==$j(".companyNotExist").is(":checked")&&$j(".searchCompany").closest(".block__inputs").removeClass("goods")}),eraseInputValue("step-company-information"),tooltipMode(),tooltipInput_controller("companyInn"),tooltipInput_controller("searchCompany"),!1}function validateCompanyDetails(){var e=$j(".step-company-information"),t=e.find(".searchCompany"),s=e.find(".companyInn"),a=[];(a.push(isInputValueValid(t,new RegExp(regs.companyName))),a.push(isInputValueValid(s,new RegExp(regs.inn))),0==$j(".companyNotExist").is(":checked")&&a.push(isInnValid(t,s)),-1==a.indexOf(!1))?goToOrderInformation():(t.closest(".block__inputs").removeClass("goods"),$j(".list-oranization").removeClass("good"),t.removeAttr("disabled"),scrollToTopInput($j(".step-company-information .block__inputs.error")))}function isInnValid(e,t){var s=!1,a=new XMLHttpRequest;a.open("POST","https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",!1),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Authorization","Token "+apiTokenDaData),a.send('{ "query": "'+t.val()+'" }');var o=JSON.parse(a.responseText).suggestions;if(0<o.length){for(var n=0;n<o.length;n++)if(o[n].data.inn==t.val()&&o[n].unrestricted_value.toUpperCase()==e.val().toUpperCase()){s=!0;break}}else 1==$j(".companyNotExist").is(":checked")&&isInputValueValid(t,new RegExp(regs.inn))&&(s=!0);return s?(t.closest(".block__inputs").removeClass("error"),t.closest(".block__inputs").addClass("goods")):(t.closest(".block__inputs").removeClass("goods"),t.closest(".block__inputs").addClass("error")),s}function prepareBackToContactDetails(){backToContactDetails()}function setEvents_order(){preventPressingEnterButton($j(".step-order-information .block__inputs").find("input")),$j(".PERSONAL-MANAGER").change(function(){ga("send","event","checkbox","click","consultation"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_consultation")}}),$j(".DOCS-DELIVERY").change(function(){ga("send","event","checkbox","click","delivery"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_delivery")}}),tooltipMode(),tooltipInput_controller("js-count-cart"),keyDownFirstZeroBlock("js-count-cart"),$j(".js-count-cart").mask("999"),$j(".stetps__blocks_hide").slideUp(),void 0!==$j(".js-count-cart").val()&&($j(".js-count-cart").val().length<1?($j(".step-order-information .stetps__blocks_hide").slideDown().removeClass("active"),$j(".js-count-cart").closest(".block__inputs").removeClass("goods")):$j(".step-order-information .stetps__blocks_hide").slideDown()),$j(".js-count-cart").blur(function(){$j(this).val().length<1?$j(".js-count-cart").closest(".block__inputs").addClass("error"):$j(".js-count-cart").closest(".block__inputs").removeClass("error")}),$j(".js-count-cart").on("keydown",function(){var o=parseInt($j("[id$=isTariffsSeparation]").text()),n=$j(this).val(),i=this;setTimeout(function(){var e=$j(i).val();if($j(i).val().length<1)$j(".js-count-cart").closest(".block__inputs").addClass("error").removeClass("goods");else if($j(".js-count-cart").closest(".block__inputs").addClass("goods").removeClass("error"),0==n.length){var t="_CONTRACT";if(amountOfCardsRange(parseInt(e),1,o))t="_CARDS";setTariffsContent(t)}else{var s=amountOfCardsRange(parseInt(n),1,o);console.log("prev_suffix"),console.log(s);var a=amountOfCardsRange(parseInt(e),1,o);if(console.log("current_suffix"),console.log(a),s!=a&&0!=e.length){t="_CONTRACT";if(amountOfCardsRange(parseInt(e),1,o))t="_CARDS";setTariffsContent(t)}}},0)}),setEvents_loadTariffs(),$j(document).mouseup(function(e){var t=$j(".list-product");0===t.has(e.target).length&&t.slideUp()}),$j(".product-item").on("click",function(){var e=$j(this).text(),t=$j(this).attr("product-id");$j(".list-product").slideUp(),$j(".js-product").val(e),putProduct(t)}),$j(".js-product").on("keydown",function(e){e.preventDefault()}),$j(".list-product").mCustomScrollbar({theme:"dark"}),removeMultipleClick("js-product","list-product"),setEvents_checkPromocode(),getPromocodeResult(),tooltipCheckbox_controller(),$j(window).resize(function(){"block"==$(".tariffs-block").css("display")&&setTimeout(alignProperties,1e3)})}function startTariffsLoad(){var e=parseInt($j("[id$=isTariffsSeparation]").text()),t=$j(".js-count-cart").val(),s="_CONTRACT";if(amountOfCardsRange(parseInt(t),1,e))s="_CARDS";setTariffsContent(s)}function setEvents_loadTariffs(){void 0!==$j(".js-count-cart").val()&&(0<$j(".js-count-cart").val().length?($j(".stetps__blocks_hide").slideDown().addClass("active"),$j(".js-count-cart").closest(".block__inputs").addClass("goods")):$j(".js-count-cart").closest(".block__inputs").removeClass("goods")),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target).attr("href").replace("#",""),s=$(e.target).text();$j("input[name=tariff][id="+t+"]").prop("checked",!0),setActiveTariffBorder(t),putTariff(s,t),"Оптимальный"==s?(ga("send","event","checkbox","click","optimal"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_optimal")}):"Избранный"==s&&(ga("send","event","checkbox","click","elect"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_elect")})}),$j("input[name=tariff][class=desktop]").on("change",function(){var e=$j(this).attr("id"),t=$j(this).val();$(".nav-pills a[href=#"+e+"]").tab("show"),setActiveTariffBorder(e),putTariff(t,e)}),alignProperties(),carouselTariffs(),$j("i").parent().children("span").remove();var e=$j(".nav-item").last().find("a").attr("href"),t=$j(".js-count-cart").val();if(amountOfCardsRange(parseInt(t),1,5))e=$j(".nav-item").last().find("a").attr("href");$(".nav-pills a[href="+e+"]").tab("show"),modalOpen("DiscountsModal"),modalClose("DiscountsModal"),tooltipMode()}function setEvents_checkPromocode(){eraseInputValue("promocode-section"),$j(".js-promocode").blur(function(){var e=$j(".promocode-label").text(),t=$j(".promocode-section .error--text").text();(0<$j(this).val().length||""!=e||""!=t)&&checkPromocode($j(this).val())}),$j(".js-promocode").on("input",function(){$j(".js-promocode").closest(".block__inputs").removeClass("goods")}),$j(document).mouseup(function(e){var t=$j(".list-promocode");0==t.has(e.target).length&&t.slideUp()}),removeMultipleClick("js-promocode-option","list-promocode"),$j(".promocode-item").on("click",function(){var e=$j(this).text();$j(this).attr("promocode-id");$j(".list-promocode").slideUp(),$j(".js-promocode-option").val(e),setPromocodeItem(e)}),$j(".js-promocode-option").on("keydown",function(e){e.preventDefault()}),$j(".list-promocode").mCustomScrollbar({theme:"dark"}),tooltipMode(),tooltipInput_controller("js-promocode")}function amountOfCardsRange(e,t,s){return t<=e&&e<=s}function onChangeTariff(){$j("input[name=tariff][class=desktop]").on("change",function(){var e=$j(this).attr("id"),t=$j(this).val();$(".nav-pills a[href=#"+e+"]").tab("show"),setActiveTariffBorder(e),putTariff(t,e)})}function getPromocodeResult(){var e=$j(".js-promocode").val();if(null!=e)if(null==e&&0<e.length){var t=$j(".promocode-label").text();null==t||""==t?($j(".promocode-section").removeClass("promocode-block"),$j(".js-promocode").closest(".block__inputs").addClass("error"),$j(".promocode-label").addClass("none"),$j(".js-promocode").closest(".block__inputs").removeClass("goods"),$(".promocode-complete").remove()):($j(".promocode-section").addClass("promocode-block"),$j(".promocode-complete").removeClass("none"),$j(".js-promocode").closest(".input__obl").addClass("margin-promocode"),$j(".js-promocode").closest(".block__inputs").removeClass("error"),$j(".promocode-label").removeClass("none"),$j(".js-promocode").closest(".block__inputs").addClass("goods"));var s=$j(".js-promocode-option").val();null==s||""==s||null==s?$j(".fake__inputs-text").closest(".promocode-complete .block__inputs").addClass("margin-promocode-value"):$j(".promocode-list-hide").removeClass("none")}else $(".promocode-complete").remove()}function lockPromocode(){var e=$j(".js-promocode").val();if(0<e.length){var t=$j(".js-promocode").closest(".input__obl");$j(".js-promocode").remove(),t.closest(".block__inputs").removeClass("goods"),t.css("border","0"),t.append("<div class='fake__inputs-text'>"+e+"</div>")}}function carouselTariffs(){if(1==$(".item").length){var e=$(".tariff-block").length;0==(e=(e+e%2)/2-1)?($(".carousel-indicators").addClass("none"),$(".carousel-control").addClass("none")):($(".carousel-indicators").removeClass("none"),$(".carousel-control").removeClass("none"));for(var t=0;t<e;t++){$(".item").last().clone().appendTo(".carousel-inner"),$(".item").last().removeClass("active"),$(".carousel-indicator-custom").last().clone().appendTo(".carousel-indicators");var s=""+($(".carousel-indicators").children().length-1);$(".carousel-indicator-custom").last().attr("data-slide-to",s),$(".carousel-indicator-custom").last().removeClass("active")}onChangeTariff()}}function deleteCarouselElements(){var t=1,s=t+1,a="tariff-"+t,o="tariff-"+s;$(".item").each(function(e){$(this).children().each(function(e){var t=$(this).attr("class");-1==t.indexOf(a)&&-1==t.indexOf(o)&&$(this).remove()}),t++,t++,$(".carousel-indicator-custom").length==t?s=1:(s++,s++),a="tariff-"+t,o="tariff-"+s})}function putTariff(e,t){$("#TariffErrorDesktop").css("padding","0px 0 5px"),$("#TariffErrorDesktop").css("display","none"),$("#TariffErrorMobile").css("padding","0px 0 5px"),$("#TariffErrorMobile").css("display","none"),setTariff(e,t)}function putProduct(e){$j(".js-promocode").val(""),setProduct(e)}function updateTariffs(){loadTariffs()}function setActiveTariffBorder(e){$j(".tariff-"+e).css("border","1px solid #4fcfcc"),$("input:radio:not(:checked)").each(function(e,t){var s=$(this).attr("id");$j(".tariff-"+s).css("border","1px solid #ebebeb")})}function alignProperties(){768<$(window).width()&&$(".property-block").each(function(){var t=$(this).attr("property-name");$(".property-"+t).each(function(){var e=Math.max.apply(null,$(".property-"+t).map(function(){return $(this).height()}).get());$(this).height(e)})})}function checkboxesCursor(){$(".js-tooltips-text").each(function(){$(this).css("top","-"+$(this).outerHeight()-20+"px")})}function validateOrderInformation(){var e,t=$("ul#TariffPills li.active a").attr("href"),s=$("input[name=tariff]").is(":checked"),a=amountOfCardsRange($j(".js-count-cart").val(),1,999);(a||$j(".js-count-cart").closest(".block__inputs").removeClass("goods").addClass("error"),s||null!=t||($("#TariffErrorDesktop").css("padding","0px 0 5px"),$("#TariffErrorDesktop").css("display","block"),$("#TariffErrorMobile").css("padding","0px 0 5px"),$("#TariffErrorMobile").css("display","block")),a)?s||null!=t?(putTariff(),goToSummaryOrder()):isScrolledIntoView(e=$j(".scroll__error")[0])||e.scrollIntoView():scrollToTopInput(e=$j(".step-order-information .block__inputs.error"))}function setEvents_summaryOrder(){preventPressingEnterButton($j(".step-order-information .block__inputs").find("input")),0==$j(".js-goods-order").closest(".stetps__blocks-content").find("input[type='checkbox']:checked").length?$(".dop__services").addClass("none"):$j(".js-goods-order").closest(".stetps__blocks-content").find("input[type='checkbox']:checked").each(function(){var e=$(this).attr("class");e=".values."+e,$j(".dop__services").find(e).removeClass("none")}),$j(".js-past-cart").val($j(".js-count-cart").val()),$j(".mobile__tooltips").removeClass("active"),$(".js-tooltips-text").each(function(){$(this).css("top","-"+$(this).outerHeight()-20+"px")}),$(".js-tooltips").on("click",function(){$(window).width()<768&&$(this).closest(".checkbox_helptext").find(".mobile__tooltips").html($(this).find(".js-tooltips-text").html()).addClass("active")}),$(".block__inputs-podr").click(function(e){e.preventDefault(),window.location.href="https://www.cmu.edu/blackboard/files/evaluate/tests-example.xls"});var e=$j(".promocode-result").text().trim();return null==e||""==e?$j(".promocode-result").addClass("none"):$j(".promocode-result").removeClass("none"),$("#DiscountsModal").prop("id","DiscountsModal_prev"),modalOpen("DiscountsModal"),modalClose("DiscountsModal"),tooltipMode(),tooltipCheckbox_controller(),$j("i").parent().children("span").last().remove(),!1}function goBackToSummaryOrder(){$j(".step-legal-and-payment-details .stetps__blocks_container").slideUp(),$j(".step-order-information .stetps__blocks_container").slideDown(),$(".js-end-order").removeClass("none"),backToSummaryOrder()}function validateSummaryOrder(){return goToLegalDetails(),!1}function setEvents_legalDetails(){var e=$j(".step-legal-details");preventPressingEnterButton($j(".step-legal-and-payment-details .block__inputs").find("input")),eraseInputValue("step-legal-details"),setEvents_sparkFields();var t=e.find(".document-address");t.blur(function(e){validateAddressInformation(t)}),checkForAutoPasteValues("document-address",new RegExp(regs.address)),t.blur(function(){t.closest(".input__obl").removeClass("border-list-input")});e.find(".address-2");var s=e.find(".executivePersonFullName");s.blur(function(e){isInputValueValid(s,new RegExp(regs.letters))}),checkForAutoPasteValues("executivePersonFullName",new RegExp(regs.letters)),s.on("input",function(){isInputValidOnChange(s)});var a=e.find(".executivePersonPosition");a.blur(function(e){isInputValueValid(a,new RegExp(regs.position))}),checkForAutoPasteValues("executivePersonPosition",new RegExp(regs.position)),a.on("input",function(){isInputValidOnChange(a)});var o=e.find(".codeWord");o.blur(function(e){isCodeWordValueValid(o,new RegExp(regs.codeWord))}),checkForAutoPasteValues("codeWord",new RegExp(regs.codeWord)),o.on("input",function(){isInputValidOnChange(o)});var n=e.find(".account-email");n.blur(function(e){isInputValueValid(n,new RegExp(regs.email))}),checkForAutoPasteValues("account-email",new RegExp(regs.email)),n.on("input",function(){isInputValueValidOnInput(n,new RegExp(regs.email))}),$j(".close").on("click",function(){var e=$j(this);e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").find("input").val(""),e.closest(".block__inputs").find("input").focus()}),$j("input[class=address-2]").on("change",function(){ga("send","event","checkbox","click","address"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_address")},1==$j(this).is(":checked")?($j(".document-address").closest(".block__inputs").removeClass("error"),$j(".document-address").val($(".legal-address").val()),$j(".document-address").removeClass("error"),saveAddressInformation("postalAddress",$j("[id$=legalAddressInformationCity]").val(),$j("[id$=legalAddressInformationPostalCode]").val(),$j("[id$=legalAddressInformationState]").val(),$j("[id$=legalAddressInformationStreet]").val(),$j("[id$=legalAddressInformationHouse]").val()),$j(".document-address").attr("disabled","disabled"),$j(".document-address-additionally").val($j(".legal-address-additionally").val()),$j(".document-address-additionally").attr("disabled","disabled")):(saveAddressInformation("postalAddress","","","","",""),$j(".document-address").val(""),$j(".document-address").removeAttr("disabled"),$j(".document-address-additionally").val(""),$j(".document-address-additionally").removeAttr("disabled"))}),$j(".step-order-information .stetps__blocks_container").slideUp(),$j(".step-order-information").removeClass("current"),$j(".step-legal-and-payment-details").addClass("active"),$j(".step-legal-details").addClass("active");var i=$j(".document-address").parent();i.find(".document-address-list")[0]||i.append('<div class="document-address-list"></div>'),$j(".document-address").on("input click",function(e){var t=$j(this).val();""!=t?sendRequestToDadata("address",t,"searchDocumentAddress"):formResultList(null,"searchDocumentAddress"),"input"==e.type&&(saveAddressInformation("postalAddress","","","",""),$j(".document-address").closest(".block__inputs").removeClass("error"),$j(".document-address").closest(".block__inputs").removeClass("goods"),$j(".document-address-list").removeClass("good"))}),removeMultipleClick("document-address","document-address-list"),$j("body").on("click",".document-address-item",function(e){$j(".document-address-list").slideUp(),$j(".document-address").closest(".input__obl").removeClass("border-list-input"),$j(".document-address").addClass("good"),$j(".document-address").val($j(this).find("strong").text()),$j(".document-address-list").addClass("good"),saveAddressInformation("postalAddress",$j(this).data("city"),$j(this).data("postal_code"),$j(this).data("region"),$j(this).data("street"),$j(this).data("house")),validateAddressInformation($j(".step-legal-details .document-address"))}),$j(document).mouseup(function(e){if($j(".document-address-list").is(":visible")&&0===$j(".document-address-list").has(e.target).length){$j(".document-address-list").slideUp();var t=!1;if($j(".document-address-item").each(function(e){$j(this).find("strong").text()==$j(".document-address").val()&&(t=!0)}),!t){var s=$j(".document-address-item").first();$j(".document-address").val(s.find("strong").text()),saveAddressInformation("postalAddress",s.data("city"),s.data("postal_code"),s.data("region"),s.data("street"),s.data("house")),validateAddressInformation($j(".step-legal-details .document-address"))}}if($j(".legal-address-list").is(":visible")&&0===$j(".legal-address-list").has(e.target).length){$j(".legal-address-list").slideUp();t=!1;if($j(".legal-address-item").each(function(e){$j(this).find("strong").text()==$j(".legal-address").val()&&(t=!0)}),!t){s=$j(".legal-address-item").first();$j(".legal-address").val(s.find("strong").text()),saveAddressInformation("legalAddress",s.data("city"),s.data("postal_code"),s.data("region"),s.data("street"),s.data("house")),validateAddressInformation($j(".step-legal-details .legal-address")),1==$j(".address-2").is(":checked")&&($j(".document-address").val(s.find("strong").text()),saveAddressInformation("postalAddress",s.data("city"),s.data("postal_code"),s.data("region"),s.data("street"),s.data("house")),validateAddressInformation($j(".step-legal-details .document-address")))}}}),$j(".document-address-list").mCustomScrollbar({theme:"dark"}),setTimeout(checkboxesCursor,1e3),tooltipMode(),tooltipInput_controller("codeWord"),tooltipInput_controller("account-email"),tooltipInput_controller("delivery-info")}function setEvents_sparkFields(){$j(".manual-entry").attr("disabled","disabled"),eraseInputValue("spark-fields"),"on"==$j("input[class=rewrite-spark-values]").val()?$j("input[class=rewrite-spark-values]").on("change",function(){ga("send","event","checkbox","click","change_data"),window.onload=function(){yaCounter1965880.reachGoal("checkbox_change_data")},0==$j(this).is(":checked")?(recoverDataSpark(),$j(".manual-entry").attr("disabled","disabled")):$j(".manual-entry").removeAttr("disabled")}):$j(".manual-entry").removeAttr("disabled"),$j(".spark-values-checkbox").hasClass("pay-overdraft-lock")&&$j(".manual-entry").removeAttr("disabled");var e=$j(".step-legal-details"),t=e.find(".js-orgn");t.blur(function(e){isLegalInputValueValid(t,new RegExp(regs.numbers),13,!1)}),checkForAutoPasteNumericValues("js-orgn"),t.on("input",function(){isLegalInputValueValidOnInput(t,new RegExp(regs.numbers),13,!1)});var s=e.find(".ogrnip");s.blur(function(e){isLegalInputValueValid(s,new RegExp(regs.numbers),15,!1)}),checkForAutoPasteNumericValues("ogrnip"),s.on("input",function(){isLegalInputValueValidOnInput(s,new RegExp(regs.numbers),15,!1)});var a=e.find(".js-kpp");a.blur(function(e){isLegalInputValueValid(a,new RegExp(regs.numbers),9,!1)}),checkForAutoPasteNumericValues("js-kpp"),a.on("input",function(){isLegalInputValueValidOnInput(a,new RegExp(regs.numbers),9,!1)});var o=e.find(".js-okpo");o.blur(function(e){isLegalInputValueValid(o,new RegExp(regs.numbers),10,!0)}),checkForAutoPasteNumericValues("js-okpo"),o.on("input",function(){isLegalInputValueValidOnInput(o,new RegExp(regs.numbers),10,!0)});var n=e.find(".legal-address");n.blur(function(e){validateAddressInformation(n)}),checkForAutoPasteValues("legal-address",new RegExp(regs.address)),n.blur(function(){n.closest(".input__obl").removeClass("border-list-input")});var i=$j(".legal-address").parent();i.find(".legal-address-list")[0]||i.append('<div class="legal-address-list"></div>'),$j(".legal-address").on("input click",function(e){var t=$j(this).val();""!=t?sendRequestToDadata("address",t,"searchLegalAddress"):formResultList(null,"searchLegalAddress"),"input"==e.type&&(saveAddressInformation("legalAddress","","","",""),$j(".legal-address").closest(".block__inputs").removeClass("error"),$j(".legal-address").closest(".block__inputs").removeClass("goods"),$j(".legal-address-list").removeClass("good"))}),$j(".legal-address-additionally").on("input click",function(e){if(1==$j(".address-2").is(":checked")){var t=$j(this).val();$j(".document-address-additionally").val(t)}}),removeMultipleClick("legal-address","legal-address-list"),$j("body").on("click",".legal-address-item",function(e){$j(".legal-address-list").slideUp(),$j(".legal-address").closest(".input__obl").removeClass("border-list-input"),$j(".legal-address").val($j(this).find("strong").text()),$j(".legal-address").closest(".block__inputs").addClass("goods"),$j(".legal-address").closest(".block__inputs").removeClass("error"),$j(".legal-address-list").addClass("good"),saveAddressInformation("legalAddress",$j(this).data("city"),$j(this).data("postal_code"),$j(this).data("region"),$j(this).data("street"),$j(this).data("house")),validateAddressInformation($j(".step-legal-details .legal-address")),1==$j(".address-2").is(":checked")&&($j(".document-address").val($j(this).find("strong").text()),saveAddressInformation("postalAddress",$j(this).data("city"),$j(this).data("postal_code"),$j(this).data("region"),$j(this).data("street"),$j(this).data("house")),validateAddressInformation($j(".step-legal-details .document-address")))}),$j(".legal-address-list").mCustomScrollbar({theme:"dark"}),1==$j(".address-2").is(":checked")&&($j(".document-address").closest(".block__inputs").removeClass("error"),$j(".document-address").val($(".legal-address").val()),$j(".document-address").removeClass("error"),saveAddressInformation("postalAddress",$j("[id$=legalAddressInformationCity]").val(),$j("[id$=legalAddressInformationPostalCode]").val(),$j("[id$=legalAddressInformationState]").val(),$j("[id$=legalAddressInformationStreet]").val(),$j("[id$=legalAddressInformationHouse]").val()),$j(".document-address").attr("disabled","disabled"),$j(".document-address-additionally").val($j(".legal-address-additionally").val()),$j(".document-address-additionally").attr("disabled","disabled"))}function saveCompanyInformation(e){$j("[id$=companyInformationFullName]").val(e)}function saveSoleProprietorLegalAddress(e){$j("[id$=soleProprietorLegalAddress]").val(e)}function saveAddressInformation(e,t,s,a,o,n){"postalAddress"==e?($j("[id$=postalAddressInformationCity]").val(t),$j("[id$=postalAddressInformationPostalCode]").val(s),$j("[id$=postalAddressInformationState]").val(a),$j("[id$=postalAddressInformationStreet]").val(o),$j("[id$=postalAddressInformationHouse]").val(n)):"legalAddress"==e&&($j("[id$=legalAddressInformationCity]").val(t),$j("[id$=legalAddressInformationPostalCode]").val(s),$j("[id$=legalAddressInformationState]").val(a),$j("[id$=legalAddressInformationStreet]").val(o),$j("[id$=legalAddressInformationHouse]").val(n))}function saveBankInformation(e,t,s,a,o,n,i){$j("[id$=bankInformationShortName]").val(e),$j("[id$=bankInformationOKPO]").val(t),$j("[id$=bankInformationTown]").val(s),$j("[id$=bankInformationAddress]").val(a),$j("[id$=bankInformationBic]").val(o),$j("[id$=bankInformationKpp]").val(n),$j("[id$=bankInformationRkcBic]").val(i)}function goBackToOrderInformation(){return $("#DiscountsModal_prev").prop("id","DiscountsModal"),backToOrderInformation(),!1}function isCodeWordValueValid(e,t){var s=!1,a=e.val(),o=a.length;return 4<o&&o<21&&t.test(a)?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods"),s=!0):(e.closest(".block__inputs").removeClass("goods"),e.closest(".block__inputs").addClass("error"),s=!1),s}function isLegalInputValueValid(e,t,s,a){var o=!1,n=e.val(),i=n.length;return""!=n.trim()&&t.test(n)?a?i===s||i===s-2?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods"),o=!0):(e.closest(".block__inputs").removeClass("goods"),e.closest(".block__inputs").addClass("error"),o=!1):i===s?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods"),o=!0):(e.closest(".block__inputs").removeClass("goods"),e.closest(".block__inputs").addClass("error"),o=!1):(e.closest(".block__inputs").removeClass("goods"),e.closest(".block__inputs").addClass("error"),o=!1),o}function isInputValidOnChange(e){e.closest(".block__inputs").removeClass("goods")}function isLegalInputValueValidOnInput(e,t,s,a){var o=!1,n=e.val(),i=n.length;return""!=n.trim()&&t.test(n)?a?i===s||i===s-2?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods"),o=!0):(e.closest(".block__inputs").removeClass("goods"),o=!1):i===s?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods"),o=!0):(e.closest(".block__inputs").removeClass("goods"),o=!1):(e.closest(".block__inputs").removeClass("goods"),o=!1),o}function validateLegalDetailsIfLegalEntity(){var e=$j(".step-legal-details"),t=e.find(".js-orgn"),s=e.find(".js-kpp"),a=e.find(".js-okpo"),o=e.find(".legal-address"),n=e.find(".document-address"),i=(e.find(".address-2"),e.find(".executivePersonFullName")),l=e.find(".executivePersonPosition"),r=e.find(".codeWord"),d=e.find(".account-email"),c=[];(c.push(isLegalInputValueValid(t,new RegExp(regs.numbers),13,!1)),c.push(isLegalInputValueValid(s,new RegExp(regs.numbers),9,!1)),c.push(isLegalInputValueValid(a,new RegExp(regs.numbers),10,!0)),c.push(isInputValueValid(i,new RegExp(regs.letters))),c.push(isInputValueValid(l,new RegExp(regs.position))),c.push(isCodeWordValueValid(r,new RegExp(regs.codeWord))),c.push(isInputValueValid(d,new RegExp(regs.email))),c.push(validateAddressInformation(o)),c.push(isInputValueValid(o,new RegExp(regs.address))),c.push(validateAddressInformation(n)),c.push(isInputValueValid(n,new RegExp(regs.address))),-1==c.indexOf(!1))?goToPaymentDetails():scrollToTopInput($j(".step-legal-and-payment-details .block__inputs.error"));return!1}function validateAddressInformation(e){var t=!0;return e.prop("disabled")||(e.hasClass("document-address")?(""==$j("[id$=postalAddressInformationCity]").val()&&(t=!1),""==$j("[id$=postalAddressInformationPostalCode]").val()&&(t=!1),""==$j("[id$=postalAddressInformationState]").val()&&(t=!1),""==$j("[id$=postalAddressInformationStreet]").val()&&(t=!1),""==$j("[id$=postalAddressInformationHouse]").val()&&(t=!1)):e.hasClass("legal-address")&&(""==$j("[id$=legalAddressInformationCity]").val()&&(t=!1),""==$j("[id$=legalAddressInformationPostalCode]").val()&&(t=!1),""==$j("[id$=legalAddressInformationState]").val()&&(t=!1),""==$j("[id$=legalAddressInformationStreet]").val()&&(t=!1),""==$j("[id$=legalAddressInformationHouse]").val()&&(t=!1)),t?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods")):(e.closest(".block__inputs").removeClass("goods"),e.closest(".block__inputs").addClass("error"))),t}function validateLegalDetailsIfSoleProprietor(){var e=$j(".step-legal-details"),t=e.find(".ogrnip"),s=e.find(".js-okpo"),a=e.find(".legal-address"),o=e.find(".document-address"),n=(e.find(".address-2"),e.find(".codeWord")),i=e.find(".account-email"),l=[];(l.push(isLegalInputValueValid(t,new RegExp(regs.numbers),15,!1)),l.push(isLegalInputValueValid(s,new RegExp(regs.numbers),10,!0)),l.push(isCodeWordValueValid(n,new RegExp(regs.codeWord))),l.push(isInputValueValid(i,new RegExp(regs.email))),l.push(validateAddressInformation(a)),l.push(isInputValueValid(a,new RegExp(regs.address))),l.push(validateAddressInformation(o)),l.push(isInputValueValid(o,new RegExp(regs.address))),-1==l.indexOf(!1))?goToPaymentDetails():scrollToTopInput($j(".step-legal-and-payment-details .block__inputs.error"));return!1}function validateLegalDetailsIfLegalEntityOnLoad(){var e=$j(".step-legal-details"),t=e.find(".js-orgn"),s=e.find(".js-kpp"),a=e.find(".js-okpo"),o=e.find(".legal-address"),n=e.find(".document-address"),i=(e.find(".address-2"),e.find(".executivePersonFullName")),l=e.find(".executivePersonPosition"),r=e.find(".codeWord"),d=e.find(".account-email");""!=t.val()&&isLegalInputValueValid(t,new RegExp(regs.numbers),13,!1),""!=s.val()&&isLegalInputValueValid(s,new RegExp(regs.numbers),9,!1),""!=a.val()&&isLegalInputValueValid(a,new RegExp(regs.numbers),10,!0),""!=o.val()&&isInputValueValid(o,new RegExp(regs.address)),""!=i.val()&&isInputValueValid(i,new RegExp(regs.letters)),""!=l.val()&&isInputValueValid(l,new RegExp(regs.position)),""!=r.val()&&isCodeWordValueValid(r,new RegExp(regs.codeWord)),""!=n.val()&&isInputValueValid(n,new RegExp(regs.address)),""!=d.val()&&isInputValueValid(d,new RegExp(regs.email))}function validateLegalDetailsIfSoleProprietorOnLoad(){var e=$j(".step-legal-details"),t=e.find(".ogrnip"),s=e.find(".js-okpo"),a=e.find(".legal-address"),o=e.find(".document-address"),n=(e.find(".address-2"),e.find(".codeWord")),i=e.find(".account-email");""!=t.val()&&isLegalInputValueValid(t,new RegExp(regs.numbers),15,!1),""!=s.val()&&isLegalInputValueValid(s,new RegExp(regs.numbers),10,!0),""!=a.val()&&isInputValueValid(a,new RegExp(regs.address)),""!=n.val()&&isCodeWordValueValid(n,new RegExp(regs.codeWord)),""!=o.val()&&isInputValueValid(o,new RegExp(regs.address)),""!=i.val()&&isInputValueValid(i,new RegExp(regs.email))}function goBacktoLegalDetails(){return backToLegalDetails(),!1}function setEvents_paymentDetails(){var e=$j(".step-payment-details");eraseInputValue("step-payment-details"),preventPressingEnterButton($j(".step-legal-and-payment-details .block__inputs").find("input"));var t=e.find(".js-bik");t.blur(function(e){isLegalInputValueValid(t,new RegExp(regs.numbers),9,!1)}),checkForAutoPasteNumericValues("js-bik"),t.on("input",function(){isLegalInputValueValidOnInput(t,new RegExp(regs.numbers),9,!1)});var s=e.find(".checkingAccount");s.blur(function(e){isLegalInputValueValid(s,new RegExp(regs.numbers),20,!1)}),checkForAutoPasteNumericValues("checkingAccount"),s.on("input",function(){isLegalInputValueValidOnInput(s,new RegExp(regs.numbers),20,!1)});var a=e.find(".corAccount");a.blur(function(e){isLegalInputValueValid(a,new RegExp(regs.numbers),20,!1)}),checkForAutoPasteNumericValues("corAccount"),a.on("input",function(){isLegalInputValueValidOnInput(a,new RegExp(regs.numbers),20,!1)});var o=e.find(".bankName");o.blur(function(e){isInputValueValid(o,new RegExp(regs.bankName)),o.closest(".input__obl").removeClass("border-list-input")}),checkForAutoPasteValues("bankName",new RegExp(regs.bankName)),o.on("input",function(){isInputValidOnChange(o)});var n=e.find(".prepayment");n.blur(function(e){isPrepaymentAmountValueValid(n,new RegExp(regs.numbers))}),checkForAutoPasteNumericValues("prepayment"),$j(".close").on("click",function(){var e=$j(this);e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").find("input").val(""),e.closest(".block__inputs").find("input").focus()});var i=$j(".bankName").parent();i.find(".bank-name-list")[0]||i.append('<div class="bank-name-list"></div>'),$j(".bankName").on("input",function(e){var t=$j(".bankName").val();$j(".bank-name-list").removeClass("good"),""!=t?sendRequestToDadata("bank",t,"searchBank"):formResultList(null,"searchBank"),saveBankInformation("","","","","","","")}),removeMultipleClick("bankName","bank-name-list"),$j("body").on("click",".bank-name-item",function(e){$j(".bank-name-list").slideUp(),$j(".bankName").val($j(this).find("strong").text()),$j(".bankName").closest(".block__inputs").addClass("goods"),$j(".bankName").closest(".block__inputs").removeClass("error"),$j(".bank-name-list").addClass("good"),$j(".bankName").closest(".input__obl").removeClass("border-list-input"),$j(".js-bik").val($j(this).data("bic")),$j(".js-bik").closest(".block__inputs").addClass("goods"),$j(".js-bik").closest(".block__inputs").removeClass("error"),$j(".corAccount").val($j(this).data("kc")),$j(".corAccount").closest(".block__inputs").addClass("goods"),$j(".corAccount").closest(".block__inputs").removeClass("error"),saveBankInformation($j(this).data("name-short"),$j(this).data("okpo"),$j(this).data("town"),$j(this).data("address"),$j(this).data("bic"),$j(this).data(""),$j(this).data("address"))}),$j(document).mouseup(function(e){var t=$j(".bank-name-list");0===t.has(e.target).length&&t.slideUp()}),$j(".bank-name-list").mCustomScrollbar({theme:"dark"}),modalOpen("myModal2"),modalClose("myModal2"),$(".modal-button-continue").on("click",function(){setTimeout(noScrollBackground,500)}),$(".preview-inside-button").attr("data-dismiss","modal"),tooltipMode(),tooltipInput_controller("bankName"),tooltipInput_controller("prepayment")}function isPrepaymentAmountValueValid(e,t){var s=!1,a=e.val();return 2e3<=a&&a<=9999999&&t.test(a)?(e.closest(".block__inputs").removeClass("error"),e.closest(".block__inputs").addClass("goods"),s=!0):(e.closest(".block__inputs").removeClass("goods"),e.closest(".block__inputs").addClass("error"),s=!1),s}function validatePaymentDetails(){var e=$j(".step-payment-details"),t=e.find(".bankName"),s=e.find(".js-bik"),a=e.find(".checkingAccount"),o=e.find(".corAccount"),n=e.find(".prepayment"),i=[];(i.push(isInputValueValid(t,new RegExp(regs.bankName))),i.push(isLegalInputValueValid(s,new RegExp(regs.numbers),9,!1)),i.push(isLegalInputValueValid(a,new RegExp(regs.numbers),20,!1)),i.push(isLegalInputValueValid(o,new RegExp(regs.numbers),20,!1)),i.push(isPrepaymentAmountValueValid(n,new RegExp(regs.numbers))),-1==i.indexOf(!1))?$("#myModal2").modal("show"):scrollToTopInput($j(".step-legal-and-payment-details .block__inputs.error"));return!1}function validatePaymentDetailsToShowAgreement(){var e=$j(".step-payment-details"),t=e.find(".bankName"),s=e.find(".js-bik"),a=e.find(".checkingAccount"),o=e.find(".corAccount"),n=e.find(".prepayment"),i=[];(i.push(isInputValueValid(t,new RegExp(regs.bankName))),i.push(isLegalInputValueValid(s,new RegExp(regs.numbers),9,!1)),i.push(isLegalInputValueValid(a,new RegExp(regs.numbers),20,!1)),i.push(isLegalInputValueValid(o,new RegExp(regs.numbers),20,!1)),i.push(isPrepaymentAmountValueValid(n,new RegExp(regs.numbers))),-1==i.indexOf(!1))?previewContract():scrollToTopInput($j(".step-legal-and-payment-details .block__inputs.error"))}function validatePaymentDetailsOnLoad(){var e=$j(".step-payment-details"),t=e.find(".bankName"),s=e.find(".js-bik"),a=e.find(".checkingAccount"),o=e.find(".corAccount"),n=e.find(".prepayment");""!=t.val()&&isInputValueValid(t,new RegExp(regs.bankName)),""!=s.val()&&isLegalInputValueValid(s,new RegExp(regs.numbers),9,!1),""!=a.val()&&isLegalInputValueValid(a,new RegExp(regs.numbers),20,!1),""!=o.val()&&isLegalInputValueValid(o,new RegExp(regs.numbers),20,!1),""!=n.val()&&isPrepaymentAmountValueValid(n,new RegExp(regs.numbers))}function setEvents_Congratulations(){$j(".step-legal-and-payment-details .stetps__blocks_container").slideUp()}function setEvents_Modals(){$j(".modal-body").mCustomScrollbar({theme:"dark"})}function setChatOptions(){setupChatInit(),autoChatTimeOut=6e4,$j(document).on("keydown click",function(){resetInActive()}),$j(document).mouseout(function(){tabActive=!1}).mouseover(function(){tabActive=!0}),resetInActive(),document.getElementById("liveAgentChatTextArea").onkeydown=function(e){if(13==e.keyCode)return updateOfflineChat(),!1},$j(document).bind("DOMSubtreeModified",function(){for(var e=document.getElementsByTagName("form"),t=0;t<e.length;t++)if("frameChat"==e[t].target&&-1!=e[t].action.toString().indexOf("language%3D%23")){e[t].action=e[t].action.replace("language%3D","language%3DRussia")}}),screen.width<1170?($j("#liveAgentChatLog").height(.5*screen.height-160),$j(".chat-box").height(.5*screen.height-25)):($j(".liveAgentSendButton").hide(),$j("#liveAgentChatTextArea").focus(function(e){$j(".liveAgentSendButton").is(":visible")||($j("#liveAgentChatLog").height($j("#liveAgentChatLog").height()-20),$j("#liveAgentChatTextArea").height($j("#liveAgentChatTextArea").height()+15),$j(".liveAgentSendButton").show())}),$j("#liveAgentChatTextArea").focusout(function(e){$j(e.relatedTarget).hasClass("liveAgentSendButton")?$j(".liveAgentSendButton").show():($j("#liveAgentChatLog").height($j("#liveAgentChatLog").height()+20),$j("#liveAgentChatTextArea").height($j("#liveAgentChatTextArea").height()-15),$j(".liveAgentSendButton").hide())})),$j(".liveAgentSendButton").mousedown(function(){return!1})}function setupChatInitialization(e,t,s,a,o,n,i,l,r,d,c){"ContactDetails"==d&&(document.getElementById("chat-button-online").style.visibility="hidden",document.getElementById("chat-button-offline").style.visibility="hidden"),liveagent.disconnect(),""!=n&&(liveagent.addCustomDetail("OpportunityID",n,!1).saveToTranscript("Opportunity__c"),liveagent.findOrCreate("Opportunity").map("ID","OpportunityID",!0,!0,!0).saveToTranscript("OpportunityId").showOnCreate(),liveagent.addCustomDetail("AccountID",i,!1).saveToTranscript("AccountID"),liveagent.findOrCreate("Account").map("ID","AccountID",!0,!0,!0).saveToTranscript("AccountId").showOnCreate()),""!=o&&(liveagent.addCustomDetail("ContactID",o,!1).saveToTranscript("ContactID"),liveagent.findOrCreate("Contact").map("ID","ContactID",!0,!0,!0).saveToTranscript("ContactId").showOnCreate()),liveagent.setName(l),liveagent.addCustomDetail("Step",d,!1).saveToTranscript("E2E_Step__c"),liveagent.addCustomDetail("Mode of initialization",c,!1).saveToTranscript("Mode_of_initialization__c"),liveagent.addCustomDetail("Type of chat","online",!1).saveToTranscript("Type__c"),liveagent.addCustomDetail("Chat country","Russia",!1).saveToTranscript("Country__c"),liveagent.init(e,t,s),""!=a&&(window._laq||(window._laq=[]),window._laq.push(function(){liveagent.showWhenOnline(a,document.getElementById("chat-button-online")),liveagent.showWhenOffline(a,document.getElementById("chat-button-offline"))}))}function startOnlineChat(e,t,s,a,o,n,i,l,r,d,c,u){"automatical"==u?autoChatLastStep!=c&&(autoChatLastStep=c,delete liveagent,delete liveAgentDeployment,jQuery.loadScript(s,function(){executeOnlineChat(e,t,a,o,n,i,l,r,d,c,u)})):(delete liveagent,delete liveAgentDeployment,jQuery.loadScript(s,function(){executeOnlineChat(e,t,a,o,n,i,l,r,d,c,u)}))}function executeOnlineChat(e,t,s,a,o,n,i,l,r,d,c){var u;(null!=(u=document.getElementById("frameChat"))&&u.remove(),"none"!=document.getElementById("chat-button-online").style.display)&&(document.getElementById("chat-button-offline").style.visibility="hidden",document.getElementById("chat-button-online").style.visibility="hidden",setupChatInitialization(e,t,s,"",o,n,i,l,r,d,c),(u=document.createElement("iframe")).id="frameChat",u.name="frameChat",u.classList.add("frameChat"),document.getElementById("chatOnlineBlock").appendChild(u),setTimeout(function(){try{liveagent.startChatWithWindow(a,"frameChat"),document.getElementById("chatOnlineBlock").classList.add("popup-on"),executeSetOpportunityFlagChat(c)}catch(e){document.getElementById("chat-button-offline").style.visibility="visible",document.getElementById("chat-button-online").style.visibility="visible",document.getElementById("chatOnlineBlock").classList.remove("popup-on"),document.getElementById("frameChat").remove();for(var t=document.getElementsByTagName("form"),s=0;s<t.length;s++)"frameChat"==t[s].target&&t[s].remove()}},1e3))}function resetInActive(){clearTimeout(chatActivityTimeout),chatActivityTimeout=setTimeout(inActive,autoChatTimeOut)}function inActive(){if(tabActive){var e=document.getElementById("chat-button-online");if("none"!=e.style.display&&"hidden"!=e.style.visibility)null!=document.getElementById("frameChat")||$j("#chatOfflineBlock").hasClass("popup-on")||setupOnlineAutoChat()}resetInActive()}function setupOfflineChat(){document.getElementById("chat-button-offline").style.visibility="hidden",document.getElementById("chat-button-online").style.visibility="hidden";var e=document.getElementById("liveAgentChatLog");document.getElementById("chatOfflineBlock").classList.add("popup-on"),e.scrollTop=e.scrollHeight,chatOfflineOLDText="",chatOfflineUpdateTimeout=setTimeout(updateDatabaseOfflineChat,5e3)}function updateOfflineChat(){var e=document.getElementById("liveAgentChatTextArea");if(""!=e.value){var t=document.getElementById("liveAgentChatLogText"),s=new Date,a=s.getHours(),o=s.getMinutes(),n=a+":"+(o=o<10?"0"+o:o);t.innerHTML=t.innerHTML+'<span class="chat-client"> <span class="chat-name"> <strong>You </strong><span class="chat-customDateTime" style="display: inline"> '+n+' </span> </span> <span class="chat-messageText">'+e.value+"</span> <span>",e.value=""}(t=document.getElementById("liveAgentChatLog")).scrollTop=t.scrollHeight}function updateDatabaseOfflineChat(){var e=$j(".liveAgentChatLogText").html().split('<span class="chat-operator">').join('<br><span class="chat-operator">').split('<span class="chat-client">').join('<br><span class="chat-client">');e!=chatOfflineOLDText&&(chatOfflineOLDText=e,executeSaveOfflineChat(e),executeSetOpportunityFlagChat("manual")),clearTimeout(chatOfflineUpdateTimeout),chatOfflineUpdateTimeout=setTimeout(updateDatabaseOfflineChat,5e3)}function closeChat(e){if("online"==e){document.getElementById("chatOnlineBlock").classList.remove("popup-on"),document.getElementById("frameChat").contentWindow.postMessage("closeChatFLEETCOR","*");for(var t=document.getElementsByTagName("form"),s=0;s<t.length;s++)"frameChat"==t[s].target&&t[s].remove()}else"offline"==e&&document.getElementById("chatOfflineBlock").classList.remove("popup-on");document.getElementById("chat-button-offline").style.visibility="visible",document.getElementById("chat-button-online").style.visibility="visible",resetInActive()}function redirectToURL(e){window.location.replace(e)}function preventPressingEnterButton(e){$j(e).keypress(function(e){if(13==e.keyCode)return!1})}$j(document).ready(function(){$("html").attr("lang","ru");var e=getQueryParams(document.location.search);console.log(e.link),null==e.link?setActiveStep("ContactDetails"):setStartStep(),setEvents_ContactDetails(),setEvents_companyDetails(),switchDaDaOn(),setEvents_order(),setEvents_summaryOrder(),setEvents_legalDetails(),setEvents_paymentDetails(),setChatOptions(),1==/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?setDeviceType("Mobile"):setDeviceType("Desktop")}),jQuery.loadScript=function(e,t){jQuery.ajax({url:e,dataType:"script",success:t,async:!0})};