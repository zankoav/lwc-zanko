<apex:page language="en-US" controller="LongFormDesktopCHcontroller" id="longForm" action="{! init }" sidebar="false" showHeader="false" standardStylesheets="false" docType="html-5.0" cache="true">
    <apex:form id="form" styleClass="form-horizontal">
        <head>
            <!-- PRODUCTION GTM -->
            <apex:outputPanel rendered="{! CONTAINS($CurrentPage.URL,'online.fleetcor.de')  }">
                <!-- Google Tag Manager -->
                <script>
                    (function(w,d,s,l,i){
                        w[l]=w[l] || []; w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
                        var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
                        j.async=true;
                        j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
                        f.parentNode.insertBefore(j,f);
                    })
                    (window,document,'script','dataLayer','GTM-TTBL98H');
                </script>
                <!-- End Google Tag Manager -->
            </apex:outputPanel>

            <!-- SANDBOX GTM -->
            <apex:outputPanel rendered="{! NOT(CONTAINS($CurrentPage.URL,'online.fleetcor.de')) }">
                <!-- Google Tag Manager after head -->
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-5V5GWZ9');</script>
                <!-- End Google Tag Manager -->
            </apex:outputPanel>

            <link rel="shortcut icon" href="{!$Resource.FleetcorFavicon}" type="image/x-icon; charset=binary"/>
            <apex:includeScript value="{!$Resource.jQuery}"/>
            <apex:includeScript value="{! URLFOR($Resource.E2E_Analytics_CH) }"/>
            <apex:includeScript value="{! URLFOR($Resource.jQueryUISlider,'jquery-ui-1.12.1.custom/jquery-ui.min.js') }"/>
            <apex:includeScript value="{!$Resource.jqueryInputMask}"/>
            <apex:includeScript value="{!$Resource.e2e_scripts_desktop_ch}"/>
            <apex:includeScript value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/js/bootstrap.min.js')}"/>
            <apex:includeScript value="{!URLFOR($Resource.e2eLiveAgentDeployment)}"/>
            <script>
                //Function is used to get splash status bar when server side call is going on
                function startSplash() {
                    document.getElementById('splashDiv').style.display='table-cell';
                    jQuery('.lightbox').fadeIn(50);
                }

                //Function will make the splash status to be stopped.
                function endSplash() {
                    document.getElementById('splashDiv').style.display='none';
                    jQuery('.lightbox').fadeOut(50);
                }

                function getCookie(name) {
                    var value = "; " + document.cookie;
                    var parts = value.split("; " + name + "=");
                    if (parts.length == 2) return parts.pop().split(";").shift();
                }
            </script>
            <apex:stylesheet value="{! URLFOR($Resource.jQueryUI,'jquery-ui-1.12.1/jquery-ui.css') }"/>
            <apex:stylesheet value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/css/desktop_bootstrap.min.css')}"/>
            <apex:stylesheet value="{!$Resource.e2e_style_ch_desktop}"/>
            <apex:stylesheet value="{!URLFOR($Resource.E2ESpinner, 'spinner.css')}"/>
            <apex:stylesheet value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/css/non-responsive.css')}"/>
            <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet"/>
            <title>Kunde werden und Tankkarten beantragen</title>
            <style>
                .i-error {
                    display: inline-block;
                    margin-right: 5px;
                    vertical-align: top;
                    font-family: 'Montserrat';
                    font-weight: 500;
                    width: 16px;
                    height: 16px;
                    font-weight: bold;
                    line-height: 15px;
                    text-align: center;
                    border-radius: 100%;
                    cursor: default;
                    font-size: 10px;
                    border: 1px solid #EE3A43;
                    color: #EE3A43;
                    opacity: 0.8;
                    text-decoration: none;
                }

                .loadingField {

                    ground-color: #ffffff;
                    background-image: url({!URLFOR($Resource.E2ESpinner, 'field-spinner.gif')}) !important;
                    background-size: 15px 15px;
                    background-position: 90% center;
                    background-repeat: no-repeat;
                }

                .vfRange {
                    width: 270px !important;
                    display: block;
                    float: left;
                }

                .wrapperSlider {
                    margin: 20px 0;
                }

                .cards-order .cards-count .counter .up {
                    cursor: pointer;
                    width: 10px;
                    height: 15px;
                    background: url({!URLFOR($Resource.e2e_images, 'up.png')}) no-repeat;
                }

                .cards-order .cards-count .counter .down {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    background: url({!URLFOR($Resource.e2e_images, 'down.png')}) no-repeat;
                }

                .cards-order .cards-count .counter .up:hover {
                    cursor: pointer;
                    width: 10px;
                    height: 15px;
                    background: url({!URLFOR($Resource.e2e_images, 'up-light.png')}) no-repeat;
                }

                .cards-order .cards-count .counter .down:hover {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    background: url({!URLFOR($Resource.e2e_images, 'down-light.png')}) no-repeat;
                }

                .expend-detail {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    margin: 0 0 -3px 5px;
                    background: url({!URLFOR($Resource.e2e_images, 'expend-arrow.png')}) no-repeat;
                }

                .collapse-detail {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    margin: 0 0 -3px 5px;
                    background: url({!URLFOR($Resource.e2e_images, 'collapse-arrow.png')}) no-repeat;
                }

                .cards-list .card-item .delete a{
                    height: 40px;
                    width: 40px;
                    cursor: pointer;
                    display: inline-block;
                    background: url({!URLFOR($Resource.e2e_images, 'basket.png')}) no-repeat;
                }

                .checkbox label::after {
                    display: inline-block;
                    position: absolute;
                    width: 16px;
                    height: 16px;
                    left: 0;
                    top: 3px;
                    margin-left: -20px;
                    color: #555555;
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                }

                .checkbox input[type="checkbox"]:checked + label::after {
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check.png')});
                }

                .radio input[type="radio"]:checked + label::after {
                    content: "";
                    padding-left: 5px;
                    font-size: 11px;
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                }

                .category-link {
                    font-family: 'Montserrat';
                    font-style: normal;
                    font-weight: 500;
                    line-height: 18px;
                    font-size: 15px;
                    width: 105%;
                    margin: 0 0 15px 0px;
                    word-break: break-word;
                    display: inline-block;
                    position: relative;
                    padding-left: 5px;
                    color: #333 !important;
                }

                .category-link:before {
                    content: "";
                    display: inline-block;
                    position: absolute;
                    width: 18px;
                    height: 18px;
                    left: 0;
                    margin-left: -20px;
                    border-radius: 50%;
                    -webkit-transition: border 0.15s ease-in-out;
                    -o-transition: border 0.15s ease-in-out;
                    transition: border 0.15s ease-in-out;
                    background: rgba(0, 0, 0, 0.0001);
                    border: 2px solid rgba(0, 0, 0, 0.26);
                    box-sizing: border-box;
                }

                .category-link:after {
                    display: inline-block;
                    position: absolute;
                    content: "";
                    width: 18px;
                    height: 18px;
                    left: 3px;
                    top: 0;
                    margin-left: -23px;
                    border-radius: 100%;
                    background-color: #555555;
                    -webkit-transform: scale(0, 0);
                    -ms-transform: scale(0, 0);
                    -o-transform: scale(0, 0);
                    transform: scale(0, 0);
                    -webkit-transition: -webkit-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    -moz-transition: -moz-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    -o-transition: -o-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    transition: transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                }

                .category-link.active:before {
                    border-color: #d9534f;
                    content: "";
                    display: inline-block;
                    position: absolute;
                    width: 18px;
                    height: 18px;
                    left: 0;
                    margin-left: -20px;
                    border-radius: 50%;
                    -webkit-transition: border 0.15s ease-in-out;
                    -o-transition: border 0.15s ease-in-out;
                    transition: border 0.15s ease-in-out;
                    background: rgba(0, 0, 0, 0.0001);
                    border: 2px solid rgba(0, 0, 0, 0.26);
                    box-sizing: border-box;
                }

                .category-link.active:after {
                    /*content: "\2714";*/
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                    /*padding-left: 5px;
                    font-size: 11px;*/
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                    /*background-color: #EE3A43;
                    color: #fff;*/
                }

                .cards-tech-parameters .card-badge {
                    width: 230px;
                    height: 145px;
                    display: inline-block;
                    margin: 35px 30px 5px 45px;
                    background: url({!URLFOR($Resource.e2e_images, 'shell-card.png')}) no-repeat;
                }

                .modal-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    margin: 7px 5px 5px 0;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }

                .chat-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    margin: 7px 5px 5px 0;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }

                .additional-card {
                    margin-top: 0 !important;
                }

                .driver-name .btn,
                .car-number .btn,
                .selectTypeOfCar .btn {
                    float: left;
                }

                @media screen {
                /* Hide the special layer from the screen. */
                    #paymentInformation { display: none; }
                }

                .news-agreeement {
                    font-size: 13px !important;
                    font-family: 'Montserrat' !important;
                    font-weight: 400 !important;
                }
            </style>
        </head>
        <body class="modal-open" style="overflow: auto">
        <!-- PRODUCTION GTM -->
        <apex:outputPanel rendered="{! CONTAINS($CurrentPage.URL,'online.fleetcor.de')  }">
            <!-- Google Tag Manager (noscript) -->
            <noscript>
                <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TTBL98H" height="0" width="0"></iframe>
            </noscript>
            <!-- End Google Tag Manager (noscript)-->
        </apex:outputPanel>

        <!-- SANDBOX GTM -->
        <apex:outputPanel rendered="{! NOT(CONTAINS($CurrentPage.URL,'online.fleetcor.de')) }">
            <!-- Google Tag Manager (noscript) after body -->
            <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5GWZ9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
            <!-- End Google Tag Manager (noscript)-->
        </apex:outputPanel>

        <main>
            <apex:actionStatus id="splashStatus" onstart="turnOffBackButtonClick();startSplash();" onstop="turnOnBackButtonClick();endSplash();"/>
            <div class="splashStatus" id="splashDiv">
                <div class="circle"><img src="{!URLFOR($Resource.e2e_images, 'preloader-loop.gif')}"/></div>
            </div>
            <div class="container" id="top-heading-viewport">
                <div class="row">
                    <div class="b-page-logo">
                        <a href="https://fleetcor.de/" target="_blank">
                            <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                        </a>
                    </div>
                </div>
                <apex:outputPanel id="pageHeader" layout="block" styleClass="row">
                    <apex:outputPanel layout="block" styleClass="b-page-header" rendered="{! activeSubStep != 'Congratulations' }" style="margin-bottom: 30px;">
                        {! stepPagesMap['HEADER'].elements['TOP HEADING']['VALUE'].Value__c }
                    </apex:outputPanel>
                    <!-- <apex:outputPanel layout="block" styleClass="b-page-subheader" style="width: 630px;">
                        {! IF (activestep = 0, stepPagesMap['HEADER'].elements['SUBHEADING']['VALUE'].Value__c,'') }
                    </apex:outputPanel> -->
                </apex:outputPanel>
                <apex:outputPanel id="onlineChatBlock">
                    <script>
                        function setupOnlineChat(){
                           startOnlineChat('{!chatURL}','{!chatDeploymentId}','{!chatDeploymentJsURL}','{!$Organization.Id}'.slice(0,-3),'{!chatButtonId}',
                                                       '{!contact.Id}'.slice(0,-3),'{!opportunity.Id}'.slice(0,-3),'{!opportunity.AccountId}'.slice(0,-3),
                                                       '{!chatFirstMessage}','{!activeStep}','{!activeSubStep}','manual');
                           return false;
                        }

                        function setupOnlineAutoChat(){
                           startOnlineChat('{!chatURL}','{!chatDeploymentId}','{!chatDeploymentJsURL}','{!$Organization.Id}'.slice(0,-3),'{!chatButtonId}',
                                                       '{!contact.Id}'.slice(0,-3),'{!opportunity.Id}'.slice(0,-3),'{!opportunity.AccountId}'.slice(0,-3),
                                                       '{!chatFirstMessage}','{!activeStep}','{!activeSubStep}','automatical');
                           return false;
                        }

                        function executeSetOpportunityFlagChat(modeOfChat){
                            setOpportunityFlagChat('{!opportunity.Id}', '{!activeStep}', '{!activeSubStep}', modeOfChat);
                        }

                        function executeSaveOfflineChat(offlineChatBody){
                            saveOfflineChat('{!opportunity.Id}','{!contact.Id}', '{!activeStep}', '{!activeSubStep}', offlineChatBody);
                        }

                        </script>
                </apex:outputPanel>
                    <script>
                        function setOpportunityFlagChat(oppId, activeStep, activeSubStep, modeOfChat){
                            Visualforce.remoting.Manager.invokeAction(
                                '{!$RemoteAction.LongFormDesktopCHcontroller.setFlagChatToOpportunity}',
                                oppId, activeStep, activeSubStep, modeOfChat,
                                function(result, event){
                                     if (event.status) {

                                    } else if (event.type === 'exception') {
                                        console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                    } else {
                                        console.debug(document.getElementById("responseErrors").innerHTML = event.message);
                                    }
                                }
                            );
                        }

                        function saveOfflineChat(oppId, conId, activeStep, activeSubStep, offlineChatBody){
                            var country = getCountryParameter();
                            Visualforce.remoting.Manager.invokeAction(
                                '{!$RemoteAction.LongFormDesktopCHcontroller.saveOfflineChatLog}',
                                 oppId, conId, country, activeStep, activeSubStep, offlineChatBody,
                                 function(result, event){
                                     if (event.status) {

                                    } else if (event.type === 'exception') {
                                        console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                    } else {
                                        console.debug(event.message);
                                    }
                                }
                            );
                        }
                    </script>
                <apex:actionFunction id="setupChatInit" name="setupChatInit"
                                     onComplete="setupChatInitialization('{!chatURL}','{!chatDeploymentId}','{!$Organization.Id}'.slice(0,-3),
                                         '{!chatButtonId}','','','','','{!activeStep}','{!activeSubStep}','');" reRender="setupChatInit" />
                <!-- PAGE WIZARD -->
                <div class="row">
                    <apex:outputPanel id="stepList">
                        <apex:outputPanel layout="block" styleClass="b-wizard col-lg-12"
                            rendered="{! AND(
                                activeStep != 0,
                                activeStep != null,
                                activeSubStep != 'Congratulations',
                                activeSubStep != 'Private entity',
                                activeSubStep != 'Too many reports',
                                activeSubStep != 'System error',
                                activeSubStep != 'Too high limit',
                                activeSubStep != 'Report does not exist',
                                activeSubStep != 'Company not found',
                                activeSubStep != 'Authorization not granted',
                                activeSubStep != 'Already in process',
                                activeSubStep != 'Already a customer',
                                activeSubStep != 'Black list') }">
                            <apex:outputPanel rendered="{! opportunity.Security_Amount_To_Pay__c != null }">
                                <div class="row">
                                    <div class="b-steps-list">
                                        <ul id="steps">
                                            <li id="step1" class="b-step font-15" style="width: 15.1%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep == 1, 'step current','step')}">{! menuItemsMap[1].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step2" class="b-step font-15" style="width: 20.6%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep == 2, 'step current','step')}">{! menuItemsMap[2].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step3" class="b-step font-15" style="width: 18.4%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep == 3, 'step current','step')}">{! menuItemsMap[3].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step4" class="b-step font-15" style="width: 20%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep == 4, 'step current','step')}">{! menuItemsMap[4].Step_Name__c }</apex:outputPanel>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-points-list">
                                        <ul class="points">
                                            <li style="width: 15.1%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 1, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 0, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="width: 20.6%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 2, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 1, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="width: 18.4%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 3, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 2, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="width: 20%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 3, 'step-point current','step-point')}"></apex:outputPanel>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{! opportunity.Security_Amount_To_Pay__c = null }">
                                <div class="row">
                                    <div class="b-steps-list">
                                        <ul id="steps">
                                            <li id="step1" class="b-step font-15" style="width: 24.1%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep == 1, 'step current','step')}">{! menuItemsMap[1].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step2" class="b-step font-15" style="width: 23.6%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep == 2, 'step current','step')}">{! menuItemsMap[2].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step3" class="b-step font-15" style="width: 19.4%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep == 3, 'step current','step')}">{! menuItemsMap[3].Step_Name__c }</apex:outputPanel>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-points-list">
                                        <ul class="points">
                                            <li style="width: 24.1%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 1, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 0, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="width: 23.6%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 2, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 1, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="/*width: 18.4%*/">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 3, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 2, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </apex:outputPanel>
                </div>

                <div class="b-block-form">
                    <div class="row">
                        <!-- LEFT BLOCK -->
                        <div class="col-lg-8">
                            <apex:outputPanel layout="block" styleClass="step-content" id="formBlock">
                                <!-- STEP CONTACT DETAILS -->
                                <apex:outputPanel layout="block" id="contactDetails" styleClass="contact-details" rendered="{! activeStep == 0 && activeSubstep = 'Contact details' }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['TOP HEADING VALUE'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="b-desc" style="margin-top: 20px;">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['TOP SUBHEADING VALUE'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="salutation block">
                                                <div class="col-lg-8 col-lg-offset-4">
                                                    <div class="btn-group">
                                                        <apex:outputPanel id="salutationBlock">
                                                            <apex:commandButton id="mr-btn"
                                                            value="{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON LABEL'].Value__c }"
                                                            styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                            onclick="$j('[id$=sltn-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c }');
                                                                    $j('[id$=mr-btn]').addClass('selected');
                                                                    $j('[id$=mrs-btn]').removeClass('selected');
                                                                    analytics_onClickButtonSendUI('click','button: sex_male','UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                            reRender="sltn-dflt">
                                                            </apex:commandButton>
                                                            <apex:commandButton id="mrs-btn"
                                                            value="{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON LABEL'].Value__c }"
                                                            styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                            onclick="$j('[id$=sltn-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c }');
                                                                    $j('[id$=mrs-btn]').addClass('selected');
                                                                    $j('[id$=mr-btn]').removeClass('selected');
                                                                    analytics_onClickButtonSendUI('click','button: sex_female','UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                            reRender="sltn-dflt">
                                                            </apex:commandButton>
                                                            <apex:inputhidden value="{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c }" id="sltn-dflt"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="first-name block">
                                                <div class="col-lg-3">
                                                    <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/><span class="f-required">
                                                        {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                </span>
                                                </div>
                                                <div class="col-lg-8 col-lg-offset-1">
                                                    <apex:inputText id="firstName" value="{! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-hide-content" maxLength="40" style="width: 80%"
                                                     onblur="analytics_onBlurInputSendUI($j(this), 'name', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                     onkeyup="sendErrorFirstName();"/>
                                                    <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-first-name" style="width: 80%">
                                                        <script>
                                                            function sendErrorFirstName() {
                                                                if ($j('.invalid-feedback-first-name').is(':visible')) {
                                                                    analytics_onErrorSendUI('nameNotFilled','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="last-name block">
                                                <div class="col-lg-3" style="{! IF(countryParam == 'chfr', 'width: 158px;', '') }">
                                                    <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                    <span class="f-required">
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                    </span>
                                                </div>
                                                <div class="col-lg-8 col-lg-offset-1" style="{! IF(countryParam == 'chfr', 'width: 401px; margin-left: 43px;', '') }">
                                                    <apex:inputText id="lastName" value="{! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-hide-content" maxLength="80" style="width: 80%"
                                                    onblur="analytics_onBlurInputSendUI($j(this), 'lastName', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                    onkeyup="sendErrorLastName();"/>
                                                    <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-last-name">
                                                        <script>
                                                            function sendErrorLastName() {
                                                                if ($j('.invalid-feedback-last-name').is(':visible')) {
                                                                    analytics_onErrorSendUI('lastNameNotFilled','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="phone block">
                                                <div class="col-lg-3" style="{! IF(countryParam == 'chfr', 'width: 181px;', '') }">
                                                    <div style="width: 110%;">
                                                        <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        <span class="f-required">
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8 col-lg-offset-1" style="{! IF(countryParam == 'chfr', 'width: 401px; margin-left: 20px;', '') }">
                                                    <apex:inputText id="phone" value="{! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-hide-content" maxLength="13" style="width: 60%"
                                                    onblur="analytics_onBlurInputSendUI($j(this), 'tel', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                    onkeyup="sendErrorTel();"/>
                                                    <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-tel">
                                                        <script>
                                                            function sendErrorTel() {
                                                                if ($j('.invalid-feedback-tel').is(':visible')) {
                                                                    analytics_onErrorSendUI('telNotFormat','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="email block">
                                                <div class="col-lg-3">
                                                    <div style="width: 110%;">
                                                        <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        <span class="f-required">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8 col-lg-offset-1">
                                                    <apex:inputText id="email" value="{! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-hide-content" maxLength="80" style="width: 60%"
                                                    onblur="analytics_onBlurInputSendUI($j(this), 'email', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                    onkeyup="sendErrorEmail();"/>
                                                    <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-email">
                                                        <script>
                                                            function sendErrorEmail() {
                                                                if ($j('.invalid-feedback-email').is(':visible')) {
                                                                    analytics_onErrorSendUI('emailNotFormat','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <apex:outputPanel styleClass="row form-group" rendered="{! NOT(AND(opportunity != null, opportunity.Anzahl_der_Karten__c != null)) }" layout="block">
                                            <div class="cards-order block">
                                                <div class="col-lg-3">
                                                    <div style="width: 150%;">
                                                        <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        <span class="f-required">
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8 col-lg-offset-1 cards-count">
                                                    <apex:outputPanel layout="block" styleClass="number-wrapper" id="counterDetails" style="width: 70px;">
                                                        <apex:input id="cardsCounterContactDetails"
                                                            type="text"
                                                            value="{! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                            required="false"
                                                            styleClass="inline-block form-control required input ym-hide-content cardsCounterContactDetails"
                                                            style="padding: 5px 25px 5px 10px;"
                                                            html-min="1"
                                                            html-max="50"
                                                            onkeyup="validateNumberOfCards(this);"
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'countCards', 'UI_01_Tankkarte_Step_1_Form_Contacts');"/>
                                                        <apex:outputPanel styleClass="counter" style="right: 325px !important;">
                                                            <div class="count-up"><apex:outputPanel layout="block" styleClass="up" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_01_Tankkarte_Step_1_Form_Contacts'); increaseCards();"/></div>
                                                            <div class="count-down"><apex:outputPanel layout="block" styleClass="down" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_01_Tankkarte_Step_1_Form_Contacts'); reductionCards();"/></div>
                                                        </apex:outputPanel>
                                                        <script>
                                                            function validateNumberOfCards(numberOfCards) {
                                                                numberOfCards.value = numberOfCards.value.replace(/[^0-9\.]/g,'');
                                                                if(numberOfCards.value.split('.').length > 2) numberOfCards.value = numberOfCards.value.replace(/\.+$/,"");
                                                            }
                                                        </script>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <div class="row form-group">
                                            <div class="company block">
                                                <div class="col-lg-4">
                                                    <div style="width: 110%;">
                                                        <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        <span class="f-required">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8">
                                                    <div class="btn-group" style="width: 100%;">
                                                        <apex:outputPanel styleClass="companyForm">
                                                            <apex:commandButton id="company-btn"
                                                                value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON LABEL'].Value__c }"
                                                                styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c }');
                                                                        $j('[id$=company-btn]').addClass('selected');
                                                                        $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                        $j('[id$=private-btn]').removeClass('selected');
                                                                        analytics_onClickButtonSendUI('click','button: form-of-business: Company', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                reRender="company-form-dflt"
                                                                style="width: 33.33%; border-right: 0; {! IF(countryParam == 'chfr', 'font-size: 12px;', '') }">
                                                            </apex:commandButton>
                                                            <apex:commandButton id="solo-trader-btn"
                                                                value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON LABEL'].Value__c }"
                                                                styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c }');
                                                                        $j('[id$=company-btn]').removeClass('selected');
                                                                        $j('[id$=solo-trader-btn]').addClass('selected');
                                                                        $j('[id$=private-btn]').removeClass('selected');
                                                                        analytics_onClickButtonSendUI('click','button: form-of-business: Solo-trader', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                reRender="company-form-dflt"
                                                                style="width: 33.34%; {! IF(countryParam == 'chfr', 'font-size: 12px;', '') }">
                                                            </apex:commandButton>
                                                            <apex:commandButton id="private-btn"
                                                                value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON LABEL'].Value__c }"
                                                                styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c }');
                                                                        $j('[id$=company-btn]').removeClass('selected');
                                                                        $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                        $j('[id$=private-btn]').addClass('selected');
                                                                        analytics_onClickButtonSendUI('click','button: form-of-business: Private entity', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                reRender="company-form-dflt"
                                                                style="width: 33.33%; border-left: 0; {! IF(countryParam == 'chfr', 'font-size: 12px;', '') }">
                                                            </apex:commandButton>
                                                            <apex:inputHidden id="company-form-dflt" value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c }"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="b-splitter"></div>
                                        <div class="row">
                                            <div class="col-lg-9">
                                                <div class="form-check" style="margin-top: -8px; width: 97%;">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }" styleClass="form-check-input" id="checkbox1"
                                                        onclick="analytics_onClickCheckboxSendUI($j(this), 'newsSubscribe', 'UI_01_Tankkarte_Step_1_Form_Contacts');"/>
                                                        <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['LABEL'].Value__c }" styleClass="form-check-label news-agreeement" for="checkbox1" escape="false"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-2">
                                                <apex:actionFunction name="goToCreditScoring" action="{! goToCreditScoring }" oncomplete="recheckCompanyDetails(); setEvents_companyDetails(); onPageRender();" reRender="stepList, formBlock, info-block, details-info, modalError, onlineChatBlock, pageHeader" status="splashStatus"/>
                                                <apex:commandLink value="{! stepPagesMap['CONTACT DETAILS'].elements['GO TO STEP 2 BUTTON']['BUTTON NAME'].Value__c }"
                                                                  onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_01_Tankkarte_Step_1_Form_Contacts'); return validateContactDetails(true);"
                                                                  reRender="stepList, formBlock, pageHeader"
                                                                  styleClass="btn btn-red pull-right" style="margin: 0px -25px 0 0;"/>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        analytics_ContactDetailsOnLoad();
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP CREDIT SCORE -->
                                <apex:outputPanel layout="block" id="creditScoring" styleClass="credit-scoring" rendered="{! AND(activeStep == 1, activeSubStep = 'Search company') }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['TOP HEADING VALUE'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="b-desc">
                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['TOP SUBHEADING VALUE'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="country block" style="margin-top: 32px">
                                                <div class="col-lg-3">
                                                    <div style="width: 170px">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-lg-offset-1">
                                                    <apex:outputPanel layout="block" style="margin-top: 10px">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['DEFAULT VALUE'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="country-msg font-12">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="company block">
                                                <div class="col-lg-3">
                                                    <div style="width: 170px">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        <span class="f-required">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8 col-lg-offset-1">
                                                    <apex:inputText id="company"
                                                        value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                        required="false" styleClass="inline-block form-control required input companyField ym-hide-content"
                                                        onfocus="setSearchResultBlockStatus();"
                                                        onblur="analytics_onBlurInputSendUI($j(this), 'companyName', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                        onkeyup="sendErrorCompanyName();"
                                                        onchange="onPageRender();" maxLength="255" style="width: 83%"/>
                                                    <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-companyname">
                                                        <script>
                                                            function sendErrorCompanyName() {
                                                                if ($j('.invalid-feedback-companyname').is(':visible')) {
                                                                    analytics_onErrorSendUI('nameCompanyNotFormat','UI_02_Tankkarte_Step_2_Form_Company');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row form-group">
                                            <div class="city-id block">
                                                <div class="col-lg-3">
                                                    <div style="width: 170px">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['CITY'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        <span class="f-required">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['CITY'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-5 col-lg-offset-1">
                                                    <apex:inputText id="city"
                                                        value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['CITY'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                        required="false" styleClass="inline-block form-control required input city-field ym-hide-content"
                                                        onblur="analytics_onBlurInputSendUI($j(this), 'city', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                        onfocus="setSearchResultBlockStatus();"
                                                        onchange="onPageRender();"
                                                        onkeyup="sendErrorCity();"
                                                        style="width: 70%;" maxLength="50"/>
                                                    <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-city" style="width: 135%;">
                                                        <script>
                                                            function sendErrorCity() {
                                                                if ($j('.invalid-feedback-city').is(':visible')) {
                                                                    analytics_onErrorSendUI('cityNotFormat','UI_02_Tankkarte_Step_2_Form_Company');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['CITY'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <apex:actionFunction name="setSearchResultBlockStatus" oncomplete="recheckCompanyDetails();" reRender="searchBtnsBlock, search-companies-block, goToPumpingButton, onlineChatBlock">
                                            <apex:param name="btnStatus" value="false" assignTo="{! continueButtonIsDisabled }"/>
                                            <apex:param name="searchResult" value="null" assignTo="{! activeInnerPageCreditScoring }"/>
                                            <apex:param name="continueBtnStatus" value="null" assignTo="{! selectedAvailableCompanyCreditScoring.identificationnumber }"/>
                                        </apex:actionFunction>
                                        <div class="row">
                                            <apex:outputPanel id="searchBtnsBlock">
                                                <apex:outputPanel rendered="{! continueButtonIsDisabled = false && activeInnerPageCreditScoring != 'Select company' }">
                                                    <div class="buttons center-block" style="width: 88%">
                                                        <div class="col-lg-3 pull-right">
                                                            <apex:actionFunction name="doSaveCompany" action="{! doSaveCompanyDetailsData }"
                                                                onComplete="validateCompanyDetails(false); setEvents_companyDetails(); onPageRender();doSearchCompany();"
                                                                reRender="stepList, search-companies-block, formBlock, info-block, orderDetails, modalError"/>
                                                            <apex:actionFunction name="doSearchCompany" action="{! doSearchCompany }"
                                                                onComplete="validateCompanyDetails(false); setEvents_companyDetails(); onPageRender();analytics_SearchCompanyOnClickSearch();endSplash();"
                                                                reRender="stepList, search-companies-block, formBlock, info-block, orderDetails, searchBtnsBlock, modalError"/>
                                                            <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SEARCH BUTTON']['BUTTON NAME'].Value__c }"
                                                                              onclick="analytics_onClickButtonSendUI('click','button: search', 'UI_02_Tankkarte_Step_2_Form_Company');
                                                                                       turnOffBackButtonClick();
                                                                                       return validateCompanyDetailsForSearch();"
                                                                              styleClass="btn btn-red search search-btn-main" reRender="search-companies-block, searchBtnsBlock, modalError, onlineChatBlock"
                                                                              status="splashStatus"/>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{! OR(continueButtonIsDisabled = true, (continueButtonIsDisabled = false && activeInnerPageCreditScoring = 'Select company')) }">
                                                    <div class="buttons center-block" style="width: 88%">
                                                        <div class="col-lg-3 pull-right">
                                                            <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SEARCH BUTTON']['BUTTON NAME'].Value__c }" disabled="true" styleClass="btn btn-red search" reRender="search-companies-block, searchBtnsBlock, modalError, onlineChatBlock" status="splashStatus"/>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                        <div class="row">
                                            <apex:outputPanel id="search-companies-block">
                                                <apex:outputPanel layout="block" styleClass="select-company" rendered="{! activeInnerPageCreditScoring = 'Select company' }">
                                                    <div class="col-lg-12">
                                                        <apex:outputPanel layout="block" id="cf-companies" styleClass="ym-hide-content">
                                                            <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="b-desc" style="margin-bottom: 20px;" layout="block">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                            <div class="cf-companies-list">
                                                                <div class="cf-list">
                                                                    <apex:repeat value="{! availableCompaniesListCreditScoring.companiesMap }" var="companyId">
                                                                        <div class="radio radio-red">
                                                                            <div class="cf-company">
                                                                                <input type="radio" name="company" id="{! companyId }"
                                                                                    onclick="$j('[id$=selected-company-id]').val('{! companyId }');
                                                                                             $j('.save-company-btn').attr('disabled', false);
                                                                                             analytics_onClickRadioSendUI('companySelect', 'UI_02_Tankkarte_Step_2_Form_Company');document.cookie = 'apex__e2esource={! opportunity.E2E_Encoded_Url__c }';"/>
                                                                                <label for="{! companyId }">
                                                                                {! availableCompaniesListCreditScoring.companiesMap[companyId].name }<br/>
                                                                                    <apex:outputPanel >
                                                                                    {! availableCompaniesListCreditScoring.companiesMap[companyId].street } {! availableCompaniesListCreditScoring.companiesMap[companyId].housenumber }
                                                                                            {! IF(availableCompaniesListCreditScoring.companiesMap[companyId].postcode != null, ', ' +
                                                                                            availableCompaniesListCreditScoring.companiesMap[companyId].postcode, '') }
                                                                                            {! IF(availableCompaniesListCreditScoring.companiesMap[companyId].city != null, ', ' +
                                                                                            availableCompaniesListCreditScoring.companiesMap[companyId].city, '') }
                                                                                            {! IF(availableCompaniesListCreditScoring.companiesMap[companyId].country != null, ', ' +
                                                                                            availableCompaniesListCreditScoring.companiesMap[companyId].country, '') }
                                                                                    </apex:outputPanel>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </apex:repeat>
                                                                    <apex:inputHidden id="selected-company-id"
                                                                        value="{! selectedAvailableCompanyCreditScoring.identificationnumber }"/>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                        <div class="b-splitter"></div>
                                        <div class="row">
                                            <div class="buttons center-block" style="width: 91%">
                                                <div class="col-lg-3 pull-left">
                                                    <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                        action="{! goToContactDetails }"
                                                        onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                        oncomplete="validateContactDetails(false); setEvents_contactDetails();"
                                                        styleClass="btn btn-gray back-button-cls"
                                                        style="width: 100%"
                                                        reRender="stepList, formBlock, info-block, details-info, modalError, onlineChatBlock, pageHeader"
                                                        status="splashStatus"/>
                                                </div>
                                                <apex:outputPanel id="goToPumpingButton">
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:actionFunction name="goToSetTotalConsumption" action="{! goToSetTotalConsumption }" reRender="stepList, formBlock, info-block, details-info, modalError, onlineChatBlock"
                                                        oncomplete="endSplash(); setEvents_taxNumber(); setEvents_fuelConsumption(); onPageRender();"/>
                                                        <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }"
                                                            action="{! deleteReportsForPreviousCompany }"
                                                            onclick="startSplash();analytics_onClickButtonSendUI('click','button: next', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                            oncomplete="goToSetTotalConsumption();"
                                                            styleClass="btn btn-red continue save-company-btn"/>
                                                        <script>
                                                            $j('.save-company-btn').attr('disabled', true);
                                                        </script>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        if (isCompanySearch) {
                                            analytics_SearchCompanyOnLoad();
                                            isCompanySearch = false;
                                        }
                                    </script>
                                </apex:outputPanel>

                                <!-- ENTER TAX NUMBER -->
                                <apex:outputPanel styleClass="enter-tax-id" id="enterTaxId" rendered="{! AND(activeStep = 1, activeSubStep = 'Enter Tax ID') }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="b-desc">
                                                    {! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group tax-group" style="margin-top: 32px;">
                                            <div class="col-lg-3">
                                                <div class="block" style="width: 235px;">
                                                    <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                        <apex:outputLabel styleClass="f-label" value="{! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].fields['TAX ID'].elementItemsMap['LABEL'].Value__c }"/>
                                                        <span class="f-required">{! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].fields['TAX ID'].elementItemsMap['ASTERISK'].Value__c }</span>
                                                        <div class="i-helper inline-block" style="margin-right: 10px;" data-html="true" data-content="{! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].fields['TAX ID'].elementItemsMap['HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="col-lg-7 col-lg-offset-2">
                                                <div class="tax-number block">
                                                    <apex:inputText id="taxid"
                                                        value="{! selectedAvailableCompanyCreditScoring.vatid }"
                                                        onblur="analytics_onBlurInputSendUI($j(this), 'taxid', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                        onkeyup="sendErrorTaxId();"
                                                        styleClass="inline-block form-control required input ym-hide-content"
                                                        maxLength="12" style="width: 70%; text-transform: uppercase;"/>
                                                    <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-taxid">
                                                        <script>
                                                            function sendErrorTaxId() {
                                                                if ($j('.invalid-feedback-taxid').is(':visible')) {
                                                                    analytics_onErrorSendUI('taxidNotFormat','UI_03_Tankkarte_Step_3_Form_FuelLiters');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].fields['TAX ID'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="b-splitter"></div>
                                        <div class="row">
                                            <div class="buttons center-block" style="width: 91%">
                                                <div class="col-lg-3 pull-left">
                                                    <apex:commandButton action="{! backToCreditScoring }"
                                                        onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                        oncomplete="setEvents_companyDetails(); onPageRender();"
                                                        value="{! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                        styleClass="btn btn-gray back-button-cls"
                                                        style="width: 100%"
                                                        reRender="formBlock, orderDetails, modalError, onlineChatBlock"
                                                        status="splashStatus"/>
                                                </div>
                                                <div class="col-lg-3 pull-right">
                                                    <apex:commandButton id="continueToPumping"
                                                        value="{! stepPagesMap['CREDIT SCORE. ENTER TAX ID'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                        action="{! continueToTotalConsumption }"
                                                        onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                        oncomplete="setEvents_fuelConsumption(); onPageRender();"
                                                        reRender="stepList, formBlock, orderDetails, modalError, onlineChatBlock"
                                                        styleClass="btn btn-red continue continue-fromtax"
                                                        status="splashStatus"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>

                                <!-- STEP FUEL CONSUMPTION -->
                                <apex:outputPanel layout="block" id="fuelConsumption" styleClass="fuel-consumption" rendered="{! AND(activeStep == 1, activeSubStep == 'Set total consumption') }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['TOP HEADING']['TOP HEADING VALUE'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="pump block" style="margin-top: 32px; margin-bottom: 0;">
                                                <div class="col-lg-3">
                                                    <div style="width: 160px; line-height: 18px;">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 0px;">
                                                            <span class="f-required">
                                                                {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['ASTERISK'].Value__c }
                                                            </span>
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>
                                                <div class="col-lg-3 col-lg-offset-1">
                                                    <apex:inputText id="pump"
                                                        value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                        required="false" styleClass="form-control required input totalPumpField ym-hide-content"
                                                        onblur="analytics_onBlurInputSendUI($j(this), 'fuelAmount', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                        onkeyup="sendErrorFuelConsumption1(); sendErrorFuelConsumption2();"
                                                        onfocus="setContinueButtonStatus();" maxLength="5"
                                                        style="width: 83%"/>
                                                </div>
                                                <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['UNIT'].Value__c }" styleClass="label-last font-15" style="margin-left: -20px;"/>
                                            </div>
                                            <div class="col-lg-3"></div>
                                            <div class="col-lg-7">
                                                <div class="invalid-feedback consumption-warning1 invalid-feedback-fuel1" style="margin-left: 50px;">
                                                    <script>
                                                        function sendErrorFuelConsumption1() {
                                                            if ($j('.invalid-feedback-fuel1').is(':visible')) {
                                                                analytics_onErrorSendUI('fuelAmountNotFormat','UI_03_Tankkarte_Step_3_Form_FuelLiters');
                                                            }
                                                        }
                                                    </script>
                                                    <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 1'].Value__c }
                                                </div>
                                                <div class="invalid-feedback consumption-warning2 invalid-feedback-fuel2" style="margin-left: 50px;">
                                                    <script>
                                                        function sendErrorFuelConsumption2() {
                                                            if ($j('.invalid-feedback-fuel2').is(':visible')) {
                                                                analytics_onErrorSendUI('fuelAmountNotFormat','UI_03_Tankkarte_Step_3_Form_FuelLiters');
                                                            }
                                                        }
                                                    </script>
                                                    <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 2'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <apex:actionFunction name="setContinueButtonStatus" reRender="setTotalPumpBtnsBlock">
                                            <apex:param name="btnStatus" value="true" assignTo="{! continueButtonIsDisabled }"/>
                                        </apex:actionFunction>
                                        <div class="b-splitter"></div>
                                        <apex:outputPanel id="btnsTotalConsumption" styleClass="row" layout="block">
                                            <div class="buttons center-block" style="width: 91%">
                                                <div class="col-lg-3 pull-left">
                                                    <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                        action="{! backToCreditScoring }"
                                                        onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                        oncomplete="setEvents_companyDetails(); onPageRender();"
                                                        styleClass="btn btn-gray back-button-cls"
                                                        style="width: 100%"
                                                        reRender="formBlock, info-block, orderDetails, modalError"
                                                        status="splashStatus"/>
                                                </div>
                                                <div class="col-lg-3 pull-right">
                                                    <apex:actionFunction name="goToOfferCreditLine" action="{! doCalculateCreditScoring }" reRender="formBlock, info-block, orderDetails, modalError, onlineChatBlock" status="splashStatus" oncomplete="setEvents_creditLimit(); onPageRender();"/>
                                                    <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_03_Tankkarte_Step_3_Form_FuelLiters'); return validatePumpDetails();" reRender="formBlock" styleClass="btn btn-red continue" status="splashStatus"/>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                    <script type="text/javascript">
                                        analytics_FuelLitersOnLoad();
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP CREDIT LINE -->
                                <apex:outputPanel layout="block" id="creditLine" styleClass="credit-line" rendered="{! AND(activeStep == 1, activeSubStep = 'Calculating credit score') }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel id="headerBlock" layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="payment-method block" style="margin-top: 32px;">
                                                <div class="col-lg-4">
                                                    <div style="width: 180px; line-height: 18px; {! IF(countryParam == 'chfr', 'width: 185px;', '') }">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 0px;"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8">
                                                    <div class="btn-group">
                                                        <apex:outputPanel id="payMethodBlock" style="display: inline-table;">
                                                            <div
                                                                id="dd-btn"
                                                                class="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON API'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                style="padding-top: 7px; font-size: 13px;"
                                                                onclick="$j('[id$=pay-method-dflt]').val('{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON API'].Value__c }');
                                                                        $j('[id$=dd-btn]').addClass('selected');
                                                                        $j('[id$=bt-btn]').removeClass('selected');
                                                                        $j('[id$=dd-desc]').show();
                                                                        $j('[id$=bt-desc]').hide();
                                                                        analytics_onClickButtonSendUI('click','button: lastschrift','UI_04_Tankkarte_Step_4_Form_PaymentMethod');">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <div
                                                                id="bt-btn"
                                                                class="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON API'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                style="padding-top: 7px; font-size: 13px;"
                                                                onclick="$j('[id$=pay-method-dflt]').val('{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON API'].Value__c }');
                                                                        $j('[id$=bt-btn]').addClass('selected');
                                                                        $j('[id$=dd-btn]').removeClass('selected');
                                                                        $j('[id$=bt-desc]').show();
                                                                        $j('[id$=dd-desc]').hide();
                                                                        analytics_onClickButtonSendUI('click','button: banküberweisung','UI_04_Tankkarte_Step_4_Form_PaymentMethod');">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <apex:inputhidden value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c }" id="pay-method-dflt"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div id="dd-desc"
                                                        class="pay-method-msg font-12"
                                                        style="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON API'].Value__c, 'display: block;', 'display: none;') }">
                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DIRECT DEBIT DESCRIPTION'].Value__c }
                                                    </div>
                                                    <div id="bt-desc"
                                                        class="pay-method-msg font-12"
                                                        style="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON API'].Value__c, 'display: block;', 'display: none;') }">
                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BANK TRANSFER DESCRIPTION'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="billing-period block">
                                                <div class="col-lg-4">
                                                    <div style="width: 180px; line-height: 18px;">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 3px;"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8">
                                                    <apex:outputPanel id="billingPeriodBlock">
                                                        <div class="btn-group">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['MONTHLY BUTTON NAME'].Value__c }
                                                        </div>
                                                        <div id="dd-desc"
                                                            class="pay-method-msg font-12"
                                                            style="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON API'].Value__c, 'display: block;', 'display: none;') }">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['DD REMARK'].Value__c }
                                                        </div>
                                                        <div id="bt-desc"
                                                            class="pay-method-msg font-12"
                                                            style="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON API'].Value__c, 'display: block;', 'display: none;') }">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['BT REMARK'].Value__c }
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <apex:outputPanel layout="block" styleClass="choose-credit-limit">
                                                <div class="col-lg-12">
                                                    <apex:outputPanel styleClass="b-row-header" layout="block">
                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel styleClass="b-desc" style="margin-bottom: 20px" layout="block">
                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                        <div class="row form-group">
                                            <div class="credit-limit block">
                                                <div class="col-lg-3" style="{! IF(countryParam == 'chfr', 'width: 162px;;', '') }">
                                                    <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" id="creditLimitRequired">
                                                        <span class="f-required" style="{! IF(minCreditLimit != maxValue, '', 'display: none;')}">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </apex:outputLabel>
                                                </div>
                                                <apex:outputPanel styleClass="col-lg-5 col-lg-offset-1" layout="block" id="creditLimitItems" style="{! IF(countryParam == 'chfr', 'margin-left: 39px;;', '') }">
                                                    <apex:outputPanel layout="block" styleClass="credit-limit-value" rendered="{! minCreditLimit != maxValue}">
                                                        <apex:outputPanel id="credit-limit-actions" layout="block" styleClass="inline-block">
                                                            <div class="btn-group minus-plus">
                                                                <apex:outputPanel styleClass="btn btn-select credit-value-block" style="width: auto;">
                                                                    <apex:outputText id="creditLimitInput" value="{! creditLimit }" label="Credit limit" styleClass="creditLimitOutput"/>
                                                                    <apex:outputPanel > {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }</apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:commandButton value="-"
                                                                    styleClass="btn btn-select action-btn minus"
                                                                    disabled="{! NOT(creditLimit > minCreditLimit) }"
                                                                    onclick="sendMinusButtonUI(); decreaseCreditLimit(); return false;"/>
                                                                <apex:commandButton value="+"
                                                                    styleClass="btn btn-select action-btn plus"
                                                                    disabled="{! NOT(creditLimit < maxValue) }"
                                                                    onclick="sendPlusButtonUI(); increaseCreditLimit(); return false;"/>
                                                                <script>
                                                                    function sendMinusButtonUI() {
                                                                        var isNextStepDisabled = $j('.minus-plus').find('.btn-select.action-btn.minus').is('[disabled=disabled]');
                                                                        if ( ! isNextStepDisabled ) {
                                                                            analytics_onClickButtonSendUI('click','button: minus', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');
                                                                        }
                                                                    }

                                                                    function sendPlusButtonUI() {
                                                                        var isNextStepDisabled = $j('.minus-plus').find('.btn-select.action-btn.plus').is('[disabled=disabled]');
                                                                        if ( ! isNextStepDisabled ) {
                                                                            analytics_onClickButtonSendUI('click','button: plus', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');
                                                                        }
                                                                    }
                                                                </script>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" rendered="{! minCreditLimit = maxValue}" style="margin: 11px 0;">
                                                        <apex:outputText value="{! creditLimit }" label="Credit limit"/>
                                                            <apex:outputPanel > {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }</apex:outputPanel>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>

                                                <apex:actionFunction name="recalculateDepositValue" action="{! doRecalculateDeposit }"
                                                                     reRender="depositBlock, idInputHidden, creditLimit, payMethodBlock, credit-limit-actions" onComplete="setEvents_creditLimit(); onPageRender(); return false;" status="splashStatus">
                                                    <apex:param name="creditLimit" assignTo="{! creditLimitValue }" value="" />
                                                    <apex:param name="minCreditLimit" assignTo="{! minCreditLimit }" value="" />
                                                    <apex:param name="maxCreditLimit" assignTo="{! maxCreditLimit }" value="" />
                                                </apex:actionFunction>

                                                <apex:outputPanel layout="block" styleClass="col-lg-8 col-lg-offset-4" id="hidden-elements">
                                                    <apex:outputPanel layout="none" rendered="{! minCreditLimit != maxValue}">
                                                        <div data-role="range-slider" class="range-slider">
                                                            <apex:outputPanel id="minCreditLimit" styleClass="min-limit slider-label-first">{! minCreditLimit }</apex:outputPanel>
                                                            <div id="slider"/>
                                                            <apex:outputPanel id="maxCreditLimit" styleClass="max-limit slider-label-last">{! maxValue }</apex:outputPanel>
                                                            <apex:inputHidden value="{! creditLimit }" id="idInputHidden"/>
                                                            <apex:inputHidden value="{! minCreditLimit }" id="minLimit"/>
                                                            <apex:inputHidden value="{! maxCreditLimit }" id="maxLimit"/>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>

                                                <script type="text/javascript">
                                                    function recalculateDeposit() {
                                                        var creditLimitValue = document.getElementById('{!$Component.idInputHidden}').value;
                                                        var minLimitValue = document.getElementById('{!$Component.minLimit}').value;
                                                        var maxLimitValue = document.getElementById('{!$Component.maxLimit}').value;
                                                        recalculateDepositValue(creditLimitValue, minLimitValue, maxLimitValue);
                                                    }
                                                </script>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="deposit block">
                                                <div class="col-lg-3">
                                                    <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 5px"/>
                                                </div>
                                                <div class="col-lg-5 col-lg-offset-1">
                                                    <apex:outputPanel id="depositBlock">
                                                        <apex:outputPanel layout="block" rendered="{! AND(deposit != 0, deposit != null) }">
                                                            <apex:outputPanel layout="block">
                                                                <apex:outputPanel layout="block" styleClass="inline-block" style="vertical-align: middle">
                                                                    {! deposit }
                                                                    <apex:outputPanel > {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }</apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP REQUIRED DEPOSIT'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="font-12">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK REQUIRED DEPOSIT'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" rendered="{! OR(deposit = 0, deposit = null) }">
                                                            <apex:outputPanel layout="block">
                                                                <apex:outputPanel layout="block" styleClass="font-15 inline-block" style="vertical-align: middle">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK NOT REQUIRED DEPOSIT'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP NOT REQUIRED DEPOSIT'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="b-splitter"></div>
                                        <apex:outputPanel styleClass="row" layout="block" id="paymentMethodButtons">
                                            <div class="buttons center-block" style="width: 91%">
                                                <div class="col-lg-3">
                                                    <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                        action="{! backToSetTotalConsumption }"
                                                        oncomplete="setEvents_fuelConsumption(); onPageRender();"
                                                        onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');"
                                                        styleClass="btn btn-gray back-button-cls"
                                                        style="width: 100%"
                                                        reRender="formBlock, messageBlock, orderDetails, modalError, onlineChatBlock"
                                                        status="splashStatus"/>
                                                </div>
                                                <div class="col-lg-3 pull-right">
                                                    <apex:actionFunction name="goToCardsOrder" action="{! goToCardsConfig }" reRender="stepList, messageBlock, formBlock, info-block, orderDetails, modalError, onlineChatBlock" status="splashStatus" oncomplete="setEvents_cardsOrder(); onPageRender();"/>
                                                    <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod'); return validateCreditLimit(true);" reRender="formBlock" styleClass="btn btn-red continue" status="splashStatus"/>
                                                </div>
                                                <script type="text/javascript">
                                                    function analytics_goToCardsConfig() {
                                                        if (paymentMethodAnalytics == null && ('{! opportunity.Zahlungsart__c }' == '' ||
                                                            '{! opportunity.Zahlungsart__c }' == null)) {
                                                            paymentMethodAnalytics = 'Lastschrift';
                                                        } else
                                                        if (paymentMethodAnalytics == null) {
                                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                        }
                                                        isDepositAnalytics = {! IF(deposit != null && deposit != 0, true, false) };
                                                        analytics_PaymentMethodNext(paymentMethodAnalytics, {! IF(deposit != null && deposit != 0, true, false) });
                                                    }
                                                </script>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                    <script type="text/javascript">
                                        analytics_PaymentMethodOnLoad();
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP CARDS ORDER -->
                                <apex:outputPanel layout="block" id="cardsOrder" styleClass="cards-order" rendered="{! AND(activeStep == 2, activeSubStep = 'Card configuration') }">
                                    <script type="text/javascript">
                                        if (paymentMethodAnalytics == null && isDepositAnalytics == null) {
                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                            isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                        }
                                    </script>
                                    <style>
                                            .onoffswitch-inner:before {
                                                content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON ON']['LABEL'].Value__c }";
                                                padding-left: 13px;
                                                background-color: #EE3A43;
                                                color: #FFFFFF;
                                                text-align: left;
                                            }
                                            .onoffswitch-inner:after {
                                                content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON OFF']['LABEL'].Value__c }";
                                                padding-right: 8px;
                                                background-color: #EEEEEE;
                                                color: #505050;
                                                text-align: right;
                                            }
                                            .invalidcards-feedback {
                                                display: block;
                                                width: 80%;
                                                margin-top: .5rem;
                                                font-size: 12px;
                                                color: #EE3A43;
                                            }
                                        </style>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['TOP HEADING']['TOP HEADING NAME'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="cards-count block">
                                                <div class="col-lg-2">
                                                    <div style="width: 170px">
                                                        <apex:outputLabel value="{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label">
                                                            <span class="f-required" style="margin-left: 0;">{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }</span>
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>
                                                <div class="col-lg-2 col-lg-offset-1">
                                                    <apex:actionFunction name="recalculateFeesCosts" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" reRender="feescosts-block" status="splashStatus"/>
                                                    <apex:outputPanel layout="block" styleClass="number-wrapper" id="counter">
                                                        <apex:input id="cardsCounter" type="number" value="{! numberOfCards }" required="false"
                                                                    styleClass="inline-block form-control required input ym-hide-content {! IF(activeInnerPage = 'Remove extra cards', 'error', '') }"
                                                                    style="padding: 5px 25px 5px 10px;" html-min="1" html-max="50" onchange="changeNumberOfCards();"
                                                                    onkeypress="if (window.event.keyCode == 13) {changeNumberOfCards();return false;}"
                                                                    onblur="analytics_onBlurInputSendUI($j(this), 'countCards', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"/>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel styleClass="counter">
                                                        <div class="count-up"><apex:outputPanel layout="block" styleClass="up" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration'); increaseCards(); changeNumberOfCards();"/></div>
                                                        <div class="count-down"><apex:outputPanel layout="block" styleClass="down" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration'); reductionCards(); changeNumberOfCards();"/></div>
                                                    </apex:outputPanel>
                                                    <apex:actionFunction name="changeNumberOfCards" action="{! changeNumberOfCards }" onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                         reRender="counter, cards-config, continue-button, messageBlock, feescosts-block, modalError, cards-exception" status="splashStatus"/>
                                                    <apex:outputPanel id="cards-exception">
                                                        <apex:outputPanel rendered="{! activeInnerPage = 'Remove extra cards' }" styleClass="invalidcards-feedback" style="width: 500%">
                                                            <div class="i-error">!</div>{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['WARN MESSAGE TYPE 1'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{! activeInnerPage = 'No more 2 card error' }" styleClass="invalidcards-feedback" style="width: 500%">
                                                            <div class="i-error">!</div>{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['WARN MESSAGE TYPE 2'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{! activeInnerPage = 'No more 5 card error' }" styleClass="invalidcards-feedback" style="width: 500%">
                                                            <div class="i-error">!</div>{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['WARN MESSAGE TYPE 3'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- CARDS ORDER NAVS-->
                                    <apex:outputPanel id="cards-config">
                                        <div class="wrapper cards-categories">
                                            <div class="b-nav-cards">
                                                <apex:outputPanel rendered="{! numberOfCards > 1 }">
                                                    <ul class="nav nav-tabs" role="tablist">
                                                        <li class="tab1 {! IF(activeCardConfigTab = 'same', 'active', '') }">
                                                            <a href="#sameCards" data-toggle="tab" onclick="setActiveTab('same'); analytics_onClickTabsSendUI('cardsConfigTabs_alle', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" >
                                                                <apex:outputPanel id="samecards-heading">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['SAME CARDS TAB']['TAB NAME PART 1'].Value__c } {! numberOfCards } {! stepPagesMap['CARD CONFIGURATION'].elements['SAME CARDS TAB']['TAB NAME PART 2'].Value__c }
                                                                </apex:outputPanel>
                                                            </a>
                                                        </li>
                                                        <li class="tab2 {! IF(activeCardConfigTab = 'diff', 'active', '') }">
                                                            <a href="#diffCards" data-toggle="tab" onclick="setActiveTab('diff'); analytics_onClickTabsSendUI('cardsConfigTabs_separated', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');">
                                                                <apex:outputPanel id="diffcards-heading">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['DIFF CARDS TAB']['TAB NAME'].Value__c }
                                                                </apex:outputPanel>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </apex:outputPanel>
                                                <apex:actionFunction action="{! changeActiveTab }" oncomplete="setEvents_cardsOrder(); onPageRender();" name="setActiveTab" reRender="feescosts-block, tabs-content, continue-button, counter, modalError, cards-exception, onlineChatBlock" status="splashStatus">
                                                    <apex:param name="activeTab" value="" assignTo="{! activeCardConfigTab }"/>
                                                </apex:actionFunction>
                                            </div>
                                            <apex:outputPanel id="tabs-content" styleClass="tab-content" layout="block">
                                                <apex:outputPanel rendered="{! activeCardConfigTab = 'same' }">
                                                    <div class="tab-panel {! IF(activeCardConfigTab = 'same', 'active', '') }" id="sameCards">
                                                        <div class="row">
                                                            <apex:outputPanel id="choose-category" layout="block" styleClass="choose-category">
                                                                <div class="col-lg-12">
                                                                    <apex:outputPanel layout="block" id="categories" styleClass="categories">
                                                                        <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                            {! IF(numberOfCards = 1, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['SECTION NAME SINGULAR'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['SECTION NAME PLURAL'].Value__c) }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="b-desc" style="margin: 10px 0 20px 30px" layout="block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['REMARK'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <div class="category-list">
                                                                        <div class="col-lg-12">
                                                                            <script type="text/javascript">
                                                                                sameCardsArray = new Array();
                                                                                for (var i = 1; i <= {! numberOfCards }; i++) {
                                                                                    sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                                                                }
                                                                            </script>
                                                                            <apex:outputPanel rendered="{! unavailableOptions != 'No shop related products' }">
                                                                                <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                    <div class="radio radio-red {! IF(sameCardsMap[1].categoryCard = 'Shop related products', 'selected', '') }">
                                                                                        <div class="category">
                                                                                            <apex:commandLink action="{! calculateFeesAndCosts }"
                                                                                                onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                                                onclick="analytics_onClickRadioSendUI('chosenProd_ShopRelatedProducts', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                                styleClass="category-link {! IF(sameCardsMap[1].categoryCard == 'Shop related products','active','') }"
                                                                                                reRender="feescosts-block, choose-category" status="splashStatus">
                                                                                                <apex:param value="Shop related products" name="cardType" assignto="{! sameCardsMap[1].categoryCard }"/>
                                                                                                {! IF(stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['TYPE NAME'].Value__c = 'Fahrzeugbezogene Produkte', 'Fahrzeugbezoge-ne Produkte', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['TYPE NAME'].Value__c) }
                                                                                                <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                      data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                            </apex:commandLink>
                                                                                            <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                <ul class="category-items">
                                                                                                    <li>
                                                                                                        <apex:outputPanel layout="block">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel layout="block">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel layout="block">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel layout="block">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 4'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel layout="block">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 5'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel layout="block">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 6'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                </ul>
                                                                                            </apex:outputPanel>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                            <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                <div class="radio radio-red {! IF(sameCardsMap[1].categoryCard = 'All vehicle related product', 'selected', '') }">
                                                                                    <div class="category">
                                                                                        <apex:commandLink action="{! calculateFeesAndCosts }"
                                                                                            onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                                            onclick="analytics_onClickRadioSendUI('chosenProd_Fahrzeugbezogene', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                            styleClass="category-link {! IF(sameCardsMap[1].categoryCard == 'All vehicle related product','active','') }"
                                                                                            reRender="feescosts-block, choose-category" status="splashStatus">
                                                                                            <apex:param value="All vehicle related product" name="cardType" assignto="{! sameCardsMap[1].categoryCard }"/>
                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c }
                                                                                            <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                  data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                        </apex:commandLink>
                                                                                        <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                            <ul class="category-items">
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 4'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 5'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                <div class="radio radio-red {! IF(sameCardsMap[1].categoryCard = 'All fuel types', 'selected', '') }">
                                                                                    <div class="category">
                                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffAlleArten', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" styleClass="category-link {! IF(sameCardsMap[1].categoryCard == 'All fuel types','active','') }"
                                                                                                          reRender="feescosts-block, choose-category" status="splashStatus">
                                                                                            <apex:param value="All fuel types" name="cardType" assignto="{! sameCardsMap[1].categoryCard }"/>
                                                                                            <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                  data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                        </apex:commandLink>
                                                                                        <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                            <ul class="category-items">
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                <div class="radio radio-red {! IF(sameCardsMap[1].categoryCard = 'Diesel', 'selected', '') }">
                                                                                    <div class="category">
                                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffDiesel', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" styleClass="category-link {! IF(sameCardsMap[1].categoryCard == 'Diesel','active','') }"
                                                                                                          reRender="feescosts-block, choose-category" status="splashStatus">
                                                                                            <apex:param value="Diesel" name="cardType" assignto="{! sameCardsMap[1].categoryCard }"/>
                                                                                        </apex:commandLink>
                                                                                        <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                            <ul class="category-items">
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                                <li>
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <apex:actionFunction name="setSameCardsType" onComplete="onPageRender();" reRender="feescosts-block" status="splashStatus">
                                                                                <apex:param value="" name="cardType" assignto="{! cardType }"/>
                                                                            </apex:actionfunction>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="row">
                                                            <apex:outputPanel layout="block" styleClass="card-services">
                                                                <div class="col-lg-12">
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:outputPanel id="pump-samecards-header" styleClass="b-row-header" layout="block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['SAME CARDS SECTION NAME PART 1'].Value__c } {! numberOfCards } {! IF(numberOfCards = 1, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['SAME CARDS SECTION NAME SINGULAR PART 2'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['SAME CARDS SECTION NAME PLURAL PART 2'].Value__c) }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="b-switch-block">
                                                                    <div class="col-lg-2">
                                                                        <div class="onoffswitch outside" id="outsideSwitch">
                                                                            <apex:inputCheckbox value="{! sameCardsMap[1].pumpOutsideCountry }"
                                                                                styleClass="onoffswitch-checkbox" id="switchPumpOutside"
                                                                                onchange="recalculateFeesCosts()"
                                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'tankenImAusland', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"/>
                                                                            <apex:outputLabel styleClass="onoffswitch-label" for="switchPumpOutside">
                                                                                <span class="onoffswitch-inner"></span>
                                                                                <span class="onoffswitch-switch"></span>
                                                                            </apex:outputLabel>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-10">
                                                                        <div class="switch-info">
                                                                            <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['LABEL'].Value__c }
                                                                            </apex:outputPanel>
                                                                            <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                 data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                            <apex:outputPanel layout="block" styleClass="s-desc">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 1'].Value__c }
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="s-add">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 2'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{! activeCardConfigTab = 'diff' }">
                                                    <div class="tab-panel {! IF(activeCardConfigTab = 'diff', 'active', '') }" id="diffCards">
                                                        <div class="row">
                                                            <apex:outputPanel id="diff-category" layout="block" styleClass="diff-cards-category">
                                                                <div class="col-lg-12">
                                                                    <apex:outputPanel layout="block" styleClass="cards-list ym-hide-content" id="diffCardsList">
                                                                        <script type="text/javascript">
                                                                            diffCardsArray = new Array();
                                                                        </script>
                                                                        <apex:variable var="index" value="{!1}"/>
                                                                        <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                                            <script type="text/javascript">
                                                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                                                            </script>
                                                                            <div class="card-item">
                                                                                <apex:outputPanel layout="block" styleClass="b-block-header inline-block">
                                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['CARD #']['HEADING'].Value__c }&nbsp;{! index }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="delete" rendered="{! numberOfDiffCards != 1 }">
                                                                                    <apex:commandLink action="{! removeCard }"
                                                                                        oncomplete="showCardsOrderNavigationTabs(); onPageRender();"
                                                                                        reRender="cards-config, counter, feescosts-block, messageBlock, modalError, cards-exception"
                                                                                        onclick="analytics_onClickButtonSendUI('click','button: cardsConfigTabs_separated_del', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                        status="splashStatus">
                                                                                        <apex:param name="cardIndex" value="{! index }"/>
                                                                                    </apex:commandLink>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel rendered="{! diffCardsMap[cardIndx].cardIsConfigurated = true }">
                                                                                    <apex:outputPanel styleClass="edit">
                                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                        <apex:commandLink action="{! editCardConfiguration }"
                                                                                            onComplete="onPageRender();" styleClass="font-11"
                                                                                            onclick="analytics_onClickButtonSendUI('click','button: cardsConfigTabs_separated_change', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                            value="{! stepPagesMap['CARD CONFIGURATION'].elements['EDIT CONFIG']['VALUE'].Value__c }"
                                                                                            reRender="diffCardsList, messageBlock, modalError" status="splashStatus">
                                                                                            <apex:param name="cardIndex" value="{! index }"/>
                                                                                        </apex:commandLink>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="b-desc-done">
                                                                                        {! IF(diffCardsMap[cardIndx].categoryCard == 'Shop related products', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['TYPE NAME'].Value__c, IF(diffCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(diffCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(diffCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, '')))) }{!IF(diffCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(diffCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel rendered="{! cardIndx != numberOfCards }">
                                                                                        <div class="b-card-splitter"></div>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>

                                                                                <apex:outputPanel rendered="{! diffCardsMap[cardIndx].cardIsConfigurated = false }">
                                                                                    <apex:outputPanel layout="block">
                                                                                        <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['SECTION NAME SINGULAR'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel styleClass="b-desc" style="margin: 10px 0 20px 30px" layout="block">
                                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['REMARK'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <div class="category-list">
                                                                                        <div class="col-lg-12">
                                                                                            <apex:outputPanel rendered="{! unavailableOptions != 'No shop related products' }">
                                                                                                <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                                    <div class="radio radio-red {! IF(diffCardsMap[cardIndx].categoryCard = 'Shop related products', 'selected', '') }">
                                                                                                        <div class="category">
                                                                                                            <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" onclick="analytics_onClickRadioSendUI('chosenProd_ShopRelatedProducts', 'UI_05_Tankkarte_Step_5_Config_CardsConfigurationSep');" styleClass="category-link {! IF(diffCardsMap[cardIndx].categoryCard == 'Shop related products','active','') }" reRender="feescosts-block, diff-category" status="splashStatus">
                                                                                                                <apex:param value="Shop related products" name="cardType" assignto="{! diffCardsMap[cardIndx].categoryCard }"/>
                                                                                                                <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['HELP'].Value__c }" data-trigger="hover" data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                            </apex:commandLink>
                                                                                                            <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                                <ul class="category-items">
                                                                                                                    <li>
                                                                                                                        <apex:outputPanel layout="block">
                                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                                        </apex:outputPanel>
                                                                                                                    </li>
                                                                                                                    <li>
                                                                                                                        <apex:outputPanel layout="block">
                                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                                        </apex:outputPanel>
                                                                                                                    </li>
                                                                                                                    <li>
                                                                                                                        <apex:outputPanel layout="block">
                                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                                        </apex:outputPanel>
                                                                                                                    </li>
                                                                                                                    <li>
                                                                                                                        <apex:outputPanel layout="block">
                                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 4'].Value__c }
                                                                                                                        </apex:outputPanel>
                                                                                                                    </li>
                                                                                                                    <li>
                                                                                                                        <apex:outputPanel layout="block">
                                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 5'].Value__c }
                                                                                                                        </apex:outputPanel>
                                                                                                                    </li>
                                                                                                                    <li>
                                                                                                                        <apex:outputPanel layout="block">
                                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['ITEM 6'].Value__c }
                                                                                                                        </apex:outputPanel>
                                                                                                                    </li>
                                                                                                                </ul>
                                                                                                            </apex:outputPanel>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </apex:outputPanel>
                                                                                            <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                                <div class="radio radio-red {! IF(diffCardsMap[cardIndx].categoryCard = 'All vehicle related product', 'selected', '') }">
                                                                                                    <div class="category">
                                                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" onclick="analytics_onClickRadioSendUI('chosenProd_Fahrzeugbezogene', 'UI_05_Tankkarte_Step_5_Config_CardsConfigurationSep');" styleClass="category-link {! IF(diffCardsMap[cardIndx].categoryCard == 'All vehicle related product','active','') }" reRender="feescosts-block, diff-category" status="splashStatus">
                                                                                                            <apex:param value="All vehicle related product" name="cardType" assignto="{! diffCardsMap[cardIndx].categoryCard }"/>
                                                                                                            <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                                  data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                        </apex:commandLink>
                                                                                                        <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                            <ul class="category-items">
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 4'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 5'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                            </ul>
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                                <div class="radio radio-red {! IF(diffCardsMap[cardIndx].categoryCard = 'All fuel types', 'selected', '') }">
                                                                                                    <div class="category">
                                                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffAlleArten', 'UI_05_Tankkarte_Step_5_Config_CardsConfigurationSep');" styleClass="category-link {! IF(diffCardsMap[cardIndx].categoryCard == 'All fuel types','active','') }" reRender="feescosts-block, diff-category" status="splashStatus">
                                                                                                            <apex:param value="All fuel types" name="cardType" assignto="{! diffCardsMap[cardIndx].categoryCard }"/>
                                                                                                            <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['HELP'].Value__c }" data-trigger="hover" data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                        </apex:commandLink>
                                                                                                        <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                            <ul class="category-items">
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                            </ul>
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="{! IF(unavailableOptions == 'No shop related products', 'col-lg-4', 'col-lg-6') }" style="padding: 0px;">
                                                                                                <div class="radio radio-red {! IF(diffCardsMap[cardIndx].categoryCard = 'Diesel', 'selected', '') }">
                                                                                                    <div class="category">
                                                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffDiesel', 'UI_05_Tankkarte_Step_5_Config_CardsConfigurationSep');" styleClass="category-link {! IF(diffCardsMap[cardIndx].categoryCard == 'Diesel','active','') }" reRender="feescosts-block, diff-category" status="splashStatus">
                                                                                                            <apex:param value="Diesel" name="cardType" assignto="{! diffCardsMap[cardIndx].categoryCard }"/>
                                                                                                        </apex:commandLink>
                                                                                                        <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                            <ul class="category-items">
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                                <li>
                                                                                                                    <apex:outputPanel layout="block">
                                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                                    </apex:outputPanel>
                                                                                                                </li>
                                                                                                            </ul>
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <apex:outputPanel layout="block" styleClass="card-services">
                                                                                            <div class="col-lg-12">
                                                                                                <apex:outputPanel layout="block">
                                                                                                    <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['DIFF CARDS SECTION NAME'].Value__c }&nbsp;{! index }
                                                                                                    </apex:outputPanel>
                                                                                                </apex:outputPanel>
                                                                                            </div>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-lg-12">
                                                                                            <div class="b-switch-block">
                                                                                                <div class="col-lg-2">
                                                                                                    <div class="onoffswitch outside">
                                                                                                        <apex:inputCheckbox value="{! diffCardsMap[cardIndx].pumpOutsideCountry }" styleClass="onoffswitch-checkbox" id="switchPumpOutside" onclick="analytics_onClickCheckboxSendUI($j(this), 'tankenImAusland', 'UI_05_Tankkarte_Step_5_Config_CardsConfigurationSep');" onchange="recalculateFeesCosts()"/>
                                                                                                        <apex:outputLabel styleClass="onoffswitch-label" for="switchPumpOutside">
                                                                                                            <span class="onoffswitch-inner"></span>
                                                                                                            <span class="onoffswitch-switch"></span>
                                                                                                        </apex:outputLabel>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="col-lg-10">
                                                                                                    <div class="switch-info">
                                                                                                        <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['LABEL'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                             data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                                                        <apex:outputPanel layout="block" styleClass="s-desc">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 1'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                        <apex:outputPanel layout="block" styleClass="s-add">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 2'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="buttons center-block" style="width: 88.5%">
                                                                                            <div class="col-lg-3 pull-right">
                                                                                                <apex:commandLink id="save-card-id" value="{! stepPagesMap['CARD CONFIGURATION'].elements['DIFF CARDS TAB']['SAVE CARD BUTTON'].Value__c }" action="{! addCard }" onclick="analytics_onClickButtonSendUI('click','button: cardsConfigTabs_separated_save', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" onComplete="onPageRender();" reRender="diffCardsList, feescosts-block, modalError, onlineChatBlock" styleClass="btn btn-red save-card" style="margin-top: 15px" status="splashStatus">
                                                                                                    <apex:param name="cardIndex" value="{! index }"/>
                                                                                                </apex:commandLink>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <apex:variable var="index" value="{! index + 1 }"/>
                                                                        </apex:repeat>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- BLUE BLOCK -->
                                    <apex:outputPanel id="feescosts-block">
                                        <div class="wrapper blue-block">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['FEES AND COSTS']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="fees-and-costs">
                                                    <div class="col-lg-6">
                                                        <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                            <div class="fee1">
                                                                <div class="item" style="{! costItem.style }">
                                                                    <apex:outputPanel layout="block" styleClass="f-item inline-block" style="color:#616566">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <div style="margin: 5px 0 0 30px">
                                                                    <apex:outputPanel layout="block" styleClass="f-desc">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-PER-'].Value__c } {! IF(activeCardConfigTab = 'same', numberOfCards, numberOfDiffCards ) } {! IF(OR(AND(activeCardConfigTab = 'same', numberOfCards = 1), AND(activeCardConfigTab = 'diff', numberOfDiffCards = 1)), stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARD-'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARDS-'].Value__c) }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </apex:repeat>
                                                        <apex:repeat value="{! costsColumnsMap['DISCOUNT'] }" var="costItem">
                                                            <div class="col-lg-12">
                                                                <div class="you-save" style="height: 140px; margin: 25px 0 10px 0; width: 110%;">
                                                                    <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel styleClass="b-row-header" layout="block" style="padding-top: 0px;">
                                                                        {! costItem.discountValue } {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['CURRENCY'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="desc">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['MESSAGE'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="desc">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['ENDNOTE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </apex:repeat>
                                                        <div class="collapse-block">
                                                            <div class="link" data-toggle="collapse" data-target="#otherFee">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES HEADING'].Value__c }
                                                                <div class="expander expend-detail inline-block" ></div>
                                                            </div>
                                                            <div class="row collapse" id="otherFee">
                                                                <div class="fee3">
                                                                    <apex:outputPanel layout="block" styleClass="font-12">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES SUBHEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:repeat value="{! costsColumnsMap['3'] }" var="costItem">
                                                                        <div class="item" style="{! IF(countryParam == 'chfr', 'margin-left: 0px; width: 278px;', '') }">
                                                                            <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c }
                                                                                <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                    <div class="item-helper">
                                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                                {! costItem.costValue } {! costItem.costTariff }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </apex:repeat>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <div class="fee2">
                                                            <apex:outputPanel layout="block" style="display: inline-block;">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING'].Value__c }
                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                            </apex:outputPanel>
                                                            <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                <div class="item">
                                                                    <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }
                                                                        <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                            <div class="item-helper">
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                            </div>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </apex:repeat>
                                                        </div>
                                                        <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                            <div class="fee2" style="margin-top: 28px;">
                                                                <apex:outputPanel layout="block" style="display: inline-block;">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING'].Value__c }
                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                </apex:outputPanel>
                                                                <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                    <div class="item">
                                                                        <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }
                                                                            <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                <div class="item-helper">
                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                            {! costItem.costValue } {! costItem.costTariff }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </apex:repeat>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <apex:outputPanel layout="block" styleClass="vat-not-include">
                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['VAT IS NOT INCLUDED']['REMARK'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3 pull-left">
                                                        <apex:commandButton action="{! editCreditLimit }"
                                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                            onComplete="setEvents_creditLimit(); onPageRender();"
                                                                            value="{! stepPagesMap['CARD CONFIGURATION'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                                            immediate="true"
                                                                            styleClass="btn btn-gray back-button-cls"
                                                                            style="width: 100%"
                                                                            reRender="stepList, orderDetails, formBlock, messageBlock, feescosts-block, modalError, onlineChatBlock"
                                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:commandButton id="continue-button"
                                                                            value="{! stepPagesMap['CARD CONFIGURATION'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }"
                                                                            action="{! goToSpecialOffers }"
                                                                            onComplete="onPageRender(); setCollapseBlockEvent();"
                                                                            onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                            disabled="{! continueButtonIsDisabled }"
                                                                            reRender="stepList, messageBlock, formBlock, info-block, orderDetails, modalError, onlineChatBlock"
                                                                            styleClass="btn btn-red continue btnContinueToOffer"
                                                                            status="splashStatus"/>
                                                        <script type="text/javascript">
                                                            $j('.btnContinueToOffer').on( "click", function() {
                                                                if ('{! activeCardConfigTab }' == 'diff') {
                                                                    analytics_CardsConfigOnFinish(diffCardsArray);
                                                                    isOffersPage = true;
                                                                } else
                                                                if ('{! activeCardConfigTab }' == 'same') {
                                                                    analytics_CardsConfigOnFinish(sameCardsArray);
                                                                    isOffersPage = true;
                                                                }
                                                            });
                                                        </script>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <script type="text/javascript">
                                        analytics_CardsConfigOnLoad(paymentMethodAnalytics, isDepositAnalytics);
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP SPECIAL OFFERS -->
                                <apex:outputPanel layout="block" id="specialOffers" styleClass="special-offers" rendered="{! AND(activeStep == 2, activeSubStep = 'Choosing offer') }">
                                    <script type="text/javascript">
                                        if (paymentMethodAnalytics == null && isDepositAnalytics == null) {
                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                            isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                        }

                                        sameCardsArray = new Array();
                                        for (var i = 1; i <= {! numberOfCards }; i++) {
                                            sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                        }

                                        diffCardsArray = new Array();
                                        <apex:variable var="index" value="{!1}"/>
                                        <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                            diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                        </apex:repeat>
                                    </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                                <!-- <apex:outputPanel layout="block" styleClass="b-desc" rendered="{! nonHomeOffersList != NULL }">
                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['REMARK'].Value__c }
                                                </apex:outputPanel> -->
                                            </div>
                                        </div>
                                        <apex:repeat value="{! nonHomeOffersList }" var="nonHomeOffer">
                                            <apex:outputPanel layout="block" styleClass="offer" id="allShellDiscount">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <apex:outputPanel layout="block" styleClass="b-row-header" style="margin-right: 60px">
                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['OFFER NAME'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="special-desc inline-block" style="width: 47%;">
                                                            <apex:outputPanel layout="block">
                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['OFFER DESCRIPTION'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="fee">
                                                                <apex:outputPanel style="font-weight: 600">
                                                                    {! nonHomeOffer.offerDiscount }
                                                                </apex:outputPanel>
                                                                {! nonHomeOffer.offerDiscountRatePer } {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DISCOUNT LOCATION'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="offer-label inline-block" style="width: 47%;">
                                                            <apex:outputPanel layout="block" styleClass="{! IF(OR(nonHomeOffer.offerRemoveBtnStatus = 'show-enabled', nonHomeOffersList.size = 1), 'price-right selected inline-block pull-right', 'price-right inline-block pull-right') }">
                                                                <apex:outputPanel layout="block" styleClass="f-box">
                                                                    {! nonHomeOffer.offerDiscount }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="f-box-desc">
                                                                    {! nonHomeOffer.offerDiscountRatePer }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="{! IF(OR(nonHomeOffer.offerRemoveBtnStatus = 'show-enabled', nonHomeOffersList.size = 1), 'arrow-right selected inline-block pull-right', 'arrow-right inline-block pull-right') }"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="collapse-block" style="{! IF(AND(nonHomeOffer.offerSelectionBtnStatus != 'show-enabled', nonHomeOffer.offerSelectionBtnStatus != 'show-disabled'), 'margin-bottom: 20px;','') }">
                                                            <div class="link" style="margin: 5px 0 0 30px" data-toggle="collapse" data-target="#shellDiscount">
                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DETAILS HEADING'].Value__c }<div class="expander inline-block collapse-detail"></div>
                                                            </div>
                                                            <div class="row collapse in" id="shellDiscount">
                                                                <div class="detail-list">
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:outputPanel layout="block" styleClass="l-detail inline-block" 
                                                                                        style="{! IF(countryParam == 'chfr', 'width: 125px;', '') }">
                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DISCOUNT'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="inline-block">{! nonHomeOffer.offerDiscount } {! nonHomeOffer.offerDiscountRatePer }</apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:outputPanel layout="block" styleClass="l-detail inline-block" style="{! IF(countryParam == 'chfr', 'width: 125px;', '') }">{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['TIME'].Value__c }</apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="inline-block">{! nonHomeOffer.offerTime }</apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" rendered="{! OR(nonHomeOffer.offerIsBased = 'Volume', nonHomeOffer.offerIsBased = 'Fuel + Volume') }">
                                                                        <apex:outputPanel layout="block" styleClass="l-detail inline-block" style="{! IF(countryParam == 'chfr', 'width: 125px;', '') }">{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['VOLUME'].Value__c }</apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="inline-block">{! nonHomeOffer.offerVolume }</apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" rendered="{! OR(nonHomeOffer.offerIsBased = 'Fuel', nonHomeOffer.offerIsBased = 'Fuel + Volume') }">
                                                                        <apex:outputPanel layout="block" styleClass="l-detail inline-block" style="{! IF(countryParam == 'chfr', 'width: 125px;', '') }">
                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['FUEL TYPE'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="inline-block">
                                                                            {! nonHomeOffer.offerFuelType }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:outputPanel layout="block" styleClass="l-detail inline-block" style="{! IF(countryParam == 'chfr', 'width: 125px;', '') }">{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['GEOGRAPHY'].Value__c }</apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="inline-block">{! nonHomeOffer.offerCountry }</apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:outputPanel layout="block" styleClass="l-detail inline-block" style="{! IF(countryParam == 'chfr', 'width: 125px;', '') }">{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['STATION'].Value__c }</apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="inline-block">{! nonHomeOffer.offerStation }</apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <!-- <apex:outputPanel layout="block" style="vertical-align: top;">
                                                                        <apex:outputPanel layout="block" styleClass="l-detail inline-block" style="vertical-align: top;">{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['FUEL PRICE'].Value__c }</apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="inline-block" style="width: 400px;">{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['FUEL PRICE VALUE'].Value__c }</apex:outputPanel>
                                                                    </apex:outputPanel> -->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:repeat>
                                        <div class="b-splitter"></div>
                                        <div class="row">
                                            <div class="buttons center-block" style="width: 91%">
                                                <div class="col-lg-3 pull-left">
                                                    <apex:commandButton action="{! backToCardConfiguration }"
                                                                        value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                                        onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_06_Tankkarte_Step_6_Config_Offer');"
                                                                        onComplete="showCardsOrderNavigationTabs(); setEvents_cardsOrder(); onPageRender();"
                                                                        styleClass="btn btn-gray back-button-cls"
                                                                        style="width: 100%"
                                                                        reRender="formBlock, orderDetails, modalError, onlineChatBlock"
                                                                        status="splashStatus"/>
                                                </div>
                                                <div class="col-lg-3 pull-right">
                                                    <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }"
                                                                        action="{! goToTechnicalParameters }"
                                                                        onComplete="setEvents_cardsTechnicalParams(); onPageRender();"
                                                                        onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_06_Tankkarte_Step_6_Config_Offer'); isTechnicalParameters = true;"
                                                                        styleClass="btn btn-red continue btnContinueToTechParams"
                                                                        disabled="{! continueButtonIsDisabled }"
                                                                        reRender="stepList, formBlock, orderDetails, modalError, onlineChatBlock"
                                                                        status="splashStatus"/>
                                                </div>
                                                <div class="col-lg-5 pull-right">
                                                    <apex:outputPanel layout="block" styleClass="button-info font-12" rendered="{! AND(continueButtonIsDisabled, nonHomeOffersList.size != 1 ) }">
                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        $j('.btnContinueToTechParams').on( "click", function() {
                                            analytics_ConfigOfferOnNext(selectedOfferAnalytics);
                                        });
                                        if (isOffersPage == null) {
                                            isOffersPage = true;
                                        }
                                        if ('{! activeCardConfigTab }' == 'diff' && isOffersPage) {
                                            analytics_ConfigOfferOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray);
                                            isOffersPage = false;
                                        } else
                                        if ('{! activeCardConfigTab }' == 'same' && isOffersPage) {
                                            analytics_ConfigOfferOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray);
                                            isOffersPage = false;
                                        }
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP TECHNICAL PARAMS -->
                                <apex:outputPanel layout="block" id="cardTechParams" styleClass="cards-tech-parameters" rendered="{! AND(activeStep = 2, activeSubStep = 'Technical parameters') }">
                                    <script type="text/javascript">
                                        if (paymentMethodAnalytics == null && isDepositAnalytics == null) {
                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                            isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                        }

                                        sameCardsArray = new Array();
                                        for (var i = 1; i <= {! numberOfCards }; i++) {
                                            sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{! sameCardsMap[1].categoryCard}','quantity': 1 });
                                        }

                                        diffCardsArray = new Array();
                                        <apex:variable var="index" value="{!1}"/>
                                        <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                            diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1 });
                                        </apex:repeat>

                                        function changeTypeEmbossing(type, index) {
                                            var finalClass = '.inputHidden' + index + ' input[type="hidden"]';
                                            if ($j(finalClass).val() != type) {
                                                $j(finalClass).val(type);

                                                $j('#drv-name' + index).toggleClass('selected');
                                                $j('#car-number' + index).toggleClass('selected');

                                                $j('.invalid-feedback-driver').hide();
                                                $j('.invalid-feedback-car-number').hide();
                                                $j('.driverNameOrCarNumberInputValue').removeClass('error');
                                                $j('#drv-name' + index).parent().attr('class',type);
                                            }
                                            var content = $j('.step-content');
                                            var cardTechParamsBlock = content.find('.cards-tech-parameters');
                                            var cardTechParamsItems = cardTechParamsBlock.find('.cards-list .card-item');

                                            var continueButton = cardTechParamsBlock.find('.btn-red.continue');

                                            var isCardOwnerValid = false;
                                            var isCompanyValid = false;

                                            var selectedCardOwnerType = cardTechParamsItems.closest('.card-item').find('.card-owner-type').find('[id$="selectDriverNameOrCarNumber"]').attr('class');
                                            var cardOwnerInput = cardTechParamsBlock.find('.cards-list .card-item .card-param-value input');
                                            if(cardOwnerInput.val() != '' && cardOwnerInput.val() != undefined){
                                                if(!(selectedCardOwnerType == undefined)){
                                                    if (type == 'driver-name') {
                                                        isCardOwnerValid = validateDriverName(cardOwnerInput, new RegExp(regs.embossingLetters));
                                                    } else if(selectedCardOwnerType.toLowerCase() === 'car-number') {
                                                        isCardOwnerValid = validateCarNumber(cardOwnerInput, new RegExp(regs.carNumberFormat_DE));
                                                    }
                                                }
                                            }
                                        }

                                        function changeTypeOfCar(typeofcar, index) {
                                            var finalClass = '.inputHiddenTypeOfCar' + index + ' input[type="hidden"]';
                                            if ($j(finalClass).val() != typeofcar) {
                                                $j(finalClass).val(typeofcar);

                                                $j('#pkw-type' + index).toggleClass('selected');
                                                $j('#lkw-type' + index).toggleClass('selected');
                                            }
                                        }
                                    </script>
                                    <style>
                                        .onoffswitch-inner:before {
                                            content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON ON']['LABEL'].Value__c }";
                                            padding-left: 13px;
                                            background-color: #EE3A43;
                                            color: #FFFFFF;
                                            text-align: left;
                                        }
                                        .onoffswitch-inner:after {
                                            content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON OFF']['LABEL'].Value__c }";
                                            padding-right: 8px;
                                            background-color: #EEEEEE;
                                            color: #505050;
                                            text-align: right;
                                        }
                                    </style>
                                    <div class="wrapper">
                                        <div class="cards-list">
                                            <apex:repeat value="{! finalCardsMap }" var="cardIndx">
                                                <div class="card-item">
                                                    <apex:outputPanel rendered="{! finalCardsMap[cardIndx].displayTechnicalParamsBlock = false }">
                                                        <div class="row">
                                                            <div class="{! IF(finalCardsMap[cardIndx].techParamsIsConfigurated = true, 'col-lg-6', 'col-lg-12') }">
                                                                <apex:outputPanel >
                                                                    <apex:outputPanel styleClass="b-block-header inline-block" layout="block">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['CARD #']['HEADING'].Value__c } {! cardIndx }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel styleClass="edit">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        <apex:commandLink action="{! editTechnicalParameters }" onComplete="setEvents_cardsTechnicalParams(); onPageRender(); checkCardTechParams();" onclick="analytics_onClickButtonSendUI('click','button: card_change', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');"  styleClass="font-11" reRender="cardTechParams, orderDetails, messageBlock, modalError, onlineChatBlock" status="splashStatus">
                                                                        {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['EDIT BUTTON']['BUTTON NAME'].Value__c }
                                                                            <apex:param name="cardindex" value="{! cardIndx }"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="b-desc-done" layout="block" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                    {! IF(finalCardsMap[cardIndx].categoryCard == 'Shop related products', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, '')))) }{!IF(finalCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(finalCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}<br/><br/>
                                                                    {! IF(finalCardsMap[cardIndx].selectedTypeOfCar = 'PKW', stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['PKW TYPE TEASER'].Value__c + ',', stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['LKW TYPE TEASER'].Value__c + ',') }<br/>
                                                                    {! IF(finalCardsMap[cardIndx].needOdometerOptions = true, stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['AGREE ODOMETER TEASER'].Value__c, stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['DISAGREE ODOMETER TEASER'].Value__c) }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <apex:outputPanel rendered="{! finalCardsMap[cardIndx].techParamsIsConfigurated = true }">
                                                                <div class="col-lg-6">
                                                                    <div class="card-badge ym-hide-content {! IF(cardIndx > 1, 'additional-card','') }">
                                                                        <div class="card-badge-details">
                                                                            <div class="badge-card-company">
                                                                                <apex:outputText value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['TYPE OF CARD']['VALUE'].Value__c }"/>
                                                                            </div>
                                                                            <div class="badge-card-number">
                                                                                <apex:outputText value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['CARD NUMBER']['NUMBER'].Value__c }"/>
                                                                            </div>
                                                                            <div class="badge-customer-info">
                                                                                <apex:outputText value="{! finalCardsMap[cardIndx].driverNameOrCarNumberInputValue }"/>
                                                                            </div>
                                                                            <div class="badge-company">
                                                                                <apex:outputText value="{! finalCardsMap[cardIndx].companyNameInputValue }"/>
                                                                            </div>
                                                                            <div class="badge-emit-date">
                                                                                <apex:outputText value="{! finalCardsMap[cardIndx].emitDate }"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{! finalCardsMap[cardIndx].displayTechnicalParamsBlock = true }">
                                                        <div class="card-item">
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <apex:outputPanel layout="block" styleClass="margin-top: -20px;">
                                                                        <apex:outputPanel layout="block" styleClass="b-block-header">{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['TECHNICAL PARAM HEADING']['HEADING'].Value__c }&nbsp;{! cardIndx }</apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="b-desc" style="margin: 10px 30px 20px 30px">
                                                                        {!  IF(finalCardsMap[cardIndx].categoryCard == 'Shop related products', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 4'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, '')))) }{!IF(finalCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(finalCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel rendered="{! LEN(account.Name) > 25 }">
                                                                <div class="row">
                                                                    <div class="col-lg-12">
                                                                        <apex:outputPanel layout="block">
                                                                            <apex:outputPanel layout="block" styleClass="b-row-header" style="margin-bottom: 15px;">
                                                                            {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['WHAT TO EMBOSS HEADING']['HEADING'].Value__c }{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['WHAT TO EMBOSS HEADING']['-?-'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <div class="row form-group">
                                                                <apex:outputPanel id="cardCompanyName" layout="block" styleClass="ym-hide-content">
                                                                    <apex:outputPanel styleClass="card-param company-name-label" rendered="{! LEN(account.Name) > 25 }" layout="block">
                                                                        <div class="col-lg-4">
                                                                            <apex:outputPanel styleClass="f-label inline-block">
                                                                                <apex:outputPanel layout="block">
                                                                                    {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['LABEL 1'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block">
                                                                                    {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['LABEL 2'].Value__c }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = true }">
                                                                                    <span class="f-required">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                        <apex:outputPanel id="company-name-input">
                                                                            <div class="col-lg-7">
                                                                                <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = true }">
                                                                                    <div class="company-name">
                                                                                        <div class="len-company-name font-11"></div>
                                                                                        <apex:inputText id="companyName" onblur="analytics_onBlurInputSendUI($j(this), 'companyName', 'UI_07_Tankkarte_Step_7_Config_CardsPerson')" onkeyup="sendErrorCardCompanyName();" value="{! finalCardsMap[cardIndx].companyNameInputValue }" styleClass="inline-block form-control required input ym-hide-content" maxLength="25" style="width: 82%; text-transform: uppercase;"/>
                                                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-company-card-name" style="width: 82%"><div class="i-error">!</div>
                                                                                                {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-12" style="margin-top: 4px; width: 82%">
                                                                                                {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['REMARK'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <script>
                                                                                            function sendErrorCardCompanyName() {
                                                                                                if ($j('.invalid-feedback-company-card-name').is(':visible')) {
                                                                                                    analytics_onErrorSendUI('option_CardCompanyNameNotFilled', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');
                                                                                                }
                                                                                            }
                                                                                        </script>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = false}">
                                                                                    <apex:outputPanel layout="block" styleClass="company-name-static">{! finalCardsMap[cardIndx].companyNameInputValue }</apex:outputPanel>
                                                                                    <apex:outputPanel styleClass="edit">
                                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                        <apex:commandLink action="{! editCompanyName }" onclick="analytics_onClickButtonSendUI('click','button: cardCompany_change', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');" onComplete="setEvents_cardsTechnicalParams(); onPageRender();" styleClass="font-11" reRender="company-name-input, messageBlock, modalError" status="splashStatus">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['EDIT BUTTON']['BUTTON NAME'].Value__c }
                                                                                            <apex:param name="cardindex" value="{! cardIndx }"/>
                                                                                        </apex:commandLink>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
<!--                                                             <div class="row">
                                                                <div class="col-lg-12">
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:outputPanel styleClass="b-row-header" layout="block" style="{! IF(LEN(account.Name) <= 25, 'margin-top: 0', '') }">
                                                                            {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['WHAT CARD TYPE HEADING']['HEADING'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div> -->
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="b-switch-block">
                                                                        <div class="col-lg-2">
                                                                            <div class="onoffswitch outside">
                                                                                <apex:inputCheckbox value="{! finalCardsMap[cardIndx].needOdometerOptions }" onclick="analytics_onClickCheckboxSendUI($j(this), 'distanceOpt', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');" styleClass="onoffswitch-checkbox" id="switchOdometerOptions"/>
                                                                                <apex:outputLabel styleClass="onoffswitch-label" for="switchOdometerOptions">
                                                                                    <span class="onoffswitch-inner"></span>
                                                                                    <span class="onoffswitch-switch"></span>
                                                                                </apex:outputLabel>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-10">
                                                                            <div class="switch-info">
                                                                                <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                                    {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['LABEL'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                     data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                                <apex:outputPanel layout="block" styleClass="s-desc">
                                                                                    {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['REMARK'].Value__c }
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row form-group">
                                                                <div class="buttons center-block" style="width: 88%">
                                                                    <div class="col-lg-3 pull-right">
                                                                        <apex:commandLink id="save-param-btn-id" value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['SAVE PARAMS BUTTON']['BUTTON NAME'].Value__c }"
                                                                                          onclick="analytics_onClickButtonSendUI('click','button: card_save', 'UI_07_Tankkarte_Step_7_Config_CardsPerson'); return validateCardsTechParams('{! cardIndx }');"
                                                                                          styleClass="btn btn-red btn-done" style="margin-top: 15px">
                                                                        </apex:commandLink>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                                <div class="b-card-splitter"></div>
                                            </apex:repeat>
                                            <apex:actionFunction name="saveTechParamForSingleCard" action="{! saveTechParamForSingleCard }"
                                                                 onComplete="setEvents_cardsTechnicalParams(); onPageRender(); return false;"
                                                                 reRender="cardTechParams, goToPaymentOptionsBtn, orderDetails, messageBlock, modalError" status="splashStatus">
                                                <apex:param name="cardindex" value="" assignTo="{! cardindex }"/>
                                            </apex:actionFunction>
                                        </div>
                                        <div class="row">
                                            <div class="buttons center-block" style="width: 91%; margin-top: -5px;">
                                                <div class="col-lg-3">
                                                    <apex:commandButton action="{! backToSpecialOffers }"
                                                        onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');"
                                                        onComplete="setCollapseBlockEvent();isOffersPage = true;"
                                                        value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                        styleClass="btn btn-gray back-button-cls"
                                                        style="width: 100%"
                                                        reRender="formBlock, orderDetails, modalError, onlineChatBlock"
                                                        status="splashStatus"/>
                                                </div>
                                                <div class="col-lg-3 pull-right">
                                                    <apex:commandButton id="goToPaymentOptionsBtn" value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }"
                                                                        action="{! goToAdditionalParams }" onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');" onComplete="setEvents_vatNumber(); setEvents_additional(); onPageRender();"
                                                                        disabled="{! continueButtonIsDisabled }"
                                                                        reRender="stepList, formBlock, orderDetails, modalError, onlineChatBlock"
                                                                        styleClass="btn btn-red continue" status="splashStatus"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        if (isTechnicalParameters == null) {
                                            isTechnicalParameters = true;
                                        }

                                        if ('{! activeCardConfigTab }' == 'diff' && isTechnicalParameters) {
                                            analytics_CardsPersonOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray);
                                            isTechnicalParameters = false;
                                        } else
                                        if ('{! activeCardConfigTab }' == 'same' && isTechnicalParameters) {
                                            analytics_CardsPersonOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray);
                                            isTechnicalParameters = false;
                                        }
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP ADDITIONAL -->
                                <apex:outputPanel layout="block" id="additional-page" styleClass="additional-page" rendered="{! activeStep == 3 }">
                                    <apex:outputPanel layout="block" id="additionalInfo" styleClass="additional-info" rendered="{! activeStep == 3 }">
                                        <style>
                                            .onoffswitch-inner:before {
                                                content: "{! stepPagesMap['ADDITIONAL'].elements['BUTTON ON']['LABEL'].Value__c }";
                                                padding-left: 13px;
                                                background-color: #EE3A43;
                                                color: #FFFFFF;
                                                text-align: left;
                                            }
                                            .onoffswitch-inner:after {
                                                content: "{! stepPagesMap['ADDITIONAL'].elements['BUTTON OFF']['LABEL'].Value__c }";
                                                padding-right: 8px;
                                                background-color: #EEEEEE;
                                                color: #505050;
                                                text-align: right;
                                            }
                                        </style>
                                        <script>
                                            if (paymentMethodAnalytics == null && isDepositAnalytics == null) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }

                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                            }

                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                            </apex:repeat>
                                        </script>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-grey-block">
                                                        <div class="row">
                                                            <apex:outputPanel layout="block" styleClass="b-block-header">
                                                                {! stepPagesMap['ADDITIONAL'].elements['CO2 HEADING']['HEADING VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="b-row-header">
                                                                {! stepPagesMap['ADDITIONAL'].elements['CO2 SUBHEADING']['VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-6">
                                                                <apex:outputPanel layout="block" styleClass="b-text">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['CO2 DESCRIPTION']['VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <apex:outputPanel layout="block" styleClass="b-text-img" >
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'eco1.png')}" style="width: 260px"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="agree">
                                                                    <div class="form-check">
                                                                        <div class="checkbox checkbox-red additional-co2">
                                                                            <apex:inputCheckbox value="{! stepPagesMap['ADDITIONAL'].fields['CO2 TAKE CARE'].elementItemsMap['VALUE'].Value__c }"
                                                                                                styleClass="form-check-input co2takecareCheckbox" id="checkboxCare1" onclick="analytics_onClickCheckboxSendUI($j(this), 'co2', 'UI_08_Tankkarte_Step_8_Additional')"/>
                                                                            <apex:outputLabel value="{! stepPagesMap['ADDITIONAL'].fields['CO2 TAKE CARE'].elementItemsMap['LABEL'].Value__c }"
                                                                                              styleClass="form-check-label" for="checkboxCare1"/>
                                                                        </div>
                                                                        <div class="text">
                                                                            <apex:outputPanel layout="block" styleClass="text-muted">
                                                                                {! stepPagesMap['ADDITIONAL'].fields['CO2 TAKE CARE'].elementItemsMap['SUBLABEL'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- DIRECT DEBIT NO DEPOSIT / BANK TRANSFER NO DEPOSIT -->
                                            <apex:outputPanel rendered="{! AND(OR(opportunity.Zahlungsart__c == 'Lastschrift', opportunity.Zahlungsart__c == 'Banküberweisung'), opportunity.Security_Amount_To_Pay__c == null) }">
                                                <div class="row" style="margin-top: -34px;">
                                                    <div class="col-lg-12">
                                                        <div class="b-desc payment-all-invoices" style="margin-top: 12px;">
                                                            {! stepPagesMap['ADDITIONAL'].elements['FORMAT INFO']['TEXT'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="b-switch-block" style="height: 125px;">
                                                            <div class="col-lg-2">
                                                                <div class="onoffswitch invoice" id="invoiceSwitcher">
                                                                    <apex:inputCheckbox value="{! stepPagesMap['ADDITIONAL'].fields['PAPER INVOICE'].elementItemsMap['VALUE'].Value__c }" styleClass="onoffswitch-checkbox" id="invoiceSwitcher" onclick="analytics_onClickCheckboxSendUI($j(this), 'paperCont', 'UI_09_Tankkarte_Step_9_Payment_Details');"/>
                                                                    <apex:outputLabel styleClass="onoffswitch-label" for="invoiceSwitcher">
                                                                        <span class="onoffswitch-inner"></span>
                                                                        <span class="onoffswitch-switch"></span>
                                                                    </apex:outputLabel>
                                                                </div>
                                                                <apex:actionFunction name="changeInvoiceSwitchDirectDebit" reRender=""/>
                                                            </div>
                                                            <div class="col-lg-10">
                                                                <div class="switch-info">
                                                                    <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                        {! stepPagesMap['ADDITIONAL'].fields['PAPER INVOICE'].elementItemsMap['LABEL'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="s-desc">
                                                                        {! stepPagesMap['ADDITIONAL'].fields['PAPER INVOICE'].elementItemsMap['LABEL2'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="s-add">
                                                                        {! stepPagesMap['ADDITIONAL'].fields['PAPER INVOICE'].elementItemsMap['LABEL3'].Value__c }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="checkbox checkbox-red additional-co2" style="margin-right: 20px; margin-bottom: 15px;">
                                                            <apex:inputCheckbox id="checkboxTC"
                                                                value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['TC AGREEMENT CHECKBOX VALUE'].Value__c }"
                                                                styleClass="form-check-input additionalTC"
                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'servAreement', 'UI_08_Tankkarte_Step_8_Additional')"/>
                                                            <apex:outputLabel styleClass="form-check-label"
                                                                for="checkboxTC">
                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['TC AGREEMENT CHECKBOX LABEL PART 1'].Value__c }
                                                                <apex:commandLink action="{! showTermConditionsModal }"
                                                                    onclick="scrollDisableControl('disable');
                                                                             analytics_onClickButtonSendUI('show','popup', 'UI_08_Tankkarte_Step_8_Additional');"
                                                                    styleClass="form-check-label"
                                                                    reRender="modalTermConditions"
                                                                    status="splashStatus">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['TC AGREEMENT CHECKBOX LABEL URL'].Value__c }
                                                                </apex:commandLink>
                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['TC AGREEMENT CHECKBOX LABEL PART 2'].Value__c }
                                                            </apex:outputLabel>
                                                        </div>
                                                        <div class="checkbox checkbox-red additional-co2" style="margin-right: 20px;">
                                                            <apex:inputCheckbox id="checkboxBehalfOfCompany"
                                                                value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['BEHALF OF COMPANY CHECKBOX VALUE'].Value__c }"
                                                                styleClass="form-check-input additionalBehalfOfCompany"
                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'testSystem', 'UI_08_Tankkarte_Step_8_Additional')"/>
                                                            <apex:outputLabel value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['BEHALF OF COMPANY CHECKBOX LABEL PART 1'].Value__c } {! selectedAvailableCompanyCreditScoring.name } {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['BEHALF OF COMPANY CHECKBOX LABEL PART 2'].Value__c }"
                                                                styleClass="form-check-label"
                                                                for="checkboxBehalfOfCompany"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <div class="b-splitter" style="margin-top: 20px; margin-bottom: 40px;"></div>

                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3">
                                                        <apex:commandButton action="{! backToTechnicalParams }"
                                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_08_Tankkarte_Step_8_Additional');"
                                                                            oncomplete="setEvents_cardsTechnicalParams(); onPageRender();"
                                                                            value="{! stepPagesMap['ADDITIONAL'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                                            styleClass="btn btn-gray btnContinueToPaymentOptions back-button-cls"
                                                                            status="splashStatus"
                                                                            reRender="stepList, formBlock, orderDetails, modalError, onlineChatBlock"/>
                                                    </div>
                                                    <div class="col-lg-4 pull-right">
                                                        <apex:commandButton value="{! stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-ORDER-'].Value__c } {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-CARDS-'].Value__c, stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-CARD-'].Value__c) }"
                                                                            action="{! goToPaymentOptions }"
                                                                            oncomplete="setEvents_directDebitDeposit(); setEvents_directDebit(); setEvents_bankTransferDebit(); setEvents_bankTransferNoDeposit(); setEventsMustRemoveBlock(); onPageRender();"
                                                                            onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_08_Tankkarte_Step_8_Additional');"
                                                                            styleClass="btn btn-red continue" reRender="stepList, formBlock, modalError, paymentFormToSend, onlineChatBlock" 
                                                                            status="splashStatus" 
                                                                            style="{! IF(countryParam == 'chfr', 'min-width: 220px;', '')}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <script type="text/javascript">
                                        $j('.btnContinueToPaymentOptions').on( "click", function() {
                                            analytics_AdditionalOnSelect(selectedOfferAnalytics, $j('.co2takecareCheckbox').is(':checked'));
                                        });

                                        if ('{! activeCardConfigTab }' == 'diff') {
                                            analytics_AdditionalOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray);
                                        } else
                                        if ('{! activeCardConfigTab }' == 'same') {
                                            analytics_AdditionalOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray);
                                        }
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP PAYMENT OPTIONS DIRECT DEBIT DEPOSIT PAYMENT-->
                                <!-- <apex:outputPanel layout="block" id="directDebitDeposit" styleClass="direct-debit-deposit" rendered="{! AND(activeStep == 4, activeSubStep == 'DirectDebitDeposit')}">
                                    <script type="text/javascript">
                                        if (paymentMethodAnalytics == null && isDepositAnalytics == null) {
                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                            isDepositAnalytics = {! IF(deposit != null && deposit != 0, true, false) };
                                        }

                                        sameCardsArray = new Array();
                                        for (var i = 1; i <= {! numberOfCards }; i++) {
                                            sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                        }

                                        diffCardsArray = new Array();
                                        <apex:variable var="index" value="{!1}"/>
                                        <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                            diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                        </apex:repeat>
                                    </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT HEADING']['VALUE'].Value__c }
                                                </apex:outputPanel>
                                                <div class="row">
                                                    <div class="col-lg-10">
                                                        <apex:outputPanel layout="block" styleClass="b-desc">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT DESCRIPTION']['VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="b-grey-block" style="margin-top:20px;">
                                                    <apex:outputPanel layout="block" styleClass="b-row-header" style="margin: 15px 15px 0px 24px;">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['AMOUNT TO BE PAID']['LABEL'].Value__c } {! stepPagesMap['PAYMENT OPTIONS'].elements['AMOUNT TO BE PAID']['VALUE'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                                    </apex:outputPanel>
                                                    <div class="payment-pay-deposit">
                                                        <div class="row">
                                                            <div class="b-row-header" style="margin: 25px 0px 0px 15px;" >{! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT CARDS HEADING']['VALUE'].Value__c }</div>
                                                                <div class="payment-description-text">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT CARDS HEADING']['DESCRIPTION'].Value__c }
                                                                </div>
                                                                <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].options }" var="param">
                                                                    <div class="col-lg-4">
                                                                        <div class="radio radio-red">
                                                                            <apex:commandLink value="{! param.value }" action="{! changePaymentMethod }" onComplete="setEvents_directDebitDeposit(); onPageRender(); analytics_onClickRadioSendUI('payDeposit_{! selectedPaymentMethod }', 'UI_10_Tankkarte_Step_10_Payment_Deposit');" styleClass="category-link {! IF(selectedPaymentMethod == param.value, 'active', '') }" reRender="directDebitDeposit, paymentFormToSend, modalError" status="splashStatus">
                                                                                <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                                            </apex:commandLink>
                                                                            <apex:outputPanel styleClass="pay-logo">
                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                                            height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                                            width="{!  stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Width'].Value__c  }" />
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:repeat>
                                                            </div>
                                                        <div class="row">
                                                            <div class="b-row-header" style="margin: 25px 0px 0px 15px;" >{! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['VALUE'].Value__c }</div>
                                                            <div class="payment-description-text">{! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['DESCRIPTION'].Value__c }</div>
                                                            <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].options }" var="param">
                                                                <div class="col-lg-4">
                                                                    <div class="radio radio-red">
                                                                        <apex:commandLink value="{! param.value }" action="{! changePaymentMethod }" onComplete="setEvents_directDebitDeposit(); onPageRender(); analytics_onClickRadioSendUI('payDeposit_{! selectedPaymentMethod }', 'UI_10_Tankkarte_Step_10_Payment_Deposit');" styleClass="category-link {! IF(selectedPaymentMethod == param.value, 'active', '') }" reRender="directDebitDeposit, paymentFormToSend, modalError" status="splashStatus">
                                                                            <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                                        </apex:commandLink>
                                                                        <apex:outputPanel styleClass="pay-logo">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                                        height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                                        width="{!  stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Width'].Value__c  }" />
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </apex:repeat>
                                                        </div>
                                                    </div>
                                                    <div class="b-splitter" style="margin: 30px 25px 20px 25px;"></div>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="col-lg-8">
                                                                <div class="font-11 payment-deposit-footer" >
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT FOOTER']['VALUE'].Value__c }
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-4">
                                                                <div><apex:image url="{!URLFOR($Resource.e2e_images, "ingenico.png" )}" height="55px" width="130px"/> </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="margin-top: 20px;">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['VALUE'].Value__c }"
                                                                            styleClass="form-check-input depositAgreement" id="checkboxDirectDebitDeposit" onclick="analytics_onClickCheckboxSendUI($j(this), 'agreeDeposit', 'UI_10_Tankkarte_Step_10_Payment_Deposit');"/>
                                                        <apex:outputLabel styleClass="form-check-label" for="checkboxDirectDebitDeposit">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 1'].Value__c }
                                                            <apex:commandLink styleClass="form-check-label"
                                                                              onclick="analytics_onClickButtonSendUI('show','popup', 'UI_10_Tankkarte_Step_10_Payment_Deposit');
                                                                                       scrollDisableControl('disable');
                                                                                       showDepositAgreement();
                                                                                       return false;">{!stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['DOWNLOAD URL LABEL'].Value__c}</apex:commandLink>
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 2'].Value__c }
                                                                {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 3'].Value__c }
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="margin: 20px 20px 10px 0;">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['VALUE'].Value__c }"
                                                                            styleClass="form-check-input paymentOptionsDecision" id="DirectDebitDecision" onclick="analytics_onClickCheckboxSendUI($j(this), 'testSystem', 'UI_10_Tankkarte_Step_10_Payment_Deposit');"/>
                                                        <apex:outputLabel value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 1'].Value__c } {! selectedAvailableCompanyCreditScoring.name } {! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 2'].Value__c }"
                                                                          styleClass="form-check-label" for="DirectDebitDecision"/>
                                                    </div>
                                                </div>
                                                <div class="form-check">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['VALUE'].Value__c }"
                                                                            styleClass="form-check-input paymentOptionsTC" id="DirectDebitTC" onclick="analytics_onClickCheckboxSendUI($j(this), 'servAreement', 'UI_10_Tankkarte_Step_10_Payment_Deposit');"/>
                                                        <apex:outputLabel styleClass="form-check-label" for="DirectDebitTC">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 1'].Value__c }
                                                            <apex:commandLink styleClass="form-check-label"
                                                                              onclick="analytics_onClickButtonSendUI('show','popup', 'UI_10_Tankkarte_Step_10_Payment_Deposit');
                                                                                       scrollDisableControl('disable');
                                                                                       showTermConditions();
                                                                                       return false;"> {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL URL'].Value__c } </apex:commandLink>
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 2'].Value__c }
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>
                                                <div class="b-splitter" style="margin-top:30px;" ></div>
                                            </div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 87%">
                                                    <div class="col-lg-3">
                                                        <apex:commandButton action="{! backToAdditionalParams }"
                                                            onclick="analytics_onClickButtonSendUI('click', 'button: back', 'UI_10_Tankkarte_Step_10_Payment_Deposit');"
                                                            oncomplete="setEvents_additional(); onPageRender(); onPageLoad();"
                                                            value="{! stepPagesMap['PAYMENT OPTIONS'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            style="width: 100%"
                                                            reRender="stepList, formBlock, modalError, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-5 pull-right">
                                                        <apex:commandButton value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL'].Value__c }"
                                                                            onclick="startSplash();analytics_onClickButtonSendUI('click', 'button: next', 'UI_10_Tankkarte_Step_10_Payment_Deposit');" action="{! savePaymentTransaction }"
                                                                            styleClass="btn btn-red continue" reRender="formBlock, modalError"
                                                                            oncomplete="sendPaymentTypeToAnalytics(); startPayment('direct-debit-deposit');"/>
                                                        <script type="text/javascript">
                                                            function sendPaymentTypeToAnalytics() {
                                                                analytics_PaymentDepositOnPay('{! selectedPaymentMethod }');
                                                            }
                                                        </script>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        if ('{! activeCardConfigTab }' == 'diff') {
                                            analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray);
                                        } else
                                        if ('{! activeCardConfigTab }' == 'same') {
                                            analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray);
                                        }
                                    </script>
                                </apex:outputPanel> -->

                                <!-- STEP PAYMENT OPTIONS BANK TRANSFER DEPOSIT-->
                                <!-- <apex:outputPanel layout="block" id="bankTransfer" styleClass="payment-bank-transfer" rendered="{! IF(AND(activeStep == 4, activeSubStep == 'BankTransferDeposit'), true, false)}">
                                    <style>
                                        .onoffswitch-inner:before {
                                            content: "{! stepPagesMap['PAYMENT OPTIONS'].elements['BUTTON ON']['LABEL'].Value__c }";
                                            padding-left: 13px;
                                            background-color: #EE3A43;
                                            color: #FFFFFF;
                                            text-align: left;
                                        }
                                        .onoffswitch-inner:after {
                                            content: "{! stepPagesMap['PAYMENT OPTIONS'].elements['BUTTON OFF']['LABEL'].Value__c }";
                                            padding-right: 8px;
                                            background-color: #EEEEEE;
                                            color: #505050;
                                            text-align: right;
                                        }
                                    </style>
                                    <script type="text/javascript">
                                        if (paymentMethodAnalytics == null && isDepositAnalytics == null ||
                                            paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                            isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                        }

                                        sameCardsArray = new Array();
                                        for (var i = 1; i <= {! numberOfCards }; i++) {
                                            sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                        }

                                        diffCardsArray = new Array();
                                        <apex:variable var="index" value="{!1}"/>
                                        <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                            diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                        </apex:repeat>
                                    </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['BANKTRANSFER HEADING']['VALUE'].Value__c }
                                                </apex:outputPanel>
                                                <div class="row">
                                                    <div class="billing-period-info block">
                                                        <div class="col-lg-3">
                                                            <apex:outputPanel layout="block" styleClass="f-label">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['LABEL'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="col-lg-6 col-lg-offset-1">
                                                            <apex:outputPanel layout="block" style="margin: 11px 0px;">
                                                                    {! IF (opportunity.Rechnungsperiode__c == '7',
                                                                            stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-WEEKLY-'].Value__c,
                                                                            IF (opportunity.Rechnungsperiode__c == '15',
                                                                                    stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-BIWEEKLY-'].Value__c,
                                                                                    IF (opportunity.Rechnungsperiode__c == '30',
                                                                                            stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-MONTHLY-'].Value__c,
                                                                                            ''))) }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="b-desc payment-all-invoices">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['FORMAT INFO']['TEXT'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="b-switch-block" style="height: 125px;">
                                            <div class="col-lg-2">
                                                <div class="onoffswitch invoice" id="invoiceSwitcherBankTransfer">
                                                    <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['VALUE'].Value__c }"
                                                                        onclick="analytics_onClickCheckboxSendUI($j(this), 'paperCont', 'UI_09_Tankkarte_Step_9_Payment_Details');"
                                                                        styleClass="onoffswitch-checkbox" id="switchInvoiceBankTransfer"/>
                                                    <apex:outputLabel styleClass="onoffswitch-label" for="switchInvoiceBankTransfer">
                                                        <span class="onoffswitch-inner"></span>
                                                        <span class="onoffswitch-switch"></span>
                                                    </apex:outputLabel>
                                                </div>
                                                <apex:actionFunction name="changeInvoiceSwitchBankTransfer" reRender=""/>
                                            </div>
                                            <div class="col-lg-10">
                                                <div class="switch-info">
                                                    <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="s-desc">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL2'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="s-add">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL3'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="b-grey-block">
                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 32px 45px 16px 24px;">
                                                {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT HEADING']['VALUE'].Value__c }
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="b-row-header" style="margin: 10px 24px 0px 24px;">
                                            {! stepPagesMap['PAYMENT OPTIONS'].elements['AMOUNT TO BE PAID']['LABEL'].Value__c } {! stepPagesMap['PAYMENT OPTIONS'].elements['AMOUNT TO BE PAID']['VALUE'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                            </apex:outputPanel>
                                            <div class="payment-pay-deposit">
                                                <div class="font-15" style="margin: 11px 0px;">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['AMOUNT TO BE PAID']['DESCRIPTION'].Value__c }
                                                </div>
                                                    <div class="row">
                                                        <div class="b-row-header" style="margin: 25px 0px 0px 15px;" >{! stepPagesMap['PAYMENT OPTIONS'].elements['BT DEPOSIT CARDS HEADING']['VALUE'].Value__c }</div>
                                                        <div class="payment-description-text">{! stepPagesMap['PAYMENT OPTIONS'].elements['BT DEPOSIT CARDS HEADING']['DESCRIPTION'].Value__c }</div>
                                                        <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].options }" var="param">
                                                            <div class="col-lg-4">
                                                                <div class="radio radio-red">
                                                                    <apex:commandLink value="{! param.value }" action="{! changePaymentMethod }" onComplete="setEvents_bankTransferDebit(); onPageRender(); analytics_onClickRadioSendUI('payDeposit_{! selectedPaymentMethod }', 'UI_10_Tankkarte_Step_10_Payment_Deposit');" styleClass="category-link {! IF(selectedPaymentMethod == param.value, 'active', '') }" reRender="bankTransfer, paymentFormToSend, modalError" status="splashStatus">
                                                                        <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                                    </apex:commandLink>
                                                                    <apex:outputPanel styleClass="pay-logo">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                                    height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                                    width="{!  stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Width'].Value__c  }" />
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </apex:repeat>
                                                    </div>
                                                <div class="row">
                                                    <div class="b-row-header" style="margin: 25px 0px 0px 15px;" >
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['VALUE'].Value__c }
                                                    </div>
                                                    <div class="payment-description-text">{! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['DESCRIPTION'].Value__c }</div>
                                                    <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].options }" var="param">
                                                        <div class="col-lg-4">
                                                            <div class="radio radio-red">
                                                                <apex:commandLink value="{! param.value }" action="{! changePaymentMethod }" onComplete="setEvents_bankTransferDebit(); onPageRender(); analytics_onClickRadioSendUI('payDeposit_{! selectedPaymentMethod }', 'UI_10_Tankkarte_Step_10_Payment_Deposit');" styleClass="category-link {! IF(selectedPaymentMethod == param.value, 'active', '') }" reRender="bankTransfer, paymentFormToSend, modalError" status="splashStatus">
                                                                    <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                                </apex:commandLink>
                                                                <apex:outputPanel styleClass="pay-logo">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                                height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                                width="{!  stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Width'].Value__c  }" />
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </apex:repeat>
                                                </div>
                                            </div>
                                            <div class="b-splitter" style="margin: 30px 25px 20px 25px;"></div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="col-lg-8">
                                                        <div class="font-11 payment-deposit-footer" >
                                                            {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT FOOTER']['VALUE'].Value__c }
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div><apex:image url="{!URLFOR($Resource.e2e_images, "ingenico.png" )}" height="45px" width="130px"/> </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-check" style="margin: 20px 20px 10px 0;">
                                            <div class="checkbox checkbox-red">
                                                <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['VALUE'].Value__c }"
                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), 'testSystem', 'UI_09_Tankkarte_Step_9_Payment_Details');"
                                                                    styleClass="form-check-input" id="checkboxBankTransfer1"/>
                                                <apex:outputLabel styleClass="form-check-label" for="checkboxBankTransfer1"
                                                                  value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 1'].Value__c } {! selectedAvailableCompanyCreditScoring.name } {! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 2'].Value__c }"/>
                                            </div>
                                        </div>
                                        <div class="form-check" style="margin: 0 20px 20px 0;">
                                            <div class="checkbox checkbox-red">
                                                <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['VALUE'].Value__c }"
                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), 'servAreement', 'UI_09_Tankkarte_Step_9_Payment_Details');"
                                                                    styleClass="form-check-input" id="checkboxBankTransfer2"/>

                                                <apex:outputLabel styleClass="form-check-label" for="checkboxBankTransfer2">
                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 1'].Value__c }
                                                    <apex:commandLink value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL URL'].Value__c }"
                                                                      styleClass="form-check-label" style="margin-left: 5px"
                                                                      onclick="analytics_onClickButtonSendUI('show','popup', 'UI_09_Tankkarte_Step_9_Payment_Details');
                                                                               showTermConditions();
                                                                               scrollDisableControl('disable');
                                                                               return false;"/>
                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 2'].Value__c }
                                                </apex:outputLabel>
                                            </div>
                                        </div>
                                        <div class="form-check" style="margin-right: 20px;">
                                            <div class="checkbox checkbox-red">
                                                <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['VALUE'].Value__c }"
                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), 'agreeDeposit', 'UI_09_Tankkarte_Step_9_Payment_Details');"
                                                                    styleClass="form-check-input" id="checkboxBankTransfer3"/>
                                                <apex:outputLabel styleClass="form-check-label" for="checkboxBankTransfer3">
                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 1'].Value__c }
                                                    <apex:commandLink styleClass="form-check-label"
                                                        style="margin-left: 5px;"
                                                        onclick="analytics_onClickButtonSendUI('show','popup', 'UI_09_Tankkarte_Step_9_Payment_Details');
                                                                 showDepositAgreement();
                                                                 scrollDisableControl('disable');
                                                                 return false;">
                                                        {!stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['DOWNLOAD URL LABEL'].Value__c}
                                                    </apex:commandLink>
                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 2'].Value__c }
                                                    {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 3'].Value__c }
                                                </apex:outputLabel>
                                            </div>
                                        </div>
                                        <div class="b-splitter" style="margin-top:30px;"></div>
                                        <div class="row">
                                            <div class="buttons center-block" style="width: 91%">
                                                <div class="col-lg-3">
                                                    <apex:commandButton action="{! backToAdditionalParams }"
                                                        onclick="analytics_onClickButtonSendUI('click', 'button: back', 'UI_09_Tankkarte_Step_9_Payment_Details');"
                                                        oncomplete="setEvents_additional(); onPageRender(); onPageLoad();"
                                                        value="{! stepPagesMap['PAYMENT OPTIONS'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                        styleClass="btn btn-gray back-button-cls"
                                                        reRender="stepList, formBlock, modalError, onlineChatBlock"
                                                        status="splashStatus"/>
                                                </div>
                                                <div class="col-lg-5 pull-right">
                                                    <apex:commandButton value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL'].Value__c }" onclick="startPayment('payment-bank-transfer'); analytics_onClickButtonSendUI('click', 'button: next', 'UI_09_Tankkarte_Step_9_Payment_Details');" action="{! savePaymentTransaction }" styleClass="btn btn-red continue" reRender="stepList, formBlock, modalError, onlineChatBlock" status="splashStatus"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        if ('{! activeCardConfigTab }' == 'diff') {
                                            analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray);
                                        } else if ('{! activeCardConfigTab }' == 'same') {
                                            analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray);
                                        }
                                    </script>
                                </apex:outputPanel> -->

                                <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                <!-- STEP SELECT PAYMENT METHOD (DirectDebitDeposit/BankTransferDeposit)-->
                                <apex:outputPanel layout="block" id="paymentOptionsStep" styleClass="payment-options" rendered="{! AND(activeStep = 4, OR(activeSubStep = 'DirectDebitDeposit', activeSubStep = 'BankTransferDeposit'))}">
                                    <style>
                                        .onoffswitch-inner:before {
                                            content: "{! stepPagesMap['PAYMENT OPTIONS'].elements['BUTTON ON']['LABEL'].Value__c }";
                                            padding-left: 13px;
                                            background-color: #EE3A43;
                                            color: #FFFFFF;
                                            text-align: left;
                                        }
                                        .onoffswitch-inner:after {
                                            content: "{! stepPagesMap['PAYMENT OPTIONS'].elements['BUTTON OFF']['LABEL'].Value__c }";
                                            padding-right: 8px;
                                            background-color: #EEEEEE;
                                            color: #505050;
                                            text-align: right;
                                        }
                                    </style>
                                    <script type="text/javascript">
                                        activePageAnalytics = '{! activeSubStep }';
                                        if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                            isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                        }
                                        sameCardsArray = new Array();
                                        for (var i = 1; i <= {! numberOfCards }; i++) {
                                            sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                        }
                                        diffCardsArray = new Array();
                                        <apex:variable var="index" value="{!1}"/>
                                        <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                            diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                        </apex:repeat>
                                    </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="b-block-header">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT HEADING']['VALUE'].Value__c }
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-10">
                                                        <div class="b-desc">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT DESCRIPTION']['VALUE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="congratulations">
                                                    <div class="wrapper" style="width: 100%; margin-bottom: 0; padding-bottom: 0; box-shadow: none; margin-top: 0px;">
                                                        <div class="b-grey-block">
                                                            <div class="row">
                                                                <div class="b-description-block">
                                                                    <apex:outputPanel styleClass="b-col-header" layout="block">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 200px;', '') }">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                            <div class="i-helper inline-block" data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }" data-trigger="hover"
                                                                                 data-container="body" data-toggle="popover" data-placement="right" style="color:#1A1A1A;">?</div>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text" style="{! IF(countryParam == 'chfr', 'margin-left: 35px;', '') }">
                                                                            {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
<!--                                                                     <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel> -->
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="description-text">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <!-- PAY INFORMATION FOR PRINT -->
                                                            <div id="paymentInformation">
                                                                <div>
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                                                                </div>
                                                                <br/>
                                                                <div class="fleetcorblock">
                                                                    <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 1'].Value__c }</div>
                                                                    <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 2'].Value__c }</div>
                                                                    <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 3'].Value__c }</div>
                                                                    <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 4'].Value__c }</div>
                                                                </div>
                                                                <br/>
                                                                <apex:outputPanel layout="block" style="font-size: 24; margin-bottom: 20px;">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <!-- <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE VALUE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel> -->
                                                                <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT VALUE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                                    <apex:outputPanel style="display: inline-block; width: 250px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel >
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN VALUE'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="row">
                                                                <div class="buttons" style="margin: 0px 25px 48px 19px;">
                                                                    <div class="col-lg-6">
                                                                        <apex:outputPanel layout="inline">
                                                                            <a class="btn btn-xs payment-modal"
                                                                                href="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SAVE PAYMENT INFORMATION DOWNLOAD URL'].Value__c }"
                                                                                onclick="analytics_onClickButtonSendUI('click','download_doc','UI_11_Tankkarte_Step_11_Payment_Deposit');">
                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                            </a>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="inline">
                                                                            <a class="btn btn-xs print"
                                                                               style="margin-left: 10px;"
                                                                               onclick="analytics_onClickButtonSendUI('click','print_doc','UI_11_Tankkarte_Step_11_Payment_Deposit');
                                                                                        printPaymentInformation();">
                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                            </a>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <apex:outputPanel layout="block" styleClass="b-desc payment-all-invoices" style="margin-top: 15px;">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['FORMAT INFO']['TEXT'].Value__c }
                                                </apex:outputPanel>
                                                <div class="b-switch-block" style="height: 125px;">
                                                    <div class="col-lg-2">
                                                        <div class="onoffswitch invoice" id="invoiceSwitcherBankTransfer">
                                                            <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['VALUE'].Value__c }"
                                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'paperCont', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"
                                                                                styleClass="onoffswitch-checkbox" id="switchInvoiceBankTransfer"/>
                                                            <apex:outputLabel styleClass="onoffswitch-label" for="switchInvoiceBankTransfer">
                                                                <span class="onoffswitch-inner"></span>
                                                                <span class="onoffswitch-switch"></span>
                                                            </apex:outputLabel>
                                                        </div>
                                                        <apex:actionFunction name="changeInvoiceSwitchBankTransfer" reRender=""/>
                                                    </div>
                                                    <div class="col-lg-10">
                                                        <div class="switch-info">
                                                            <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="s-desc">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL2'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="s-add">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL3'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="margin-top: 20px;">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['VALUE'].Value__c }"
                                                                            styleClass="form-check-input depositAgreement" id="checkboxDirectDebitDeposit" onclick="analytics_onClickCheckboxSendUI($j(this), 'agreeDeposit', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"/>
                                                        <apex:outputLabel styleClass="form-check-label" for="checkboxDirectDebitDeposit">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 1'].Value__c }
                                                            <apex:commandLink styleClass="form-check-label"
                                                                              onclick="analytics_onClickButtonSendUI('show','popup', 'UI_11_Tankkarte_Step_11_Payment_Deposit');
                                                                                       scrollDisableControl('disable');
                                                                                       showDepositAgreement();
                                                                                       return false;">{!stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['DOWNLOAD URL LABEL'].Value__c}</apex:commandLink>
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 2'].Value__c }
                                                                {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['UNIT'].Value__c }
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 3'].Value__c }
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="margin: 10px 20px 10px 0;">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['VALUE'].Value__c }"
                                                                            styleClass="form-check-input paymentOptionsDecision" id="DirectDebitDecision" onclick="analytics_onClickCheckboxSendUI($j(this), 'testSystem', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"/>
                                                        <apex:outputLabel value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 1'].Value__c } {! selectedAvailableCompanyCreditScoring.name } {! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 2'].Value__c }"
                                                                          styleClass="form-check-label" for="DirectDebitDecision"/>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="margin: 0 20px 20px 0;">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['VALUE'].Value__c }"
                                                                            onclick="analytics_onClickCheckboxSendUI($j(this), 'servAreement', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"
                                                                            styleClass="form-check-input paymentOptionsTC" id="checkboxBankTransfer2"/>

                                                        <apex:outputLabel styleClass="form-check-label" for="checkboxBankTransfer2">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 1'].Value__c }
                                                            <apex:commandLink value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL URL'].Value__c }"
                                                                              styleClass="form-check-label" style="margin-left: 5px"
                                                                              onclick="analytics_onClickButtonSendUI('show','popup', 'UI_11_Tankkarte_Step_11_Payment_Deposit');
                                                                                       showTermConditions();
                                                                                       scrollDisableControl('disable');
                                                                                       return false;"/>
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 2'].Value__c }
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>

                                                <div class="b-splitter" style="margin-top:30px;" ></div>
                                            </div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 87%">
                                                    <div class="col-lg-3">
                                                        <apex:commandButton value="{! stepPagesMap['PAYMENT OPTIONS'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                            action="{! backToAdditionalParams }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"
                                                            oncomplete="setEvents_documents(); onPageRender();"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            reRender="formBlock, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-5 pull-right">
                                                        <apex:commandButton value="{! stepPagesMap['PAYMENT OPTIONS'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"
                                                            action="{! savePaymentTransaction }"
                                                            styleClass="btn btn-red continue"
                                                            reRender="formBlock, stepList, orderDetails, info-block, pageHeader"
                                                            status="splashStatus"
                                                            oncomplete="toViewport('top-heading-viewport'); onPageRender();"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        if ('{! activeCardConfigTab }' == 'diff') {
                                            analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                        } else
                                        if ('{! activeCardConfigTab }' == 'same') {
                                            analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                        }
                                    </script>
                                </apex:outputPanel>

                                <!-- STEP CONGRATULATIONS -->
                                <apex:outputPanel layout="block" id="congratulations" styleClass="congratulations" rendered="{! AND(activeStep = 5, activeSubStep = 'Congratulations') }">
                                    <script type="text/javascript">
                                        if (paymentMethodAnalytics == null && isDepositAnalytics == null) {
                                            paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                            isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                        }

                                        sameCardsArray = new Array();
                                        for (var i = 1; i <= {! numberOfCards }; i++) {
                                            sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                        }

                                        diffCardsArray = new Array();
                                        <apex:variable var="index" value="{!1}"/>
                                        <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                            diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                        </apex:repeat>
                                    </script>
                                    <div class="wrapper ym-hide-content" style="margin-top: 5px;">
                                        <div class="row">
                                            <div class="col-lg-2 col-lg-offset-5">
                                                <apex:outputPanel layout="block" styleClass="end-logo center-block">
                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'tick2.png')}" styleClass="center-block"></apex:image>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-8 col-lg-offset-2">
                                                <apex:outputPanel layout="block" styleClass="b-header">
                                                    <!-- {! IF(paymentStatus = 'A', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND PAID'].Value__c, IF(opportunity.Security_To_Pay__c != 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c, IF(paymentStatus = 'E', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDER EXCEPTION'].Value__c, IF(OR(paymentStatus = 'D', paymentStatus = 'C'), stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND NOT PAID'].Value__c, '')))) } -->
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-8 col-lg-offset-2">
                                                <!-- Card are ordered. Deposit is successfully paid -->
                                                <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! paymentStatus = 'A'}">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName }{! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARD'].Value__c) } <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                    {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- Card are ordered. Deposit is not required -->
                                                <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! AND(opportunity.Security_To_Pay__c != 'Kaution', paymentStatus = null) }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName }{! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c) } <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                    {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- Deposit is not paid (CANCEL\DECLINE) -->
                                                <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! OR(paymentStatus = 'D', paymentStatus = 'C') }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName }{! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS'].Value__c) } <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                    {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- Deposit is not certainly paid (EXCEPTION) -->
                                                <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! paymentStatus = 'E' }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName }{! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARD'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARDS'].Value__c) } <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                    {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                                <!-- Card are ordered. Deposit is not required -->
                                                <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! AND(opportunity.Security_To_Pay__c != 'Kaution', paymentStatus = null) }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName }{! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c) } <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                    {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel>
                                                <!-- Deposit is not paid -->
                                                <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! OR(paymentStatus = 'D', paymentStatus = 'C', opportunity.E2E_payment_status__c = 'PAYMENT GATEWAY OFF') }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName }{! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c) } <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                    {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="info-address">
                                                    <apex:outputPanel >
                                                        {! selectedAvailableCompanyCreditScoring.street } {! selectedAvailableCompanyCreditScoring.housenumber }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel >{! IF(selectedAvailableCompanyCreditScoring.postcode != null, ', ' + selectedAvailableCompanyCreditScoring.postcode, '') }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel >{! IF(selectedAvailableCompanyCreditScoring.city != null, ', ' + selectedAvailableCompanyCreditScoring.city, '') }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel >{! IF(countryParam == 'chde', ', Schweiz', ', Suisse') }
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="font-15" rendered="{! countryParam == 'chde' }" style="text-align: center; margin-bottom: 18px;">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE'].Value__c } {! contact.Email } {! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE 2'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="font-15" rendered="{! countryParam == 'chfr' }" style="text-align: center; margin-bottom: 18px;">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE'].Value__c } {! contact.Email }{! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE 2'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <apex:outputPanel rendered="{! AND(opportunity.Security_To_Pay__c = 'Kaution', OR(paymentStatus = 'D', paymentStatus = 'C', paymentStatus = 'E')) }"> -->
                                    <apex:outputPanel rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="b-deposit-details">
                                                    <apex:outputPanel styleClass="b-block-header" layout="block">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['TOP HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <div class="row">
                                                        <div class="col-lg-7">
                                                            <apex:outputPanel styleClass="font-15" layout="block">
                                                                {! IF (opportunity.Zahlungsart__c = 'Banküberweisung', stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK TRANSFER DESCRIPTION BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DIRECT DEBIT DESCRIPTION BLOCK'].Value__c) }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-grey-block">
                                                <div class="row">
                                                    <div class="b-description-block">
                                                        <apex:outputPanel styleClass="b-col-header" layout="block">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }" data-trigger="hover"
                                                                     data-container="body" data-toggle="popover" data-placement="right" 
                                                                     style="color:#1A1A1A;">?</div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
<!--                                                         <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel> -->
                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="{! IF(countryParam == 'chfr', 'width: 275px;', '') }">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="description-text">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <!-- PAY INFORMATION FOR PRINT -->
                                                <div id="paymentInformation">
                                                    <div>
                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                                                    </div>
                                                    <br/>
                                                    <div class="fleetcorblock">
                                                        <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 1'].Value__c }</div>
                                                        <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 2'].Value__c }</div>
                                                        <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 3'].Value__c }</div>
                                                        <div>{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['FLT ADDRESS LINE 4'].Value__c }</div>
                                                    </div>
                                                    <br/>
                                                    <apex:outputPanel layout="block" style="font-size: 24; margin-bottom: 20px;">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
<!--                                                     <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK CODE VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel> -->
                                                    <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" style="margin-top: 5px;">
                                                        <apex:outputPanel style="display: inline-block; width: 250px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel >
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                                <div class="row">
                                                    <div class="buttons">
                                                        <div class="col-lg-6">
                                                            <apex:outputPanel layout="inline">
                                                                <apex:outputLink value="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SAVE PAYMENT INFORMATION DOWNLOAD URL'].Value__c }"
                                                                                 styleClass="btn btn-red"
                                                                                 style="max-width: none;"
                                                                                 onclick="analytics_onClickButtonSendUI('click','popup: download','UI_11_Tankkarte_Success');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download-white.png" )}" styleClass="download-img"/>
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SAVE PAYMENT INFORMATION BUTTON'].Value__c }
                                                                </apex:outputLink>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="inline">
                                                                <a class="btn btn-xs print"
                                                                   style="margin-left: 10px;"
                                                                   onclick="analytics_onClickButtonSendUI('click','print_doc','UI_11_Tankkarte_Step_11_Payment_Deposit');
                                                                            printPaymentInformation();">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- BUSINESS DIRECT DEBIT MANDATE ACCEPTANCE -->
                                    <apex:outputPanel id="ddMandateAcceptance" rendered="{! opportunity.Zahlungsart__c = 'Lastschrift' }">
                                        <div class="wrapper">
                                            <div class="inside-wrapper">
                                                <div class="row">
                                                    <div class="col-lg-8">
                                                        <div class="b-block-header" style="margin-left: 0px; margin-top: 10px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['HEADING'].Value__c }
                                                        </div>
                                                        <div class="b-desc" style="margin: 0 30px 15px 0;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DESCRIPTION'].Value__c }
                                                        </div>
                                                        <ul class="need-list font-15">
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 1'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 1'].Value__c }
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 2'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 2'].Value__c }
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 3'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 3'].Value__c }
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 4'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 4'].Value__c }
                                                                </div>
                                                            </li>
                                                        </ul>
                                                        <div class="b-desc" style="margin: 0 30px 15px 0;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['MESSAGE'].Value__c }
                                                        </div>
                                                        <div class="b-desc" style="margin: 0 30px 15px 0;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['SECOND MESSAGE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-grey-block" style="margin-top: 10px">
                                                <div class="b-block-header" style="margin: 15px 0px 12px 15px;">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. HEADING'].Value__c }
                                                    <div class="pull-right" style="margin-right: 20px;">
                                                        <a class="btn btn-xs payment-modal"
                                                           onclick="printDocument('frameDDmandateAcceptance', 'ddMandateAcceptanceContentPL', 'ddmandate-agreement-block-inside');
                                                                    analytics_onClickButtonSendUI('click','print_doc','UI_11_Tankkarte_Step_11_Success');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                    <div class="pull-right" style="margin-right: 10px;">
                                                        <a class="btn btn-xs payment-modal"
                                                           onclick="showDDmandateAcceptanceDoc();
                                                                    scrollDisableControl('disable');
                                                                    analytics_onClickButtonSendUI('click','zoom_doc','UI_11_Tankkarte_Step_11_Success');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "full-screen.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                </div>

                                                <div class="ddmandate-agreement-block">
                                                    <div style="margin: 0 15px; height:265px;" class="ddmandate-agreement-block-inside">
                                                        <apex:iframe id="frameDDmandateAcceptance"
                                                            scrolling="true"
                                                            src="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. IFRAME URL'].Value__c }" width="100%" height="99.9%">
                                                        </apex:iframe>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="margin: 32px 0 0 0;">
                                                <div class="buttons center-block" style="text-align: right;">
                                                    <div class="col-lg-3 col-lg-offset-4">
                                                        <div>
                                                            <a href="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOWNLOAD URL'].Value__c }"
                                                                class="btn btn-red"
                                                                onclick="analytics_onClickButtonSendUI('click','download_doc', 'UI_11_Tankkarte_Step_11_Success');">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "download-white.png" )}" styleClass="download-img"/>
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOWNLOAD BUTTON'].Value__c }
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <div class="wrapper">
                                        <apex:outputPanel layout="block" styleClass="inside-wrapper">
                                            <div class="row">
                                                <div class="col-lg-8">
                                                    <apex:outputPanel layout="block" styleClass="b-header">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['TOP HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <ul class="need-list font-15">
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-lg-4">
                                                    <apex:outputPanel layout="block" styleClass="smart-img">
                                                        <apex:image url="{! URLFOR($Resource.e2e_images, 'shellkarte_ch_web.png') }"/>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                    <script type="text/javascript">
                                        if ('{! activeCardConfigTab }' == 'diff') {
                                            analytics_thankYouPage(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray, '{! IF(paymentStatus != null,paymentStatus,'-')  }', paymentMethodAnalytics);
                                        } else
                                        if ('{! activeCardConfigTab }' == 'same') {
                                            analytics_thankYouPage(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! IF(paymentStatus != null,paymentStatus,'-')  }', paymentMethodAnalytics);
                                        }
                                    </script>
                                </apex:outputPanel>

                                <!-- PROCESS ERROR PAGES -->
                                <apex:outputPanel id="errorPage"
                                    layout="block"
                                    styleClass="error-page"
                                    rendered="{!
                                        OR(
                                            activeSubStep = 'Too high limit',
                                            activeSubStep = 'Report does not exist',
                                            activeSubStep = 'Company not found',
                                            activeSubStep = 'Private entity',
                                            activeSubStep = 'Authorization not granted',
                                            activeSubStep = 'Already in process',
                                            activeSubStep = 'Already a customer',
                                            activeSubStep = 'Black list',
                                            activeSubStep = 'Too many reports'
                                        )
                                    }">
                                    <apex:variable var="errorType" value="{! UPPER(activeSubStep) }"/>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="b-block-header">
                                                    {! stepPagesMap['PROCESS ERROR'].elements[errorType]['HEADING'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="error-text">
                                                    <div>
                                                        {! stepPagesMap['PROCESS ERROR'].elements[errorType]['DESCRIPTION'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="b-splitter"></div>
                                        <div class="row">
                                            <div class="buttons return">
                                                <div class="col-lg-12" onclick="analytics_onClickButtonSendUI('click','button: toHomePage', 'Tankkarte_Success');">
                                                    <a href="{! stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c }" class="btn btn-gray" style="min-width: 130px">
                                                        {! stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['LABEL'].Value__c }
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <apex:outputPanel rendered="{! AND(activeSubStep != 'Private entity', activeSubStep != 'Black list') }">
                                        <div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header" style="margin-left: 0;">
                                                        {! stepPagesMap['PROCESS ERROR'].elements[errorType]['FEEDBACK HEADING'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="error-text" style="margin-left: 0;">
                                                        {! stepPagesMap['PROCESS ERROR'].elements[errorType]['PHONE'].Value__c }<br/>
                                                        {! stepPagesMap['PROCESS ERROR'].elements[errorType]['EMAIL'].Value__c }<br/>
                                                        {! stepPagesMap['PROCESS ERROR'].elements[errorType]['WORK TIME'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <script type="text/javascript">
                                        analytics_anyError('{! activeSubStep }', '1', '{! activeSubStep }');
                                        endSplash();
                                    </script>
                                </apex:outputPanel>

                                <!-- SYSTEM ERROR -->
                                <apex:outputPanel layout="block" styleClass="error-page" rendered="{! activeSubStep = 'System error' }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                    {! stepPagesMap['SYSTEM ERROR'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="error-text">
                                                    <apex:outputPanel layout="block">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div><br/>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="error-text">
                                                    <apex:outputPanel layout="block">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['FEEDBACK HEADING']['HEADING'].Value__c }<br/>
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['PHONE']['VALUE'].Value__c }<br/>
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['EMAIL']['VALUE'].Value__c }<br/>
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['WORK TIME']['VALUE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="b-splitter"></div>
                                        <div class="row">
                                            <div class="buttons return">
                                                <div class="col-lg-12">
                                                    <a href="{! stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c }" class="btn btn-gray" style="min-width: 130px">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['BUTTON NAME'].Value__c }
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        analytics_anyError('{! activeSubStep }', '{! activeStep }', 'System error');
                                        endSplash();
                                    </script>
                                </apex:outputPanel>

                            </apex:outputPanel>

                            <!-- MODAL TERM CONDITIONS -->
                            <apex:actionFunction name="showTermConditions" action="{! showTermConditionsModal }" reRender="modalTermConditions" status="splashStatus"/>
                            <apex:outputPanel layout="block" id="modalTermConditions">
                                <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'ModalTermConditions' }"/>
                                <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'ModalTermConditions' }">
                                    <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'ModalTermConditions', 'modal fade in','modal fade')}"
                                                      style="{! IF(activeInnerPage = 'ModalTermConditions', 'display: block; padding-right: 17px;', '')}">
                                        <div class="modal-dialog lg-modal" style="width: 40%; min-width: 940px;">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <a onclick="$j('[id$=modalTermConditions]').hide();
                                                                $j('[id$=activeInnerPageName]').val('');
                                                                scrollDisableControl('enable');
                                                                analytics_onClickButtonSendUI('click','popup: close','UI_09_Tankkarte_Step_9_Payment_Details');"
                                                       class="close"/>
                                                    <div class="b-block-header" style="margin: 0px;">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['TERM CONDITIONS HEADING']['VALUE'].Value__c }
                                                        <a class="btn btn-xs payment-modal"
                                                           style="display: none;"
                                                           id="printTC"
                                                           onclick="printDocument('frameTermConditions');
                                                                    analytics_onClickButtonSendUI('click','popup: print','UI_09_Tankkarte_Step_9_Payment_Details');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                        <a class="btn btn-xs payment-modal"
                                                           href="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['DOWNLOAD URL'].Value__c }"
                                                           onclick="analytics_onClickButtonSendUI('click','popup: download','UI_09_Tankkarte_Step_9_Payment_Details')">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                </div>
                                                <script type="text/javascript">
                                                    document.getElementById('frameTermConditions').onload = function() {
                                                        document.getElementById('printTC').style.display = 'inline-block';
                                                    }
                                                </script>
                                                <div class="modal-body payment-modal-body">
                                                    <iframe
                                                        id="frameTermConditions"
                                                        name="frameTermConditions"
                                                        src="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['IFRAME URL'].Value__c }"
                                                        width="100%"
                                                        height="100%"
                                                        style="border: 0px;">
                                                        Error loading
                                                    </iframe>
                                                </div>
                                                <div class="modal-footer">
                                                    <div class="row">
                                                        <div class="modal-buttons">
                                                            <a
                                                                onclick="$j('[id$=modalTermConditions]').hide();
                                                                         $j('[id$=activeInnerPageName]').val('');
                                                                         scrollDisableControl('enable');
                                                                         analytics_onClickButtonSendUI('click','popup: ok','UI_09_Tankkarte_Step_9_Payment_Details');"
                                                                class="btn btn-red"
                                                                style="min-width: 120px">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['BACK BUTTON'].Value__c }
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>

                            <!-- MODAL DEPOSIT AGREEMENT -->
                            <apex:actionFunction name="showDepositAgreement" action="{! showDepositAgreementModal }" reRender="modalDepositAgreement" status="splashStatus"/>
                            <apex:outputPanel layout="block" id="modalDepositAgreement">
                                <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'ModalDepositAgreement' }"/>
                                <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'ModalDepositAgreement' }">
                                    <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'ModalDepositAgreement', 'modal fade in','modal fade')}"
                                                      style="{! IF(activeInnerPage = 'ModalDepositAgreement', 'display: block; padding-right: 17px;', '')}">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <a onclick="$j('[id$=modalDepositAgreement]').hide();
                                                                $j('[id$=activeInnerPageName]').val('');
                                                                scrollDisableControl('enable');
                                                                analytics_onClickButtonSendUI('click','popup: close','UI_10_Tankkarte_Step_10_Payment_Deposit');"
                                                       class="close"/>
                                                    <div class="b-block-header" style="margin: 0px;">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LIGHTBOX HEADING'].Value__c }
                                                        <a class="btn btn-xs payment-modal"
                                                           style="display: none;"
                                                           id="printDeposit"
                                                           onclick="printDocument('frameDepositAgreement');
                                                                    analytics_onClickButtonSendUI('click','popup: print','UI_10_Tankkarte_Step_10_Payment_Deposit');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                        <a href="{! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['DOWNLOAD URL'].Value__c }"
                                                           class="btn btn-xs payment-modal"
                                                           onclick="analytics_onClickButtonSendUI('click','popup: download','UI_10_Tankkarte_Step_10_Payment_Deposit');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                </div>
                                                <script type="text/javascript">
                                                    document.getElementById('frameDepositAgreement').onload = function() {
                                                        document.getElementById('printDeposit').style.display = 'inline-block';
                                                    }
                                                </script>
                                                <div class="modal-body payment-modal-body">
                                                    <iframe
                                                        id="frameDepositAgreement"
                                                        name="frameDepositAgreement"
                                                        src="{! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }"
                                                        width="100%"
                                                        height="100%"
                                                        style="border: 0px;">
                                                        Error loading
                                                    </iframe>
                                                </div>
                                                <div class="modal-footer">
                                                    <div class="row">
                                                        <div class="modal-buttons">
                                                            <a
                                                                onclick="$j('[id$=modalDepositAgreement]').hide();
                                                                         $j('[id$=activeInnerPageName]').val('');
                                                                         scrollDisableControl('enable');
                                                                         analytics_onClickButtonSendUI('click','popup: ok','UI_10_Tankkarte_Step_10_Payment_Deposit');"
                                                                class="btn btn-red"
                                                                style="min-width: 120px">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>

                            <!-- MODAL BUSINESS DIRECT DEBIT MANDATE ACCEPTANCE -->
                            <apex:actionFunction name="showDDmandateAcceptanceDoc" action="{! showDDmandateAcceptanceDocModal }" reRender="modalDDmandateAcceptance" status="splashStatus"/>
                            <apex:outputPanel layout="block" id="modalDDmandateAcceptance">
                                <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'ModalDDmandateAcceptance' }"/>
                                <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'ModalDDmandateAcceptance' }">
                                    <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'ModalDDmandateAcceptance', 'modal fade in','modal fade')}"
                                                      style="{! IF(activeInnerPage = 'ModalDDmandateAcceptance', 'display: block; padding-right: 17px;', '')}">
                                        <div class="modal-dialog" style="width: 885px;">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <a onclick="$j('[id$=modalDDmandateAcceptance]').hide();
                                                                $j('[id$=activeInnerPageName]').val('');
                                                                scrollDisableControl('enable');
                                                                analytics_onClickButtonSendUI('click', 'popup: close', 'UI_11_Tankkarte_Step_11_Success');"
                                                       class="close"/>
                                                    <div class="b-block-header" style="margin: 0px;">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. LIGHTBOX HEADING'].Value__c }
                                                        <a class="btn btn-xs payment-modal"
                                                           id="printBDD"
                                                           style="display: none;"
                                                           onclick="printDocument('fullFrameDDmandateAcceptance');
                                                                    analytics_onClickButtonSendUI('click', 'popup: print', 'UI_11_Tankkarte_Step_11_Success');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                        <a  class="btn btn-xs payment-modal"
                                                            href="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOWNLOAD URL'].Value__c }"
                                                            onclick="analytics_onClickButtonSendUI('click', 'popup: download', 'UI_11_Tankkarte_Step_11_Success');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                </div>
                                                <script type="text/javascript">
                                                    document.getElementById('fullFrameDDmandateAcceptance').onload = function() {
                                                        document.getElementById('printBDD').style.display = 'inline-block';
                                                    }
                                                </script>
                                                <div class="modal-body sepa-modal-body">
                                                    <iframe
                                                        id="fullFrameDDmandateAcceptance"
                                                        name="fullFrameDDmandateAcceptance"
                                                        src="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. IFRAME URL'].Value__c }"
                                                        width="100%"
                                                        height="100%"
                                                        style="border: 0px;">
                                                        Error loading
                                                    </iframe>
                                                </div>
                                                <div class="modal-footer">
                                                    <div class="row">
                                                        <div class="modal-buttons">
                                                            <a
                                                                onclick="$j('[id$=modalDDmandateAcceptance]').hide();
                                                                         $j('[id$=activeInnerPageName]').val('');
                                                                         scrollDisableControl('enable');
                                                                         analytics_onClickButtonSendUI('click', 'popup: ok', 'UI_11_Tankkarte_Step_11_Success');"
                                                                class="btn btn-red"
                                                                style="min-width: 120px">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. LIGHTBOX BACK BUTTON'].Value__c }
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </div>

                        <!-- RIGHT BLOCK -->
                        <div class="col-lg-4">
                            <apex:outputPanel id="details-info" layout="block" styleClass="details-content">
                                <!-- STEP 0. INFO BLOCK -->
                                <apex:outputPanel layout="block" id="step-0" rendered="{! activeStep == 0 && activeSubstep = 'Contact details' }">
                                    <div class="row" style="margin-top: 37px;">
                                        <div class="col-lg-12">
                                            <div class="b-what-need">
                                                <apex:outputPanel layout="block" styleClass="b-col-header" style="margin-bottom: 20px;">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['SUBHEADING'].Value__c }
                                                </apex:outputPanel>
                                                <ul class="need-list font-15">
                                                    <li>
                                                        <apex:outputPanel styleClass="point-list">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="point">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1 VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </li>
                                                    <li>
                                                        <apex:outputPanel styleClass="point-list">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="point">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2 VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </li>
                                                    <li>
                                                        <apex:outputPanel styleClass="point-list">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="point">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3 VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                    </li>
                                                </ul>
                                                <div class="b-splitter" style="margin: 20px 0 10px 0;"></div>
                                                <apex:outputPanel styleClass="warn"><apex:image url="{!URLFOR($Resource.e2e_images, 'warn.png')}"/></apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="font-15 warn-msg">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['REMARK'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>

                                <!-- ORDER DETAILS -->
                                <apex:outputPanel id="orderDetails" styleClass="ym-hide-content">
                                    <apex:outputPanel layout="block"
                                            styleClass="b-order-details"
                                            rendered="{! AND(
                                                activeStep != 0,
                                                activeStep != null,
                                                activeSubStep != 'Congratulations',
                                                activeSubStep != 'Private entity',
                                                activeSubStep != 'Too many reports',
                                                activeSubStep != 'System error',
                                                activeSubStep != 'Too high limit',
                                                activeSubStep != 'Report does not exist',
                                                activeSubStep != 'Company not found',
                                                activeSubStep != 'Authorization not granted',
                                                activeSubStep != 'Already in process',
                                                activeSubStep != 'Already a customer',
                                                activeSubStep != 'Black list') }">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="details">
                                                    <apex:outputPanel layout="block" styleClass="b-col-header">{! stepPagesMap['ORDER DETAIL BLOCK'].elements['TOP HEADING']['HEADING'].Value__c }</apex:outputPanel>
                                                    <apex:outputPanel rendered="{! AND(numberOfCards != null, numberOfCards != 0, activeSubStep != 'Card configuration') }">
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="fees-costs" style="width: 95%;">
                                                                    <apex:outputPanel layout="block" styleClass="detail-header">{! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c) }</apex:outputPanel>
                                                                    <apex:outputPanel styleClass="edit" rendered="{! AND(activeStep > 1, activeSubStep != 'Card configuration') }">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        <apex:commandLink action="{! editCardsFeesAndCosts }" onclick="analytics_onClickOrderButtonSendUI('changeCardsConfig', '{! activeSubStep }');" onComplete="setEvents_cardsOrder(); onPageRender();" styleClass="font-11" style="color: #0093EE;" reRender="stepList, formBlock, messageBlock, orderDetails, modalError, onlineChatBlock, pageHeader" status="splashStatus">
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['EDIT BUTTON'].Value__c }
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="detail-item">
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['CARDS DESCRIPTION'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                                        <apex:outputPanel layout="block" styleClass="detail-item">
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c + ":" }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="detail-item">
                                                                            {! costItem.costValue } {! costItem.costTariff } ({! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-PER-'].Value__c } {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c ) })
                                                                        </apex:outputPanel>
                                                                    </apex:repeat>
                                                                    <div class="collapse-block" style="margin: 10px 0 25px 0; ">
                                                                        <div class="link" data-toggle="collapse" data-target="#moreOrderDetails">
                                                                            <apex:outputPanel styleClass="more">{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['MORE DETAILS'].Value__c }</apex:outputPanel>
                                                                            <apex:outputPanel styleClass="less" style="display: none;">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['MORE DETAILS HIDE'].Value__c }
                                                                            </apex:outputPanel>
                                                                            <div class="expander expend-detail inline-block" ></div>
                                                                        </div>
                                                                        <div class="row collapse" id="moreOrderDetails">
                                                                            <apex:outputPanel layout="block" styleClass="detail-item more">
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['NATIONAL HEADING'].Value__c }
                                                                                <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                                    <div class="item">
                                                                                        <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                                            {! costItem.costValue } {! costItem.costTariff }
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </apex:repeat>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                                                <apex:outputPanel layout="block" styleClass="detail-item more">
                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['INTERNATIONAL HEADING'].Value__c }
                                                                                    <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                                        <div class="item">
                                                                                            <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                                                {! costItem.costValue } {! costItem.costTariff }
                                                                                            </apex:outputPanel>
                                                                                        </div>
                                                                                    </apex:repeat>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="detail-item more">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['TRANSACTION REMARK'].Value__c }
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['TRANSACTION REMARK HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="row" rendered="{! AND(opportunity.CF_Credit_Limit__c != null, opportunity.CF_Credit_Limit__c != 0) }">
                                                        <div class="col-lg-12">
                                                            <div class="card-limit-detail" style="width: 95%;">
                                                                <apex:outputPanel layout="block" styleClass="detail-header">{! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['HEADING'].Value__c }</apex:outputPanel>
                                                                <apex:outputPanel styleClass="edit" rendered="{! activeStep > 1 }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                    <apex:commandLink action="{! editCreditLimit }" onclick="analytics_onClickOrderButtonSendUI('changePaymentMethod', '{! activeSubStep }');" onComplete="validateCreditLimit(false); setEvents_creditLimit(); onPageRender();"
                                                                    styleClass="font-11" style="color: #0093EE;" reRender="stepList, formBlock, messageBlock, orderDetails, feescosts-block, onlineChatBlock" status="splashStatus">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['EDIT BUTTON'].Value__c }
                                                                    </apex:commandLink>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">{! opportunity.CF_Credit_Limit__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }</apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item" rendered="{! AND(opportunity.Security_Amount_To_Pay__c != 0, opportunity.Security_Amount_To_Pay__c != null) }">
                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['DEPOSIT REQUIRED'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item" rendered="{! OR(opportunity.Security_Amount_To_Pay__c = 0, opportunity.Security_Amount_To_Pay__c = null) }">
                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['DEPOSIT NOT REQUIRED'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">
                                                                    {! IF(opportunity.Rechnungsperiode__c = '7', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['WEEKLY INVOICES'].Value__c, IF(opportunity.Rechnungsperiode__c = '15', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['BI-WEEKLY INVOICES'].Value__c, IF(opportunity.Rechnungsperiode__c = '30', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['MONTHLY INVOICES'].Value__c, ''))) }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">
                                                                    {! IF(opportunity.Zahlungsart__c = 'Lastschrift', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['DIRECT DEBIT'].Value__c, IF(opportunity.Zahlungsart__c = 'Banküberweisung', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['BANK TRANSFER'].Value__c, '')) }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel id="prognosedPumpDetails" layout="block" styleClass="row" rendered="{! AND(opportunity.Total_consumption_l_month__c != null, opportunity.Credit_System_Number__c != null) }">
                                                        <div class="col-lg-12">
                                                            <div class="consumption" style="width: 95%;">
                                                                <apex:outputPanel layout="block" styleClass="detail-header">
                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['HEADING'].Value__c }
                                                                    <apex:outputPanel styleClass="edit" rendered="{! AND(activeStep > 0, activeSubStep != 'Set total consumption', activeSubStep != 'Search company', activeSubStep != 'Enter Tax ID') }">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        <apex:commandLink action="{! editTotalConsumption }"
                                                                        onComplete="setEvents_fuelConsumption(); onPageRender();"
                                                                        onclick="analytics_onClickOrderButtonSendUI('changefuelAmount', '{! activeSubStep }');"
                                                                        styleClass="font-11"
                                                                        style="color: #0093EE; font-family: Montserrat; font-weight: 400;"
                                                                        reRender="stepList, formBlock, messageBlock, feescosts-block, orderDetails, modalError, onlineChatBlock"
                                                                        status="splashStatus">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['EDIT BUTTON'].Value__c }
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">{! opportunity.Total_consumption_l_month__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['UNIT'].Value__c }</apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="row" rendered="{! selectedAvailableCompanyCreditScoring.identificationnumber != null }">
                                                        <div class="col-lg-12">
                                                            <div class="company-detail" style="margin-bottom: 20px">
                                                                <apex:outputPanel layout="block" styleClass="detail-header">
                                                                    {! selectedAvailableCompanyCreditScoring.name }
                                                                    <apex:outputPanel styleClass="edit" rendered="{! AND(activeStep > 0, activeSubStep != 'Search company') }">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        <apex:commandLink action="{! editCompanyDetails }"
                                                                            onComplete="setEvents_companyDetails(); validateCompanyDetails(false);"
                                                                            onclick="analytics_onClickOrderButtonSendUI('changeCompanyData', '{! activeSubStep }');"
                                                                            styleClass="font-11" style="color: #0093EE; font-family: Montserrat; font-weight: 400;"
                                                                            reRender="stepList, formBlock, info-block, messageBlock, orderDetails, modalError, onlineChatBlock"
                                                                            status="splashStatus">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['COMPANY INFO']['EDIT BUTTON'].Value__c }
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">
                                                                    {! selectedAvailableCompanyCreditScoring.street } {! selectedAvailableCompanyCreditScoring.housenumber }{! IF(selectedAvailableCompanyCreditScoring.postcode != null, ', ' +
                                                                    selectedAvailableCompanyCreditScoring.postcode, '') }{! IF(selectedAvailableCompanyCreditScoring.city != null, ', ' +
                                                                    selectedAvailableCompanyCreditScoring.city, '') }{! IF(selectedAvailableCompanyCreditScoring.country != null, ', ' +
                                                                    selectedAvailableCompanyCreditScoring.country, '') }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-footer">
                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['COMPANY INFO']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="row" rendered="{! contact != null }">
                                                        <div class="col-lg-12">
                                                            <div class="contact-person" style="margin-bottom: 20px">
                                                                <apex:outputPanel layout="block" styleClass="detail-header">
                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="edit" rendered="{! activeStep > 0 }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                    <apex:commandLink action="{! editContactDetails }"
                                                                        onComplete="validateContactDetails(false); setEvents_contactDetails();"
                                                                        onclick="analytics_onClickOrderButtonSendUI('changeContactsData', '{! activeSubStep }');"
                                                                        styleClass="font-11" style="color: #0093EE;"
                                                                        reRender="pageHeader, stepList, formBlock, info-block, details-info, messageBlock, orderDetails, modalError, onlineChatBlock"
                                                                        status="splashStatus">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['EDIT BUTTON'].Value__c }
                                                                    </apex:commandLink>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">{! contact.Salutation } {! contact.FirstName } {! contact.LastName }</apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">{! contact.Email }</apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="detail-item">{! contact.Phone }</apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </div>
                    </div>
                    <apex:outputPanel id="info-block" layout="block" styleClass="addition-info">
                        <!-- STEP 0. ADDITION BLOCK -->
                        <apex:outputPanel layout="block" styleClass="contact-details-info" rendered="{! activeStep = 0 && activeSubStep = 'Contact details' }">
                            <div class="row">
                                <div class="b-why">
                                    <div class="b-header">
                                        {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['HEADING'].Value__c }
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="why-info">
                                            <div class="b-col-header">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['SUBHEADING 1'].Value__c }
                                            </div>
                                            <div class="why-desc">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['BODY OF BLOCK 1'].Value__c }
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="why-info">
                                            <div class="b-col-header">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['SUBHEADING 2'].Value__c }
                                            </div>
                                            <div class="why-desc">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['BODY OF BLOCK 2'].Value__c }
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="why-info">
                                            <div class="b-col-header">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['SUBHEADING 3'].Value__c }
                                            </div>
                                            <div class="why-desc">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['BODY OF BLOCK 3'].Value__c }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="b-cards-type">
                                    <div class="b-header">
                                        {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['HEADING'].Value__c }
                                    </div>
                                    <div class="cards-types">
                                        <table class="table table-striped">
                                            <thead>
                                            <tr>
                                                <th></th>
                                                <th><div>{! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['TABLE COLUMN 4 NAME'].Value__c }</div></th>
                                                <th><div>{! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['TABLE COLUMN 1 NAME'].Value__c }</div></th>
                                                <th><div>{! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['TABLE COLUMN 2 NAME'].Value__c }</div></th>
                                                <th><div>{! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['TABLE COLUMN 3 NAME'].Value__c }</div></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            <tr>
                                                <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 9']['CARD TYPE NAME'].Value__c }</div></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 9']['SHOP RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 9']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 9']['ALL FUEL'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 9']['DIESEL ONLY'].Value__c = 'TRUE' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="b-how-pay" style="margin: 20px 15px 0 15px;">
                                    <div class="b-header">
                                        {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 3']['HEADING'].Value__c }
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="pay-info">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 3']['BODY OF BLOCK'].Value__c }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </apex:outputPanel>

                        <!-- STEP 1. ADDITION BLOCK -->
                        <apex:outputPanel layout="block" styleClass="contact-details-info" rendered="{! AND(activeStep == 1, activeSubStep = 'Search company') }">
                            <div class="row">
                                <div class="b-what-credit">
                                    <apex:outputPanel layout="block" styleClass="b-header">
                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 1']['HEADING'].Value__c }
                                    </apex:outputPanel>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <apex:outputPanel layout="block" styleClass="desc font-15" style="margin-bottom: 25px">
                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 1']['BODY OF BLOCK'].Value__c }
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="info">
                                            <apex:outputPanel layout="block" styleClass="b-col-header">
                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 1']['SUBHEADING 1'].Value__c }
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="desc font-15">
                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 1']['BODY OF SUBBLOCK 1'].Value__c }
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </apex:outputPanel>

                        <!-- STEP CONGRATULATION. ADDITION BLOCK -->
                        <apex:outputPanel layout="block" styleClass="congratulations-info" rendered="{! AND(activeStep == 5, activeSubStep == 'Congratulations') }">
                            <div class="row">
                                <div class="b-assistance">
                                    <apex:outputPanel layout="block" styleClass="b-header">
                                        {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TOP HEADING'].Value__c }
                                    </apex:outputPanel>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <apex:outputPanel layout="block" styleClass="font-15">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK'].Value__c }
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" >
                                <apex:outputPanel layout="block" style="margin-top: 20px;">
                                    <div class="col-lg-4">
                                        <apex:outputPanel layout="block" styleClass="b-col-header" style="margin-top: 10px">
                                            {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 1'].Value__c }
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="font-15">
                                            {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK SUBBLOCK 1'].Value__c }
                                        </apex:outputPanel>
                                    </div>
                                    <div class="col-lg-4">
                                        <apex:outputPanel layout="block" styleClass="b-col-header" style="margin-top: 10px">
                                            {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 2'].Value__c }
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="font-15" rendered="{! OR( opportunity.Garantie_other__c != null, AND(opportunity.Garantie_other__c = null, OR(paymentStatus = 'A', paymentStatus = 'C', paymentStatus = null))) }">
                                            <apex:outputPanel layout="block">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['PHONE SUBBLOCK 2 SUCCESS'].Value__c }
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 SUCCESS'].Value__c }</apex:outputPanel>
                                            <apex:outputPanel layout="block">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['WORK TIME SUBBLOCK 2 SUCCESS'].Value__c }
                                            </apex:outputPanel>
                                        </apex:outputPanel>

                                        <apex:outputPanel layout="block" styleClass="font-15" rendered="{! AND(opportunity.Garantie_other__c = null, OR(paymentStatus = 'D', paymentStatus = 'E')) }">
                                            <apex:outputPanel layout="block">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['PHONE SUBBLOCK 2 UNSUCCESS'].Value__c }
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 UNSUCCESS'].Value__c }</apex:outputPanel>
                                            <apex:outputPanel layout="block">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['WORK TIME SUBBLOCK 2 UNSUCCESS'].Value__c }
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                </apex:outputPanel>
                            </div>
                        </apex:outputPanel>
                    </apex:outputPanel>
                </div>
            </div>
        </main>
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-lg-5">
                        <div class="fleetcor">
                            <div class="b-page-logo" style="margin: 45px 0 20px 30px">
                                <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                            </div>
                            <apex:outputPanel layout="block" styleClass="fleetcor-desc text-muted">
                                {! stepPagesMap['FOOTER'].elements['DESCRIPTION']['VALUE'].Value__c }
                            </apex:outputPanel>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="company-links">
                            <apex:outputPanel layout="block" styleClass="footer-col-header font-14" style="width: 225px">
                                {! stepPagesMap['FOOTER'].elements['OUR COMPANY']['HEADING'].Value__c }
                            </apex:outputPanel>
                            <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 0">
                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 1'].Value__c }" target="_blank">
                                    {! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 1 LABEL'].Value__c }
                                </apex:outputLink>
                            </apex:outputPanel>
                            <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 0">
                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 2'].Value__c }" target="_blank">
                                    {! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 2 LABEL'].Value__c }
                                </apex:outputLink>
                            </apex:outputPanel>
                            <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 0">
                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 3'].Value__c }" target="_blank">
                                    {! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 3 LABEL'].Value__c }
                                </apex:outputLink>
                            </apex:outputPanel>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="legal-links">
                            <apex:outputPanel layout="block" styleClass="footer-col-header font-14" style="width: 345px">
                                {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['HEADING'].Value__c }
                            </apex:outputPanel>
                            <div class="t">
                                <div class="t-row">
                                    <div class="t-cell">
                                        <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 0 0 0;">
                                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 1'].Value__c }" target="_blank">
                                                {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 1 LABEL'].Value__c }
                                            </apex:outputLink>
                                        </apex:outputPanel>
                                    </div>
                                    <div class="t-cell">
                                        <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 0 0 0;">
                                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 2'].Value__c }" target="_blank">
                                                {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 2 LABEL'].Value__c }
                                            </apex:outputLink>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                                <div class="t-row">
                                    <div class="t-cell">
                                        <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 5px 0 0;">
                                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 3'].Value__c }" target="_blank">
                                                {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 3 LABEL'].Value__c }"
                                            </apex:outputLink>
                                        </apex:outputPanel>
                                    </div>
                                    <div class="t-cell">
                                        <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 0 0 0;">
                                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 4'].Value__c }" target="_blank">
                                                {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 4 LABEL'].Value__c }
                                            </apex:outputLink>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                                <div class="t-row">
                                    <div class="t-cell">
                                        <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 5px 0 0;">
                                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 5'].Value__c }" target="_blank">
                                                {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 5 LABEL'].Value__c }
                                            </apex:outputLink>
                                        </apex:outputPanel>
                                    </div>
                                    <div class="t-cell">
                                        <apex:outputPanel layout="block" styleClass="font-13" style="margin: 10px 0 0 0;">
                                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 6'].Value__c }" target="_blank">
                                                {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 6 LABEL'].Value__c }
                                            </apex:outputLink>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="b-copyright">
                        <apex:outputPanel layout="block">
                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['COPYRIGHT']['URL'].Value__c }" target="_blank">
                                {! stepPagesMap['FOOTER'].elements['COPYRIGHT']['VALUE'].Value__c }
                            </apex:outputLink>
                        </apex:outputPanel>
                    </div>
                </div>
                <!-- CHAT BLOCK -->
                <div class="chat-button" id="chat-button-offline" style="display: none;" onclick="setupOfflineChat(); return false;">
                    <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
                </div>
                <div  class="chat-button" id="chat-button-online" style=" display: none;" onclick="setupOnlineChat(); return false;">
                    <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
                </div>
                <div class="chat-box" id="chatOfflineBlock">
                    <span>
                        <div class="no_save no_brand" id="liveAgentClientChatSettings">
                            <div class="liveAgentState" id="liveAgentClientChat">
                                <div class="chat-header">{! pageMapChat['CHAT'].elements['CHAT HEADING']['TEXT'].Value__c }
                                    <span id="clientChatEndButtonID">
                                        <button class="close liveAgentEndButton" onclick="closeChat('offline'); return false;" />
                                    </span>
                                </div>
                                <div class="chat-status">
                                    {! pageMapChat['CHAT'].elements['CHAT OFFLINE']['VALUE'].Value__c }
                                </div>
                                <div>
                                    <div>
                                        <span>
                                            <div class="liveAgentAlert" id="liveAgentMessageContainer"></div>
                                        </span>
                                        <div style="word-wrap: break-word; padding-top:1px;">
                                            <span>
                                                <div class="liveAgentChatElement" id="liveAgentChatLog">
                                                    <div id="liveAgentChatLogText" class="liveAgentChatLogText" style="margin-top:10px;">
                                                        <span class="chat-operator">
                                                            <span class="chat-name"><strong>FLEETCOR</strong>
                                                                <span class="chat-customDateTime" style="display: inline"></span>
                                                            </span>
                                                            <span class="chat-messageText">
                                                                {! pageMapChat['CHAT'].elements['CHAT OFFLINE GREETING']['VALUE'].Value__c }
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <span class="chat-operator" id="liveAgentChatLogTyping" style="display: none;"></span>
                                                </div>
                                            </span>
                                        </div>
                                        <div class="col-xs-9 col-lg-9 col-md-9 col-sm-9" style="padding: 0px;">
                                            <span>
                                                <div class="liveAgentChatElement liveAgentChatInput" id="liveAgentChatInput">
                                                    <textarea class="liveAgentChatTextArea" id="liveAgentChatTextArea" maxlength="6000"
                                                              placeholder=" {! pageMapChat['CHAT'].elements['TEXTAREA']['PLACEHOLDER'].Value__c }" wrap="soft" data-uidsfdc="3" />
                                                </div>
                                            </span>
                                        </div>
                                        <div class="col-xs-3 col-lg-3 col-md-3 col-sm-3" style="padding: 0px;">
                                            <span>
                                                <button class="liveAgentChatElement liveAgentSendButton" onclick="updateOfflineChat();return false;"> {! pageMapChat['CHAT'].elements['SEND BUTTON']['TEXT'].Value__c} </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </span>
                </div>
                <div class="chat-box" id="chatOnlineBlock">
                    <div class="chat-header" style="margin:0px;">
                          <button class="close liveAgentEndButton"
                                  onclick="closeChat('online'); return false;"
                                  style="position:absolute; right:6px; top:8px;"
                                  id="clientChatEndButtonID" label="x">
                          </button>
                    </div>
                </div>
                <div class="lightbox"></div>
            </div>
        </footer>
        </body>
    </apex:form>
    <!-- PAYMENT FORM -->
<!--     <apex:outputPanel id="paymentFormToSend" style="display: none;" >
        <form class="paymentFormToSubmit" method="POST" action="{! paymentURL }" id="paymentFormToSubmit">
            <apex:repeat value="{! paymentParameters }" var="param">
                <input type="hidden"  name="{! param }" value="{! paymentParameters[param] }" />
            </apex:repeat>
        </form>
    </apex:outputPanel> -->
</apex:page>