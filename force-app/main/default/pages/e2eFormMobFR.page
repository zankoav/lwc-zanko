<apex:page id="e2eFormMobFR"
           controller="LongFormMobileFRController"
           action="{! init }"
           sidebar="false"
           showHeader="false"
           language="en-US"
           standardStylesheets="false"
           cache="false"
           docType="html-5.0">
    <apex:form id="form" styleClass="form-horizontal" html-autocomplete="off">
        <head>
            <!-- PRODUCTION GTM -->
            <apex:outputPanel rendered="{! CONTAINS($CurrentPage.URL, 'online.fleetcor.fr')  }">
                <!-- Google Tag Manager -->
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-PX3R3T4');</script>
                <!-- End Google Tag Manager -->
            </apex:outputPanel>

            <!-- SANDBOX GTM -->
            <apex:outputPanel rendered="{! NOT(CONTAINS($CurrentPage.URL, 'online.fleetcor.fr')) }">
                <!-- Google Tag Manager after head -->
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-PX3R3T4');</script>
                <!-- End Google Tag Manager -->
            </apex:outputPanel>
            <apex:includeScript value="{!$Resource.jQuery}"/>
            <apex:includeScript value="{! URLFOR($Resource.jQueryUI,'jquery-ui-1.12.1/jquery-ui.js') }"/>
            <apex:stylesheet value="{! URLFOR($Resource.jQueryUI,'jquery-ui-1.12.1/jquery-ui.css') }"/>
            <apex:includeScript value="{!$Resource.jqueryInputMask}"/>
            <apex:includeScript value="{!$Resource.e2e_scripts_fr_mobile}"/>
            <apex:includeScript value="{!$Resource.E2E_Analytics_FR_Mobile}"/>
            <apex:includeScript value="{!$Resource.jqueryUiTtouch}"/>
            <apex:includeScript value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/js/bootstrap.min.js')}"/>
            <apex:stylesheet value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/css/bootstrap.min.css')}"/>
            <apex:stylesheet value="{!$Resource.e2e_style_fr_desktop}"/>
            <apex:stylesheet value="{!$Resource.e2e_style_fr_mobile}"/>
            <apex:stylesheet value="{!URLFOR($Resource.E2ESpinner, 'spinner.css')}"/>
            <apex:includeScript value="{!URLFOR($Resource.e2eLiveAgentDeployment)}"/>

            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
            <link rel="shortcut icon" href="{!$Resource.FleetcorFavicon}" type="image/x-icon;"/>
            <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet"/>
            <title>{! stepPagesMap['HEADER'].elements['TOP HEADING']['VALUE'].Value__c }</title>
            <style type="text/css">
                .enter-vat-id {
                    padding: 15px;
                }

                .loadingField {
                    ground-color: #ffffff;
                    background-image: url({!URLFOR($Resource.E2ESpinner, 'field-spinner.gif')}) !important;
                    background-size: 15px 15px;
                    background-position: 90% center;
                    background-repeat: no-repeat;
                }

                .splashStatus {
                    left: 40%;
                }

                .block-expand {
                    cursor: pointer;
                    width: 10px;
                    height: 12px;
                    background: url({!URLFOR($Resource.e2e_images, 'down.png')}) no-repeat;
                    float: right;
                    margin: 10px 10px;
                }

                .block-collapse {
                    cursor: pointer;
                    width: 10px;
                    height: 12px;
                    background: url({!URLFOR($Resource.e2e_images, 'up.png')}) no-repeat;
                    float: right;
                    margin: 10px 10px;
                }

                @media screen and (max-width: 1367px) {
                    .wrapper-collapsed .collapse-block .block-collapse,
                    .special-offers .block-collapse,
                    .congratulations .block-collapse,
                    .blue-block .block-collapse {
                        float: unset;
                        margin: 0 0 -5px 8px;
                        background: url({!URLFOR($Resource.e2e_images, 'collapse-arrow.png')}) no-repeat;
                    }

                    .wrapper-collapsed .collapse-block .block-expand,
                    .special-offers .block-expand,
                    .congratulations .block-expand,
                    .blue-block .block-expand {
                        float: unset;
                        margin: 0 0 -5px 8px;
                        background: url({!URLFOR($Resource.e2e_images, 'expend-arrow.png')}) no-repeat;
                    }

                    .m-help-info .block-expand,
                    .m-help-info .block-collapse {
                        margin: 8px 7px 10px 0px;
                    }

                    .credit-scoring .block-expand {
                        margin: 15px 10px;
                    }

                    .credit-scoring .block-collapse {
                        margin: 15px 10px;
                    }
                }

                .checkbox label::after {
                    display: inline-block;
                    position: absolute;
                    width: 16px;
                    height: 16px;
                    left: 0;
                    top: 3px;
                    margin-left: -20px;
                    color: #555555;
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                }

                .checkbox input[type="checkbox"]:checked + label::after{
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check.png')});
                }

                .radio input[type="radio"]:checked + label::after {
                    content: "";
                    padding-left: 5px;
                    font-size: 11px;
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                }

                .cards-list .card-item .delete a {
                    height: 24px;
                    width: 40px;
                    cursor: pointer;
                    display: inline-block;
                    background: url({!URLFOR($Resource.e2e_images, 'basket.png')}) no-repeat;
                }

                .cards-tech-parameters .card-badge {
                    width: 230px;
                    height: 145px;
                    display: inline-block;
                    margin: 35px 30px 5px 45px;
                    background: url({!URLFOR($Resource.e2e_images, 'card.png')}) no-repeat;
                }

                .modal-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }

                @media screen {
                /* Hide the special layer from the screen. */
                    #paymentInformation { display: none; }
                }

                /* Mobile */
                @media screen and (max-width: 1367px) {
                   .nav-gray .navbar-toggle.collapsed .collapse-bar {
                       margin: 3px 3px;
                       width: 16px;
                       height: 16px;
                       background: url({!URLFOR($Resource.e2e_images, 'nav-open.png')}) no-repeat;
                   }

                   .nav-gray .navbar-toggle .collapse-bar {
                       margin: 2px 4px;
                       width: 16px;
                       height: 16px;
                       background: url({!URLFOR($Resource.e2e_images, 'nav-close.png')}) no-repeat;
                   }
                }

                .category-link {
                    font-family: Montserrat;
                    font-style: normal;
                    font-weight: 500;
                    line-height: 18px;
                    font-size: 15px;
                    width: 105%;
                    margin: 0 0 15px 0px;
                    word-break: break-word;
                    display: inline-block;
                    position: relative;
                    padding-left: 5px;
                    color: #333 !important;
                }

                .category-link:before {
                    content: "";
                    display: inline-block;
                    position: absolute;
                    width: 18px;
                    height: 18px;
                    left: 0;
                    margin-left: -20px;
                    border-radius: 50%;
                    -webkit-transition: border 0.15s ease-in-out;
                    -o-transition: border 0.15s ease-in-out;
                    transition: border 0.15s ease-in-out;
                    background: rgba(0, 0, 0, 0.0001);
                    border: 2px solid rgba(0, 0, 0, 0.26);
                    box-sizing: border-box;
                }

                .category-link:after {
                    display: inline-block;
                    position: absolute;
                    content: "";
                    width: 18px;
                    height: 18px;
                    left: 3px;
                    top: 0;
                    margin-left: -23px;
                    border-radius: 100%;
                    background-color: #555555;
                    -webkit-transform: scale(0, 0);
                    -ms-transform: scale(0, 0);
                    -o-transform: scale(0, 0);
                    transform: scale(0, 0);
                    -webkit-transition: -webkit-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    -moz-transition: -moz-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    -o-transition: -o-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    transition: transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                }

                .category-link.active:before {
                    border-color: #d9534f;
                    content: "";
                    display: inline-block;
                    position: absolute;
                    width: 18px;
                    height: 18px;
                    left: 0;
                    margin-left: -20px;
                    border-radius: 50%;
                    -webkit-transition: border 0.15s ease-in-out;
                    -o-transition: border 0.15s ease-in-out;
                    transition: border 0.15s ease-in-out;
                    background: rgba(0, 0, 0, 0.0001);
                    border: 2px solid rgba(0, 0, 0, 0.26);
                    box-sizing: border-box;
                }

                .category-link.active:after {
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                }

                .chat-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    margin: 7px 5px 5px 0;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }

                .lightbox {
                    z-index: 1100;
                    opacity: 0.85;
                }

                .limit-info {
                    color: #7F7F7F;
                }

                .popover {
                    min-width: 96%;
                    margin-left: 2%;
                    margin-right: 2%;
                    left: 0 !important;
                }

                .popover-title {
                    float: right;
                    display: inline-block;
                    border: 0;
                }

                @media (min-width: 1367px) {
                    .hidden-lgxl {
                        display: none!important;
                    }
                }
            </style>
        </head>
        <body class="modal-open" style="overflow: auto">
            <!-- PRODUCTION GTM -->
            <apex:outputPanel rendered="{! CONTAINS('online.fleetcor.fr',$CurrentPage.URL)  }">
                <!-- Google Tag Manager (noscript) -->
                <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PX3R3T4"
                                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
                <!-- End Google Tag Manager (noscript) -->
            </apex:outputPanel>

            <!-- SANDBOX GTM -->
            <apex:outputPanel rendered="{! NOT(CONTAINS('online.fleetcor.fr',$CurrentPage.URL)) }">
                <!-- Google Tag Manager (noscript) after body -->
                <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PX3R3T4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
                <!-- End Google Tag Manager (noscript)-->
            </apex:outputPanel>
        <main>
            <apex:actionStatus id="splashStatus"
                               onstart="startSplash();"
                               onstop="endSplash(); "/>
            <div class="splashStatus" id="splashDiv">
                <div class="circle">
                    <img src="{!URLFOR($Resource.e2e_images, 'preloader-loop.gif')}"/>
                </div>
            </div>
            <apex:outputPanel id="onlineChatBlock">
                <script>
                        function setupOnlineChat() {
                           startOnlineChat('{! chatURL }', '{! chatDeploymentId }', '{! chatDeploymentJsURL }', '{! $Organization.Id }'.slice(0,-3), '{! chatButtonId }', '{! contact.Id }'.slice(0,-3), '{! opportunity.Id }'.slice(0,-3), '{! opportunity.AccountId }'.slice(0,-3), '{! chatFirstMessage }', '{! activeStep }', '{! activeSubStep }','manual');
                           return false;
                        }
                        function setupOnlineAutoChat() {
                           startOnlineChat('{! chatURL }', '{! chatDeploymentId }', '{! chatDeploymentJsURL }', '{! $Organization.Id }'.slice(0,-3), '{! chatButtonId }', '{! contact.Id }'.slice(0,-3), '{! opportunity.Id }'.slice(0,-3), '{! opportunity.AccountId }'.slice(0,-3), '{! chatFirstMessage }', '{! activeStep }', '{! activeSubStep }','automatical');
                           return false;
                        }

                        function executeSetOpportunityFlagChat(modeOfChat){
                            setOpportunityFlagChat('{!opportunity.Id}', '{!activeStep}', '{!activeSubStep}', modeOfChat);
                        }

                        function executeSaveOfflineChat(offlineChatBody){
                            saveOfflineChat('{!opportunity.Id}','{!contact.Id}', '{!activeStep}', '{!activeSubStep}', offlineChatBody);
                        }
                    </script>
            </apex:outputPanel>
            <script>
                    function setOpportunityFlagChat(oppId, activeStep, activeSubStep, modeOfChat){
                        Visualforce.remoting.Manager.invokeAction(
                            '{!$RemoteAction.LongFormMobileFRController.setFlagChatToOpportunity}',
                            oppId, activeStep, activeSubStep, modeOfChat,
                            function(result, event){
                                 if (event.status) {

                                } else if (event.type === 'exception') {
                                    console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                } else {
                                    console.debug(document.getElementById("responseErrors").innerHTML = event.message);
                                }
                            }
                        );
                    }

                    function saveOfflineChat(oppId, conId, activeStep, activeSubStep, offlineChatBody){
                        Visualforce.remoting.Manager.invokeAction(
                            '{!$RemoteAction.LongFormMobileFRController.saveOfflineChatLog}',
                             oppId, conId, activeStep, activeSubStep, offlineChatBody,
                             function(result, event){
                                 if (event.status) {

                                } else if (event.type === 'exception') {
                                    console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                } else {
                                    console.debug(event.message);
                                }
                            }
                        );
                    }
            </script>
            <apex:actionFunction id="setupChatInit"
                                 name="setupChatInit"
                                 oncomplete="setupChatInitialization('{!chatURL}', '{!chatDeploymentId}', '{!$Organization.Id}'.slice(0,-3), '{!chatButtonId}', '', '', '', '', '{!activeStep}', '{!activeSubStep}','');"
                                 reRender="setupChatInit" />
            <apex:actionFunction id="viewportInit"
                                 name="viewportInit"
                                 oncomplete="goToActiveViewport('{! activeStep }', '{! activeSubStep }');"/>

            <span id="top-heading-viewport"></span>
            <div class="container hidden-lgxl">
                <apex:outputPanel id="pageHeader">
                    <apex:outputPanel rendered="{! activeSubstep != 'Congratulations' }">
                        <div class="row">
                            <nav class="navbar nav-gray">
                                <div class="container-fluid">
                                    <div class="navbar-header">
                                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                                            <div class="collapse-bar"></div>
                                        </button>
                                        <div class="b-page-logo">
                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'm-logo.png')}"/>
                                        </div>
                                    </div>
                                    <div class="collapse navbar-collapse" id="navbar">
                                        <ul class="nav navbar-nav menu">
                                            <li class="expanded">
                                                <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['TOP HEADING'].Value__c }
                                                </a>
                                                <ul class="nav-list">
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 1 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 2'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 2 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="expanded">
                                                <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['TOP HEADING'].Value__c }
                                                </a>
                                                <ul class="nav-list">
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['URL 1 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="expanded">
                                                <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['TOP HEADING'].Value__c }
                                                </a>
                                                <ul class="nav-list">
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 1 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 2'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 2 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="expanded">
                                                <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['TOP HEADING'].Value__c }
                                                </a>
                                                <ul class="nav-list">
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 1 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 2'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 2 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 3'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 3 LABEL'].Value__c }
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="expanded">
                                                <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 5']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 5']['TOP HEADING'].Value__c }
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </nav>
                        </div>
                        <div styleClass="row">
                            <div class="b-page-header">
                                    {! stepPagesMap['HEADER'].elements['TOP HEADING']['VALUE'].Value__c }
                            </div>
                        </div>
                    </apex:outputPanel>
                </apex:outputPanel>

                <div class="b-block-form">
                    <div class="row">
                        <!-- START PAGE -->
                        <span id="get-started-viewport"></span>
                        <apex:outputPanel layout="block" id="startPage">
                            <apex:outputPanel layout="block" styleClass="col-xs-12 col-sm-12" rendered="{! AND(activeStep = 0, activeSubstep = 'Get started') }">
                                <div class="details-content">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-12">
                                            <div class="b-what-need">
                                                <div class="b-col-header">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['TOP HEADING'].Value__c }
                                                </div>
                                                <div class="font-13" style="margin-bottom: 13px;">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['SUBHEADING'].Value__c }
                                                </div>
                                                <ul class="need-list font-13">
                                                    <li>
                                                        <div class="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1'].Value__c }
                                                        </div>
                                                        <div class="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1 VALUE'].Value__c }
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2'].Value__c }
                                                        </div>
                                                        <div class="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2 VALUE'].Value__c }
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3'].Value__c }
                                                        </div>
                                                        <div class="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3 VALUE'].Value__c }
                                                        </div>
                                                    </li>
                                                </ul>
                                                <div class="b-splitter" style="margin: 16px 0px 8px 0;"></div>
                                                <apex:outputPanel styleClass="warn">
                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'warn.png')}" style="vertical-align: top; padding-top: 4px;"/>
                                                </apex:outputPanel>
                                                <div class="font-13 warn-msg">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['REMARK'].Value__c }
                                                </div>
                                                <div class="row">
                                                    <div class="m-buttons center-block text-center">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:commandButton value="{! stepPagesMap['CONTACT DETAILS'].elements['GET STARTED BUTTON']['VALUE'].Value__c }"
                                                                                action="{! getStarted }"
                                                                                reRender="formBlock, startPage, additionInfo, stepList, onlineChatBlock"
                                                                                onComplete="toViewport('contact-details-viewport'); setEvents_contactDetails();"
                                                                                styleClass="btn btn-red"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                        analytics_ZeroStepOnLoad();
                                </script>
                            </apex:outputPanel>
                        </apex:outputPanel>

                        <!-- LEFT BLOCK -->
                        <div class="col-xs-12 col-sm-12">
                            <apex:outputPanel layout="block" styleClass="step-content" id="formBlock">
                                <apex:outputPanel id="collapsedBlock"
                                                  rendered="{! AND(
                                                          activeStep != 5,
                                                          activeSubStep != 'System error',
                                                          activeSubStep != 'More than two paid reports',
                                                          activeSubStep != 'Too high limit',
                                                          activeSubStep != 'Report does not exist',
                                                          activeSubStep != 'Company not found',
                                                          activeSubStep != 'Private entity',
                                                          activeSubStep != 'Authorization not granted',
                                                          activeSubStep != 'Already in process',
                                                          activeSubStep != 'Already a customer',
                                                          activeSubStep != 'Black list'
                                                          ) }" styleClass="ym-hide-content">
                                    <!-- COLLAPSED CONTACT DETAILS -->
                                    <apex:outputPanel layout="block" id="contactDetailsCollapsed" styleClass="contact-details-collapsed" rendered="{! AND(activeStep != null, activeStep > 0) }">
                                        <div class="wrapper-collapsed">
                                            <div class="row">
                                                <div class="col-xs-10 col-sm-10">
                                                    <div class="b-step">
                                                        <div class="b-step-header">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[1].Step_Name__c }
                                                        </div>
                                                        <div class="b-step-details">
                                                        {! IF(contact.Salutation = stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MR API'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MR LABEL'].Value__c, IF(contact.Salutation = stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MRS API'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MRS LABEL'].Value__c, '')) } {! contact.FirstName } {! contact.LastName }, {! contact.Email }, {! contact.Phone }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2 col-sm-2">
                                                    <apex:outputPanel styleClass="edit">
                                                        <apex:commandLink action="{! editContactDetails }"
                                                                          oncomplete="toViewport('contact-details-viewport'); setEvents_contactDetails(); onPageRender();"
                                                                          styleClass="font-11"
                                                                          reRender="stepList, formBlock, onlineChatBlock"
                                                                          status="splashStatus">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                        </apex:commandLink>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- COLLAPSED COMPANY DETAILS -->
                                    <apex:outputPanel layout="block" id="companyDetailsCollapsed" styleClass="company-details-collapsed" rendered="{! AND(activeStep > 0, activeSubstep != 'Search company', activeSubstep != 'Set total consumption') }">
                                        <div style="background: #e0eded;">
                                            <div class="b-steps-splitter"></div>
                                        </div>
                                        <div class="wrapper-collapsed">
                                            <div class="row">
                                                <div class="col-xs-10 col-sm-10">
                                                    <div class="b-step">
                                                        <div class="b-step-header">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[2].Step_Name__c }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2 col-sm-2">
                                                    <apex:outputPanel styleClass="edit">
                                                        <apex:commandLink action="{! editCompanyDetails }"
                                                                          oncomplete="toViewport('order-details-viewport'); setEvents_companyDetails(); isCompanyDetails = true; analytics_SearchCompanyOnLoad(); onPageRender();"
                                                                          styleClass="font-11"
                                                                          reRender="stepList, formBlock, onlineChatBlock"
                                                                          status="splashStatus">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                        </apex:commandLink>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-step-details">
                                                    {! selectedCompany.name }, {! selectedCompany.street } {! selectedCompany.housenumber }{! IF(selectedCompany.postcode != null, ', ' +
                                                            selectedCompany.postcode, '') }{! IF(selectedCompany.city != null, ', ' +
                                                            selectedCompany.city, '') }{! IF(selectedCompany.country != null, ', ' +
                                                            selectedCompany.country, '') }
                                                        <div class="info">
                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['COMPANY INFO']['REMARK'].Value__c }
                                                        </div>
                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['LABEL'].Value__c }: {! opportunity.Total_consumption_l_month__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['UNIT'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- COLLAPSED CREDIT LINE -->
                                    <apex:outputPanel layout="block" id="creditLineCollapsed" styleClass="credit-line-collapsed" rendered="{! activeStep > 1 }">
                                        <div style="background: #e0eded;">
                                            <div class="b-steps-splitter"></div>
                                        </div>
                                        <div class="wrapper-collapsed">
                                            <div class="row">
                                                <div class="col-xs-10 col-sm-10">
                                                    <div class="b-step">
                                                        <div class="b-step-header">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[3].Step_Name__c }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2 col-sm-2">
                                                    <apex:outputPanel styleClass="edit">
                                                        <apex:commandLink action="{! editCreditScoreData }"
                                                                          oncomplete="toViewport('order-details-viewport'); setEvents_creditLimit(); onPageLoad(); onPageRender();"
                                                                          styleClass="font-11"
                                                                          reRender="stepList, formBlock, onlineChatBlock"
                                                                          status="splashStatus">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                        </apex:commandLink>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-step-details">
                                                    {! opportunity.CF_Credit_Limit__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['UNIT'].Value__c },<br/>
                                                        <apex:outputPanel rendered="{! AND(opportunity.Security_Amount_To_Pay__c != 0, opportunity.Security_Amount_To_Pay__c != null)  }">
                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['DEPOSIT REQUIRED LABEL'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['UNIT'].Value__c }<br/>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{! OR(opportunity.Security_Amount_To_Pay__c = 0, opportunity.Security_Amount_To_Pay__c = null) }">
                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['REMARK NOT REQUIRED DEPOSIT'].Value__c },<br/>
                                                        </apex:outputPanel>
                                                            {! IF(opportunity.Zahlungsart__c = 'Lastschrift', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['DIRECT DEBIT'].Value__c,
                                                                    IF(opportunity.Zahlungsart__c = 'Banküberweisung', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['BANK TRANSFER'].Value__c, '')) },

                                                            {! IF(opportunity.Rechnungsperiode__c = '7', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['WEEKLY INVOICES'].Value__c,
                                                                    IF(opportunity.Rechnungsperiode__c = '15', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['BI-WEEKLY INVOICES'].Value__c,
                                                                            IF(opportunity.Rechnungsperiode__c = '30', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['MONTHLY INVOICES'].Value__c, ''))) }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- COLLAPSED CARDS CONFIGURATIONS -->
                                    <apex:outputPanel layout="block" id="cardConfigurationCollapsed" styleClass="card-configuration-collapsed" rendered="{! AND(activeStep > 1, activeSubstep != 'Card configuration', activeSubstep != 'Technical parameters') }">
                                        <div class="b-steps-splitter"></div>
                                        <div class="wrapper-collapsed">
                                            <div class="row">
                                                <div class="col-xs-10 col-sm-10">
                                                    <div class="b-step">
                                                        <div class="b-step-header">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[4].Step_Name__c }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2 col-sm-2">
                                                    <apex:outputPanel styleClass="edit">
                                                        <apex:commandLink action="{! editCardConfiguration }"
                                                                          oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                          styleClass="font-11"
                                                                          reRender="stepList, formBlock, onlineChatBlock"
                                                                          status="splashStatus">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                        </apex:commandLink>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-step-details">
                                                    {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c) }
                                                    </div>
                                                    <div class="collapse-block">
                                                        <div class="link" data-toggle="collapse" data-target="#feesAndCostsTop">
                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['MORE DETAILS'].Value__c }<div class="expander block-expand inline-block"></div>
                                                        </div>
                                                        <div class="row collapse" id="feesAndCostsTop">
                                                            <div class="inner-block">
                                                                <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                                    <div class="fees-and-costs">
                                                                        <div class="item" style="{! costItem.style }">
                                                                            <div class="f-item inline-block">
                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                            </div>
                                                                            <div class="f-val inline-block">
                                                                            {! costItem.costValue } {! costItem.costTariff }
                                                                            </div>
                                                                        </div>
                                                                        <div class="f-desc">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-PER-'].Value__c } {! numberOfCards } {! IF(numberOfCards = 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c) }
                                                                        </div>
                                                                    </div>
                                                                </apex:repeat>

                                                                <div class="fee-national-header">
                                                                    <div>
                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['NATIONAL HEADING'].Value__c }
                                                                        <div class="i-helper inline-block"
                                                                             data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['NATIONAL HEADING HELP'].Value__c }"
                                                                             data-trigger="hover"
                                                                             data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                    </div>
                                                                </div>
                                                                <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                    <div class="fees-and-costs">
                                                                        <div class="item">
                                                                            <div class="f-item inline-block" >
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <div class="f-val inline-block">
                                                                            {! costItem.costValue } {! costItem.costTariff }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:repeat>
                                                                <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                                    <div class="fee-international-header">
                                                                        <div>
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['INTERNATIONAL HEADING'].Value__c }
                                                                            <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['INTERNATIONAL HEADING HELP'].Value__c }" data-trigger="hover"
                                                                                 data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                        </div>
                                                                    </div>
                                                                    <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                        <div class="fees-and-costs">
                                                                            <div class="item">
                                                                                <div class="f-item inline-block" >
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                    <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                                <div class="f-val inline-block">
                                                                                {! costItem.costValue } {! costItem.costTariff }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </apex:repeat>
                                                                </apex:outputPanel>

                                                                <div class="fee-other">
                                                                    <div class="collapse-block">
                                                                        <div class="link" data-toggle="collapse" data-target="#otherPossibleFees">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['OTHER FEES HEADING'].Value__c }
                                                                            <div class="expander block-expand inline-block"></div>
                                                                        </div>
                                                                        <div class="row collapse" style="margin-left: 0px;" id="otherPossibleFees">
                                                                            <div class="fees-inner-block">
                                                                                <div style="padding-top: 10px;">
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['OTHER FEES SUBHEADING'].Value__c }
                                                                                </div>
                                                                                <apex:repeat value="{! costsColumnsMap['3'] }" var="costItem">
                                                                                    <div class="fees-and-costs">
                                                                                        <div class="item" style="margin-top: 7px;">
                                                                                            <div class="f-item inline-block">
                                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                                <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                                    <div class="i-helper inline-block"
                                                                                                         data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentHelp].Value__c }"
                                                                                                         data-trigger="hover"
                                                                                                         data-html="true"
                                                                                                         data-container="body"
                                                                                                         data-toggle="popover"
                                                                                                         data-placement="top">?</div>
                                                                                                </apex:outputPanel>
                                                                                            </div>
                                                                                            <div class="f-val inline-block">
                                                                                            {! costItem.costValue } <span class="fees-euro-symbol">{! costItem.costTariff }</span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:repeat>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- COLLAPSED SPECIAL OFFERS -->
                                    <apex:outputPanel layout="block" id="specialOffersCollapsed" styleClass="special-offers-collapsed" rendered="{! activeStep > 3 }">
                                        <div style="background: #e0eded;">
                                            <div class="b-steps-splitter"></div>
                                        </div>
                                        <div class="wrapper-collapsed">
                                            <div class="row">
                                                <div class="col-xs-10 col-sm-10">
                                                    <div class="b-step">
                                                        <div class="b-step-header">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[5].Step_Name__c }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2 col-sm-2">
                                                    <apex:outputPanel styleClass="edit">
                                                        <apex:commandLink action="{! editSpecialOffers }"
                                                                          oncomplete="toViewport('order-details-viewport'); isOffers = true; analytics_SpecialOfferOnLoad();"
                                                                          styleClass="font-11"
                                                                          reRender="stepList, formBlock, onlineChatBlock"
                                                                          status="splashStatus">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                        </apex:commandLink>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:repeat value="{! IF(opportunity.Product__c = 'Home Station offer (v.1)', homeOffersList, nonHomeOffersList) }" var="offer">
                                                        <apex:outputPanel rendered="{! offer.productName = opportunity.Product__c }">
                                                            <div styleClass="b-step-details">
                                                                    {! IF(opportunity.Home_Station__c != null, stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TEASER HOME STATION SELECTED'].Value__c, stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TEASER HOME STATION NOT SELECTED'].Value__c) }
                                                            </div>
                                                            <div class="font-13 text-muted">
                                                                    {! IF(opportunity.Home_Station__c != null, opportunity.Home_Station__c, stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TEASER DESC HOME STATION NOT SELECTED'].Value__c) }
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:repeat>
                                                </div>
                                            </div>
                                            <apex:repeat value="{! IF(opportunity.Product__c = 'Home Station offer (v.1)', homeOffersList, nonHomeOffersList) }" var="offer">
                                                <apex:outputPanel rendered="{! offer.productName = opportunity.Product__c }">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="collapse-block" style="margin: 0;">
                                                                <div class="link" data-toggle="collapse" data-target="#stationDetails">
                                                                    <div class="font-13" style="color: #0093ee;">
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['DETAILS HEADING'].Value__c }<div class="expander block-expand inline-block"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="row collapse" id="stationDetails" style="margin: 12px 0 0 0;">
                                                                    <div class="detail-list">
                                                                        <apex:outputPanel layout="block" styleClass="font-11" style="line-height: 1.91;">
                                                                            <apex:outputPanel layout="block">
                                                                                <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['DISCOUNT'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                {! offer.offerDiscount } {! offer.offerDiscountRatePer }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block">
                                                                                <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TIME'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerTime }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" rendered="{! OR(offer.offerIsBased = 'Volume', offer.offerIsBased = 'Fuel + Volume') }">
                                                                                <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['VOLUME'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerVolume }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" rendered="{! OR(offer.offerIsBased = 'Fuel', offer.offerIsBased = 'Fuel + Volume') }">
                                                                                <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['FUEL TYPE'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerFuelType }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block">
                                                                                <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['GEOGRAPHY'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerCountry }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block">
                                                                                <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['STATION'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerStation }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block">
                                                                                <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['FUEL PRICE'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['FUEL PRICE VALUE'].Value__c }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:repeat>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- ORDER DETAILS LINK -->
                                <span id="order-details-viewport"></span>
                                <apex:outputPanel layout="block"
                                                  rendered="{! AND(
                                                          activeStep != 0,
                                                          activeSubstep != 'System error',
                                                          activeSubStep != 'More than two paid reports',
                                                          activeSubstep != 'Congratulations',
                                                          activeSubStep != 'Too high limit',
                                                          activeSubStep != 'Report does not exist',
                                                          activeSubStep != 'Company not found',
                                                          activeSubStep != 'Private entity',
                                                          activeSubStep != 'Authorization not granted',
                                                          activeSubStep != 'Already in process',
                                                          activeSubStep != 'Already a customer',
                                                          activeSubStep != 'Black list'
                                                          ) }">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-12">
                                            <apex:outputPanel layout="block" styleClass="order-details-link">
                                                <a href="" id="order"> &#8593; {! stepPagesMap['ORDER DETAIL BLOCK'].elements['TOP HEADING']['HEADING'].Value__c } </a>
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                </apex:outputPanel>

                                <!-- STEP CONTACT DETAILS -->
                                <span id="contact-details-viewport"></span>
                                <apex:outputPanel layout="block" id="contactDetails" styleClass="contact-details" rendered="{! AND(activeStep = 0, activeSubstep = 'Contact details') }">
                                    <script>
                                            activePageAnalytics = 'Contact details';
                                        </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="b-desc">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="salutation block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel id="salutationBlock">
                                                        <div class="btn-group btn-group-justified">
                                                            <div class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected salutation-mr', 'btn btn-select salutation-mr') }"
                                                                 onclick="$j(this).val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c }');
                                                                             $j('.salutation-mr').toggleClass('selected'); $j('.salutation-mrs').toggleClass('selected');">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <div class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected salutation-mrs', 'btn btn-select salutation-mrs') }"
                                                                 onclick="$j('[id$=sltn-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c }');
                                                                             $j('.salutation-mr').toggleClass('selected'); $j('.salutation-mrs').toggleClass('selected');">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <apex:inputHidden id="sltn-dflt" value="{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c }"/>
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="first-name block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:inputText id="firstName" value="{! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-disable-keys" maxLength="40"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                    <span class="f-required">
                                                                                            {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                </apex:outputLabel>
                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="last-name block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container" for="lastName">
                                                                        <span class="column">
                                                                            <apex:inputText id="lastName" value="{! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-disable-keys" maxLength="69"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                    <span class="f-required">
                                                                                            {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                </apex:outputLabel>
                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="phone block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container" for="phone">
                                                                        <span class="column">
                                                                            <apex:inputText id="phone" value="{! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-disable-keys" maxLength="13"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['LABEL'].Value__c }
                                                                                    <span class="f-required" style="margin-left: -1px;">
                                                                                            {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                </apex:outputLabel>
                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="email block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container" for="email">
                                                                        <span class="column">
                                                                            <apex:inputText id="email" value="{! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-disable-keys" maxLength="80"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['LABEL'].Value__c }
                                                                                    <span class="f-required">
                                                                                            {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                </apex:outputLabel>
                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <apex:outputPanel styleClass="row form-group" rendered="{! NOT(AND(opportunity != null, opportunity.Anzahl_der_Karten__c != null)) }" layout="block">
                                            <div class="email block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container" for="numberofcardscontactdetails">
                                                                    <span class="column">
                                                                        <apex:inputText id="numberofcardscontactdetails" value="{! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-disable-keys" html-min="1" html-max="50" onkeyup="validateNumberOfCards(this);"/>
                                                                        <apex:outputPanel styleClass="input-label">
                                                                            {! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                        </apex:outputPanel>
                                                                        <script>
                                                                            function validateNumberOfCards(numberOfCards) {
                                                                                numberOfCards.value = numberOfCards.value.replace(/[^0-9\.]/g,'');
                                                                                if(numberOfCards.value.split('.').length > 2) numberOfCards.value = numberOfCards.value.replace(/\.+$/,"");
                                                                            }
                                                                        </script>
                                                                    </span>
                                                                </apex:outputLabel>
                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <div class="row form-group">
                                            <div class="block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel id="companyFormBlock">
                                                        <div class="btn-group btn-group-justified">
                                                            <div id="company-btn"
                                                                 class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                 onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c }');
                                                                             $j('[id$=company-btn]').addClass('selected');
                                                                             $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                             $j('[id$=private-btn]').removeClass('selected');isPrivateEntity = false;"
                                                                 style="font-size: 12px; width: 33%;">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <div id="solo-trader-btn"
                                                                 class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                 onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c }');
                                                                             $j('[id$=solo-trader-btn]').addClass('selected');
                                                                             $j('[id$=company-btn]').removeClass('selected');
                                                                             $j('[id$=private-btn]').removeClass('selected');isPrivateEntity = false;"
                                                                 style="font-size: 12px; width: 34%;">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <div id="private-btn"
                                                                 class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                 onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c }');
                                                                             $j('[id$=private-btn]').addClass('selected');
                                                                             $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                             $j('[id$=company-btn]').removeClass('selected');isPrivateEntity = true;"
                                                                 style="font-size: 12px; width: 33%;">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <apex:inputHidden id="company-form-dflt" value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c }"/>
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-md-12">
                                                <div class="b-checkbox">
                                                    <div class="form-check">
                                                        <div class="checkbox checkbox-red">
                                                            <apex:inputCheckbox value="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }" styleClass="form-check-input" id="checkbox1"/>
                                                            <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['LABEL'].Value__c }"
                                                                              styleClass="form-check-label" for="checkbox1" escape="false"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="m-buttons center-block text-center">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:actionFunction name="mGoToCreditScoring" action="{! goToCompanyDetails }" oncomplete="toViewPortCreditScoring(); setEvents_companyDetails(); onPageRender();" reRender="formBlock, stepList, additionInfo, onlineChatBlock" status="splashStatus"/>
                                                    <apex:commandLink value="{! stepPagesMap['CONTACT DETAILS'].elements['CONTINUE BUTTON']['VALUE'].Value__c }"
                                                                      onclick="return validateContactDetails(true);"
                                                                      styleClass="btn btn-red"
                                                                      reRender="none"
                                                                      status="splashStatus"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                            isCompanyDetails = true;
                                            analytics_ContactDetailsOnLoad();
                                        </script>
                                </apex:outputPanel>

                                <!-- STEP COMPANY DETAILS -->
                                <apex:outputPanel layout="block" id="creditScoring" styleClass="credit-scoring" rendered="{! AND(activeStep = 1, OR(activeSubstep = 'Search company', activeSubstep = 'Set total consumption', activeSubStep = 'Enter VAT Number')) }">
                                    <span id="company-name-viewport"></span>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="b-desc" style="width: 90%;">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="country block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div >
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                    </div>
                                                    <apex:outputPanel layout="block" styleClass="font-15" style="margin-top: 3px">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['DEFAULT VALUE'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="country-msg">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row form-group">
                                            <div class="company block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:inputText id="company" value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input companyAndTax ym-disable-keys" maxLength="255" style="width: 83%;"/>
                                                                            <apex:outputLabel styleClass="input-label" for="company">
                                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                    <span class="f-required">
                                                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputLabel>
                                                                        </span>
                                                                </apex:outputLabel>
                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row form-group">
                                            <div class="tax-id block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:inputText id="tax"
                                                                                            value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                                            required="false" styleClass="inline-block form-control required input taxIdInput companyAndTax ym-disable-keys"
                                                                                            maxLength="9" style="width: 70%;"/>
                                                                            <div class="i-helper inline-block pull-right"
                                                                                 data-content="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['HELP'].Value__c }"
                                                                                 data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom"
                                                                                 style="margin-top: 20px;">?</div>
                                                                            <apex:outputLabel styleClass="input-label" for="tax" style="border-bottom:0px;">
                                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['LABEL'].Value__c }
                                                                                    <span class="f-required">
                                                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputLabel>
                                                                        </span>
                                                                </apex:outputLabel>
                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="m-buttons center-block text-center">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:actionFunction name="mDoSaveCompany" action="{! doSaveCompanyDetailsData }" onComplete="validateCompanyDetails(false); setEvents_companyDetails(); onPageRender(); mDoSearchCompany();" reRender="formBlock"/>
                                                    <apex:actionFunction name="mDoSearchCompany" action="{! doSearchCompany }" onComplete="scrollDisableControl('disable'); setEvents_companyDetails(); onPageRender(); endSplash();" reRender="stepList, formBlock, additionInfo, modalCompanySelection"/>
                                                    <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SEARCH BUTTON']['VALUE'].Value__c }"
                                                                      onclick="return validateCompanyDetailsForSearch();"
                                                                      reRender="formBlock"
                                                                      style="padding: 7.5px 12px;"
                                                                      styleClass="btn btn-red search"
                                                                      status="splashStatus"/>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                                activePageAnalytics = 'Search company';
                                            </script>

                                        <!-- ENTER VAT NUMBER -->
                                        <span id="your-company-viewport"></span>
                                        <apex:outputPanel id="enterVatNumber" styleClass="enter-vat-id" layout="block" rendered="{! AND(activeStep = 1, activeSubStep = 'Enter VAT Number') }">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-warning-block">
                                                        <div class="b-inside-warning" style="padding: 0;">
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 10px 16px 0px 12px;">
                                                                <apex:outputPanel styleClass="warn"><apex:image url="{!URLFOR($Resource.e2e_images, 'warn.png')}"/></apex:outputPanel>
                                                                    {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['TOP HEADING']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="b-desc">
                                                                    {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <div class="row form-group vat-group">
                                                                <div class="vat-id block" style="margin: 15px 12px 0px 12px;">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <div class="b-form-field">
                                                                            <div class="form-field">
                                                                                <div class="f-input">
                                                                                    <apex:outputLabel styleClass="f-container">
                                                                                            <span class="column">
                                                                                                <apex:inputText id="vatid"
                                                                                                                value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                                                                required="false"
                                                                                                                styleClass="inline-block form-control required input vatNumberInput ym-disable-keys not-empty"
                                                                                                                maxLength="13"
                                                                                                                style="width: 85%; text-transform: uppercase;"/>
                                                                                                <apex:outputLabel styleClass="input-label" for="vatid">
                                                                                                    {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['LABEL'].Value__c }
                                                                                                        <span class="f-required">
                                                                                                                {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['ASTERISK'].Value__c }
                                                                                                        </span>
                                                                                                </apex:outputLabel>
                                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['HELP'].Value__c }"
                                                                                                     data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                            </span>
                                                                                    </apex:outputLabel>
                                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                                </div>
                                                                            </div>
                                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                                    {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 10px;">
                                                                <div class="col-xs-12 col-md-12">
                                                                    <div class="b-checkbox">
                                                                        <div class="form-check">
                                                                            <div class="checkbox checkbox-red">
                                                                                <apex:inputCheckbox id="no-vat-checkbox"
                                                                                                    value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['NO VAT'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                                                    onclick="if(this.checked) {
                                                                                                document.getElementById('{!$Component.vatid}').value = '';
                                                                                                document.getElementById('{!$Component.noVatLabel}').style.color = 'black';
                                                                                                $j('.vat-group input').removeClass('error');
                                                                                                $j('.vat-group input').prop('disabled', true);
                                                                                                $j('.vat-group').find('.invalid-feedback').hide();
                                                                                                $j('.vat-group').find('.glyphicon').hide();
                                                                                                $j('.enter-vat-id .btn-red').attr('disabled', false);

                                                                                            } else {
                                                                                                $j('.vat-group input').prop('disabled', false);
                                                                                                setEvents_vatNumber();
                                                                                            }"
                                                                                                    styleClass="form-check-input"/>
                                                                                <apex:outputLabel id="noVatLabel"
                                                                                                  value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['NO VAT'].elementItemsMap['LABEL'].Value__c }"
                                                                                                  styleClass="form-check-label"
                                                                                                  style="font-weight: 400;"
                                                                                                  for="no-vat-checkbox"
                                                                                                  escape="false"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="m-buttons center-block text-center">
                                                                <apex:outputPanel layout="block">
                                                                    <apex:commandButton id="validateVat"
                                                                                        value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                        action="{! updateVatNumber }"
                                                                                        oncomplete="setEvents_companyDetails(); doValidateVatId();"
                                                                                        reRender="stepList, formBlock, additionInfo, systemError, onlineChatBlock"
                                                                                        status="splashStatus"
                                                                                        styleClass="btn btn-red continue continue-fromvat"/>
                                                                </apex:outputPanel>
                                                                <script>
                                                                        function doValidateVatId() {
                                                                            if ({! isVatIdValid }) {
                                                                                $j('.vat-group input').removeClass('error');
                                                                                $j('.vat-group input').addClass('success');
                                                                                $j('.vat-group').find('.invalid-feedback').hide();
                                                                                $j('.vat-group').find('.glyphicon').show();
                                                                                $j('.continue-fromvat').attr('disabled', false);
                                                                            } else {
                                                                                $j('.vat-group input').removeClass('success');
                                                                                $j('.vat-group input').addClass('error');
                                                                                $j('.vat-group').find('.invalid-feedback').show();
                                                                                $j('.vat-group').find('.glyphicon').hide();
                                                                                $j('.continue-fromvat').attr('disabled', true);
                                                                                toViewport('your-company-viewport');
                                                                                setEvents_vatNumber();
                                                                            }
                                                                        }
                                                                    </script>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>

                                        <!-- SET TOTAL CONSUMPTION -->
                                        <apex:outputPanel id="pump-block">
                                            <apex:outputPanel layout="block" styleClass="fuel-consumption" rendered="{! AND(activeStep = 1, activeSubstep = 'Set total consumption') }">
                                                <script>
                                                        activePageAnalytics = 'Set total consumption';
                                                    </script>
                                                <div class="credit-scoring-sub">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="b-collapsed-company ym-hide-content">
                                                                <apex:outputPanel layout="block" styleClass="inline-block collapsed-company">
                                                                    <apex:outputPanel layout="block" styleClass="b-col-header" >
                                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['SELECTED COMPANY HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                                    {! selectedCompany.name }, {! selectedCompany.street } {! selectedCompany.housenumber }{! IF(selectedCompany.postcode != null, ', ' +
                                                                            selectedCompany.postcode, '') }{! IF(selectedCompany.city != null, ', ' +
                                                                            selectedCompany.city, '') }{! IF(selectedCompany.country != null, ', ' +
                                                                            selectedCompany.country, '') }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="i-image inline-block" >
                                                                    <div
                                                                            onclick="toViewport('company-name-viewport');"
                                                                            class="font-11">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel layout="block" styleClass="b-fuel-consumption">
                                                            <apex:outputPanel layout="block" styleClass="font-13">
                                                                    {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['TOP HEADING']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="pump block">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="b-form-field">
                                                                <div class="form-field">
                                                                    <div class="f-input">
                                                                        <apex:outputLabel styleClass="f-container">
                                                                                <span class="column">
                                                                                    <apex:inputText id="pump" value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" maxLength="6" styleClass="inline-block form-control required input pumpInput ym-disable-keys" html-min="75" html-max="50000" onkeypress="return event.charCode >= 48 && event.charCode <= 57"/>
                                                                                    <span class="litters" style="display:none;">
                                                                                            {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['UNIT'].Value__c }
                                                                                    </span>
                                                                                    <apex:outputLabel styleClass="input-label" for="pump">
                                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['LABEL'].Value__c }
                                                                                            <span class="f-required">
                                                                                                    {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['ASTERISK'].Value__c }
                                                                                            </span>
                                                                                    </apex:outputLabel>
                                                                                </span>
                                                                        </apex:outputLabel>
                                                                        <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                    </div>
                                                                </div>
                                                                <apex:outputPanel layout="block" styleClass="limit-info font-12">
                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="invalid-feedback consumption-warning1">
                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 1'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="invalid-feedback consumption-warning2">
                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 2'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="m-buttons center-block text-center">
                                                            <apex:actionFunction name="goToOfferCreditLine"
                                                                                 action="{! doCalculateCreditScoring }"
                                                                                 reRender="stepList, formBlock, additionInfo, onlineChatBlock"
                                                                                 oncomplete="toViewport('order-details-viewport'); setEvents_creditLimit(); onPageLoad(); onPageRender();"
                                                                                 status="splashStatus"/>
                                                            <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['CONTINUE BUTTON']['VALUE'].Value__c }"
                                                                              onclick="return validatePumpDetails();"
                                                                              reRender="stepList, formBlock, onlineChatBlock"
                                                                              styleClass="btn btn-red continue"
                                                                              status="splashStatus"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <script>
                                                        analytics_TotalConsumptionOnLoad();
                                                    </script>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{! AND(activeStep = 1, activeSubstep != 'Search company') }">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="text-center">
                                                        <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                            <apex:outputPanel layout="block">
                                                                <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                                  onclick="scrollDisableControl('disable');"
                                                                                  value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                  styleClass="font-13"
                                                                                  reRender="saveAndContinueLater"
                                                                                  status="splashStatus"/>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                    {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <script>
                                                analytics_SearchCompanyOnLoad();
                                            </script>
                                    </div>
                                </apex:outputPanel>

                                <!-- STEP CREDIT LINE -->
                                <apex:outputPanel layout="block" id="creditLine" styleClass="credit-line" rendered="{! AND(activeStep = 1, activeSubstep = 'Calculating credit score') }">
                                    <script>
                                            activePageAnalytics = 'Calculating credit score';
                                        </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                                <div class="m-under-header">
                                                    <apex:outputPanel layout="block" styleClass="font-13">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="payment-method block" style="margin-top: 7px;">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div >
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                    </div>
                                                    <apex:outputPanel layout="block" styleClass="font-15" style="margin-top: 3px">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD LABEL'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel id="paymentDescriptionBlock" layout="block" styleClass="pay-method-msg font-11 text-muted">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DIRECT DEBIT DESCRIPTION'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="billing-period block" style="margin-top: 22px;">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="btn-group">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['LABEL'].Value__c }" styleClass="font-14" style="margin-bottom: 9px;"/>
                                                        <apex:outputPanel layout="block" id="billingPeriodBlock" styleClass="m-calendar-deposit">
                                                            <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['WEEKLY BUTTON NAME'].Value__c }"
                                                                                action="{! changeBillingPeriod }" onComplete="onPageRender(); setEvents_creditLimit();"
                                                                                rerender="billingPeriodBlock, creditLimitInput, depositBlock, payMethodBlock, hidden-elements, credit-output,deposit-block,paymentDescriptionBlock"
                                                                                styleClass="{! IF(defaultBillingPeriod = 7, 'btn btn-select selected', 'btn btn-select') }"
                                                                                rendered="{! creditLimit7 < 6000 }" status="splashStatus" style="font-size: 12px;padding: 6px 4px;">
                                                                <apex:param name="billingPeriod" value="7" assignTo="{! defaultBillingPeriod }"/>
                                                                <apex:param name="creditLimit" value="{! creditLimit7 }" assignTo="{! creditLimit }"/>
                                                            </apex:commandButton>
                                                            <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['BI-WEEKLY BUTTON NAME'].Value__c }"
                                                                                action="{! changeBillingPeriod }" onComplete="onPageRender(); setEvents_creditLimit();"
                                                                                rerender="billingPeriodBlock, creditLimitInput, depositBlock, payMethodBlock, hidden-elements, credit-output,deposit-block,paymentDescriptionBlock"
                                                                                styleClass="{! IF(defaultBillingPeriod = 15, 'btn btn-select selected', 'btn btn-select') }"
                                                                                rendered="{! creditLimit15 < 6000 && cfDecision.statusCode != '007' }" status="splashStatus" style="font-size: 12px;padding: 6px 4px;">
                                                                <apex:param name="billingPeriod" value="15" assignTo="{! defaultBillingPeriod }"/>
                                                                <apex:param name="creditLimit" value="{! creditLimit15 }" assignTo="{! creditLimit }"/>
                                                            </apex:commandButton>
                                                            <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['MONTHLY BUTTON NAME'].Value__c }"
                                                                                action="{! changeBillingPeriod }" onComplete="onPageRender(); setEvents_creditLimit();"
                                                                                rerender="billingPeriodBlock, creditLimitInput, depositBlock, payMethodBlock, hidden-elements, credit-output,deposit-block,paymentDescriptionBlock"
                                                                                styleClass="{! IF(defaultBillingPeriod = 30, 'btn btn-select selected', 'btn btn-select') }"
                                                                                rendered="{! creditLimit30 < 6000 && cfDecision.statusCode != '006' && cfDecision.statusCode != '007' }" status="splashStatus" style="font-size: 12px;padding: 6px 4px;">
                                                                <apex:param name="billingPeriod" value="30" assignTo="{! defaultBillingPeriod }"/>
                                                                <apex:param name="creditLimit" value="{! creditLimit30 }" assignTo="{! creditLimit }"/>
                                                            </apex:commandButton>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <apex:outputPanel layout="block" styleClass="billing-period-msg font-11 text-muted">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <apex:outputPanel layout="block" styleClass="choose-credit-limit">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="m-block-around">
                                                        <apex:outputPanel layout="block" styleClass="m-row-header">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="font-11" style="margin-top: 5px;">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['REMARK'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                        <div class="row form-group">
                                            <div class="credit-limit block" style="margin-top: 20px;">
                                                <apex:actionFunction name="recalculateDepositValue" action="{! doRecalculateDeposit }"
                                                                     reRender="depositBlock, idInputHidden, payMethodBlock, credit-limit-actions"
                                                                     onComplete="setEvents_creditLimit(); onPageRender(); return false;"
                                                                     status="splashStatus">
                                                    <apex:param name="creditLimit" assignTo="{! creditLimitValue }" value="" />
                                                    <apex:param name="minCreditLimit" assignTo="{! minCreditLimit }" value="" />
                                                    <apex:param name="maxCreditLimit" assignTo="{! maxCreditLimit }" value="" />
                                                </apex:actionFunction>
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel styleClass="m-credit-output" id="credit-output">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['LABEL'].Value__c }" styleClass="font-13 credit-limit-label" style="margin-bottom: 4px;">
                                                                <span class="f-required" style="{! IF(minCreditLimit = maxValue, 'display: none;','') }">
                                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['ASTERISK'].Value__c }
                                                                </span>
                                                        </apex:outputLabel>
                                                        <div class="m-credit-value" style="{! IF(minCreditLimit = maxValue, 'margin-bottom: 0','')}">
                                                            <apex:outputPanel id="credit-limit-actions" layout="block" styleClass="inline-block" rendered="{! minCreditLimit != maxValue}">
                                                                <apex:outputPanel styleClass="btn-group" layout="block">
                                                                    <apex:outputPanel styleClass="btn btn-select credit-value-block">
                                                                        <apex:outputText id="creditLimitInput" value="{! creditLimit }"
                                                                                         style="margin-right: 5px; padding: 0px 0px 15px;"
                                                                                         styleClass="limit-value inline-block font-15" />
                                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['UNIT'].Value__c }"
                                                                                          style="font-weight: normal;"/>
                                                                    </apex:outputPanel>
                                                                    <apex:commandButton value="-" styleClass="btn btn-select action-btn" disabled="{! NOT(creditLimit > minCreditLimit) }" onclick="decreaseCreditLimit(); return false;"/>
                                                                    <apex:commandButton value="+" styleClass="btn btn-select action-btn" disabled="{! NOT(creditLimit < maxValue) }" onclick="increaseCreditLimit(); return false;"/>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" rendered="{! minCreditLimit = maxValue}">
                                                                <apex:outputText value="{! creditLimit }"
                                                                                 style="margin-right: 5px; padding: 0px 0px 15px;"
                                                                                 styleClass="limit-value inline-block font-15" />
                                                                <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['UNIT'].Value__c }"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel id="hidden-elements">
                                                        <apex:outputPanel layout="none" rendered="{! minCreditLimit != maxValue}">
                                                            <div data-role="range-slider" class="range-slider">
                                                                <div id="slider"/>
                                                                <div class="deposit-numbers" >
                                                                    <apex:outputPanel id="minCreditLimit" styleClass="min-limit slider-label-first">
                                                                            {! minCreditLimit }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel id="maxCreditLimit" styleClass="max-limit slider-label-last" style="float: right; margin-top: 2px;">
                                                                            {! maxValue }
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <apex:inputHidden value="{! creditLimit }" id="idInputHidden"/>
                                                                <apex:inputHidden value="{! minCreditLimit }" id="minLimit"/>
                                                                <apex:inputHidden value="{! maxCreditLimit }" id="maxLimit"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                                <script type="text/javascript">
                                                        function recalculateDeposit() {
                                                            var creditLimitValue = document.getElementById('{!$Component.idInputHidden}').value;
                                                            var minLimitValue = document.getElementById('{!$Component.minLimit}').value;
                                                            var maxLimitValue = document.getElementById('{!$Component.maxLimit}').value;
                                                            recalculateDepositValue(creditLimitValue, minLimitValue, maxLimitValue);
                                                        }
                                                    </script>
                                            </div>
                                        </div>
                                        <apex:outputPanel styleClass="row" layout="block" id="deposit-block">
                                            <div class="deposit block" style="{! IF(minCreditLimit != maxCreditLimit,'margin-top: 22px;','margin-top: 0;')}">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel id="depositBlock">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['LABEL'].Value__c }" styleClass="font-13 text-muted" style="margin-bottom: 4px;"/>
                                                        <apex:outputPanel layout="block" rendered="{! AND(deposit != 0, deposit != null) }">
                                                            <apex:outputPanel layout="block">
                                                                <apex:outputPanel layout="block" styleClass="inline-block font-15" style="vertical-align: middle">
                                                                    <span class="deposit-value">{! deposit }</span>
                                                                    <apex:outputPanel >
                                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP REQUIRED DEPOSIT'].Value__c }" data-trigger="hover"
                                                                     data-container="body" data-toggle="popover" data-placement="top" style="margin-top: 2px;">?</div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="font-15">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK REQUIRED DEPOSIT'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" rendered="{! OR(deposit = 0, deposit = null) }">
                                                            <apex:outputPanel layout="block">
                                                                <apex:outputPanel layout="block" styleClass="font-15 inline-block" style="vertical-align: middle">
                                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK NOT REQUIRED DEPOSIT'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP NOT REQUIRED DEPOSIT'].Value__c }" data-trigger="hover"
                                                                     data-container="body" data-toggle="popover" data-placement="top" style="margin-top: 2px;">?</div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <div class="row">
                                            <div class="text-center" style="margin-top: 24px;">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:actionFunction name="goToCardsOrder" action="{! goToCardsConfig }" reRender="stepList, formBlock, onlineChatBlock" status="splashStatus" oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"/>
                                                    <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" onclick="return validateCreditLimit(true);" reRender="formBlock" styleClass="btn btn-red continue" status="splashStatus"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <div class="text-center" style="margin: 24px 0;">
                                                    <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                        <apex:outputPanel layout="block">
                                                            <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                              onclick="scrollDisableControl('disable');"
                                                                              value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                              styleClass="font-13"
                                                                              reRender="saveAndContinueLater"
                                                                              status="splashStatus"/>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <div class="collapse-block">
                                                    <div class="link" data-toggle="collapse" data-target="#creditLine">
                                                        <apex:outputPanel styleClass="m-row-header" style="color: #1a1a1a;">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['TOP HEADING'].Value__c }
                                                            <div class="expander block-expand inline-block" style="float: right;"></div>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="row collapse" id="creditLine" style="margin: 12px 0 0 0;">
                                                        <div class="credit-line-collapse">
                                                            <apex:outputPanel layout="block" styleClass="font-13 block-gap">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['DESCRIPTION'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="m-row-header block-gap">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['SUBBLOCK HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="font-13">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['BODY OF SUBBLOCK'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                            analytics_PaymentMethodOnLoad();
                                        </script>
                                </apex:outputPanel>

                                <!-- STEP CARDS ORDER -->
                                <apex:outputPanel layout="block" id="cardsOrder" styleClass="cards-order" rendered="{! AND(activeStep = 2, OR(activeSubstep = 'Card configuration', activeSubstep = 'Technical parameters')) }">
                                    <script>
                                            activePageAnalytics = 'Card configuration';
                                        </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['TOP HEADING']['VALUE'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="cards-count block">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-form-field">
                                                        <div class="form-field">
                                                            <div class="f-input">
                                                                <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:input id="counter"
                                                                                        type="number"
                                                                                        value="{! numberOfCards }"
                                                                                        required="false"
                                                                                        onchange="changeNumberOfCards();"
                                                                                        styleClass="inline-block form-control required input"
                                                                                        html-min="1"
                                                                                        html-max="50"
                                                                                        onkeypress="return event.charCode >= 48 && event.charCode <= 57"/>
                                                                            <apex:actionFunction name="changeNumberOfCards"
                                                                                                 action="{! changeNumberOfCards }"
                                                                                                 onComplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                                 reRender="counter, configuration, cards-exception"
                                                                                                 status="splashStatus"/>
                                                                            <apex:outputLabel styleClass="input-label" for="counter">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }
                                                                                    <span class="f-required">
                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }
                                                                                    </span>
                                                                            </apex:outputLabel>
                                                                        </span>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </apex:outputLabel>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel id="cards-exception">
                                                            <apex:outputPanel rendered="{! activeInnerPage = 'Remove extra cards' }" styleClass="invalidcards-feedback">
                                                                <div class="i-error">!</div>{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['WARN MESSAGE TYPE 1'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{! activeInnerPage = 'No more 2 cards error' }" styleClass="invalidcards-feedback">
                                                                <div class="i-error">!</div>{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['WARN MESSAGE TYPE 2'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <apex:outputPanel layout="block" id="configuration" styleClass="configurations">
                                        <div class="wrapper">
                                            <div class="cards-list">
                                                <apex:variable var="index" value="{!1}"/>
                                                <apex:repeat value="{! finalCardsMap }" var="cardIndx">
                                                    <div class="card-item">
                                                        <apex:outputPanel rendered="{! AND(finalCardsMap[cardIndx].cardIsConfigurated = true, finalCardsMap[cardIndx].techParamsIsConfigurated = true)  }">
                                                            <div class="row">
                                                                <div class="col-xs-10 col-sm-10">
                                                                    <apex:outputPanel layout="block" styleClass="b-block-header font-15">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['-CARD #-']['LABEL'].Value__c } {! cardIndx }
                                                                        <apex:outputPanel styleClass="edit">
                                                                            <apex:commandLink action="{! editCardConfigurationMobile }"
                                                                                              onComplete="onPageRender(); goToConfiguredCardViewport();"
                                                                                              styleClass="font-11"
                                                                                              reRender="configuration"
                                                                                              status="splashStatus">
                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                            </apex:commandLink>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <script>
                                                                            function goToConfiguredCardViewport() {
                                                                                toViewport('edit-card-viewport');
                                                                            }
                                                                        </script>
                                                                </div>
                                                                <div class="col-xs-2 col-sm-2">
                                                                    <apex:outputPanel styleClass="delete" rendered="{! numberOfCards != 1 }">
                                                                        <apex:commandLink action="{! removeCard }"
                                                                                          oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                          reRender="configuration, counter, systemError"
                                                                                          status="splashStatus">
                                                                            <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <apex:outputPanel layout="block" styleClass="config-desc font-13">
                                                                        {! IF(finalCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, ''))) }{!IF(finalCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(finalCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}<br/><br/>
                                                                        {! IF(finalCardsMap[cardIndx].selectedTypeOfCar = 'PKW', stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW TYPE TEASER'].Value__c + ',', stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW TYPE TEASER'].Value__c + ',') }<br/>
                                                                        {! IF(finalCardsMap[cardIndx].needOdometerOptions = true, stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['AGREE ODOMETER TEASER'].Value__c, stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['DISAGREE ODOMETER TEASER'].Value__c) }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel rendered="{! cardIndx != numberOfCards }">
                                                                <div class="b-splitter"></div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <span id="edit-card-viewport"></span>
                                                        <span id="not-configured-card-{! cardIndx }-viewport"></span>
                                                        <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].techParamsIsConfigurated = false  }" styleClass="{! IF(continueButtonStatus = 'show-feesAgreementButton', 'config-cards-shadow','') }">
                                                            <div class="row">
                                                                <div class="col-xs-10 col-sm-10">
                                                                    <apex:outputPanel layout="block" styleClass="b-block-header font-15">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['-CARD #-']['LABEL'].Value__c } {! cardIndx }
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <div class="col-xs-2 col-sm-2">
                                                                    <apex:outputPanel layout="block" styleClass="delete" rendered="{! numberOfCards != 1 }">
                                                                        <apex:commandLink action="{! removeCard }"
                                                                                          oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                          reRender="configuration, counter"
                                                                                          status="splashStatus">
                                                                            <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <apex:outputPanel layout="block" id="configBlock" styleClass="b-configs-block">
                                                                        <div class="config-list" id="confList">
                                                                            <div id="categoryLink" class="config {! IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Category', 'active', 'blue')}">
                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['CATEGORY TAB']['TAB NAME'].Value__c }  "
                                                                                                  reRender="configBlock, save-config-btn"
                                                                                                  styleClass="link"
                                                                                                  status="splashStatus"
                                                                                                  style="width: 72px; display: inline-block;"
                                                                                                  oncomplete="changeLink(this); toViewport('edit-card-viewport'); setEvents_cardsOrder(); onPageRender();">
                                                                                    <apex:param name="categoryTabName" value="Category" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                </apex:commandLink>
                                                                            </div>
                                                                            <div id="optionLink" class="config {! IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Options', 'active', IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing','blue','disabled')) }" style="width: 29%;">
                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['OPTIONS TAB']['TAB NAME'].Value__c }  "
                                                                                                  reRender="configBlock, save-config-btn"
                                                                                                  styleClass="link"
                                                                                                  status="splashStatus"
                                                                                                  style="width: 59px; display: inline-block; margin-left: 0;"
                                                                                                  oncomplete="changeLink(this); toViewport('edit-card-viewport'); setEvents_cardsOrder(); onPageRender();">
                                                                                    <apex:param name="optionsTabName" value="Options" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                </apex:commandLink>
                                                                            </div>
                                                                            <div id="embossingLink" class="config {! IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing', 'active', 'disabled')}" style="{! IF(LEN(account.Name) <= 25, 'display: none', 'width: 36%') }">
                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['TAB NAME'].Value__c }  "
                                                                                                  reRender="configBlock, save-config-btn"
                                                                                                  styleClass="link"
                                                                                                  status="splashStatus"
                                                                                                  style="width: 88px; display: inline-block;"
                                                                                                  oncomplete="changeLink(this); toViewport('edit-card-viewport');">
                                                                                    <apex:param name="embossingTabName" value="Embossing" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                </apex:commandLink>
                                                                            </div>
                                                                        </div>
                                                                        <apex:outputPanel layout="block" id="configSteps">
                                                                            <apex:outputPanel layout="block" styleClass="b-category" rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Category' }">
                                                                                <apex:outputPanel layout="block" styleClass="font-11">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['CATEGORY TAB']['DESCRIPTION'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <div class="category-list">
                                                                                    <div class="radio radio-red">
                                                                                        <div class="category">
                                                                                            <input type="radio"
                                                                                                   id="radio4"
                                                                                                   value="All vehicle related product"
                                                                                                   name="category{! cardIndx }"
                                                                                                   onclick="$j('.hiddenRadioValue{! cardIndx } input').val('All vehicle related product');"/>
                                                                                            <label for="radio4">
                                                                                                <apex:outputPanel styleClass="select-item">
                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c }
                                                                                                    <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['HELP'].Value__c }" data-html="true" data-trigger="hover"
                                                                                                          data-container="body" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                </apex:outputPanel><br/>
                                                                                                <ul class="font-11">
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li><apex:outputPanel >
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 4'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 5'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                </ul>
                                                                                            </label>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="b-splitter"></div>
                                                                                    <div class="radio radio-red">
                                                                                        <div class="category">
                                                                                            <input type="radio"
                                                                                                   id="radio5"
                                                                                                   value="All fuel types"
                                                                                                   onclick="$j('.hiddenRadioValue{! cardIndx } input').val('All fuel types');"
                                                                                                   name="category{! cardIndx }"/>
                                                                                            <label for="radio5">
                                                                                                <apex:outputPanel styleClass="select-item">
                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c }
                                                                                                    <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['HELP'].Value__c }" data-html="true" data-trigger="hover"
                                                                                                          data-container="body" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                </apex:outputPanel><br/>
                                                                                                <ul class="font-11">
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                </ul>
                                                                                            </label>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="b-splitter"></div>

                                                                                    <div class="radio radio-red">
                                                                                        <div class="category">
                                                                                            <input type="radio"
                                                                                                   id="radio6"
                                                                                                   value="Diesel"
                                                                                                   onclick="$j('.hiddenRadioValue{! cardIndx } input').val('Diesel');"
                                                                                                   name="category{! cardIndx }"/>
                                                                                            <label for="radio6">
                                                                                                <apex:outputPanel styleClass="select-item">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c }
                                                                                                </apex:outputPanel><br/>
                                                                                                <ul class="font-11">
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </li>
                                                                                                </ul>
                                                                                            </label>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <apex:outputPanel layout="block" style="line-height: 10px; font-size:9px;">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['CARD ADDITIONAL INFO']['TEXT'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <div class="hiddenRadioValue{! cardIndx }">
                                                                                    <apex:inputHidden value="{! finalCardsMap[cardIndx].categoryCard }"/>
                                                                                    <script>
                                                                                            $j('input[name="category' + {! cardIndx } + '"][value="' + $j('.hiddenRadioValue{! cardIndx } input').val() + '"]').prop('checked', true);
                                                                                        </script>
                                                                                </div>
                                                                                <div class="row">
                                                                                    <div class="center-block text-center" style="margin-top: 24px;">
                                                                                        <div class="col-xs-12 col-sm-12">
                                                                                            <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['CATEGORY TAB']['NEXT BUTTON'].Value__c }"
                                                                                                              reRender="configBlock"
                                                                                                              oncomplete="goToLastNotConfiguredCardViewport(); setEvents_cardsOrder(); onPageRender();"
                                                                                                              styleClass="btn btn-red"
                                                                                                              status="splashStatus">
                                                                                                <apex:param name="optionsTabName" value="Options" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                            </apex:commandLink>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <script>
                                                                                        analytics_CardConfigurationOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                                                                    </script>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="b-option" rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Options' }">
                                                                                <div class="options">
                                                                                    <div class="item">
                                                                                        <div class="b-checkbox">
                                                                                            <div class="form-check">
                                                                                                <div class="checkbox checkbox-red">
                                                                                                    <apex:inputCheckbox value="{! finalCardsMap[cardIndx].pumpOutsideCountry }" styleClass="form-check-input" id="checkbox2"/>
                                                                                                    <apex:outputLabel for="checkbox2" value="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['LABEL'].Value__c }" styleClass="form-check-label"/>
                                                                                                    <apex:outputPanel layout="block" styleClass="desc">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="b-splitter"></div>
                                                                                    </div>
                                                                         <!--       <div class="item">
                                                                                        <div class="b-checkbox">
                                                                                            <div class="form-check">
                                                                                                <div class="checkbox checkbox-red">
                                                                                                    <apex:inputCheckbox value="{! finalCardsMap[cardIndx].pumpAtPartners }" styleClass="form-check-input" id="checkbox3"/>
                                                                                                    <apex:outputLabel for="checkbox3" value="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['LABEL'].Value__c }" styleClass="form-check-label"/>
                                                                                                    <apex:outputPanel layout="block" styleClass="desc">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['REMARK'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="b-splitter"></div>
                                                                                    </div> -->
                                                                                    <div class="item">
                                                                                        <div class="b-checkbox">
                                                                                            <div class="form-check">
                                                                                                <div class="checkbox checkbox-red">
                                                                                                    <apex:inputCheckbox value="{! finalCardsMap[cardIndx].needOdometerOptions }" styleClass="form-check-input" id="checkbox4"/>
                                                                                                    <apex:outputLabel value="{! stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['LABEL'].Value__c }" styleClass="form-check-label" for="checkbox4">
                                                                                                            <span
                                                                                                                    class="i-helper inline-block"
                                                                                                                    data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['HELP'].Value__c }"
                                                                                                                    data-html="true"
                                                                                                                    data-trigger="hover"
                                                                                                                    data-container="body"
                                                                                                                    data-toggle="popover"
                                                                                                                    data-placement="bottom">
                                                                                                                ?
                                                                                                            </span>
                                                                                                    </apex:outputLabel>
                                                                                                    <apex:outputPanel layout="block" styleClass="desc">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['REMARK'].Value__c }
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-lg-12">
                                                                                            <apex:outputPanel layout="block">
                                                                                                <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LABEL'].Value__c }<span
                                                                                                        class="i-helper inline-block"
                                                                                                        data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['HELP'].Value__c }"
                                                                                                        data-html="true"
                                                                                                        data-trigger="hover"
                                                                                                        data-container="body"
                                                                                                        data-toggle="popover"
                                                                                                        data-placement="bottom">
                                                                                                                ?
                                                                                                            </span>
                                                                                                </apex:outputPanel>
                                                                                            </apex:outputPanel>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row form-group">
                                                                                        <div class="car-type">
                                                                                            <div class="col-xs-12 col-sm-12">
                                                                                                <div class="btn-group btn-group-justified">
                                                                                                    <apex:outputPanel id="selectTypeOfCar">
                                                                                                        <div class="btn-group btn-group-justified">
                                                                                                            <div id="pkw" style="width: 50%"
                                                                                                                 class="{! IF(stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW BUTTON API'].Value__c = finalCardsMap[cardIndx].selectedTypeOfCar, 'btn btn-select selected', 'btn btn-select') }"
                                                                                                                 onclick="$j('[id$=car-type-dflt]').val('{! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW BUTTON API'].Value__c }');
                                                                                                                             $j('[id$=pkw]').addClass('selected');
                                                                                                                             $j('[id$=lkw]').removeClass('selected');">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW BUTTON LABEL'].Value__c }
                                                                                                            </div>
                                                                                                            <div id="lkw" style="width: 50%"
                                                                                                                 class="{! IF(stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW BUTTON API'].Value__c = finalCardsMap[cardIndx].selectedTypeOfCar, 'btn btn-select selected', 'btn btn-select') }"
                                                                                                                 onclick="$j('[id$=car-type-dflt]').val('{! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW BUTTON API'].Value__c }');
                                                                                                                             $j('[id$=lkw]').addClass('selected');
                                                                                                                             $j('[id$=pkw]').removeClass('selected');">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW BUTTON LABEL'].Value__c }
                                                                                                            </div>
                                                                                                            <apex:inputHidden id="car-type-dflt" value="{! finalCardsMap[cardIndx].selectedTypeOfCar }"/>
                                                                                                        </div>
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row">
                                                                                    <div class="center-block text-center" style="margin-top: 24px;">
                                                                                        <div class="col-xs-12 col-sm-12">
                                                                                            <!-- if account name > 25 symbols -->
                                                                                            <apex:commandLink action="{! goToEmbossing }"
                                                                                                              value="{! stepPagesMap['CARD CONFIGURATION'].elements['OPTIONS TAB']['NEXT BUTTON'].Value__c }"
                                                                                                              reRender="configBlock, save-config-btn, goToLastNotConfiguredCardBlock"
                                                                                                              rendered="{! continueButtonStatus = 'show-goToEmbossingButton' }"
                                                                                                              oncomplete="setEvents_cardsOrder(); goToLastNotConfiguredCardViewport();"
                                                                                                              status="splashStatus"
                                                                                                              styleClass="btn btn-red">
                                                                                                <apex:param name="embossingTabName" value="Embossing" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                            </apex:commandLink>
                                                                                            <!-- if 1 card only and account name > 25 symbols -->
                                                                                            <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['CONTINUE BUTTON'].Value__c }"
                                                                                                              action="{! goToFeesAndCosts }"
                                                                                                              oncomplete="toViewport('fees-snd-costs-viewport'); setEvents_cardsOrder(); onPageRender(); "
                                                                                                              reRender="configuration"
                                                                                                              styleClass="btn btn-red"
                                                                                                              rendered="{! continueButtonStatus = 'show-saveContinueButton' }"
                                                                                                              status="splashStatus">
                                                                                                <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                            </apex:commandLink>
                                                                                            <!-- if more than 2 cards and account name > 25 symbols -->
                                                                                            <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['SAVE BUTTON'].Value__c }"
                                                                                                              action="{! saveCard }"
                                                                                                              onComplete="goToLastNotConfiguredCardViewport(); onPageRender();"
                                                                                                              reRender="configuration, systemError, goToLastNotConfiguredCardBlock"
                                                                                                              rendered="{! continueButtonStatus = 'show-saveSingleCardButton' }"
                                                                                                              styleClass="btn btn-red"
                                                                                                              status="splashStatus">
                                                                                                <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                            </apex:commandLink>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <script>
                                                                                        analytics_CardConfigurationOptionsOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                                                                    </script>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="b-embossing" rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing' }">
                                                                                <apex:outputPanel layout="block" styleClass="font-13">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['DESCRIPTION'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel id="company-name-input">
                                                                                    <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = true }">
                                                                                        <div class="row form-group">
                                                                                            <div class="company-name block ym-hide-content">
                                                                                                <div class="col-xs-12 col-sm-12">
                                                                                                    <div class="b-form-field">
                                                                                                        <div class="form-field">
                                                                                                            <div class="f-input">
                                                                                                                <apex:outputLabel styleClass="f-container">
                                                                                                                        <span class="column">
                                                                                                                            <apex:inputText id="companyName"
                                                                                                                                            value="{! finalCardsMap[cardIndx].companyNameInputValue }"
                                                                                                                                            required="false"
                                                                                                                                            styleClass="inline-block form-control required input ym-disable-keys"
                                                                                                                                            style="text-transform: uppercase;"
                                                                                                                                            maxLength="25"
                                                                                                                                            html-autocomplete="off" />
                                                                                                                            <span class="len-company-name font-11"></span>
                                                                                                                            <apex:outputLabel styleClass="input-label" for="companyName">
                                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                                                                    <span class="f-required">
                                                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                                                                    </span>
                                                                                                                            </apex:outputLabel>
                                                                                                                        </span>
                                                                                                                </apex:outputLabel>
                                                                                                                <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                                                            </div>
                                                                                                            <apex:outputPanel layout="block" styleClass="font-11 text-muted" style="margin-top: 7px; display: flex;">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['REMARK'].Value__c }
                                                                                                                <span style="min-width: 21px; display: inline-block;"></span>
                                                                                                            </apex:outputPanel>
                                                                                                        </div>
                                                                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </apex:outputPanel>

                                                                                    <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = false }">
                                                                                        <div class="row">
                                                                                            <div class="col-xs-12 col-sm-12">
                                                                                                <apex:outputLabel styleClass="font-13 text-muted" style="margin: 24px 0 4px 0;">
                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                                    <span class="f-required">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                                    </span>
                                                                                                </apex:outputLabel>
                                                                                                <div class="m-company-value ym-hide-content">
                                                                                                    <apex:outputText id="companyInput"
                                                                                                                     value="{! finalCardsMap[cardIndx].companyNameInputValue }"
                                                                                                                     styleClass="company-value inline-block font-15"/>
                                                                                                    <apex:outputPanel styleClass="edit">
                                                                                                        <apex:commandLink action="{! editCompanyName }"
                                                                                                                          onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                                                                          styleClass="font-11"
                                                                                                                          reRender="company-name-input"
                                                                                                                          status="splashStatus">
                                                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                                            <apex:param name="cardindex" value="{! cardIndx }"/>
                                                                                                        </apex:commandLink>
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <script>
                                                                                        analytics_CardConfigurationPersonOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                                                                    </script>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel id="save-config-btn">
                                                                <apex:outputPanel rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing' }">
                                                                    <div class="row">
                                                                        <div class="center-block text-center" style="margin-top: 24px;">
                                                                            <div class="col-xs-12 col-sm-12">
                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['SAVE BUTTON'].Value__c }"
                                                                                                  action="{! saveCard }"
                                                                                                  onComplete="onPageRender(); goToLastNotConfiguredCardViewport();"
                                                                                                  reRender="configuration, systemError, goToLastNotConfiguredCardBlock"
                                                                                                  rendered="{! continueButtonStatus = 'show-saveSingleCardButton' }"
                                                                                                  styleClass="btn btn-red"
                                                                                                  status="splashStatus">
                                                                                    <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                </apex:commandLink>
                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['CONTINUE BUTTON'].Value__c }"
                                                                                                  action="{! goToFeesAndCosts }"
                                                                                                  oncomplete="toViewport('fees-snd-costs-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                                  reRender="configuration, formBlock, stepList"
                                                                                                  styleClass="btn btn-red"
                                                                                                  rendered="{! continueButtonStatus = 'show-saveContinueButton' }"
                                                                                                  status="splashStatus">
                                                                                    <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                </apex:commandLink>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-xs-12 col-sm-12">
                                                                            <div class="text-center">
                                                                                <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                                                    <apex:outputPanel layout="block">
                                                                                        <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                                                          onclick="scrollDisableControl('disable');"
                                                                                                          value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                                          styleClass="font-13"
                                                                                                          reRender="saveAndContinueLater"
                                                                                                          status="splashStatus"/>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                                            {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel id="goToLastNotConfiguredCardBlock">
                                                                <script>
                                                                    function goToLastNotConfiguredCardViewport() {
                                                                        var cardIndxJs = +'{! cardIndx }';
                                                                        toViewport('not-configured-card-' + cardIndxJs + '-viewport');
                                                                        console.log('not-configured-card-' + cardIndxJs + '-viewport');
                                                                    }
                                                                </script>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </apex:repeat>
                                            </div>
                                        </div>

                                        <apex:repeat value="{! finalCardsMap }" var="cardIndx">
                                            <apex:outputPanel layout="block" styleClass="col-xs-12 col-sm-12" rendered="{! AND(finalCardsMap[cardIndx].techParamsIsConfigurated = true, finalCardsMap[cardIndx].cardIsConfigurated = false) }">
                                                <div class="card-item">
                                                    <div class="row">
                                                        <div class="b-steps-list-cards">
                                                            <apex:outputPanel layout="block" styleClass="li">
                                                                <apex:outputPanel styleClass="li-text" layout="block">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['-CARD #-']['LABEL'].Value__c } {! cardIndx }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:repeat>

                                        <span id="fees-snd-costs-viewport"></span>
                                        <apex:outputPanel layout="block" styleClass="col-xs-12 col-sm-12" rendered="{! OR(continueButtonStatus = 'show-saveSingleCardButton', continueButtonStatus = 'show-saveContinueButton') }">
                                            <div class="row">
                                                <div class="b-steps-list-cards">
                                                    <apex:outputPanel layout="block" styleClass="li" style="border: none;">
                                                        <apex:outputPanel styleClass="li-text" layout="block">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['FEES AND COSTS']['HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{! continueButtonStatus = 'show-feesAgreementButton' }">
                                            <div class="wrapper blue-block">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel layout="block" styleClass="b-block-header">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['FEES AND COSTS']['HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="inner-block">
                                                            <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                                <apex:outputPanel layout="block" styleClass="fees-and-costs">
                                                                    <apex:outputPanel layout="block" styleClass="item" style="{! costItem.style }">
                                                                        <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="f-desc">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-PER-'].Value__c } {! numberOfCards } {! IF(numberOfCards = 1, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARD-'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARDS-'].Value__c) }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </apex:repeat>

                                                            <apex:outputPanel layout="block" styleClass="fee-national-header">
                                                                <apex:outputPanel layout="block">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING'].Value__c }
                                                                    <div class="i-helper inline-block"
                                                                         data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING HELP'].Value__c }"
                                                                         data-trigger="hover"
                                                                         data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                <apex:outputPanel layout="block" styleClass="fees-and-costs">
                                                                    <apex:outputPanel layout="block" styleClass="item">
                                                                        <apex:outputPanel layout="block" styleClass="f-item inline-block" >
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }
                                                                            <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </apex:repeat>

                                                            <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                                <apex:outputPanel layout="block" styleClass="fee-international-header">
                                                                    <apex:outputPanel layout="block">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING'].Value__c }
                                                                        <div class="i-helper inline-block"
                                                                             data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING HELP'].Value__c }" data-trigger="hover"
                                                                             data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                    <apex:outputPanel layout="block" styleClass="fees-and-costs">
                                                                        <apex:outputPanel layout="block" styleClass="item">
                                                                            <apex:outputPanel layout="block" styleClass="f-item inline-block" >
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }
                                                                                <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                            {! costItem.costValue } {! costItem.costTariff }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:repeat>
                                                            </apex:outputPanel>

                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <div class="collapse-block">
                                                                        <div class="link" data-toggle="collapse" data-target="#otherPossibleFees">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES HEADING'].Value__c }
                                                                            <div class="expander block-expand inline-block"></div>
                                                                        </div>
                                                                        <div class="row collapse" id="otherPossibleFees" style="margin-top: 12px;">
                                                                            <div class="fees-inner-block">
                                                                                <apex:outputPanel layout="block" styleClass="font-15 fees-inner-text">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES SUBHEADING'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:repeat value="{! costsColumnsMap['3'] }" var="costItem">
                                                                                    <apex:outputPanel layout="block" styleClass="fees-and-costs" style="{! costItem.style }">
                                                                                        <apex:outputPanel layout="block" styleClass="item" style="margin-top: 7px;">
                                                                                            <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c }
                                                                                                <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-html="true" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                                </apex:outputPanel>
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                                            {! costItem.costValue } <span class="fees-euro-symbol">{! costItem.costTariff }</span>
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                </apex:repeat>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <div class="b-block-header">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['HEADING TEMP'].Value__c }
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <div class="col-xs-4 col-sm-4" style="font-family: Montserrat; font-weight: 700;">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['4 MONTHS TEMP'].Value__c }
                                                                    </div>
                                                                    <div class="col-xs-8 col-sm-8" style="padding: 0 11px 0 0;">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['NO MONTHLY CARD FEE TEMP'].Value__c }<br/>
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['NO TRANSACTION FEE TEMP'].Value__c }
                                                                        <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['NO MONTHLY CARD FEE HINT TEMP'].Value__c }" data-trigger="hover" data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-12 col-sm-12" style="margin-top: 10px;">
                                                                    <div class="col-xs-4 col-sm-4" style="font-family: Montserrat; font-weight: 700;">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['3 MONTHS TEMP'].Value__c }
                                                                    </div>
                                                                    <div class="col-xs-8 col-sm-8" style="padding: 0 11px 0 0;">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['2 CENTS OFF TEMP'].Value__c }
                                                                        <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['2 CENTS OFF HINT TEMP'].Value__c }" data-trigger="hover" data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="center-block text-center" style="margin-top: 22px;">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                action="{! goToSpecialOffers }"
                                                                                onComplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                                status="splashStatus"
                                                                                styleClass="btn btn-red"
                                                                                style="width: 220px;"/>
                                                            <script>
                                                                    isOffers = true;
                                                                    analytics_CardConfigurationSummaryOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                                                </script>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="text-center">
                                                            <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                                <apex:outputPanel layout="block">
                                                                    <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                                      onclick="scrollDisableControl('disable');"
                                                                                      value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                      styleClass="font-13"
                                                                                      reRender="saveAndContinueLater"
                                                                                      status="splashStatus"/>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- STEP SPECIAL OFFERS -->
                                <apex:outputPanel rendered="{! OR(AND(activeStep = 2, activeSubstep = 'Choosing offer'), AND(activeStep = 3, activeSubstep = 'Additional services')) }">
                                    <apex:outputPanel layout="block" id="specialOffers" styleClass="special-offers" rendered="{! AND(activeStep = 2, activeSubstep = 'Choosing offer') }">
                                        <script>
                                                activePageAnalytics = 'Card configuration';
                                            </script>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="m-offer">
                                                        <apex:outputPanel layout="block" styleClass="b-col-header">
                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <apex:outputPanel layout="block" id="blockSpecialOffers">
                                                <apex:outputPanel layout="block" styleClass="offer" id="chooseStation">
                                                    <apex:repeat value="{! homeOffersList }" var="homeOffer">
                                                        <div class="b-splitter" style="margin-top: 12px;"></div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <apex:outputPanel layout="block" styleClass="font-15" style="margin-bottom: 6px;">
                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['OFFER NAME'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <apex:outputPanel layout="block" styleClass="price-tag-text inline-block">
                                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['OFFER DESCRIPTION'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel rendered="{! OR(homeOffer.homeMapSelectionBtnStatus = 'show-enabled', homeOffer.homeMapSelectionBtnStatus = 'show-disabled') }">
                                                            <div class="row">
                                                                <div class="choose-station-btn">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <div class="offer-buttons" style="display: {! IF(OR(homeOffer.offerCancelBtnStatus = 'show-enabled', homeOffer.offerCancelBtnStatus = 'show-disabled', homeOffer.homeMapSelectionBtnStatus = 'show-enabled', homeOffer.homeMapSelectionBtnStatus = 'show-disabled', homeOffer.offerSelectionBtnStatus = 'show-enabled', homeOffer.offerSelectionBtnStatus = 'show-disabled'), 'block', 'none') }">
                                                                            <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['CHOOSE STATION BUTTON'].Value__c }"
                                                                                                disabled="{! homeOffer.homeMapSelectionBtnStatus = 'show-disabled' }"
                                                                                                styleClass="btn btn-red"
                                                                                                alt="{! homeOffer.productName }"
                                                                                                action="{! chooseStation }"
                                                                                                oncomplete="selectedOfferAnalytics = this.alt;"
                                                                                                reRender="modalShowLocator, specialOffers, modalError" status="splashStatus">
                                                                                <apex:param name="homeMapSelectionBtnStatus" value="hide" assignTo="{! homeOffer.homeMapSelectionBtnStatus }"/>
                                                                                <apex:param name="offerRemoveBtnStatus" value="hide" assignTo="{! homeOffer.offerRemoveBtnStatus }"/>
                                                                                <apex:param name="offerSelectionBtnStatus" value="show-disabled" assignTo="{! homeOffer.offerSelectionBtnStatus }"/>
                                                                                <apex:param name="offerCancelBtnStatus" value="show-enabled" assignTo="{! homeOffer.offerCancelBtnStatus }"/>
                                                                                <apex:param name="offerName" value="{! homeOffer.productName }"/>
                                                                            </apex:commandButton>

                                                                            <apex:outputPanel styleClass="info font-14" style="margin-left: 15px;" rendered="{! homeOffer.homeMapSelectionBtnStatus = 'show-disabled' }">
                                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['ALREADY SELECTED OFFER MESSAGE'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{! OR(homeOffer.offerRemoveBtnStatus = 'show-disabled', homeOffer.offerRemoveBtnStatus = 'show-enabled') }">
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <apex:outputPanel layout="block" styleClass="info">
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['FAVOURITE STATION HEADING'].Value__c }
                                                                        <apex:outputPanel layout="block" styleClass="point">
                                                                            <span>{! LOWER(opportunity.Home_station__c) }</span>
                                                                            <apex:outputPanel styleClass="edit">
                                                                                <apex:commandLink styleClass="font-11" value=""
                                                                                                  reRender="modalShowLocator, specialOffers, modalError"
                                                                                                  status="splashStatus"
                                                                                                  title="{! homeOffer.productName }"
                                                                                                  oncomplete="selectedOfferAnalytics = this.title;"
                                                                                                  action="{! chooseStation }"><apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                    <apex:param name="homeMapSelectionBtnStatus" value="hide" assignTo="{! homeOffer.homeMapSelectionBtnStatus }"/>
                                                                                    <apex:param name="offerRemoveBtnStatus" value="hide" assignTo="{! homeOffer.offerRemoveBtnStatus }"/>
                                                                                    <apex:param name="offerSelectionBtnStatus" value="show-disabled" assignTo="{! homeOffer.offerSelectionBtnStatus }"/>
                                                                                    <apex:param name="offerCancelBtnStatus" value="show-enabled" assignTo="{! homeOffer.offerCancelBtnStatus }"/>
                                                                                    <apex:param name="offerName" value="{! homeOffer.productName }"/>
                                                                                </apex:commandLink>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <div class="offer-buttons" style="margin-top: 15px">
                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['REMOVE OFFER BUTTON'].Value__c }"
                                                                                          styleClass="btn btn-gray"
                                                                                          action="{! removeOffer }"
                                                                                          reRender="specialOffers, modalError"
                                                                                          status="splashStatus"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <div class="b-splitter"></div>
                                                    </apex:repeat>
                                                </apex:outputPanel>

                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="text-center" id="specialOffersContinueBlock">
                                                            <apex:outputPanel layout="block" styleClass="button-info font-11" style="color: #777;" rendered="{! AND(continueButtonStatus = 'show-disabled', homeOffersList.size + nonHomeOffersList.size != 1 ) }">
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="bottom-continue-btn" >
                                                                <div class="bottom-continue-btn">
                                                                    <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                        action="{! goToAdditionalParams }"
                                                                                        onComplete="toViewport('additional-viewport'); onPageRender();"
                                                                                        styleClass="btn btn-red continue"
                                                                                        reRender="formBlock, systemError,onlineChatBlock"
                                                                                        status="splashStatus"/>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                        <script>
                                                analytics_SpecialOfferOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                            </script>
                                    </apex:outputPanel>

                                    <apex:outputPanel styleClass="special-offers" rendered="{! AND(activeStep = 3, activeSubstep = 'Additional services') }">
                                        <script>
                                                activePageAnalytics = 'Additional services';
                                            </script>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="m-offer" >
                                                        <apex:outputPanel layout="block" styleClass="b-col-header">
                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <!-- ADDITIONAL OFFERS BLOCK-->
                                            <apex:outputPanel layout="block" id="blockCharityOffer">
                                                <apex:outputPanel styleClass="top-gray-block" layout="block">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:outputPanel layout="block" styleClass="b-shell-header">
                                                                <apex:repeat value="{! IF(opportunity.Product__c = 'Home Station offer (v.1)', homeOffersList, nonHomeOffersList) }" var="offer">
                                                                    <apex:outputPanel layout="block" styleClass="inline-block" style="width: 75%;" rendered="{! offer.productName = opportunity.Product__c }">
                                                                        <apex:outputPanel styleClass="b-semibold-header" layout="block">
                                                                                {! IF(opportunity.Home_Station__c != null, stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TEASER HOME STATION SELECTED'].Value__c, stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TEASER HOME STATION NOT SELECTED'].Value__c) }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="font-11" layout="block">
                                                                                {! IF(opportunity.Home_Station__c != null, opportunity.Home_Station__c, stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TEASER DESC HOME STATION NOT SELECTED'].Value__c) }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:repeat>
                                                                <apex:outputPanel layout="block" styleClass="edit-special-offer inline-block pull-right">
                                                                    <apex:outputPanel styleClass="edit">
                                                                        <apex:commandLink action="{! editSpecialOffers }"
                                                                                          styleClass="font-11"
                                                                                          reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                                          status="splashStatus">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>

                                                <span id="additional-viewport"></span>
                                                <apex:outputPanel layout="block" rendered="{! AND(activeStep = 3, activeSubStep = 'Additional services') }">
                                                    <apex:outputPanel styleClass="offer scroll-to-additional" layout="block">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <apex:outputPanel layout="block" styleClass="m-nature-block" >
                                                                    <apex:outputPanel layout="block" styleClass="b-small-header">
                                                                            {! stepPagesMap['ADDITIONAL'].elements['CO2 TOP HEADING']['HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="font-13" style="padding-right: 12px;">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['CO2 TOP HEADING']['SUBHEADING'].Value__c }
                                                                        <div class="i-helper inline-block"
                                                                             data-content="{! stepPagesMap['ADDITIONAL'].elements['CO2 TOP HEADING']['SUBHEADING HELP'].Value__c }"
                                                                             data-trigger="hover"
                                                                             data-container="body" data-toggle="popover"
                                                                             data-placement="top" style="color:#1A1A1A;">?
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputPanel layout="block" styleClass="b-text-img" >
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'eco1.png')}" styleClass="eco-img"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <apex:outputPanel layout="block" styleClass="text-under-picture">
                                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                                        <apex:outputText escape="false" value="{! stepPagesMap['ADDITIONAL'].elements['CO2 DESCRIPTION']['VALUE'].Value__c }"/>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="agree" style="margin-top: 7px;">
                                                                    <div class="form-check inline-block">
                                                                        <div class="checkbox checkbox-red">
                                                                            <apex:inputCheckbox value="{! stepPagesMap['ADDITIONAL'].fields['CO2 TAKE CARE'].elementItemsMap['VALUE'].Value__c }" styleClass="form-check-input" id="checkboxCareAdditionalBlock"/>
                                                                            <apex:outputLabel for="checkboxCareAdditionalBlock">
                                                                                <apex:outputPanel styleClass="font-11">
                                                                                    <apex:outputPanel >
                                                                                            {! stepPagesMap['ADDITIONAL'].fields['CO2 TAKE CARE'].elementItemsMap['LABEL'].Value__c }
                                                                                    </apex:outputPanel><br/>
                                                                                    <apex:outputPanel >
                                                                                            {! stepPagesMap['ADDITIONAL'].fields['CO2 TAKE CARE'].elementItemsMap['SUBLABEL'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </apex:outputLabel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="text-center" style="margin-top: 24px;">
                                                                <apex:outputPanel layout="block" styleClass="bottom-continue-btn" >
                                                                    <apex:commandButton value="{! stepPagesMap['ADDITIONAL'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                        action="{! goToPaymentOptions }"
                                                                                        oncomplete="toViewport('order-details-viewport'); setEvents_directDebit(); setEvents_directDebitDeposit(); setEvents_bankTransferDeposit(); setEvents_bankTransferNoDeposit(); onPageLoad(); onPageRender();"
                                                                                        styleClass="btn btn-red"
                                                                                        reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                                        status="splashStatus"/>
                                                                </apex:outputPanel>

                                                                <apex:outputPanel layout="block" style="margin-bottom: 4px;">
                                                                    <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                                      onclick="scrollDisableControl('disable');"
                                                                                      value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                      styleClass="font-13"
                                                                                      reRender="saveAndContinueLater"
                                                                                      status="splashStatus"/>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="font-11 notification-email">
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <script>
                                                            isPaymentDetails = true;
                                                            analytics_AdditionalOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                                        </script>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- STEP MOBILE PAYMENT OPTIONS DIRECT DEBIT -->
                                <apex:outputPanel layout="block" id="directDebit" styleClass="payment-direct-debit"
                                                  rendered="{! AND(activeStep = 4, activeSubstep = 'DirectDebit')}">
                                    <script>
                                            activePageAnalytics = 'DirectDebit';
                                        </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                                <div class="row form-group">
                                                    <div class="payment-method block" style="margin-top: 0px;" >
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:outputPanel layout="block" styleClass="f-label" style="margin-top: 18px">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['PAYMENT METHOD'].elementItemsMap['LABEL'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="f-value">
                                                                    {! IF (opportunity.Zahlungsart__c = 'Lastschrift',
                                                                            stepPagesMap['PAYMENT OPTIONS'].fields['PAYMENT METHOD'].elementItemsMap['DD VALUE'].Value__c,
                                                                            IF (opportunity.Zahlungsart__c = 'Banküberweisung',
                                                                                    stepPagesMap['PAYMENT OPTIONS'].fields['PAYMENT METHOD'].elementItemsMap['BT VALUE'].Value__c, '')) }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="billing-period block" style="margin-top: 0px;">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:outputPanel layout="block" styleClass="f-label" style="margin-top: 18px">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['LABEL'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="f-value">
                                                                    {! IF (opportunity.Rechnungsperiode__c == '7',
                                                                            stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-WEEKLY-'].Value__c,
                                                                            IF (opportunity.Rechnungsperiode__c == '15',
                                                                                    stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-BIWEEKLY-'].Value__c,
                                                                                    IF (opportunity.Rechnungsperiode__c == '30',
                                                                                            stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-MONTHLY-'].Value__c,
                                                                                            ''))) }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="account-holder block">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="b-form-field">
                                                                <div class="form-field">
                                                                    <div class="f-input">
                                                                        <apex:outputLabel styleClass="f-container">
                                                                            <span class="column">
                                                                                <apex:inputText id="accountHolder"
                                                                                                value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCOUNT HOLDER'].elementItemsMap['VALUE'].Value__c }"
                                                                                                required="false"
                                                                                                styleClass="inline-block form-control required input ym-disable-keys"
                                                                                                maxLength="40"/>
                                                                                <apex:outputPanel styleClass="input-label">
                                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCOUNT HOLDER'].elementItemsMap['LABEL'].Value__c }
                                                                                        <span class="f-required">
                                                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCOUNT HOLDER'].elementItemsMap['ASTERISK'].Value__c }
                                                                                        </span>
                                                                                </apex:outputPanel>
                                                                            </span>
                                                                        </apex:outputLabel>
                                                                        <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                    </div>
                                                                </div>
                                                                <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCOUNT HOLDER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row form-group iban-group">
                                                    <div class="iban block">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="b-form-field">
                                                                <div class="form-field">
                                                                    <div class="f-input">
                                                                        <apex:outputLabel styleClass="f-container" for="IBAN">
                                                                            <span class="column">
                                                                                <apex:inputText id="IBAN"
                                                                                                value="{! stepPagesMap['PAYMENT OPTIONS'].fields['IBAN'].elementItemsMap['VALUE'].Value__c }"
                                                                                                required="false"
                                                                                                styleClass="inline-block form-control required input ym-disable-keys"
                                                                                                maxLength="27"/>
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['PAYMENT OPTIONS'].fields['IBAN'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                     data-html="true" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                <apex:outputPanel styleClass="input-label">
                                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['IBAN'].elementItemsMap['LABEL'].Value__c }
                                                                                        <span class="f-required">
                                                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['IBAN'].elementItemsMap['ASTERISK'].Value__c }
                                                                                        </span>
                                                                                </apex:outputPanel>
                                                                            </span>
                                                                        </apex:outputLabel>
                                                                        <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                    </div>
                                                                </div>
                                                                <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['IBAN'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="swift block">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="b-form-field">
                                                                <div class="form-field">
                                                                    <div class="f-input">
                                                                        <apex:outputLabel styleClass="f-container" for="SWIFT">
                                                                            <span class="column">
                                                                                <apex:inputText id="SWIFT"
                                                                                                value="{! stepPagesMap['PAYMENT OPTIONS'].fields['SWIFT'].elementItemsMap['VALUE'].Value__c }"
                                                                                                required="false"
                                                                                                styleClass="inline-block form-control required input ym-disable-keys"
                                                                                                maxLength="11"/>
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['PAYMENT OPTIONS'].fields['SWIFT'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                     data-html="true" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                <apex:outputPanel styleClass="input-label">
                                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['SWIFT'].elementItemsMap['LABEL'].Value__c }
                                                                                        <span class="f-required">
                                                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['SWIFT'].elementItemsMap['ASTERISK'].Value__c }
                                                                                        </span>
                                                                                </apex:outputPanel>
                                                                            </span>
                                                                        </apex:outputLabel>
                                                                        <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                    </div>
                                                                </div>
                                                                <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['SWIFT'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="invoices block" style="margin-top: 16px;">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:outputPanel layout="block" styleClass="f-label" style="margin-top: 8px;">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['INVOICES FORMAT'].elementItemsMap['LABEL'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="f-value">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['INVOICES FORMAT'].elementItemsMap['VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="margin: 20px 0 0 0">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['VALUE'].Value__c }" styleClass="form-check-input paper-invoices" id="mcheckboxDirectDebitPaper"/>
                                                        <apex:outputLabel for="mcheckboxDirectDebitPaper">
                                                                <span class="form-check-labelHeader">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL 1'].Value__c }
                                                                </span><br/>
                                                            <span class="font-11">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL 2'].Value__c }
                                                            </span><br/>
                                                            <span class="font-11" style="color: #9299a2;">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['LABEL 3'].Value__c }
                                                            </span>
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>
                                                <div class="b-splitter" style="margin: 14px 12px 0px 12px;"></div>
                                                <div class="form-check" style="margin: 20px 0px 0px 0px;">
                                                    <div class="checkbox checkbox-red">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['VALUE'].Value__c }" styleClass="form-check-input" id="checkboxDirectDebit2"/>
                                                        <apex:outputLabel value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 1'].Value__c } {! selectedCompany.name } {! stepPagesMap['PAYMENT OPTIONS'].fields['DECISION'].elementItemsMap['LABEL PART 2'].Value__c }" styleClass="form-check-label" for="checkboxDirectDebit2" style="margin-bottom: 16px;"/>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="margin:8px 0px 0px 0px;">
                                                    <div class="checkbox checkbox-red" style="min-height: 22px;">
                                                        <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['VALUE'].Value__c }"  styleClass="form-check-input" id="checkboxDirectDebit3"/>
                                                        <apex:outputLabel styleClass="form-check-label terms-text" for="checkboxDirectDebit3" style="margin-bottom: 0px;">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 1'].Value__c }
                                                            <apex:commandLink action="{! showTermsAndConditions }"
                                                                              onclick="scrollDisableControl('disable');"
                                                                              styleClass="form-check-label"
                                                                              reRender="modalTermConditions">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL URL'].Value__c }
                                                            </apex:commandLink>
                                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['LABEL PART 2'].Value__c }
                                                        </apex:outputLabel>
                                                    </div>
                                                </div>
                                                <apex:outputPanel id="sepaBlock">
                                                    <div class="b-grey-block" style="{! IF(stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['HELP'].Value__c = 'false','margin: 24px 12px 15px;','margin: 24px 0px 15px;')}">
                                                        <apex:outputPanel layout="block" styleClass="m-row-header row" style="margin: 10px 0px 0px 11px;">
                                                            <div style="width: 74%; float: left;">
                                                                <apex:outputPanel rendered="{! opportunity.Direct_Debit_Mandate_Type__c = 'Core' }">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['HEADING'].Value__c }
                                                                    <div
                                                                            class="i-helper
                                                                            inline-block"
                                                                            data-content="{! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['HELP'].Value__c }"
                                                                            data-trigger="hover"
                                                                            data-html="true"
                                                                            data-container="body"
                                                                            data-toggle="popover"
                                                                            data-placement="top">?</div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{! opportunity.Direct_Debit_Mandate_Type__c = 'B2B' }">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['HEADING B2B'].Value__c }
                                                                    <div
                                                                            class="i-helper
                                                                            inline-block"
                                                                            data-content="{! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['HELP B2B'].Value__c }"
                                                                            data-trigger="hover"
                                                                            data-html="true"
                                                                            data-container="body"
                                                                            data-toggle="popover"
                                                                            data-placement="top">?</div>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div style="width: 26%; float: left;">
                                                            <apex:outputPanel layout="block" styleClass="pull-right" style="margin-right: 5px;">
                                                                <apex:commandLink action="{! showSendSepaDocument }"
                                                                                  onclick="scrollDisableControl('disable');"
                                                                                  styleClass="btn btn-xs payment-modal"
                                                                                  reRender="sendSepaToEmail, modalSepaMandate"
                                                                                  status="splashStatus">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                                </apex:commandLink>
                                                            </apex:outputPanel>
                                                            <span id="show-sepa-btn">
                                                                    <apex:outputPanel layout="block" styleClass="pull-right" style="margin-right: 5px;">
                                                                        <apex:commandLink action="{! showSepaMandateModal }"
                                                                                          onclick="scrollDisableControl('disable');"
                                                                                          styleClass="btn btn-xs payment-modal"
                                                                                          onComplete="scrollDisableControl('disable'); updateSepaFullDocument();"
                                                                                          reRender="modalSepaMandate">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "full-screen.png" )}" height="17px" width="17px"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </span>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <div id="sepa-disagree-block" style="{! IF(stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT SEPA'].elementItemsMap['VALUE'].Value__c = 'true', 'display: none;', 'display: block;') }">
                                                            <apex:outputPanel layout="block" style="margin: 14px 12px 0px 12px;">
                                                                <apex:outputPanel layout="block"
                                                                                  styleClass="font-11"
                                                                                  style="margin-top: 14px"
                                                                                  rendered="{! opportunity.Direct_Debit_Mandate_Type__c = 'Core' }">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['DESCRIPTION'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block"
                                                                                  styleClass="font-11"
                                                                                  style="margin-top: 14px"
                                                                                  rendered="{! opportunity.Direct_Debit_Mandate_Type__c = 'B2B' }">
                                                                    <p>{! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['ADDITIONAL DESCRIPTION B2B'].Value__c }</p>
                                                                    <p>{! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['DESCRIPTION B2B'].Value__c }</p>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <div class="row">
                                                                <div class="m-buttons center-block text-center" >
                                                                    <div class="col-xs-12 col-sm-12" style="margin-bottom: 16px;">
                                                                        <div onclick="acceptSepa(); setEvents_directDebit();" class="btn btn-red"
                                                                             style="min-width:112px;">{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT SEPA'].elementItemsMap['ACCEPT BUTTON'].Value__c }
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div id="sepa-agree-block" style="{! IF(stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT SEPA'].elementItemsMap['VALUE'].Value__c = 'true', 'display: block;', 'display: none;') }">
                                                            <apex:outputPanel layout="block" styleClass="font-13" style="margin: 7px 12px 8px 12px;">
                                                                <apex:outputPanel styleClass="sepa-accepted" >
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['DESCRIPTION AFTER ACCEPT'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="font-13" style="float:right">
                                                                    <apex:commandLink action="{! showSepaMandateModal }"
                                                                                      onclick="scrollDisableControl('disable');"
                                                                                      styleClass="btn btn-xs font-13"
                                                                                      style="padding-right:0px;"
                                                                                      reRender="modalSepaMandate">
                                                                            {! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['READ URL LABEL'].Value__c }
                                                                    </apex:commandLink>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <apex:inputHidden id="sepa-accept-val" value="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT SEPA'].elementItemsMap['VALUE'].Value__c }"/>
                                                    </div>
                                                </apex:outputPanel>
                                                <div class="row" id="buttonRerender">
                                                    <div class="m-buttons center-block text-center deposit-button">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:actionFunction name="goToCongratulations"
                                                                                 action="{! doSavePaymentOptionsData }"
                                                                                 oncomplete="setEvents_directDebitDeposit(); onPageRender(); onPageLoad(); endSplash();"
                                                                                 reRender="formBlock, pageHeader, additionInfo, congratulations, systemError, onlineChatBlock"/>
                                                            <apex:actionFunction name="jsValidateIBAN"
                                                                                 action="{! jsValidateIBAN }"
                                                                                 reRender="formBlock, pageHeader, additionInfo, congratulations, systemError, onlineChatBlock"
                                                                                 oncomplete="toViewport('order-details-viewport'); setEvents_directDebit(); onPageRender(); doValidatePaymentDirectDebit(); setEvents_directDebitDeposit();"/>
                                                            <script>
                                                                    function doValidatePaymentDirectDebit() {
                                                                        if ({! isIBANValid }) {
                                                                            $j('.iban-group input').removeClass('error');
                                                                            $j('.iban-group input').addClass('success');
                                                                            $j('.iban-group').find('.invalid-feedback').hide();
                                                                            $j('.continue').attr('disabled', false);
                                                                            return validatePaymentDirectDebit();
                                                                        } else {
                                                                            $j('.iban-group input').removeClass('success');
                                                                            $j('.iban-group input').addClass('error');
                                                                            $j('.iban-group').find('.invalid-feedback').show();
                                                                            $j('.continue').attr('disabled', true);
                                                                            endSplash();
                                                                            toViewport('order-details-viewport');
                                                                        }
                                                                    }
                                                                </script>
                                                            <apex:commandButton id="continueButton"
                                                                                value="{! stepPagesMap['PAYMENT OPTIONS'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                onclick="validateIBAN()"
                                                                                styleClass="btn btn-red continue"
                                                                                reRender="formBlock, systemError, onlineChatBlock"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="text-center">
                                                            <apex:outputPanel layout="block" styleClass="save-and-continue" style="margin-top:20px;">
                                                                <apex:outputPanel layout="block" style="margin-bottom: 4px;">
                                                                    <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                                      onclick="scrollDisableControl('disable');"
                                                                                      value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                      styleClass="font-13"
                                                                                      reRender="saveAndContinueLater"
                                                                                      status="splashStatus"/>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                            analytics_PaymentDetailsOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                        </script>
                                </apex:outputPanel>

                                <!-- STEP MOBILE PAYMENT OPTIONS DIRECT DEBIT DEPOSIT -->
                                <apex:outputPanel layout="block" id="directDebitDeposit" styleClass="payment-direct-debit-deposit"
                                                  rendered="{! AND(activeStep = 4, true, activeSubstep = 'DirectDebitDeposit') }">
                                    <script>
                                            activePageAnalytics = 'DirectDebitDeposit';
                                        </script>
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <apex:outputPanel layout="block" styleClass="payment-to-deposit">
                                            <div class="row">
                                                <div class="col-xs-10 col-sm-10">
                                                    <apex:outputPanel layout="block" styleClass="m-row-header" style="margin:0px;">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT DETAILS']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                    {! IF (opportunity.Zahlungsart__c = 'Lastschrift',
                                                            stepPagesMap['PAYMENT OPTIONS'].fields['PAYMENT METHOD'].elementItemsMap['DD VALUE'].Value__c,
                                                            IF (opportunity.Zahlungsart__c = 'Banküberweisung',
                                                                    stepPagesMap['PAYMENT OPTIONS'].fields['PAYMENT METHOD'].elementItemsMap['BT VALUE'].Value__c, '')) },

                                                            {! IF (opportunity.Rechnungsperiode__c == '7',
                                                                    stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-WEEKLY-'].Value__c,
                                                                    IF (opportunity.Rechnungsperiode__c == '15',
                                                                            stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-BIWEEKLY-'].Value__c,
                                                                            IF (opportunity.Rechnungsperiode__c == '30',
                                                                                    stepPagesMap['PAYMENT OPTIONS'].fields['BILLING PERIOD'].elementItemsMap['-MONTHLY-'].Value__c,
                                                                                    ''))) },

                                                            {! IF (opportunity.Papierrechnung__c = true,
                                                                    stepPagesMap['PAYMENT OPTIONS'].fields['PAPER INVOICE'].elementItemsMap['TEASER'].Value__c,
                                                                    IF (opportunity.e_Invoicing_PDF__c = true,
                                                                            stepPagesMap['PAYMENT OPTIONS'].fields['INVOICES FORMAT'].elementItemsMap['TEASER'].Value__c, '')) }
                                                    </apex:outputPanel>
                                                </div>
                                                <div class="col-xs-2 col-sm-2">
                                                    <apex:commandLink action="{! editDirectDebitPaymentOptions }"
                                                                      oncomplete="toViewport('order-details-viewport'); setEvents_directDebit(); onPageLoad(); onPageRender(); isPaymentDetails = true;analytics_PaymentDetailsOnLoad();"
                                                                      styleClass="payment-modal"
                                                                      style="margin-top: 10px; margin-left: 20px;"
                                                                      reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                      status="splashStatus">
                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                    </apex:commandLink>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="m-row-header margin-borders">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT HEADING']['VALUE'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="payment-amount block" style="margin-top: 0px;">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="f-label">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['AMOUNT TO BE PAID'].elementItemsMap['LABEL'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="f-value">
                                                    {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['PAYMENT OPTIONS'].fields['AMOUNT TO BE PAID'].elementItemsMap['UNIT'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-desc" style="margin-top:16px;">
                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['AMOUNT TO BE PAID'].elementItemsMap['DESCRIPTION'].Value__c }
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                     <!--    <div class="payment-pay-deposit">
                                            <apex:outputPanel layout="block" styleClass="m-row-header">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['VALUE'].Value__c }
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="font-11" style="margin-bottom:16px">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['DESCRIPTION'].Value__c }
                                            </apex:outputPanel>
                                            <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].options }" var="param">
                                                <div class="row">
                                                    <div class="col-xs-5 col-sm-5">
                                                        <div class="radio radio-red">
                                                            <apex:commandLink value="{! param.value }"
                                                                              action="{! changePaymentMethod }"
                                                                              onComplete="setEvents_directDebitDeposit(); onPageRender();"
                                                                              styleClass="category-link {! IF(selectedPaymentMethod = param.value, 'active', '') }"
                                                                              reRender="directDebitDeposit, paymentFormToSend, systemError"
                                                                              status="splashStatus">
                                                                <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                            </apex:commandLink>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-7 col-sm-7 pull-right">
                                                        <apex:outputPanel styleClass="pay-logo" >
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                        height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                        width="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Width'].Value__c  }"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="b-splitter"></div>
                                            </apex:repeat> -->
                                            <!--
                                            <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].options }" var="param">
                                                <div class="row">
                                                    <div class="col-xs-5 col-sm-5">
                                                        <div class="radio radio-red">
                                                            <apex:commandLink value="{! param.value }"
                                                                              action="{! changePaymentMethod }"
                                                                              onComplete="setEvents_directDebitDeposit(); onPageRender();"
                                                                              styleClass="category-link {! IF(selectedPaymentMethod = param.value, 'active', '') }"
                                                                              reRender="directDebitDeposit, paymentFormToSend, systemError"
                                                                              status="splashStatus">
                                                                <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                            </apex:commandLink>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-7 col-sm-7 pull-right">
                                                        <apex:outputPanel styleClass="pay-logo" >
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                        height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                        width="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Width'].Value__c  }"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="b-splitter"></div>
                                            </apex:repeat>
                                            -->
                                       <!-- </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <div class="col-xs-4 col-sm-4 ingenico pull-right">
                                                    <div style="float:right;">
                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "ingenico.png" )}" height="40px" width="100px"/>
                                                    </div>
                                                </div>
                                                <div class="font-11 payment-deposit-footer">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT FOOTER']['VALUE'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="b-splitter" style="margin: 16px 12px;"></div>
                                         -->



                                        <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                        <div class="congratulations">
                                            <div class="wrapper" style="box-shadow: none;">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="m-grey-block">
                                                            <div class="b-description-block">
                                                                <apex:outputPanel styleClass="b-col-header inline-block" layout="block">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <!-- <apex:outputPanel layout="block" styleClass="inline-block pull-right">
                                                                        <apex:commandLink action="{! showSendHowToPayDocument }"
                                                                            styleClass="btn btn-xs payment-modal"
                                                                            reRender="sendHowToPayToEmail" status="splashStatus">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel> -->
                                                                <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                    <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="font-15" style="margin-top: 4px;">
                                                                    {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                        <div class="i-helper inline-block" style="margin-bottom: 3px;"
                                                                             data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }"
                                                                             data-trigger="hover"
                                                                             data-container="body"
                                                                             data-toggle="popover"
                                                                             data-placement="top">?
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <div class="row">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <div class="collapse-block">
                                                                            <div class="link" data-toggle="collapse" data-target="#depositDetails">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SHOW DEPOSIT DETAILS LABEL'].Value__c }<div class="expander block-expand inline-block"></div>
                                                                            </div>
                                                                            <div class="row collapse" id="depositDetails" style="margin-left: 0px;">
                                                                                <div class="detail-list">
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-check" style="margin: 8px 0px 8px 0px;">
                                            <div class="checkbox checkbox-red" style="min-height: 22px;">
                                                <apex:inputCheckbox value="{! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['VALUE'].Value__c }" styleClass="form-check-input" id="checkboxDirectDebitDeposit"/>
                                                <apex:outputLabel styleClass="form-check-label terms-text" for="checkboxDirectDebitDeposit">
                                                {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 1'].Value__c }
                                                    <apex:commandLink styleClass="form-check-label" onclick="showDepositAgreement(); return false;">{!stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['DOWNLOAD URL LABEL'].Value__c}</apex:commandLink>
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 2'].Value__c }
                                                        {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['UNIT'].Value__c }
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['LABEL PART 3'].Value__c }
                                                </apex:outputLabel>
                                            </div>
                                        </div>


                                        <div class="b-splitter" style="margin: 16px 12px;"></div>
                                        <div class="row">
                                            <div class="m-buttons center-block text-center" style="margin-top: 9px;">
                                                <div class="col-xs-12 col-sm-12">
                                                   <!--  <apex:commandButton action="{! proceedToCheckout  }"
                                                                        value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL'].Value__c }"
                                                                        oncomplete="startPayment('payment-direct-debit-deposit');"
                                                                        styleClass="btn btn-red continue"
                                                                        reRender="formBlock, pageHeader, systemError"
                                                                        status="splashStatus"/> -->

                                                    <!-- TEMP BUTTON (MUST BE REMOVED) -->
                                                    <apex:commandButton action="{! proceedToCheckoutPaymentOffline }"
                                                                        value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL'].Value__c }"
                                                                        styleClass="btn btn-red continue"
                                                                        oncomplete="setEvents_cardsOrder(); onPageRender();"
                                                                        reRender="formBlock, pageHeader, additionInfo, systemError"
                                                                        status="splashStatus"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <div class="text-center">
                                                    <apex:outputPanel layout="block" styleClass="save-and-continue" style="margin-top:20px;">
                                                        <apex:outputPanel layout="block" style="margin-bottom: 4px;">
                                                            <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                              onclick="scrollDisableControl('disable');"
                                                                              value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                              styleClass="font-13"
                                                                              reRender="saveAndContinueLater"
                                                                              status="splashStatus"/>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                            analytics_PaymentDetailsDepositOnLoad();
                                        </script>
                                </apex:outputPanel>

                                <!-- STEP CONGRATULATIONS -->
                                <span id="congratulations-viewport"></span>
                                <apex:outputPanel layout="block" id="congratulations" styleClass="congratulations" rendered="{! AND(activeStep == 5, activeSubStep == 'Congratulations') }">
                                    <script>
                                            activePageAnalytics = 'Congratulations';
                                        </script>
                                    <div class="wrapper ym-hide-content">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="end-logo center-block">
                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'tick2.png')}" styleClass="center-block"></apex:image>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-header">
                                                        <!--{! IF(paymentStatus = 'A', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND PAID'].Value__c, IF(opportunity.Security_To_Pay__c != 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c, IF(paymentStatus = 'E', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDER EXCEPTION'].Value__c, IF(OR(paymentStatus = 'D', paymentStatus = 'C'), stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND NOT PAID'].Value__c, '')))) } -->
                                                        {! IF(opportunity.Security_To_Pay__c != 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c, IF(opportunity.Security_To_Pay__c = 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND NOT PAID'].Value__c, '')) }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <!-- Card are ordered. Deposit is successfully paid -->
                                                <!--<apex:outputPanel layout="block" styleClass="font-13" rendered="{! paymentStatus = 'A'}">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName } {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARD'].Value__c) }
                                                    <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- Card are ordered. Deposit is not required -->
                                                <!--<apex:outputPanel layout="block" styleClass="font-13" rendered="{! AND(opportunity.Security_To_Pay__c != 'Kaution', paymentStatus = null) }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName } {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c) }
                                                    <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- Deposit is not paid (CANCEL\DECLINE) -->
                                                <!--<apex:outputPanel layout="block" styleClass="font-13" rendered="{! OR(paymentStatus = 'D', paymentStatus = 'C') }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName } {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS'].Value__c) }
                                                    <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- Deposit is not certainly paid (EXCEPTION) -->
                                                <!--<apex:outputPanel layout="block" styleClass="font-13" rendered="{! paymentStatus = 'E' }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MRS-'].Value__c, ''))} {! contact.FirstName } {! contact.LastName } {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARD'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARDS'].Value__c) }
                                                    <apex:outputPanel style="padding-left: 5px;">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards > 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARDS BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARD BLOCK'].Value__c) }
                                                </apex:outputPanel> -->

                                                <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                                <!-- Card are ordered. Deposit is not required -->
                                                <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! opportunity.Security_To_Pay__c != 'Kaution' }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.LastName } {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c,
                                                                IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK'].Value__c,
                                                                        stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK'].Value__c)) }
                                                </apex:outputPanel>
                                                <!-- Deposit is not paid -->
                                                <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                                {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c,
                                                                IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK'].Value__c,
                                                                        stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK'].Value__c)) }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="font-15 middle-border">
                                                    <apex:outputPanel layout="block" styleClass="inline-block">
                                                    {! selectedCompany.street } {! selectedCompany.housenumber }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="inline-block">
                                                            {! IF(selectedCompany.postcode != null, ', ' + selectedCompany.postcode, '') }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="inline-block">
                                                            {! IF(selectedCompany.city != null, ', ' + selectedCompany.city, '') }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="inline-block">
                                                            {! IF(selectedCompany.country != null, ', ' + selectedCompany.country, '') }
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="font-13 bottom-border">
                                                    <apex:outputPanel layout="inline">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE PART 1'].Value__c } {! contact.Email }{! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE PART 2'].Value__c }
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>

                                   <!-- <apex:outputPanel rendered="{! AND(opportunity.Security_To_Pay__c = 'Kaution', OR(paymentStatus = 'D', paymentStatus = 'C', paymentStatus = 'E')) }"> -->
                                        <apex:outputPanel rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel styleClass="m-header" layout="block">
                                                        <apex:outputPanel styleClass="b-col-header" layout="block" >
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['TOP HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel styleClass="font-13" layout="block">
                                                            {! IF (opportunity.Zahlungsart__c = 'Banküberweisung', stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK TRANSFER DESCRIPTION BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DIRECT DEBIT DESCRIPTION BLOCK'].Value__c) }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="m-grey-block">
                                                        <div class="b-description-block">
                                                            <apex:outputPanel styleClass="b-col-header inline-block" layout="block">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="inline-block pull-right">
                                                                <apex:commandLink action="{! showSendHowToPayDocument }"
                                                                                  onclick="scrollDisableControl('disable');"
                                                                                  styleClass="btn btn-xs payment-modal"
                                                                                  reRender="sendHowToPayToEmail"
                                                                                  status="splashStatus">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                                </apex:commandLink>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="font-15" style="margin-top: 4px;">
                                                                {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                    <div class="i-helper inline-block" style="margin-bottom: 3px;"
                                                                         data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }"
                                                                         data-trigger="hover"
                                                                         data-container="body"
                                                                         data-toggle="popover"
                                                                         data-placement="top">?
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <div class="collapse-block">
                                                                        <div class="link" data-toggle="collapse" data-target="#depositDetails">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SHOW DEPOSIT DETAILS LABEL'].Value__c }<div class="expander block-expand inline-block"></div>
                                                                        </div>
                                                                        <div class="row collapse" id="depositDetails" style="margin-left: 0px;">
                                                                            <div class="detail-list">
                                                                                <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                    <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                    <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                    <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                    <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SWIFT VALUE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                    <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['IBAN VALUE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="m-header">
                                                    <apex:outputPanel layout="block" styleClass="b-col-header" style="margin-bottom: 12px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['TOP HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="smart-img center-block">
                                                    <apex:image url="{! URLFOR($Resource.e2e_images, 'shellkarte_fr_web.png') }"/>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <div class="m-inside-wrapper">
                                                    <ul class="need-list font-13">
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                            $j(document).ready(function() {
                                                $j(this).scrollTop(0);
                                            });
                                            analytics_CongratsOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }");
                                        </script>
                                </apex:outputPanel>

                                <!--PROCESS ERROR PAGES -->
                                <apex:outputPanel layout="block"
                                                  styleClass="mobile-error-page"
                                                  rendered="{! OR(
                                                                  activeSubStep = 'Too high limit',
                                                                  activeSubStep = 'Report does not exist',
                                                                  activeSubStep = 'Company not found',
                                                                  activeSubStep = 'Private entity',
                                                                  activeSubStep = 'Authorization not granted',
                                                                  activeSubStep = 'Already in process',
                                                                  activeSubStep = 'Already a customer',
                                                                  activeSubStep = 'Black list',
                                                                  activeSubStep = 'Too many reports'
                                                                  )
                                                          }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {!  IF(activeSubStep = 'More than two paid reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['HEADING'].Value__c,
                                                                IF(activeSubStep = 'Too high limit', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT']['HEADING'].Value__c,
                                                                        IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['HEADING'].Value__c,
                                                                                IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['HEADING'].Value__c,
                                                                                        IF(activeSubStep = 'Private entity', stepPagesMap['PROCESS ERROR'].elements['PRIVATE ENTITY']['HEADING'].Value__c,
                                                                                                IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['HEADING'].Value__c,
                                                                                                        IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['HEADING'].Value__c,
                                                                                                                IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['HEADING'].Value__c,
                                                                                                                        IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['HEADING'].Value__c, ''))))))))) }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="font-13 b-error-text">
                                                        {!  IF(activeSubStep = 'More than two paid reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['DESCRIPTION'].Value__c,
                                                                IF(activeSubStep = 'Too high limit', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT']['DESCRIPTION'].Value__c,
                                                                        IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['DESCRIPTION'].Value__c,
                                                                                IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['DESCRIPTION'].Value__c,
                                                                                        IF(activeSubStep = 'Private entity', stepPagesMap['PROCESS ERROR'].elements['PRIVATE ENTITY']['DESCRIPTION'].Value__c,
                                                                                                IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['DESCRIPTION'].Value__c,
                                                                                                        IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['DESCRIPTION'].Value__c,
                                                                                                                IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['DESCRIPTION'].Value__c,
                                                                                                                        IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['DESCRIPTION'].Value__c, ''))))))))) }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="buttons text-center">
                                                <div class="col-xs-12 col-sm-12">
                                                    <a href="{! stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c }" class="btn btn-gray">
                                                            {! stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['LABEL'].Value__c }
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                            activePageAnalytics = "{! IF(activeSubStep != 'Private entity', activeSubStep, '') }";
                                            analytics_AddError('{! activeStep }', activePageAnalytics, '{! activeSubStep }');
                                            endSplash();
                                        </script>
                                </apex:outputPanel>

                                <!--SYSTEM ERROR -->
                                <apex:outputPanel layout="block"
                                                  styleClass="mobile-error-page"
                                                  rendered="{! activeSubStep = 'System error' }">
                                    <div class="wrapper">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['TOP HEADING']['HEADING'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="font-13 b-error-text">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <div class="font-13 b-error-text">
                                                {! stepPagesMap['SYSTEM ERROR'].elements['FEEDBACK HEADING']['HEADING'].Value__c }<br/>
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['PHONE']['VALUE'].Value__c }<br/>
                                                    <!-- {! stepPagesMap['SYSTEM ERROR'].elements['EMAIL']['VALUE'].Value__c }<br/> -->
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['WORK TIME']['VALUE'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="buttons text-center">
                                                <div class="col-lg-12">
                                                    <div class="error-text">
                                                        <a href="{! stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c }" class="btn btn-gray" style="min-width: 130px">
                                                                {! stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['BUTTON NAME'].Value__c }
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                            analytics_AddError('{! activeStep }', activePageAnalytics, 'SystemError');
                                        </script>
                                </apex:outputPanel>
                            </apex:outputPanel>

                            <apex:outputPanel id="modalShowLocator" styleClass="modalWindows">
                                <!-- MODAL SAVE AND CONTINUE -->
                                <apex:outputPanel layout="block" id="saveAndContinueLater">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Save and continue later' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Save and continue later' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Save and continue later', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Save and continue later', 'display: block;', '')}">
                                            <div class="modal-dialog" style="width: 100%">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=saveAndContinueLater]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <h4 class="modal-title">{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                <p>
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                </p>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <apex:commandButton value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['CONFIRM SAVE BUTTON']['LABEL'].Value__c }"
                                                                                    action="{! doSaveAndContinueLater }"
                                                                                    style="min-width: 80px; height: 50px;"
                                                                                    immediate="true"
                                                                                    styleClass="btn btn-red"
                                                                                    reRender="saveAndContinueLater"
                                                                                    status="splashStatus"/>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=saveAndContinueLater]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MODAL SEND HOW TO PAY TO THE EMAIL -->
                                <apex:outputPanel layout="block" id="sendHowToPayToEmail">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send How to Pay to email' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send How to Pay to email' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send How to Pay to email', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Send How to Pay to email', 'display: block;', '')}">
                                            <div class="modal-dialog" style="width: 100%">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=sendHowToPayToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <h4 class="modal-title">{! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                <p>
                                                                        {! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                </p>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <apex:commandButton value="{! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                                    action="{! sendHowToPayToEmail }"
                                                                                    onComplete="scrollDisableControl('enable');"
                                                                                    style="min-width: 80px"
                                                                                    immediate="true"
                                                                                    styleClass="btn btn-red"
                                                                                    reRender="sendHowToPayToEmail"
                                                                                    status="splashStatus"/>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=sendHowToPayToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MODAL SEND TC TO THE EMAIL -->
                                <apex:outputPanel layout="block" id="sendTCToEmail">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send TC to email' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send TC to email' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send TC to email', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Send TC to email', 'display: block;', '')}">
                                            <div class="modal-dialog" style="width: 100%">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=sendTCToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <h4 class="modal-title">{! stepPagesMap['SEND TC TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                <p>
                                                                        {! stepPagesMap['SEND TC TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                </p>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <apex:commandButton value="{! stepPagesMap['SEND TC TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                                    action="{! sendTCToEmail }"
                                                                                    onComplete="scrollDisableControl('enable');"
                                                                                    style="min-width: 80px"
                                                                                    immediate="true"
                                                                                    styleClass="btn btn-red"
                                                                                    reRender="sendTCToEmail"
                                                                                    status="splashStatus"/>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=sendTCToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND TC TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MODAL SEND SEPA TO THE EMAIL -->
                                <apex:outputPanel layout="block" id="sendSepaToEmail">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send SEPA to email' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send SEPA to email' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send SEPA to email', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Send SEPA to email', 'display: block;', '')}">
                                            <div class="modal-dialog" style="width: 100%">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=sendSepaToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <h4 class="modal-title">{! stepPagesMap['SEND SEPA TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                <p>
                                                                        {! stepPagesMap['SEND SEPA TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                </p>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <apex:commandButton value="{! stepPagesMap['SEND SEPA TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                                    action="{! sendSepaToEmail }"
                                                                                    onComplete="scrollDisableControl('enable');"
                                                                                    style="min-width: 80px"
                                                                                    immediate="true"
                                                                                    styleClass="btn btn-red"
                                                                                    reRender="sendSepaToEmail"
                                                                                    status="splashStatus"/>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=sendSepaToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND SEPA TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MODAL SEND DEPOSIT AGREEMENT TO THE EMAIL -->
                                <apex:outputPanel layout="block" id="sendDepositAgreementToEmail">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send Deposit Agreement to email' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send Deposit Agreement to email' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send Deposit Agreement to email', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Send Deposit Agreement to email', 'display: block;', '')}">
                                            <div class="modal-dialog" style="width: 100%">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=sendDepositAgreementToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <h4 class="modal-title">{! stepPagesMap['SEND DEPOSIT AGREEMENT TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                <p>
                                                                        {! stepPagesMap['SEND DEPOSIT AGREEMENT TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                </p>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <apex:commandButton value="{! stepPagesMap['SEND DEPOSIT AGREEMENT TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                                    action="{! sendDepositAgreementToEmail }"
                                                                                    onComplete="scrollDisableControl('enable');"
                                                                                    style="min-width: 80px"
                                                                                    immediate="true"
                                                                                    styleClass="btn btn-red"
                                                                                    reRender="modalDepositAgreement, sendDepositAgreementToEmail"
                                                                                    status="splashStatus"/>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=sendDepositAgreementToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND DEPOSIT AGREEMENT TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MOBILE MODAL SEPA -->
                                <apex:outputPanel layout="block" id="modalSepaMandate">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Sepa' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Sepa' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Sepa', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Modal Sepa', 'display: block; padding: 40px 12px 24px 12px; bottom:auto;', '')}">
                                            <div class="modal-dialog" style="width:100%">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=modalSepaMandate]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                        {! IF(opportunity.Direct_Debit_Mandate_Type__c = 'Core', stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['HEADING'].Value__c, stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['HEADING B2B'].Value__c) }
                                                            <apex:commandLink action="{! showSendSepaDocument }"
                                                                              onclick="scrollDisableControl('disable');"
                                                                              styleClass="btn btn-xs payment-modal"
                                                                              reRender="sendSepaToEmail, modalSepaMandate"
                                                                              status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="modal-body payment-modal-body">
                                                        <iframe id="fullFrameSepaMandate"
                                                                src="{! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['IFRAME URL'].Value__c }"
                                                                onload="updateSepaFullDocument(); return false;"
                                                                name="fullFrameSepaMandate"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                            Error loading
                                                        </iframe>
                                                    </div>
                                                    <apex:actionFunction id="updateSepaFullDocument"
                                                                         name="updateSepaFullDocument"
                                                                         reRender="updateSepaFullDocument"
                                                                         onComplete="changeFieldsInSepa($j('[id$=accountHolder]').val(), $j('[id$=IBAN]').val(), $j('[id$=SWIFT]').val(), 'fullFrameSepaMandate'); return false;" />
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=modalSepaMandate]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DD SEPA']['BACK BUTTON'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MOBILE MODAL TERM CONDITIONS -->
                                <apex:outputPanel layout="block" id="modalTermConditions">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Term And Conditions' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Term And Conditions' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Term And Conditions', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Modal Term And Conditions', 'display: block; padding: 40px 12px 24px 12px; bottom:auto;', '')}">
                                            <div class="modal-dialog lg-modal" style="width: 100%;">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=modalTermConditions]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <div class="b-block-header" style="margin: 0px 15px 0px 0px;">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['MODAL WINDOW HEADING'].Value__c }
                                                            <apex:commandLink action="{! showSendTcDocument }"
                                                                              styleClass="btn btn-xs payment-modal"
                                                                              reRender="sendTCToEmail,modalTermConditions" status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink>
                                                        </div>
                                                    </div>
                                                    <div class="modal-body payment-modal-body">
                                                        <iframe name="frameTermConditions" width="100%" height="100%"
                                                                style="border: 0px; -webkit-overflow-scrolling:touch; overflow-y: scroll;"  src="{! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['IFRAME URL'].Value__c }">
                                                            Error loading
                                                        </iframe>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=modalTermConditions]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['ACCEPT TERM CONDITIONS'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MODAL DEPOSIT AGREEMENT -->
                                <apex:actionFunction name="showDepositAgreement" action="{! showDepositAgreementModal }" reRender="modalDepositAgreement" status="splashStatus"/>
                                <apex:outputPanel layout="block" id="modalDepositAgreement">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Deposit Agreement' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Deposit Agreement' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Deposit Agreement', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Modal Deposit Agreement', 'display: block; padding: 40px 12px 24px 12px; bottom:auto;', '')}">
                                            <div class="modal-dialog" style="width:100%">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a onclick="$j('[id$=modalDepositAgreement]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <apex:outputPanel layout="block" styleClass="b-block-header inline-block" style="margin: 0px;">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['MODAL WINDOW HEADING'].Value__c }
                                                            <apex:commandLink action="{! showSendDepositAgreementDocument }"
                                                                              onclick="scrollDisableControl('disable');"
                                                                              styleClass="btn btn-xs payment-modal"
                                                                              reRender="modalDepositAgreement, sendDepositAgreementToEmail"
                                                                              status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="modal-body payment-modal-body">
                                                        <iframe src="{! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }"
                                                                name="frameDepositAgreement"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                            Error loading
                                                        </iframe>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <a
                                                                        onclick="$j('[id$=modalDepositAgreement]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].fields['DEPOSIT AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MODAL LOCATOR -->
                                <apex:outputPanel layout="block" id="modalLocator">
                                    <apex:actionFunction name="returnStation" action="{! returnStation }" reRender="offer-confirm-btns, modalError" status="splashStatus">
                                        <apex:param name="jsonStation" value="" assignTo="{! jsonStation }"/>
                                    </apex:actionFunction>
                                    <script>
                                            window.addEventListener('message', function(event) {
                                                if (event.data && event.data.hasOwnProperty('stationId')) {
                                                    returnStation(JSON.stringify(event.data));
                                                } else {
                                                    return;
                                                }
                                            });
                                        </script>
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Locator' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Locator' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Locator', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Locator', 'display: block; margin: 12px 12px 0;', '')}">
                                            <apex:repeat value="{! homeOffersList }" var="homeOffer">
                                                <div class="modal-dialog" style="position: absolute; width: 100%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header" style="padding-bottom: 16px;">
                                                            <apex:commandLink action="{! removeOffer }"
                                                                              onclick="cancelLocator();"
                                                                              oncomplete="closeModal();"
                                                                              styleClass="close"
                                                                              reRender="specialOffers, modalShowLocator, systemError"
                                                                              status="splashStatus"/>
                                                            <h4 class="modal-title">
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['CHOOSE OFFER HEADING'].Value__c }
                                                            </h4>
                                                        </div>
                                                        <div class="modal-body" style="padding: 0;">
                                                            <div class="row">
                                                                <apex:outputPanel id="locator">
                                                                    <div  class="b-locator" >
                                                                        <div class="col-xs-12 col-sm-12">
                                                                            <apex:outputPanel layout="block" styleClass="locator-error-message1" style="display: none">
                                                                                <apex:outputPanel layout="block" styleClass="invalid-feedback"><div class="i-error"></div>
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['LOCATOR NO DATA MESSAGE'].Value__c }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="locator-error-message2" style="display: none">
                                                                                <apex:outputPanel layout="block" styleClass="invalid-feedback"><div class="i-error"></div>
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['LOCATOR WRONG ADDRESS MESSAGE'].Value__c }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <iframe src="{! urlLocator }" frameborder="0" class="frame center-block" width="100%" height="350"></iframe>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer" style="margin-top: 24px; margin-bottom: 24px;">
                                                            <div class="row">
                                                                <div class="save-station-btn" >
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <div class="offer-buttons center-block">
                                                                            <apex:outputPanel id="offer-confirm-btns">
                                                                                <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['CONFIRM STATION BUTTON'].Value__c }"
                                                                                                    rendered="{! OR(homeOffer.offerSelectionBtnStatus = 'show-enabled', homeOffer.offerSelectionBtnStatus = 'show-disabled') }"
                                                                                                    disabled="{! homeOffer.offerSelectionBtnStatus = 'show-disabled' }"
                                                                                                    styleClass="btn btn-red my-station inline-block pull-right"
                                                                                                    alt="{! homeOffer.productName }"
                                                                                                    reRender="specialOffers, modalShowLocator, modalError"
                                                                                                    status="splashStatus"
                                                                                                    action="{! selectOffer }"
                                                                                                    oncomplete="selectedOfferAnalytics = this.alt;">
                                                                                    <apex:param name="offerSelectionBtnStatus" value="hide" assignTo="{! homeOffer.offerSelectionBtnStatus }"/>
                                                                                    <apex:param name="offerRemoveBtnStatus" value="show-enabled" assignTo="{! homeOffer.offerRemoveBtnStatus }"/>
                                                                                    <apex:param name="offerName" value="{! homeOffer.productName }"/>
                                                                                </apex:commandButton>
                                                                                <apex:commandLink action="{! removeOffer }"
                                                                                                  value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[homeOffer.offerContentKey]['CANCEL BUTTON'].Value__c }"
                                                                                                  onclick="cancelLocator();"
                                                                                                  oncomplete="closeModal();"
                                                                                                  styleClass="btn btn-gray inline-block pull-left"
                                                                                                  reRender="specialOffers, modalShowLocator, systemError"
                                                                                                  status="splashStatus"/>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:repeat>
                                            <apex:actionFunction name="closeModal" action="{! closeModal }" reRender="modalShowLocator" immediate="true"/>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- MODAL COMPANY SELECTION -->
                                <apex:inputHidden id="selected-company-id" value="{! selectedCompany.identificationnumber }"/>
                                <apex:outputPanel layout="block" id="modalCompanySelection">
                                    <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Select company' }"/>
                                    <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Select company' }">
                                        <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Select company', 'modal fade in','modal fade')}"
                                                          style="{! IF(activeInnerPage = 'Select company', 'display: block; margin: 12px 12px 0;', '')}">
                                            <div class="modal-dialog" style="position: absolute; width: 100%;">
                                                <div class="modal-content ym-hide-content">
                                                    <div class="modal-header" style="padding-bottom: 16px;">
                                                        <a onclick="$j('[id$=modalCompanySelection]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                        <h4 class="modal-title">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['HEADING'].Value__c }
                                                        </h4>
                                                        <apex:outputPanel styleClass="font-11" layout="block">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['REMARK'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="modal-body" style="padding: 0;background-color: #f8f8f8;" id="modalCompanyChoice">
                                                        <div class="row" >
                                                            <apex:outputPanel layout="block" styleClass="select-company">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <apex:outputPanel layout="block" id="cf-companies">
                                                                        <div class="cf-companies-list" style="height: 380px;">
                                                                            <apex:repeat value="{! foundCompaniesList.companiesMap }" var="companyId">
                                                                                <div class="radio radio-red">
                                                                                    <div class="cf-company">
                                                                                        <input
                                                                                                id="{! companyId }"
                                                                                                type="radio"
                                                                                                name="company"
                                                                                                onclick="$j('[id$=selected-company-id]').val('{! companyId }');
                                                                                                         $j('.save-company-btn').attr('disabled', false);"/>
                                                                                        <label for="{! companyId }">
                                                                                            <apex:outputPanel styleClass="select-item">
                                                                                                    {! foundCompaniesList.companiesMap[companyId].name }
                                                                                            </apex:outputPanel>
                                                                                            <br/>
                                                                                            <apex:outputPanel styleClass="font-11">
                                                                                                {! foundCompaniesList.companiesMap[companyId].address }
                                                                                                {! IF(foundCompaniesList.companiesMap[companyId].country != null, ', ' +
                                                                                                    foundCompaniesList.companiesMap[companyId].country, '') }
                                                                                            </apex:outputPanel>
                                                                                        </label>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="b-splitter"></div>
                                                                            </apex:repeat>
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>

                                                    <div class="modal-footer" style="margin-top: 16px; margin-bottom: 16px;">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="center-block text-center">
                                                                    <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['CONTINUE BUTTON'].Value__c }"
                                                                                        action="{! goToSetTotalConsumption }"
                                                                                        styleClass="btn btn-red continue save-company-btn"
                                                                                        oncomplete="toViewport('your-company-viewport'); setEvents_companyDetails(); onPageRender(); scrollDisableControl('enable');"
                                                                                        reRender="modalCompanySelection, stepList, formBlock, additionInfo, onlineChatBlock"
                                                                                        status="splashStatus"/>
                                                                    <script>
                                                                            $j('.save-company-btn').attr('disabled', true);
                                                                        </script>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <script>
                                                analytics_CompaniesListOnLoad();
                                            </script>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </div>

                        <!-- STEPS LIST -->
                        <apex:outputPanel id="stepList">
                            <apex:outputPanel layout="block"
                                              styleClass="col-xs-12 col-sm-12"
                                              rendered="{! AND(
                                                      activeSubstep != 'Get started',
                                                      activeSubStep != 'More than two paid reports',
                                                      activeSubStep != 'Too high limit',
                                                      activeSubStep != 'Report does not exist',
                                                      activeSubStep != 'Company not found',
                                                      activeSubStep != 'Private entity',
                                                      activeSubStep != 'Authorization not granted',
                                                      activeSubStep != 'Already in process',
                                                      activeSubStep != 'Already a customer',
                                                      activeSubStep != 'Black list',
                                                      activeSubStep != 'System error'
                                                      ) }">
                                <div class="row">
                                    <div class="b-steps-list">
                                        <apex:outputPanel layout="block" styleClass="li" rendered="{! activeStep < 1 }">
                                            <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[2].Step_Name__c }</apex:outputPanel>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="li" rendered="{! AND(activeStep < 2, activeSubstep != 'Calculating credit score') }">
                                            <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[3].Step_Name__c }</apex:outputPanel>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="li" rendered="{! activeStep < 2 }">
                                            <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[4].Step_Name__c }</apex:outputPanel>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="li" rendered="{! AND(activeStep < 3, activeSubstep != 'Choosing offer', activeSubstep != 'Additional services') }">
                                            <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[5].Step_Name__c }</apex:outputPanel>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="li" rendered="{! activeStep < 4 }">
                                            <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[6].Step_Name__c }</apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                            </apex:outputPanel>
                        </apex:outputPanel>

                    </div>

                    <!-- BOTTOM ADDITION BLOCK -->
                    <apex:outputPanel layout="block" styleClass="addition-info" id="additionInfo">
                        <!-- STEP 0. ADDITION BLOCK -->
                        <apex:outputPanel layout="block" styleClass="contact-details-info" rendered="{! AND(activeStep = 0, activeSubstep = 'Get started') }">
                            <div class="row">
                                <div class="b-why m-help-info">
                                    <div сlass="b-header" style="font-family: Montserrat; font-size: 17px; font-weight: 700;">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['TOP HEADING'].Value__c }
                                    </div>
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="why-info">
                                            <div class="collapse-block addition">
                                                <div class="link" data-toggle="collapse" data-target="#vatRefund">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['SUBHEADING 1'].Value__c }
                                                    <div class="expander block-expand inline-block"></div>
                                                </div>
                                                <div class="row collapse" id="vatRefund">
                                                    <div class="desc font-13">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['BODY OF BLOCK 1'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="why-info">
                                            <div class="collapse-block addition">
                                                <div class="link" data-toggle="collapse" data-target="#accounting">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['SUBHEADING 2'].Value__c }
                                                    <div class="expander block-expand inline-block"></div>
                                                </div>
                                                <div class="row collapse" id="accounting">
                                                    <div class="desc font-13">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['BODY OF BLOCK 2'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="why-info">
                                            <div class="collapse-block addition">
                                                <div class="link" data-toggle="collapse" data-target="#spending">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['SUBHEADING 3'].Value__c }
                                                    <div class="expander block-expand inline-block"></div>
                                                </div>
                                                <div class="row collapse" id="spending">
                                                    <div class="desc font-13">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['BODY OF BLOCK 3'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="b-cards-type m-help-info">
                                    <div сlass="b-header" style="font-family: Montserrat; font-weight: 700; font-size: 17px;">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TOP HEADING'].Value__c }
                                    </div>
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="cards-types">
                                            <div class="div-table">
                                                <div class="div-table-heading">
                                                    <div class="div-table-row">
                                                        <div class="div-table-head"></div>
                                                        <div class="div-table-head font-11">
                                                            <div class="first-div">
                                                                <div style="width: 82px;">
                                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TABLE COLUMN 1 NAME'].Value__c }
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-head font-11">
                                                            <div class="first-div">
                                                                <div>
                                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TABLE COLUMN 2 NAME'].Value__c }
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-head font-11">
                                                            <div class="first-div">
                                                                <div>
                                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TABLE COLUMN 3 NAME'].Value__c }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="div-table-body">
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-row">
                                                        <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['CARD TYPE NAME'].Value__c }
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['VEHICLE RELATED PRODUCTS'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['ALL FUEL'].Value__c, 'true')}">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="div-table-cell">
                                                            <apex:outputPanel layout="block" rendered="{! CONTAINS(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['DIESEL ONLY'].Value__c, 'true') }">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="b-how-pay m-help-info">
                                    <apex:outputPanel layout="block" styleClass="b-header">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['HOW TO PAY INFO BLOCK']['TOP HEADING'].Value__c }
                                    </apex:outputPanel>
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="pay-info font-13" style="border-bottom: unset; padding-top: 0;">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['HOW TO PAY INFO BLOCK']['BODY OF BLOCK'].Value__c }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </apex:outputPanel>

                        <!-- STEP CONGRATULATION. ADDITION BLOCK -->
                        <apex:outputPanel id="congratulationsInfo" layout="block" styleClass="congratulations-info" rendered="{! AND(activeStep = 5, activeSubstep = 'Congratulations') }" style="padding: 0px 10px 0px 10px;">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <div сlass="info-block">
                                        <div сlass="b-col-header" style="font-family: Montserrat; font-weight: 700; font-size: 17px; margin: 16px 0;">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TOP HEADING'].Value__c }
                                        </div>
                                        <div сlass="font-13" style="margin-bottom: 16px;">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK'].Value__c }
                                        </div>
                                        <div>
                                            <div сlass="font-15" style="font-family: Montserrat; font-weight: 500; margin-bottom: 4px; font-size: 15px;">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 1'].Value__c }
                                            </div>
                                            <div сlass="font-13" style="margin-bottom: 16px;">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK SUBBLOCK 1'].Value__c }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-9 col-sm-9">
                                    <div сlass="info-block">
                                        <div сlass="font-15" style="font-family: Montserrat; font-weight: 500; font-size: 15px; line-height: 1.85;">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 2'].Value__c }
                                        </div>
                                        <apex:outputPanel layout="block" styleClass="font-13 customer-care" rendered="{! OR( opportunity.Garantie_other__c != null, AND(opportunity.Garantie_other__c = null, OR(paymentStatus = 'A', paymentStatus = 'C', paymentStatus = 'E', paymentStatus = null))) }" style="margin-bottom: 24px;">
                                            <div style="line-height: 1.85;">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['WORK TIME SUBBLOCK 2 SUCCESS'].Value__c }
                                            </div>
                                            <div сlass="assistance-info">
                                                <div style="line-height: 1.85; color: #0093ee;">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['PHONE SUBBLOCK 2 SUCCESS'].Value__c }
                                                    <apex:image url="{! URLFOR($Resource.e2e_images, 'phone.png') }"></apex:image>
                                                </div>
                                            </div>
                                            <div style="line-height: 1.85;">
                                                <a href="mailto:{! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 SUCCESS'].Value__c }">{! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 SUCCESS'].Value__c }</a>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <div сlass="buttons-block">
                                        <div class="buttons text-center">
                                            <div>
                                                <a href="{! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['RETURN TO SITE URL'].Value__c }" class="btn btn-gray" style="line-height: 16px;">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['RETURN TO SITE BUTTON'].Value__c }
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </apex:outputPanel>

                        <!-- STEP MOBILE ERROR PAGE -->
                        <apex:outputPanel layout="block"
                                          styleClass="mobile-error-info"
                                          rendered="{! OR(
                                                  activeSubStep = 'More than two paid reports',
                                                  activeSubStep = 'Too high limit',
                                                  activeSubStep = 'Report does not exist',
                                                  activeSubStep = 'Company not found',
                                                  activeSubStep = 'Authorization not granted',
                                                  activeSubStep = 'Already in process',
                                                  activeSubStep = 'Already a customer')
                                                  }" style="margin: 0 12px 0 12px;">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <div сlass="b-block-header" style="line-height: 1.85; font-family: Montserrat; font-weight: 500; font-size: 17px;">
                                            {!  IF(activeSubStep = 'More than two paid reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['FEEDBACK HEADING'].Value__c,
                                                    IF(activeSubStep = 'Too high limit', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT']['FEEDBACK HEADING'].Value__c,
                                                            IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['FEEDBACK HEADING'].Value__c,
                                                                    IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['FEEDBACK HEADING'].Value__c,
                                                                            IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['FEEDBACK HEADING'].Value__c,
                                                                                    IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['FEEDBACK HEADING'].Value__c,
                                                                                            IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['FEEDBACK HEADING'].Value__c,
                                                                                                    IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['FEEDBACK HEADING'].Value__c, '')))))))) }
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <div сlass="font-13 customer-care">
                                        <div style="line-height: 1.85;">
                                                {!  IF(activeSubStep = 'More than two paid reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['WORK TIME'].Value__c,
                                                        IF(activeSubStep = 'Too high limit', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT']['WORK TIME'].Value__c,
                                                                IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['WORK TIME'].Value__c,
                                                                        IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['WORK TIME'].Value__c,
                                                                                IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['WORK TIME'].Value__c,
                                                                                        IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['WORK TIME'].Value__c,
                                                                                                IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['WORK TIME'].Value__c,
                                                                                                        IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['WORK TIME'].Value__c, '')))))))) }
                                        </div>
                                        <div сlass="assistance-info" style="line-height: 1.85;">
                                            <div>
                                            {!  IF(activeSubStep = 'More than two paid reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['PHONE'].Value__c,
                                                    IF(activeSubStep = 'Too high limit', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT']['PHONE'].Value__c,
                                                            IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['PHONE'].Value__c,
                                                                    IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['PHONE'].Value__c,
                                                                            IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['PHONE'].Value__c,
                                                                                    IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['PHONE'].Value__c,
                                                                                            IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['PHONE'].Value__c,
                                                                                                    IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['PHONE'].Value__c, '')))))))) }
                                                <apex:image url="{! URLFOR($Resource.e2e_images, 'phone.png') }"></apex:image>
                                            </div>
                                            <div>
                                                <apex:outputLink style="line-height: 1.85;">
                                                        {!  IF(activeSubStep = 'More than two paid reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['EMAIL'].Value__c,
                                                                IF(activeSubStep = 'Too high limit', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT']['EMAIL'].Value__c,
                                                                        IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['EMAIL'].Value__c,
                                                                                IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['EMAIL'].Value__c,
                                                                                        IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['EMAIL'].Value__c,
                                                                                                IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['EMAIL'].Value__c,
                                                                                                        IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['EMAIL'].Value__c,
                                                                                                                IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['EMAIL'].Value__c, '')))))))) }
                                                </apex:outputLink>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </apex:outputPanel>
                        <!-- BACK TO TOP -->
                        <apex:outputPanel layout="block"
                                          rendered="{! AND(
                                                  activeStep != 0,
                                                  activeSubstep != 'Get started'
                                                  )}">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <apex:outputPanel layout="block" styleClass="back-to-top">
                                        <a href="" id="top"> &#8593; {! stepPagesMap['FOOTER'].elements['BACK TO THE TOP BUTTON']['LABEL'].Value__c } </a>
                                    </apex:outputPanel>
                                </div>
                            </div>
                        </apex:outputPanel>
                    </apex:outputPanel>
                </div>
            </div>
        </main>
        <footer>
            <div class="container hidden-lgxl">
                <div class="row">
                    <div class="col-xs-12 col-sm-12">
                        <div class="fleetcor">
                            <div class="b-page-logo" style="margin: 13px 0 10px 0px;">
                                <apex:image url="{!URLFOR($Resource.e2e_images, 'm-logo.png')}"/>
                            </div>
                            <apex:outputPanel layout="block" styleClass="fleetcor-desc text-muted">
                                    {! stepPagesMap['FOOTER'].elements['DESCRIPTION']['VALUE'].Value__c }
                            </apex:outputPanel>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="b-copyright">
                        <div>
                            <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['COPYRIGHT']['URL'].Value__c }" target="_blank">
                                    {! stepPagesMap['FOOTER'].elements['COPYRIGHT']['VALUE'].Value__c }
                            </apex:outputLink>
                        </div>
                    </div>
                </div>
            </div>
            <!-- CHAT BLOCK -->
            <div class="chat-button" id="chat-button-offline" style="display: none;" onclick="setupOfflineChat(); return false;">
                <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
            </div>
            <div  class="chat-button" id="chat-button-online" style=" display: none;" onclick="setupOnlineChat(); return false;">
                <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
            </div>
            <div class="chat-box" id="chatOfflineBlock">
                    <span>
                        <div class="no_save no_brand" id="liveAgentClientChatSettings">
                            <div class="liveAgentState" id="liveAgentClientChat">
                                 <div class="chat-header">{! pageMapChat['CHAT'].elements['CHAT HEADING']['TEXT'].Value__c }
                                     <span id="clientChatEndButtonID">
                                        <button class="close liveAgentEndButton" onclick="closeChat('offline'); return false;" />
                                    </span>
                                 </div>
                                <div class="chat-status">
                                        {! pageMapChat['CHAT'].elements['CHAT OFFLINE']['VALUE'].Value__c }
                                </div>
                                <div>
                                    <div>
                                        <span>
                                            <div class="liveAgentAlert" id="liveAgentMessageContainer"></div>
                                        </span>
                                        <div style="word-wrap: break-word; padding-top:1px;">
                                            <span>
                                                <div class="liveAgentChatElement" id="liveAgentChatLog">
                                                    <div id="liveAgentChatLogText" class="liveAgentChatLogText" style="margin-top:10px;">
                                                        <span class="chat-operator">
                                                            <span class="chat-name"><strong>FLEETCOR</strong>
                                                                <span class="chat-customDateTime" style="display: inline"></span>
                                                            </span>
                                                            <span class="chat-messageText">
                                                                    {! pageMapChat['CHAT'].elements['CHAT OFFLINE GREETING']['VALUE'].Value__c }
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <span class="chat-operator" id="liveAgentChatLogTyping" style="display: none;"></span>
                                                </div>
                                            </span>
                                        </div>
                                        <div class="col-xs-9 col-lg-9 col-md-9 col-sm-9" style="padding: 0px;">
                                            <span>
                                                <div class="liveAgentChatElement liveAgentChatInput" id="liveAgentChatInput" style="padding: 0px;">
                                                    <textarea class="liveAgentChatTextArea" id="liveAgentChatTextArea" maxlength="6000"
                                                              placeholder="{!pageMapChat['CHAT'].elements['TEXTAREA']['PLACEHOLDER'].Value__c }" wrap="soft" data-uidsfdc="3" />
                                                </div>
                                            </span>
                                        </div>
                                        <div class="col-xs-3 col-lg-3 col-md-3 col-sm-3" style="padding: 0px;">
                                            <span>
                                                <button class="liveAgentChatElement liveAgentSendButton" onclick="updateOfflineChat();return false;" style="margin: 0;"> {! pageMapChat['CHAT'].elements['SEND BUTTON']['TEXT'].Value__c} </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </span>
            </div>
            <div class="chat-box" id="chatOnlineBlock">
                <div class="chat-header" style="margin:0px;">
                    <button class="close liveAgentEndButton"
                            onclick="closeChat('online'); return false;"
                            style="position:absolute; right:6px; top:8px;"
                            id="clientChatEndButtonID" label="x">
                    </button>
                </div>
            </div>
            <div class="lightbox"></div>
        </footer>
        </body>
    </apex:form>
    <!-- PAYMENT FORM -->
    <apex:outputPanel id="paymentFormToSend" style="display: none;" >
        <form class="paymentFormToSubmit" method="POST" action="{! paymentURL }" id="paymentFormToSubmit">
            <apex:repeat value="{! paymentParameters }" var="param">
                <input type="hidden"  name="{! param }" value="{! paymentParameters[param] }" />
            </apex:repeat>
        </form>
    </apex:outputPanel>
</apex:page>