<apex:page id="longForm" controller="LongFormDesktopPLController" action="{! init }" sidebar="false" showHeader="false" standardStylesheets="false" language="en-US" docType="html-5.0" cache="false">
    <apex:form id="form" styleClass="form-horizontal">
        <head>           
            <!-- PRODUCTION GTM -->
            <apex:outputPanel rendered="{! CONTAINS($CurrentPage.URL,'online.fleetcor.pl')  }">
                <!-- Google Tag Manager -->
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-5Q75TR9');</script>
                <!-- End Google Tag Manager -->            
            </apex:outputPanel>

            <!-- SANDBOX GTM -->
            <apex:outputPanel rendered="{! NOT(CONTAINS($CurrentPage.URL,'online.fleetcor.pl')) }">
                <!-- Google Tag Manager after head -->
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-5V5GWZ9');</script>
                <!-- End Google Tag Manager -->                 
            </apex:outputPanel>           
            <link rel="shortcut icon" href="{!$Resource.FleetcorFavicon}" type="image/x-icon; charset=binary"/>
            <apex:includeScript value="{!$Resource.jQuery}"/>
            <apex:includeScript value="{!URLFOR($Resource.E2E_Analytics_PL)}"/>
            <apex:includeScript value="{!URLFOR($Resource.jQueryUISlider,'jquery-ui-1.12.1.custom/jquery-ui.min.js')}"/>
            <apex:includeScript value="{!$Resource.jqueryInputMask}"/>
            <apex:includeScript value="{!URLFOR($Resource.bootstrap_3_3_7, 'bootstrap-3.3.7/js/bootstrap.min.js')}"/>
            <apex:includeScript value="{!URLFOR($Resource.e2eLiveAgentDeployment)}"/>
            <apex:includeScript value="{!$Resource.e2e_scripts_desktop_pl}"/>
            <script>
                //Function is used to get splash status bar when server side call is going on
                function startSplash() {
                    document.getElementById('splashDiv').style.display='table-cell';
                    jQuery('.lightbox').fadeIn(50);
                }
                //Function will make the splash status to be stopped.
                function endSplash() {
                    document.getElementById('splashDiv').style.display='none';
                    jQuery('.lightbox').fadeOut(50);
                }
            </script>
            <apex:stylesheet value="{!URLFOR($Resource.jQueryUI,'jquery-ui-1.12.1/jquery-ui.css')}"/>
            <apex:stylesheet value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/css/desktop_bootstrap.min.css')}"/> 
            <apex:stylesheet value="{!URLFOR($Resource.E2ESpinner, 'spinner.css')}"/>
            <apex:stylesheet value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/css/non-responsive.css')}"/>
            <apex:stylesheet value="{!$Resource.e2e_style_pl_desktop}"/>
            <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet"/>
            <title>{! stepPagesMap['HEADER'].elements['TOP HEADING']['VALUE'].Value__c }</title>
            <style>
                .cards-order .cards-count .counter .up {
                    cursor: pointer;
                    width: 10px;
                    height: 15px;
                    background: url({!URLFOR($Resource.e2e_images, 'up.png')}) no-repeat;
                }
                .cards-order .cards-count .counter .down {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    background: url({!URLFOR($Resource.e2e_images, 'down.png')}) no-repeat;
                }
                .cards-order .cards-count .counter .up:hover {
                    cursor: pointer;
                    width: 10px;
                    height: 15px;
                    background: url({!URLFOR($Resource.e2e_images, 'up-light.png')}) no-repeat;
                }
                .cards-order .cards-count .counter .down:hover {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    background: url({!URLFOR($Resource.e2e_images, 'down-light.png')}) no-repeat;
                }
                 .expend-detail {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    margin: 0 0 -3px 5px;
                    background: url({!URLFOR($Resource.e2e_images, 'expend-arrow.png')}) no-repeat;
                }
                .collapse-detail {
                    cursor: pointer;
                    width: 10px;
                    height: 10px;
                    margin: 0 0 -3px 5px;
                    background: url({!URLFOR($Resource.e2e_images, 'collapse-arrow.png')}) no-repeat;
                }
                .cards-list .card-item .delete a{
                    height: 40px;
                    width: 40px;
                    cursor: pointer;
                    display: inline-block;
                    background: url({!URLFOR($Resource.e2e_images, 'basket.png')}) no-repeat;
                }
                .checkbox input[type="checkbox"]:checked + label::after {
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check.png')});
                }
                .radio input[type="radio"]:checked + label::after {
                    content: "";
                    padding-left: 5px;
                    font-size: 11px;
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                }
                .category-link.active:after {
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                }
                .cards-tech-parameters .card-badge {
                    width: 230px;
                    height: 145px;
                    display: inline-block;
                    margin: 35px 30px 5px 45px;
                    background: url({!URLFOR($Resource.e2e_images, 'shell-card.png')}) no-repeat;
                }
                .modal-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    margin: 7px 5px 5px 0;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }
                .chat-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    margin: 7px 5px 5px 0;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }
                .blur {
                  -webkit-filter: blur(5px);
                     -moz-filter: blur(5px);
                       -o-filter: blur(5px);
                      -ms-filter: blur(5px);
                          filter: blur(5px);
                }
                @media screen {
                    /* Hide the special layer from the screen. */
                    #paymentInformation { display: none; }
                }
            </style>
        </head>
        <body id="form-body" class="modal-open" style="overflow: auto">   
            <!-- PRODUCTION GTM -->
            <apex:outputPanel rendered="{! CONTAINS($CurrentPage.URL,'online.fleetcor.nl')  }">
                <!-- Google Tag Manager (noscript) -->
                <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5Q75TR9"
                height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
                <!-- End Google Tag Manager (noscript) -->          
            </apex:outputPanel>

            <!-- SANDBOX GTM -->
            <apex:outputPanel rendered="{! NOT(CONTAINS($CurrentPage.URL,'online.fleetcor.nl')) }">
                <!-- Google Tag Manager (noscript) after body -->
                <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5GWZ9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
                <!-- End Google Tag Manager (noscript)-->                 
            </apex:outputPanel>                
            <span id="top-heading-viewport"></span>
            <main>
                <apex:actionStatus id="splashStatus" onstart="turnOffBackButtonClick(); startSplash();" onstop="turnOnBackButtonClick(); endSplash();"/>
                <div class="splashStatus" id="splashDiv">
                    <div class="circle"><img src="{!URLFOR($Resource.e2e_images, 'preloader-loop.gif')}"/></div>    
                </div>
                <div class="container">
                    <div class="row">
                        <div class="b-page-logo">
                            <a href="https://fleetcor.pl/" target="_blank">
                                <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                            </a>
                        </div>
                    </div>
                    <apex:outputPanel id="pageHeader" styleClass="row" layout="block">
                        <apex:outputPanel layout="block" styleClass="b-page-header" rendered="{! activeSubStep != 'Congratulations' }">
                            {! stepPagesMap['HEADER'].elements['TOP HEADING']['VALUE'].Value__c }
                        </apex:outputPanel>
                    </apex:outputPanel>
                    <apex:outputPanel id="onlineChatBlock">
                        <script>
                            function setupOnlineChat(){
                                startOnlineChat('{!chatURL}','{! chatDeploymentId }','{! chatDeploymentJsURL }','{! $Organization.Id }'.slice(0,-3),'{! chatButtonId }',
                                                           '{! contact.Id }'.slice(0,-3),'{! opportunity.Id }'.slice(0,-3),'{! opportunity.AccountId }'.slice(0,-3),
                                                           '{! chatFirstMessage }','{! activeStep }','{! activeSubStep }','manual');
                                return false;
                            }
                            function setupOnlineAutoChat(){
                                startOnlineChat('{!chatURL}','{! chatDeploymentId }','{! chatDeploymentJsURL }','{! $Organization.Id }'.slice(0,-3),'{! chatButtonId }',
                                                           '{! contact.Id }'.slice(0,-3),'{! opportunity.Id }'.slice(0,-3),'{! opportunity.AccountId }'.slice(0,-3),
                                                           '{! chatFirstMessage }','{! activeStep }','{! activeSubStep }','automatical');
                                return false;
                            }
                            function executeSetOpportunityFlagChat(modeOfChat){
                                setOpportunityFlagChat('{!opportunity.Id}', '{!activeStep}', '{!activeSubStep}', modeOfChat);
                            }
                            function executeSaveOfflineChat(offlineChatBody){
                                saveOfflineChat('{!opportunity.Id}','{!contact.Id}', '{!activeStep}', '{!activeSubStep}', offlineChatBody);
                            }
                        </script>
                    </apex:outputPanel>
                    <script>
                        function setOpportunityFlagChat(oppId, activeStep, activeSubStep, modeOfChat){
                            Visualforce.remoting.Manager.invokeAction(
                                '{!$RemoteAction.LongFormDesktopPLController.setFlagChatToOpportunity}',
                                oppId, activeStep, activeSubStep, modeOfChat,
                                function(result, event){
                                    if (event.status) {

                                    } else if (event.type === 'exception') {
                                        console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                    } else {
                                        console.debug(document.getElementById("responseErrors").innerHTML = event.message);
                                    }
                                }
                            );
                        }
                        function saveOfflineChat(oppId, conId, activeStep, activeSubStep, offlineChatBody){
                            Visualforce.remoting.Manager.invokeAction(
                                '{!$RemoteAction.LongFormDesktopPLController.saveOfflineChatLog}',
                                 oppId, conId, activeStep, activeSubStep, offlineChatBody,
                                 function(result, event){
                                     if (event.status) {

                                    } else if (event.type === 'exception') {
                                        console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                    } else {
                                        console.debug(event.message);
                                    }
                                }
                            );
                        }
                    </script>
                    <apex:actionFunction id="setupChatInit" 
                                        name="setupChatInit"
                                        onComplete="setupChatInitialization('{! chatURL }','{! chatDeploymentId }','{! $Organization.Id }'.slice(0,-3),
                                             '{! chatButtonId }','','','','','{! activeStep }','{! activeSubStep }','');"
                                        reRender="setupChatInit" />

                    <!-- PAGE WIZARD -->
                    <div class="row">
                        <apex:outputPanel id="stepList">
                            <apex:outputPanel layout="block" styleClass="b-wizard col-lg-12" 
                            rendered="{! AND(
                                activeStep != 0,  
                                activeStep != null, 
                                activeSubStep != 'Congratulations', 
                                activeSubStep != 'System error',
                                activeSubStep != 'Stop order',
                                activeSubStep != 'Too risky', 
                                activeSubStep != 'Too high limit. Additional Credit Scoring Allowance', 
                                activeSubStep != 'Authorization not granted', 
                                activeSubStep != 'Too many reports',
                                activeSubStep != 'Risky but manageable',
                                activeSubStep != 'Report does not exist',
                                activeSubStep != 'Company not found',
                                activeSubStep != 'Private entity',
                                activeSubStep != 'Already in process',
                                activeSubStep != 'Already a customer',
                                activeSubStep != 'Black list') }">
                                <div class="row">
                                    <div class="b-steps-list">
                                        <ul id="steps">
                                            <li id="step1" class="b-step font-15" style="width: 16.5%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep = 1, 'step current','step')}">{! menuItemsMap[1].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step2" class="b-step font-15" style="width: 18.6%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep = 2, 'step current','step')}">{! menuItemsMap[2].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step3" class="b-step font-15" style="width: 17.4%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep = 3, 'step current','step')}">{! menuItemsMap[3].Step_Name__c }</apex:outputPanel>
                                            </li>
                                            <li id="step4" class="b-step font-15" style="width: 24%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep = 4, 'step current','step')}">{! menuItemsMap[4].Step_Name__c }</apex:outputPanel>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-points-list">
                                        <ul class="points">
                                            <li style="width: 16.5%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 1, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 0, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="width: 18.6%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 2, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 1, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="width: 17.4%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 3, 'b-point done','b-point')}">
                                                    <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 2, 'step-point current','step-point')}"></apex:outputPanel>
                                                </apex:outputPanel>
                                            </li>
                                            <li style="width: 24%">
                                                <apex:outputPanel layout="block" styleClass="{! IF(activeStep > 3, 'step-point current','step-point')}"></apex:outputPanel>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </div>

                    <div class="b-block-form">
                        <div class="row">
                            <!-- LEFT BLOCK -->
                            <div class="col-lg-8">
                                <apex:outputPanel layout="block" styleClass="step-content" id="formBlock">
                                    <!-- STEP CONTACT DETAILS -->
                                    <apex:outputPanel layout="block" id="contactDetails" styleClass="contact-details" rendered="{! activeStep = 0 && activeSubstep = 'Contact details' }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Contact details';
                                        </script>                                     
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['TOP HEADING VALUE'].Value__c }
                                                    </div>
                                                    <div class="b-desc">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['TOP SUBHEADING VALUE'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="salutation block">
                                                    <div class="col-lg-8 col-lg-offset-4">
                                                        <div class="btn-group">
                                                            <div
                                                                id="mr-btn"
                                                                class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                style="padding-top: 7px;"
                                                                onclick="$j('[id$=sltn-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c }');
                                                                         $j('[id$=mr-btn]').addClass('selected');
                                                                         $j('[id$=mrs-btn]').removeClass('selected'); 
                                                                         analytics_onClickButtonSendUI('click','button: sex_male','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <div
                                                                id="mrs-btn"
                                                                class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                style="padding-top: 7px;"
                                                                onclick="$j('[id$=sltn-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c }');
                                                                         $j('[id$=mrs-btn]').addClass('selected');
                                                                         $j('[id$=mr-btn]').removeClass('selected'); 
                                                                         analytics_onClickButtonSendUI('click','button: sex_female','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON LABEL'].Value__c }
                                                            </div>
                                                            <apex:inputhidden value="{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c }" id="sltn-dflt"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="first-name block">
                                                    <div class="col-lg-3">
                                                        <label class="f-label">
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['LABEL'].Value__c }
                                                        </label>
                                                        <span class="f-required">
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-8 col-lg-offset-1">
                                                        <apex:inputText id="firstName" value="{! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false"     styleClass="inline-block form-control required input ym-disable-keys" maxLength="40" style="width: 80%"
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'name', 'UI_01_Tankkarte_Step_1_Form_Contacts');" onkeyup="sendErrorFirstName();"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <div class="invalid-feedback invalid-feedback-first-name" style="width: 80%">
                                                            <script>
                                                                function sendErrorFirstName() {
                                                                    if ($j('.invalid-feedback-first-name').is(':visible')) {
                                                                        analytics_onErrorSendUI('nameNotFilled','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                    }
                                                                }
                                                            </script>
                                                            <div class="i-error">!</div>
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="last-name block">
                                                    <div class="col-lg-3">
                                                        <label class="f-label">
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['LABEL'].Value__c }
                                                        </label>
                                                        <span class="f-required">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-8 col-lg-offset-1">
                                                        <apex:inputText id="lastName" value="{! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-disable-keys" maxLength="80" style="width: 80%"
                                                        onblur="analytics_onBlurInputSendUI($j(this), 'lastName', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                        onkeyup="sendErrorLastName();"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <div class="invalid-feedback invalid-feedback-last-name">
                                                            <script>
                                                                function sendErrorLastName() {
                                                                    if ($j('.invalid-feedback-last-name').is(':visible')) {
                                                                        analytics_onErrorSendUI('lastNameNotFilled','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                    }
                                                                }
                                                            </script>
                                                            <div class="i-error">!</div>
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="phone block">
                                                    <div class="col-lg-3">
                                                        <div style="width: 111%;">
                                                            <label class="f-label" style="width: 125px;margin-top: 4px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['LABEL'].Value__c }
                                                                <span class="f-required">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['ASTERISK'].Value__c }
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8 col-lg-offset-1">
                                                        <apex:inputText id="phone" value="{! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false"
                                                            styleClass="inline-block form-control required input ym-disable-keys" maxLength="12" style="width: 60%"
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'tel', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                            onkeyup="sendErrorTel();"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <div class="invalid-feedback invalid-feedback-tel">
                                                            <script>
                                                                function sendErrorTel() {
                                                                    if ($j('.invalid-feedback-tel').is(':visible')) {
                                                                        analytics_onErrorSendUI('telNotFormat','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                    }
                                                                }
                                                            </script>
                                                            <div class="i-error">!</div>
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="email block">
                                                    <div class="col-lg-3">
                                                        <div style="width: 110%;">
                                                            <label class="f-label">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['LABEL'].Value__c }
                                                            </label>
                                                            <span class="f-required">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['ASTERISK'].Value__c }
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8 col-lg-offset-1">
                                                        <apex:inputText id="email" value="{! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input ym-disable-keys" maxLength="80" style="width: 60%"
                                                        onblur="analytics_onBlurInputSendUI($j(this), 'email', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                        onkeyup="sendErrorEmail();"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <div class="invalid-feedback invalid-feedback-email">
                                                            <script>
                                                                function sendErrorEmail() {
                                                                    if ($j('.invalid-feedback-email').is(':visible')) {
                                                                        analytics_onErrorSendUI('emailNotFormat','UI_01_Tankkarte_Step_1_Form_Contacts');
                                                                    }
                                                                }
                                                            </script>
                                                            <div class="i-error">!</div>
                                                            {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <apex:outputPanel styleClass="row form-group" rendered="{! NOT(AND(opportunity != null, opportunity.Anzahl_der_Karten__c != null)) }" layout="block">
                                                <div class="cards-order block">
                                                    <div class="col-lg-3">
                                                        <div style="width: 150%;">
                                                            <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                            <span class="f-required">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8 col-lg-offset-1 cards-count">
                                                        <apex:outputPanel layout="block" styleClass="number-wrapper" id="counterDetails" style="width: 70px;">
                                                            <apex:input id="cardsCounterContactDetails" type="text"
                                                                        value="{! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                        required="false"
                                                                        styleClass="inline-block form-control required input ym-disable-keys cardsCounterContactDetails" 
                                                                        style="padding: 5px 25px 5px 10px;" 
                                                                        html-min="1" html-max="50" 
                                                                        onkeyup="validateNumberOfCards(this);" 
                                                                        onblur="analytics_onBlurInputSendUI($j(this), 'countCards', 'UI_01_Tankkarte_Step_1_Form_Contacts');"/>
                                                            <apex:outputPanel styleClass="counter" style="right: 325px !important;">
                                                                <div class="count-up"><apex:outputPanel layout="block" styleClass="up" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_01_Tankkarte_Step_1_Form_Contacts'); increaseCards();"/></div>
                                                                <div class="count-down"><apex:outputPanel layout="block" styleClass="down" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_01_Tankkarte_Step_1_Form_Contacts'); reductionCards();"/></div>
                                                            </apex:outputPanel>
                                                            <script>
                                                                function validateNumberOfCards(numberOfCards) {
                                                                    numberOfCards.value = numberOfCards.value.replace(/[^0-9\.]/g,'');
                                                                    if(numberOfCards.value.split('.').length > 2) numberOfCards.value = numberOfCards.value.replace(/\.+$/,"");
                                                                }                  
                                                            </script> 
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <div class="row form-group">
                                                <div class="company block">
                                                    <div class="col-lg-4">
                                                        <div style="width: 110%;">
                                                            <label class="f-label" style="margin-top: 5px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['LABEL'].Value__c }
                                                                <span class="f-required">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['ASTERISK'].Value__c }
                                                                </span>                                                                
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8">
                                                        <div class="btn-group" style="width: 100%;">
                                                            <div class="companyForm">
                                                                <apex:commandButton id="company-btn"
                                                                    value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON LABEL'].Value__c }"
                                                                    styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                    onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c }');
                                                                            $j('[id$=company-btn]').addClass('selected');
                                                                            $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                            $j('[id$=private-btn]').removeClass('selected');
                                                                            analytics_onClickButtonSendUI('click','button: form-of-business: Company', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                    reRender="company-form-dflt"
                                                                    style="width: 26.33%; border-right: 0; line-height: 20%; font-size: 12px;">
                                                                </apex:commandButton>
                                                                <apex:commandButton id="solo-trader-btn"
                                                                    value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON LABEL'].Value__c }"
                                                                    styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                    onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c }');
                                                                            $j('[id$=company-btn]').removeClass('selected');
                                                                            $j('[id$=solo-trader-btn]').addClass('selected');
                                                                            $j('[id$=private-btn]').removeClass('selected');
                                                                            analytics_onClickButtonSendUI('click','button: form-of-business: Solo-trader', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                    reRender="company-form-dflt"
                                                                    style="width: 50.49%; padding: 6px 7px; line-height: 20%; font-size: 12px;">
                                                                </apex:commandButton>
                                                                <apex:commandButton id="private-btn"
                                                                    value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON LABEL'].Value__c }"
                                                                    styleClass="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                    onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c }');
                                                                            $j('[id$=company-btn]').removeClass('selected');
                                                                            $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                            $j('[id$=private-btn]').addClass('selected');
                                                                            analytics_onClickButtonSendUI('click','button: form-of-business: Private entity', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                    reRender="company-form-dflt"
                                                                    style="width: 23.33%; border-left: 0; padding: 6px 7px; line-height: 20%; font-size: 12px;">
                                                                </apex:commandButton>
                                                                <apex:inputHidden id="company-form-dflt" value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c }"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-check">
                                                        <div class="checkbox checkbox-red">
                                                            <apex:inputCheckbox id="phoneContact"
                                                                value="{! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                styleClass="form-check-input phoneContact"
                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'newsSubscribe1', 'UI_01_Tankkarte_Step_1_Form_Contacts');"/>
                                                            <apex:outputLabel styleClass="form-check-label" for="phoneContact">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['LABEL'].Value__c }
                                                                <apex:commandLink action="{! showAgreeToPhoneContact }"
                                                                    onclick="scrollDisableControl('disable'); analytics_onClickButtonSendUI('show','popup', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                    styleClass="form-check-label"
                                                                    reRender="modalAgreeToPhoneContact"
                                                                    status="splashStatus">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['LABEL URL'].Value__c }
                                                                </apex:commandLink>
                                                            </apex:outputLabel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-check" style="margin-top: 5px;">
                                                        <div class="checkbox checkbox-red">
                                                            <apex:inputCheckbox value="{! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                styleClass="form-check-input infoByEmail" id="infoByEmail"
                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'newsSubscribe2', 'UI_01_Tankkarte_Step_1_Form_Contacts');"/>
                                                            <apex:outputLabel styleClass="form-check-label" for="infoByEmail">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['LABEL'].Value__c }
                                                                <apex:commandLink action="{! showAgreeToInfoByEmail }"
                                                                    onclick="scrollDisableControl('disable'); analytics_onClickButtonSendUI('show','popup', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                    styleClass="form-check-label"
                                                                    reRender="modalAgreeToInfoByEmail"
                                                                    status="splashStatus">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['LABEL URL'].Value__c }
                                                                </apex:commandLink>
                                                            </apex:outputLabel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-check" style="margin-top: 5px; width: 97%;">
                                                        <div class="checkbox checkbox-red">
                                                            <apex:inputCheckbox value="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                styleClass="form-check-input news" id="news"
                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'newsSubscribe3', 'UI_01_Tankkarte_Step_1_Form_Contacts');"/>
                                                            <apex:outputLabel styleClass="form-check-label" for="news">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['LABEL'].Value__c }
                                                                <apex:commandLink action="{! showAgreeNews }"
                                                                    onclick="scrollDisableControl('disable'); analytics_onClickButtonSendUI('show','popup', 'UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                    styleClass="form-check-label"
                                                                    reRender="modalAgreeToNews"
                                                                    status="splashStatus">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['LABEL URL'].Value__c }
                                                                </apex:commandLink>
                                                            </apex:outputLabel>
                                                        </div>
                                                    </div>
                                                </div> 
                                            </div>
                                            <div class="row" style="margin: 33px -10px 0 0;">
                                                <div class="center-block" style="width: 91%">
                                                    <div class="col-lg-2 pull-right">
                                                        <apex:actionFunction name="goToCreditScoring" 
                                                            action="{! goToCreditScoring }" 
                                                            oncomplete="recheckCompanyDetails(); toViewport('top-heading-viewport'); setEvents_companyDetails(); onPageRender();" 
                                                            reRender="stepList, formBlock, info-block, details-info, onlineChatBlock" 
                                                            status="splashStatus"/>
                                                        <apex:commandLink value="{! stepPagesMap['CONTACT DETAILS'].elements['GO TO STEP 2 BUTTON']['BUTTON NAME'].Value__c }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_01_Tankkarte_Step_1_Form_Contacts'); return validateContactDetails(true);" 
                                                            reRender="stepList, formBlock"
                                                            styleClass="btn btn-red pull-right"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            analytics_ContactDetailsOnLoad();
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP CREDIT SCORE -->
                                    <apex:outputPanel layout="block" id="creditScoring" styleClass="credit-scoring" rendered="{! AND(activeStep = 1, activeSubStep = 'Search company') }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Search company';
                                        </script>                                     
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['TOP HEADING VALUE'].Value__c }
                                                    </div>
                                                    <div class="b-desc">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['TOP SUBHEADING VALUE'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="country block" style="margin-top: 32px">
                                                    <div class="col-lg-3">
                                                        <div style="width: 170px">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-lg-offset-1">
                                                        <div style="margin-top: 10px">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['DEFAULT VALUE'].Value__c }
                                                        </div>
                                                        <div class="country-msg font-12">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['REMARK'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="company block">
                                                    <div class="col-lg-3">
                                                        <div style="width: 170px">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                            <span class="f-required">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8 col-lg-offset-1">
                                                        <apex:inputText id="company" 
                                                            value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                            required="false" styleClass="inline-block form-control required input companyField ym-disable-keys" onfocus="setSearchResultBlockStatus();"
                                                            onchange="onPageRender();" maxLength="255" style="width: 83%"
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'companyName', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                            onkeyup="sendErrorCompanyName();"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <div class="invalid-feedback invalid-feedback-companyname">
                                                            <script>
                                                                function sendErrorCompanyName() {
                                                                    if ($j('.invalid-feedback-companyname').is(':visible')) {
                                                                        analytics_onErrorSendUI('nameCompanyNotFormat','UI_02_Tankkarte_Step_2_Form_Company');
                                                                    }
                                                                }
                                                            </script>
                                                            <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row form-group">
                                                <div class="tax-id block">
                                                    <div class="col-lg-3">
                                                        <div style="width: 170px">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                            <span class="f-required">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['ASTERISK'].Value__c }
                                                            </span>
                                                            <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-5 col-lg-offset-1">
                                                        <apex:inputText id="tax-id" 
                                                            value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                            required="false" 
                                                            styleClass="inline-block form-control required input tax-id-field ym-disable-keys"
                                                            onfocus="setSearchResultBlockStatus();"
                                                            onchange="onPageRender();"
                                                            style="width: 70%;"
                                                            maxLength="10"
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'taxId', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                            onkeyup="sendErrorTaxId(this);"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <div class="invalid-feedback invalid-feedback-taxId" style="width: 135%;">
                                                            <script>
                                                                function sendErrorTaxId(taxValue) {
                                                                    taxValue.value = taxValue.value.replace(/[^0-9\.]/g,'');
                                                                    if(taxValue.value.split('.').length > 2) taxValue.value = taxValue.value.replace(/\.+$/,"");
                                                                    if ($j('.invalid-feedback-taxId').is(':visible')) {
                                                                        analytics_onErrorSendUI('taxIdNotFormat','UI_02_Tankkarte_Step_2_Form_Company');
                                                                    }
                                                                }                  
                                                            </script>
                                                            <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <apex:actionFunction name="setSearchResultBlockStatus" oncomplete="recheckCompanyDetails();" reRender="searchBtnsBlock, search-companies-block, goToPumpingButton, onlineChatBlock">
                                                <apex:param name="btnStatus" value="false" assignTo="{! continueButtonIsDisabled }"/>
                                                <apex:param name="searchResult" value="null" assignTo="{! activeInnerPageCreditScoring }"/>
                                                <apex:param name="continueBtnStatus" value="null" assignTo="{! selectedCompany.identificationnumber }"/>
                                            </apex:actionFunction>
                                            <div class="row">
                                                <apex:outputPanel id="searchBtnsBlock">
                                                    <apex:outputPanel rendered="{! continueButtonIsDisabled = false && activeInnerPageCreditScoring != 'Select company' }">
                                                        <div class="buttons center-block" style="width: 88%">
                                                            <div class="col-lg-3 pull-right">
                                                                <apex:actionFunction name="doSaveCompany" action="{! doSaveCompanyDetailsData }" oncomplete="validateCompanyDetails(false); doSearchCompany();" reRender="stepList, search-companies-block, formBlock, info-block, orderDetails"/>
                                                                <apex:actionFunction name="doSearchCompany" action="{! doSearchCompany }" oncomplete="analytics_SearchCompanyOnClickSearch('{! opportunity.E2E_Form_of_Business__c }'); endSplash(); setEvents_companyDetails(); onPageRender();" reRender="stepList, search-companies-block, formBlock, info-block, orderDetails, searchBtnsBlock"/>
                                                                <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SEARCH BUTTON']['BUTTON NAME'].Value__c }"
                                                                                  onclick="analytics_onClickButtonSendUI('click','button: search', 'UI_02_Tankkarte_Step_2_Form_Company'); 
                                                                                           turnOffBackButtonClick(); 
                                                                                           return validateCompanyDetailsForSearch();"
                                                                                  styleClass="btn btn-red search search-btn-main"
                                                                                  reRender="search-companies-block, searchBtnsBlock, onlineChatBlock"
                                                                                  status="splashStatus"/>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{! OR(continueButtonIsDisabled = true, (continueButtonIsDisabled = false && activeInnerPageCreditScoring = 'Select company')) }">
                                                        <div class="buttons center-block" style="width: 88%">
                                                            <div class="col-lg-3 pull-right">
                                                                <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SEARCH BUTTON']['BUTTON NAME'].Value__c }" disabled="true" styleClass="btn btn-red search" reRender="search-companies-block, searchBtnsBlock, onlineChatBlock" status="splashStatus"/>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                            <div class="row">
                                                <apex:outputPanel id="search-companies-block">
                                                    <apex:outputPanel layout="block" styleClass="select-company" rendered="{! activeInnerPageCreditScoring = 'Select company' }">
                                                        <div class="col-lg-12">
                                                            <div id="cf-companies" class="ym-hide-content">
                                                                <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="b-desc" style="margin-bottom: 20px;" layout="block">
                                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="cf-companies-list">
                                                                    <div class="cf-list">
                                                                        <apex:repeat value="{! availableCompaniesListCreditScoring.companiesMap }" var="companyId">
                                                                            <div class="radio radio-red">
                                                                                <div class="cf-company">
                                                                                    <input type="radio" name="company" id="{! companyId }"
                                                                                        onclick="$j('[id$=selected-company-id]').val('{! companyId }');
                                                                                                 $j('.save-company-btn').attr('disabled', false); 
                                                                                                 analytics_onClickRadioSendUI('companySelect', 'UI_02_Tankkarte_Step_2_Form_Company');"/>
                                                                                    <label for="{! companyId }">
                                                                                        {! availableCompaniesListCreditScoring.companiesMap[companyId].name }<br/>
                                                                                        <span>
                                                                                        {! availableCompaniesListCreditScoring.companiesMap[companyId].street } {! availableCompaniesListCreditScoring.companiesMap[companyId].housenumber }
                                                                                                {! IF(availableCompaniesListCreditScoring.companiesMap[companyId].postcode != null, ', ' +
                                                                                                availableCompaniesListCreditScoring.companiesMap[companyId].postcode, '') }
                                                                                                {! IF(availableCompaniesListCreditScoring.companiesMap[companyId].city != null, ', ' +
                                                                                                availableCompaniesListCreditScoring.companiesMap[companyId].city, '') }
                                                                                                {! IF(availableCompaniesListCreditScoring.companiesMap[companyId].country != null, ', ' +
                                                                                                availableCompaniesListCreditScoring.companiesMap[companyId].country, '') }
                                                                                        </span>
                                                                                    </label>
                                                                                </div>
                                                                            </div>
                                                                        </apex:repeat>
                                                                        <apex:inputHidden id="selected-company-id"
                                                                            value="{! selectedCompany.identificationnumber }"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3 pull-left">
                                                        <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                            action="{! goToContactDetails }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                            oncomplete="validateContactDetails(false); toViewport('top-heading-viewport'); setEvents_contactDetails();isCompanySearch = true;"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            style="width: 100%"
                                                            reRender="stepList, formBlock, info-block, details-info, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <apex:outputPanel id="goToPumpingButton">
                                                        <div class="col-lg-3 pull-right">         
                                                            <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }"
                                                                action="{! deleteReportsForPreviousCompany }"
                                                                reRender=""
                                                                onclick="startSplash(); analytics_onClickButtonSendUI('click','button: next', 'UI_02_Tankkarte_Step_2_Form_Company');"
                                                                oncomplete="goToSetTotalConsumption();"
                                                                styleClass="btn btn-red continue save-company-btn"/>

                                                            <apex:actionFunction name="goToSetTotalConsumption" 
                                                                action="{! goToSetTotalConsumption }" 
                                                                reRender=""
                                                                oncomplete="validateVatId();"/>

                                                            <script>
                                                                $j('.save-company-btn').attr('disabled', true);
                                                            </script>
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            if (isCompanySearch == undefined) {
                                                isCompanySearch = true;
                                            }                                        
                                            if (isCompanySearch) {
                                                analytics_SearchCompanyOnLoad('{! opportunity.E2E_Form_of_Business__c }');
                                                isCompanySearch = false;
                                            }
                                        </script>
                                    </apex:outputPanel>


                                    <!-- ENTER VAT NUMBER -->
                                    <apex:actionFunction name="validateVatId" 
                                        action="{! validateVatId }" 
                                        reRender="stepList, formBlock, info-block, details-info, onlineChatBlock"
                                        oncomplete="endSplash(); toViewport('top-heading-viewport'); setEvents_fuelConsumption(); setEvents_vatNumber(); onPageRender();"/>
                                    <apex:outputPanel styleClass="enter-vat-id" id="enterVatId" rendered="{! AND(activeStep = 1, activeSubStep = 'Enter VAT Number') }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="b-desc">
                                                        {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row form-group vat-group" style="margin-top: 32px;">
                                                <div class="col-lg-3">
                                                    <div class="block" style="width: 200px;">
                                                        <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                            <apex:outputLabel styleClass="f-label" value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['LABEL'].Value__c }"/>
                                                            <span class="f-required">{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['ASTERISK'].Value__c }</span>
                                                            <div class="i-helper inline-block" style="margin-right: 10px;" data-html="true" data-content="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="col-lg-7 col-lg-offset-1">
                                                    <div class="vat-number block">
                                                        <apex:inputText id="vatid" 
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'vatid', 'UI_03_Tankkarte_Step_3_Form_FuelLiters')" 
                                                            onkeyup="sendErrorVatid();" value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['DEFAULT VALUE'].Value__c }" styleClass="inline-block form-control required input ym-disable-keys" 
                                                            style="width: 70%; text-transform: uppercase;"
                                                            maxLength="12"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-vatid">
                                                            <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            <script>
                                                                function sendErrorVatid() {
                                                                    if ($j('.invalid-feedback-vatid').is(':visible')) {
                                                                        analytics_onErrorSendUI('vatidNotFilled','UI_03_Tankkarte_Step_3_Form_FuelLiters');
                                                                    }
                                                                }
                                                            </script>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-check" style="margin-top: -8px; width: 97%;">
                                                        <div class="checkbox checkbox-red">
                                                            <apex:inputCheckbox id="no-vat-checkbox"
                                                                value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['NO VAT'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                onclick="analytics_onClickCheckboxSendUI($j(this), 'novat', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');
                                                                        if(this.checked){
                                                                            document.getElementById('{!$Component.vatid}').value = ''; 
                                                                            $j('.vat-group input').removeClass('error'); 
                                                                            $j('.vat-group input').prop('disabled', true);
                                                                            $j('.vat-group').find('.invalid-feedback').hide();
                                                                            $j('.vat-group').find('.glyphicon').hide();
                                                                            $j('.enter-vat-id .btn-red').attr('disabled', false);
                                                                        } else {
                                                                            $j('.vat-group input').prop('disabled', false);
                                                                            setEvents_vatNumber();
                                                                        }"
                                                                styleClass="form-check-input"/>
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['NO VAT'].elementItemsMap['LABEL'].Value__c }" 
                                                                styleClass="form-check-label" 
                                                                for="no-vat-checkbox" 
                                                                escape="false"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3 pull-left">
                                                        <apex:commandButton action="{! backToCreditScoring }"
                                                            onclick="analytics_onClickButtonSendUI('click', 'button: back', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                            onComplete="showCardsOrderNavigationTabs(); setEvents_cardsOrder(); onPageRender();"
                                                            value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            style="width: 100%"
                                                            reRender="formBlock, orderDetails, modalError, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:commandButton id="continueadditionalparams" value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                            action="{! updateVatNumber }" onComplete="setEvents_fuelConsumption(); doValidateVatId(); onPageRender();"
                                                            disabled="{! continueButtonIsDisabled }"
                                                            onclick="analytics_onClickButtonSendUI('click', 'button: next', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                            reRender="stepList, formBlock, orderDetails, modalError, onlineChatBlock"
                                                            styleClass="btn btn-red continue continue-fromvat" status="splashStatus"/>
                                                        <script>
                                                            function doValidateVatId() {
                                                                if ({! isVatIdValid }) {
                                                                    $j('.vat-group input').removeClass('error');
                                                                    $j('.vat-group input').addClass('success');
                                                                    $j('.vat-group').find('.invalid-feedback').hide();
                                                                    $j('.vat-group').find('.glyphicon').show();
                                                                    $j('.continue-fromvat').attr('disabled', false);
                                                                } else {
                                                                    $j('.vat-group input').removeClass('success');
                                                                    $j('.vat-group input').addClass('error');
                                                                    $j('.vat-group').find('.invalid-feedback').show();
                                                                    $j('.vat-group').find('.glyphicon').hide();
                                                                    $j('.continue-fromvat').attr('disabled', true);
                                                                    setEvents_vatNumber();
                                                                    window.scrollTo(0, 0);
                                                                }
                                                            }
                                                        </script>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>


                                    <!-- STEP FUEL CONSUMPTION -->
                                    <apex:outputPanel layout="block" id="fuelConsumption" styleClass="fuel-consumption" rendered="{! AND(activeStep = 1, activeSubStep = 'Set total consumption') }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Set total consumption';
                                        </script>                                     
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['TOP HEADING']['TOP HEADING VALUE'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="pump block" style="margin: 32px 30px 0px 30px;">
                                                    <div class="col-lg-3">
                                                        <div style="width: 160px; line-height: 18px;">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 0px;">
                                                                <span class="f-required">
                                                                    {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['ASTERISK'].Value__c }
                                                                </span>
                                                            </apex:outputLabel>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-lg-offset-1">
                                                        <apex:inputText id="pump"
                                                            value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                            onkeyup="sendErrorFuelConsumption1(); sendErrorFuelConsumption2();"
                                                            required="false" styleClass="form-control required input totalPumpField ym-disable-keys"
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'fuelAmount', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                            onfocus="setContinueButtonStatus();"
                                                            maxLength="5"
                                                            style="width: 83%"/>
                                                    </div>
                                                    <div class="col-lg-8 col-lg-offset-1">
                                                        <apex:outputPanel layout="block" styleClass="font-12" style="margin-top: 4px; width: 82%">
                                                            {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['REMARK'].Value__c }
                                                        </apex:outputPanel>                                                    
                                                    </div>                                                     
                                                    <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['UNIT'].Value__c }" styleClass="label-last font-15" style="margin-left: -20px;"/>
                                                </div>
                                                <div class="col-lg-3"></div>
                                                <div class="col-lg-7">
                                                    <div class="invalid-feedback consumption-warning1 invalid-feedback-fuel1" style="margin-left: 50px;">
                                                        <script>
                                                            function sendErrorFuelConsumption1() {
                                                                if ($j('.invalid-feedback-fuel1').is(':visible')) {
                                                                    analytics_onErrorSendUI('fuelAmountNotFormat','UI_03_Tankkarte_Step_3_Form_FuelLiters');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 1'].Value__c }
                                                    </div>
                                                    <div class="invalid-feedback consumption-warning2 invalid-feedback-fuel2" style="margin-left: 50px;">
                                                        <script>
                                                            function sendErrorFuelConsumption2() {
                                                                if ($j('.invalid-feedback-fuel2').is(':visible')) {
                                                                    analytics_onErrorSendUI('fuelAmountNotFormat','UI_03_Tankkarte_Step_3_Form_FuelLiters');
                                                                }
                                                            }
                                                        </script>
                                                        <div class="i-error">!</div>{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 2'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <apex:actionFunction name="setContinueButtonStatus" reRender="setTotalPumpBtnsBlock">
                                                <apex:param name="btnStatus" value="true" assignTo="{! continueButtonIsDisabled }"/>
                                            </apex:actionFunction>
                                            <div class="b-splitter"></div>
                                            <div id="btnsTotalConsumption" class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3 pull-left">
                                                        <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                            action="{! backToCreditScoring }"
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_companyDetails(); onPageRender();"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                            style="width: 100%"
                                                            reRender="formBlock, info-block, orderDetails"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:actionFunction name="goToOfferCreditLine" 
                                                            action="{! doCalculateCreditScoring }" 
                                                            reRender="stepList, formBlock, info-block, orderDetails, onlineChatBlock" 
                                                            status="splashStatus" 
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_creditLimit(); onPageRender();"/>
                                                        <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_03_Tankkarte_Step_3_Form_FuelLiters'); return validatePumpDetails();" reRender="formBlock" styleClass="btn btn-red continue" status="splashStatus"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            analytics_FuelLitersOnLoad('{! opportunity.E2E_Form_of_Business__c }');
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP ADDITIONAL CREDIT SCORING ALLOWANCE -->
                                    <apex:outputPanel id="additCreditScoring" rendered="{! AND(activeStep = 1, activeSubStep = 'Additional Credit Scoring Allowance') }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </div>
                                                    <div class="b-desc" style="margin: 0 30px 15px 30px;">
                                                        {! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-grey-block" style="margin-top: 10px">
                                                <div class="b-block-header" style="margin: 15px 0px 12px 15px;">
                                                    {! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['HEADING'].Value__c }
                                                    <!-- <div class="pull-right" style="margin-right: 20px;">
                                                        <a class="btn btn-xs payment-modal" 
                                                           onclick="printDocument('frameAdditionalCreditScoring', 'creditScoringAllowanceContentPL', 'scoring-agreement-block-inside'); 
                                                                    analytics_onClickButtonSendUI('click','print_doc','UI_03_Tankkarte_Step_3_Form_FuelLiters');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                    <div class="pull-right" style="margin-right: 10px;">
                                                        <a class="btn btn-xs payment-modal" href="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['DOWNLOAD URL'].Value__c }"
                                                           onclick="analytics_onClickButtonSendUI('click','download_doc','UI_03_Tankkarte_Step_3_Form_FuelLiters');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div> -->
                                                    <div class="pull-right" style="margin-right: 10px;">
                                                        <a class="btn btn-xs payment-modal" 
                                                           onclick="showAdditionalCreditScoringAllowanceDoc(); 
                                                                    scrollDisableControl('disable'); 
                                                                    analytics_onClickButtonSendUI('click','zoom_doc','UI_03_Tankkarte_Step_3_Form_FuelLiters');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "full-screen.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                </div>

                                                <div class="scoring-agreement-block">
                                                    <div style="margin: 0 15px; height:165px;" class="scoring-agreement-block-inside">
                                                        <apex:iframe id="frameAdditionalCreditScoring"
                                                            scrolling="true"
                                                            src="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['IFRAME URL'].Value__c }" width="100%" height="99.9%">
                                                        </apex:iframe>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3">
                                                        <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                            action="{! backToSetTotalConsumption }"
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_fuelConsumption(); onPageRender();"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                            style="width: 100%"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            reRender="formBlock, messageBlock, orderDetails, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:commandLink action="{! goToSignDocuments }"
                                                            value="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                            styleClass="btn btn-red continue" 
                                                            reRender="stepList, formBlock, orderDetails, onlineChatBlock"
                                                            status="splashStatus">
                                                        </apex:commandLink>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> 
                                    </apex:outputPanel>

                                    <!-- STEP CREDIT LINE -->
                                    <apex:outputPanel layout="block" id="creditLine" styleClass="credit-line" rendered="{! AND(activeStep = 1, activeSubStep = 'Calculating credit score') }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Calculating credit score';
                                        </script>                                     
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div id="headerBlock" class="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="payment-method block" style="margin-top: 32px;">
                                                    <div class="col-lg-4">
                                                        <div style="width: 180px; line-height: 18px;">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 0px;"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8">
                                                        <div class="btn-group">
                                                            <apex:outputPanel id="payMethodBlock" style="display: inline-table;">
                                                                <div
                                                                    id="dd-btn"
                                                                    class="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON API'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                    style="padding-top: 7px;"
                                                                    onclick="$j('[id$=pay-method-dflt]').val('{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON API'].Value__c }');
                                                                            $j('[id$=dd-btn]').addClass('selected');
                                                                            $j('[id$=bt-btn]').removeClass('selected');
                                                                            $j('[id$=dd-desc]').show();
                                                                            $j('[id$=bt-desc]').hide();
                                                                            analytics_onClickButtonSendUI('click','button: lastschrift','UI_04_Tankkarte_Step_4_Form_PaymentMethod');">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON LABEL'].Value__c }
                                                                </div>
                                                                <div
                                                                    id="bt-btn"
                                                                    class="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON API'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                    style="padding-top: 7px;"
                                                                    onclick="$j('[id$=pay-method-dflt]').val('{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON API'].Value__c }');
                                                                            $j('[id$=bt-btn]').addClass('selected');
                                                                            $j('[id$=dd-btn]').removeClass('selected');
                                                                            $j('[id$=bt-desc]').show();
                                                                            $j('[id$=dd-desc]').hide();    
                                                                            analytics_onClickButtonSendUI('click','button: bankberweisung','UI_04_Tankkarte_Step_4_Form_PaymentMethod');">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON LABEL'].Value__c }
                                                                </div>
                                                                <apex:inputhidden value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c }" id="pay-method-dflt"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div id="dd-desc" 
                                                            class="pay-method-msg font-12" 
                                                            style="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD BUTTON API'].Value__c, 'display: block;', 'display: none;') }">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DIRECT DEBIT DESCRIPTION'].Value__c }
                                                        </div>
                                                        <div id="bt-desc" 
                                                            class="pay-method-msg font-12" 
                                                            style="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT BUTTON API'].Value__c, 'display: block;', 'display: none;') }">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BANK TRANSFER DESCRIPTION'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="billing-period block">
                                                    <div class="col-lg-4">
                                                        <div style="width: 180px; line-height: 18px;">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 0px;"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8">
                                                        <apex:outputPanel id="billingPeriodBlock">
                                                            <div class="btn-group">
                                                                <!--Billing Period = 7 and Payment Terms = 7 -->
                                                                <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['WEEKLY BUTTON NAME + 7'].Value__c }" 
                                                                    action="{! changeBillingPeriod }" 
                                                                    onComplete="onPageRender(); setEvents_creditLimit();$j('.remark7').show();$j('.remark14').hide();" 
                                                                    rerender="billingPeriodBlock, creditLimitItems, depositBlock, payMethodBlock, hidden-elements,creditLimitRequired" 
                                                                    styleClass="{! IF(AND(defaultBillingPeriod = 7, defaultPaymentTerms = 7), 'btn btn-select selected', 'btn btn-select') }" 
                                                                    onclick="analytics_onClickButtonSendUI('click','button: wchentlich', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');"
                                                                    status="splashStatus">
                                                                    <apex:param name="billingPeriod" value="7" assignTo="{! defaultBillingPeriod }"/>
                                                                    <apex:param name="paymentTerms" value="7" assignTo="{! defaultPaymentTerms }"/>
                                                                    <apex:param name="creditLimit" value="{! creditLimit7_Plus7 }" assignTo="{! creditLimit }"/>
                                                                </apex:commandButton>   
                                                                                                                                
                                                                <!--Billing Period = 15 and Payment Terms = 14 -->
                                                                <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['BI-WEEKLY BUTTON NAME + 14'].Value__c }" 
                                                                    action="{! changeBillingPeriod }" 
                                                                    onComplete="onPageRender(); setEvents_creditLimit();$j('.remark7').hide();$j('.remark14').show();"
                                                                    rerender="billingPeriodBlock, creditLimitItems, depositBlock, payMethodBlock, hidden-elements,creditLimitRequired" 
                                                                    styleClass="{! IF(AND(defaultBillingPeriod = 15, defaultPaymentTerms = 14), 'btn btn-select selected', 'btn btn-select') }"
                                                                    onclick="analytics_onClickButtonSendUI('click','button: vierzehntgig', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');" 
                                                                    status="splashStatus">
                                                                    <apex:param name="billingPeriod" value="15" assignTo="{! defaultBillingPeriod }"/>
                                                                    <apex:param name="paymentTerms" value="14" assignTo="{! defaultPaymentTerms }"/>
                                                                    <apex:param name="creditLimit" value="{! creditLimit15_Plus14 }" assignTo="{! creditLimit }"/>
                                                                </apex:commandButton>  
                                                            </div>
                                                            <div class="billing-period-msg font-12 remark7" style="{! IF(defaultPaymentTerms != 7,'display: none','') }">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['REMARK'].Value__c }
                                                            </div>
                                                            <div class="billing-period-msg font-12 remark14" style="{! IF(defaultPaymentTerms  != 14,'display: none','') }">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['REMARK 14'].Value__c }
                                                            </div>                                                            
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="choose-credit-limit">
                                                    <div class="col-lg-12">
                                                        <div class="b-row-header">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['HEADING'].Value__c }
                                                        </div>
                                                        <div class="b-desc" style="margin-bottom: 20px">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['REMARK'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="credit-limit block">
                                                    <div class="col-lg-3">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" id="creditLimitRequired">
                                                            <span class="f-required" style="{! IF(minCreditLimit != maxValue, '', 'display: none;')}">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['ASTERISK'].Value__c }
                                                            </span>
                                                        </apex:outputLabel>
                                                    </div>
                                                    <apex:outputPanel styleClass="col-lg-5 col-lg-offset-1" layout="block" id="creditLimitItems">
                                                        <apex:outputPanel layout="block" styleClass="credit-limit-value" rendered="{! minCreditLimit != maxValue }">
                                                            <apex:outputPanel id="credit-limit-actions" layout="block" styleClass="inline-block">
                                                                <div class="btn-group minus-plus">
                                                                    <span class="btn btn-select credit-value-block">
                                                                        <apex:outputText id="creditLimitInput" value="{! creditLimit }" label="Credit limit"/>
                                                                        <span>{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }</span>
                                                                    </span>
                                                                    <apex:commandButton value="-" styleClass="btn btn-select action-btn minus" disabled="{! NOT(creditLimit > minCreditLimit) }"
                                                                        onclick="sendMinusButtonUI(); decreaseCreditLimit(); return false;"/>
                                                                    <apex:commandButton value="+" styleClass="btn btn-select action-btn plus" disabled="{! NOT(creditLimit < maxValue) }"
                                                                        onclick="sendPlusButtonUI(); increaseCreditLimit(); return false;"/>
                                                                    <script>
                                                                        function sendMinusButtonUI() {
                                                                            var isNextStepDisabled = $j('.minus-plus').find('.btn-select.action-btn.minus').is('[disabled=disabled]');
                                                                            if ( ! isNextStepDisabled ) {
                                                                                analytics_onClickButtonSendUI('click','button: minus', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');
                                                                            }
                                                                        }

                                                                        function sendPlusButtonUI() {
                                                                            var isNextStepDisabled = $j('.minus-plus').find('.btn-select.action-btn.plus').is('[disabled=disabled]');
                                                                            if ( ! isNextStepDisabled ) {
                                                                                analytics_onClickButtonSendUI('click','button: plus', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');
                                                                            }
                                                                        }
                                                                    </script>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" rendered="{! minCreditLimit = maxValue }">
                                                            <apex:outputPanel layout="block" styleClass="inline-block" style="margin-top: 9px;">
                                                                {! creditLimit }
                                                                <apex:outputPanel > {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }</apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>

                                                    <apex:actionFunction name="recalculateDepositValue" action="{! doRecalculateDeposit }"
                                                                         reRender="depositBlock, idInputHidden, creditLimit, payMethodBlock, credit-limit-actions" onComplete="setEvents_creditLimit(); onPageRender(); return false;" status="splashStatus">
                                                        <apex:param name="creditLimit" assignTo="{! creditLimitValue }" value=""/>
                                                        <apex:param name="minCreditLimit" assignTo="{! minCreditLimit }" value=""/>
                                                        <apex:param name="maxCreditLimit" assignTo="{! maxCreditLimit }" value=""/>
                                                    </apex:actionFunction>

                                                    <apex:outputPanel layout="block" styleClass="col-lg-9 col-lg-offset-4" id="hidden-elements">
                                                        <apex:outputPanel layout="none" rendered="{! minCreditLimit != maxValue }">
                                                            <div data-role="range-slider" class="range-slider">
                                                                <apex:outputPanel id="minCreditLimit" styleClass="min-limit slider-label-first">{! minCreditLimit }</apex:outputPanel>
                                                                <div id="slider"/>
                                                                <apex:outputPanel id="maxCreditLimit" styleClass="max-limit slider-label-last">{! maxValue }</apex:outputPanel>
                                                                <apex:inputHidden value="{! creditLimit }" id="idInputHidden"/>
                                                                <apex:inputHidden value="{! minCreditLimit }" id="minLimit"/>
                                                                <apex:inputHidden value="{! maxCreditLimit }" id="maxLimit"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>

                                                    <script type="text/javascript">
                                                        function recalculateDeposit() {
                                                            var creditLimitValue = document.getElementById('{!$Component.idInputHidden}').value;
                                                            var minLimitValue = document.getElementById('{!$Component.minLimit}').value;
                                                            var maxLimitValue = document.getElementById('{!$Component.maxLimit}').value;
                                                            recalculateDepositValue(creditLimitValue, minLimitValue, maxLimitValue);
                                                        }
                                                    </script>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="deposit block">
                                                    <div class="col-lg-3">
                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label" style="margin-top: 5px"/>
                                                    </div>
                                                    <div class="col-lg-5 col-lg-offset-1">
                                                        <apex:outputPanel id="depositBlock">
                                                            <apex:outputPanel layout="block" rendered="{! AND(deposit != 0, deposit != null) }">
                                                                <div>
                                                                    <apex:outputPanel layout="block" styleClass="inline-block" style="vertical-align: middle">
                                                                        {! deposit }
                                                                        <apex:outputPanel > {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }</apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP REQUIRED DEPOSIT'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                </div>
                                                                <div class="font-12">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK REQUIRED DEPOSIT'].Value__c }
                                                                </div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" rendered="{! OR(deposit = 0, deposit = null) }">
                                                                <div>
                                                                    <div class="font-15 inline-block" style="vertical-align: middle">
                                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK NOT REQUIRED DEPOSIT'].Value__c }
                                                                    </div>
                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP NOT REQUIRED DEPOSIT'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3">
                                                        <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                            action="{! backToSetTotalConsumption }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod');"
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_fuelConsumption(); onPageRender();"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            style="width: 100%"
                                                            reRender="formBlock, messageBlock, orderDetails, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:actionFunction name="goToCardsOrder" 
                                                            action="{! goToCardsConfig }" 
                                                            reRender="stepList, messageBlock, formBlock, info-block, orderDetails, onlineChatBlock" 
                                                            status="splashStatus" 
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_cardsOrder(); onPageRender();"/>
                                                        <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_04_Tankkarte_Step_4_Form_PaymentMethod'); return validateCreditLimit(true);" reRender="formBlock" styleClass="btn btn-red continue" status="splashStatus"/>
                                                    </div>
                                                    <script type="text/javascript">
                                                        function analytics_goToCardsConfig() {
                                                            if (paymentMethodAnalytics == null && ('{! opportunity.Zahlungsart__c }' == '' ||
                                                                '{! opportunity.Zahlungsart__c }' == null)) {
                                                                paymentMethodAnalytics = 'Lastschrift';
                                                            } else
                                                            if (paymentMethodAnalytics == null) {
                                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                            }
                                                            isDepositAnalytics = {! IF(deposit != null && deposit != 0, true, false) };
                                                            analytics_PaymentMethodNext(paymentMethodAnalytics, {! IF(deposit != null && deposit != 0, true, false) }, '{! opportunity.E2E_Form_of_Business__c }');
                                                        }
                                                    </script>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            analytics_PaymentMethodOnLoad('{! opportunity.E2E_Form_of_Business__c }');
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP CARDS ORDER -->
                                    <apex:outputPanel layout="block" id="cardsOrder" styleClass="cards-order" rendered="{! AND(activeStep = 2, activeSubStep = 'Card configuration') }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Card configuration';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }
                                        </script>
                                        <style>
                                            .onoffswitch-inner:before {
                                                content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON ON']['LABEL'].Value__c }";
                                                padding-left: 9px;
                                                background-color: #EE3A43;
                                                color: #FFFFFF;
                                                text-align: left;
                                            }
                                            .onoffswitch-inner:after {
                                                content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON OFF']['LABEL'].Value__c }";
                                                padding-right: 9px;
                                                background-color: #EEEEEE;
                                                color: #505050;
                                                text-align: right;
                                            }
                                            .invalidcards-feedback {
                                                display: block;
                                                width: 80%;
                                                margin-top: .5rem;
                                                font-size: 12px;
                                                color: #EE3A43;
                                            }
                                        </style>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['TOP HEADING']['TOP HEADING NAME'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="cards-count block">
                                                    <div class="col-lg-2">
                                                        <div style="width: 170px">
                                                            <apex:outputLabel value="{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label">
                                                                <span class="f-required">{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }</span>
                                                            </apex:outputLabel>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-2 col-lg-offset-1">
                                                        <apex:actionFunction name="recalculateFeesCosts" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" reRender="feescosts-block" status="splashStatus"/>
                                                        <apex:outputPanel layout="block" styleClass="number-wrapper" id="counter">
                                                            <apex:input id="cardsCounter" type="number" value="{! numberOfCards }" required="false"
                                                                        styleClass="inline-block form-control required input ym-disable-keys {! IF(activeInnerPage = 'Remove extra cards error', 'error', '') }"
                                                                        style="padding: 5px 25px 5px 10px;" html-min="1" html-max="50" onchange="changeNumberOfCards();"
                                                                        onkeypress="if (window.event.keyCode == 13) {changeNumberOfCards();return false;}"
                                                                        onblur="analytics_onBlurInputSendUI($j(this), 'countCards', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"/>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel styleClass="counter">
                                                            <div class="count-up"><apex:outputPanel layout="block" styleClass="up" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');increaseCards(); changeNumberOfCards();"/></div>
                                                            <div class="count-down"><apex:outputPanel layout="block" styleClass="down" onclick="analytics_onClickButtonSendUI('click','button: countCards', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');reductionCards(); changeNumberOfCards();"/></div>
                                                        </apex:outputPanel>
                                                        <apex:actionFunction name="changeNumberOfCards" action="{! changeNumberOfCards }" onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                             reRender="counter, cards-config, continue-button, messageBlock, feescosts-block, cards-exception" status="splashStatus"/>
                                                        <apex:outputPanel id="cards-exception">
                                                            <apex:outputPanel rendered="{! activeInnerPage = 'Remove extra cards error' }" styleClass="invalidcards-feedback" style="width: 500%">
                                                                <div class="i-error">!</div>{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- CARDS ORDER NAVS-->
                                        <apex:outputPanel id="cards-config">
                                            <div class="wrapper cards-categories">
                                                <div class="b-nav-cards">
                                                    <apex:outputPanel rendered="{! numberOfCards > 1 }">
                                                        <ul class="nav nav-tabs" role="tablist">
                                                            <li class="tab1 {! IF(activeCardConfigTab = 'same', 'active', '') }">
                                                                <a href="#sameCards" data-toggle="tab" onclick="setActiveTab('same'); analytics_onClickTabsSendUI('cardsConfigTabs_alle', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" >
                                                                    <apex:outputPanel id="samecards-heading">
                                                                        {! numberOfCards } {! IF(numberOfCards < 5, stepPagesMap['CARD CONFIGURATION'].elements['SAME CARDS TAB']['TAB NAME PART 2'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['SAME CARDS TAB']['TAB NAME PART 3'].Value__c) }
                                                                    </apex:outputPanel>
                                                                </a>
                                                            </li>
                                                            <li class="tab2 {! IF(activeCardConfigTab = 'diff', 'active', '') }">
                                                                <a href="#diffCards" data-toggle="tab" style="padding: 23px 32px;" onclick="setActiveTab('diff'); analytics_onClickTabsSendUI('cardsConfigTabs_separated', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');">
                                                                    <apex:outputPanel id="diffcards-heading">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['DIFF CARDS TAB']['TAB NAME'].Value__c }
                                                                    </apex:outputPanel>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </apex:outputPanel>
                                                    <apex:actionFunction action="{! changeActiveTab }" oncomplete="setEvents_cardsOrder(); onPageRender();" name="setActiveTab" reRender="feescosts-block, tabs-content, continue-button, counter, cards-exception, onlineChatBlock" status="splashStatus">
                                                        <apex:param name="activeTab" value="" assignTo="{! activeCardConfigTab }"/>
                                                    </apex:actionFunction>
                                                </div>
                                                <apex:outputPanel id="tabs-content" styleClass="tab-content" layout="block">
                                                    <apex:outputPanel rendered="{! activeCardConfigTab = 'same' }">
                                                        <div class="tab-panel {! IF(activeCardConfigTab = 'same', 'active', '') }" id="sameCards">
                                                            <div class="row">
                                                                <apex:outputPanel id="choose-category" layout="block" styleClass="choose-category">
                                                                    <div class="col-lg-12">
                                                                        <apex:outputPanel layout="block" id="categories" styleClass="categories">
                                                                            <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                                    {! IF(numberOfCards = 1, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['SECTION NAME SINGULAR'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['SECTION NAME PLURAL'].Value__c) }
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel styleClass="b-desc" style="margin: 10px 0 20px 30px" layout="block">
                                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['REMARK'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        <div class="category-list">
                                                                            <div class="col-lg-12">
                                                                                <table>
                                                                                    <tr>
                                                                                        <td>
                                                                                            <script type="text/javascript">
                                                                                                sameCardsArray = new Array();
                                                                                                for (var i = 1; i <= {! numberOfCards }; i++) {
                                                                                                    sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                                                                                }
                                                                                            </script>
                                                                                            <div class="radio radio-red {! IF(sameCardsMap[1].categoryCard = 'All vehicle related product', 'selected', '') }" style="padding-left: 11px;">
                                                                                                <div class="category">
                                                                                                    <apex:commandLink action="{! calculateFeesAndCosts }"
                                                                                                        onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                                                        styleClass="category-link {! IF(sameCardsMap[1].categoryCard == 'All vehicle related product','active','') }"
                                                                                                        reRender="feescosts-block, choose-category"
                                                                                                        status="splashStatus"
                                                                                                        onclick="analytics_onClickRadioSendUI('chosenProd_Fahrzeugbezogene', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');">
                                                                                                        <apex:param value="All vehicle related product" name="cardType" assignto="{! sameCardsMap[1].categoryCard }"/>
                                                                                                        {! IF(stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c = 'Voertuig gerelateerde producten', 'Voertuig gerela-teerde producten', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c) }
                                                                                                        <span class="i-helper inline-block" style="margin: 0;" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                              data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                    </apex:commandLink>
                                                                                                    <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                        <ul class="category-items">
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 1'].Value__c }</apex:outputPanel></li>
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 2'].Value__c }</apex:outputPanel></li>
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 3'].Value__c }</apex:outputPanel></li>
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 4'].Value__c }</apex:outputPanel></li>
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 5'].Value__c }</apex:outputPanel></li>
                                                                                                        </ul>
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td>
                                                                                            <div class="radio radio-red {! IF(sameCardsMap[1].categoryCard = 'All fuel types', 'selected', '') }" style="padding-left: 14px;">
                                                                                                <div class="category">
                                                                                                    <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c }"
                                                                                                        action="{! calculateFeesAndCosts }"
                                                                                                        onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                                                        onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffAlleArten', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                                        styleClass="category-link {! IF(sameCardsMap[1].categoryCard == 'All fuel types','active','') }"
                                                                                                        reRender="feescosts-block, choose-category" status="splashStatus">
                                                                                                        <apex:param value="All fuel types" name="cardType" assignto="{! sameCardsMap[1].categoryCard }"/>
                                                                                                        <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                              data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                    </apex:commandLink>
                                                                                                    <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                        <ul class="category-items">
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 1'].Value__c }</apex:outputPanel></li>
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 2'].Value__c }</apex:outputPanel></li>
                                                                                                        </ul>
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td>
                                                                                            <div class="radio radio-red {! IF(sameCardsMap[1].categoryCard = 'Diesel', 'selected', '') }" style="padding-left: 14px;">
                                                                                                <div class="category">
                                                                                                    <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c }"
                                                                                                        action="{! calculateFeesAndCosts }"
                                                                                                        onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                                                        onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffDiesel', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                                        styleClass="category-link {! IF(sameCardsMap[1].categoryCard == 'Diesel','active','') }"
                                                                                                                      reRender="feescosts-block, choose-category" status="splashStatus">
                                                                                                        <apex:param value="Diesel" name="cardType" assignto="{! sameCardsMap[1].categoryCard }"/>
                                                                                                    </apex:commandLink>
                                                                                                    <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                        <ul class="category-items">
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 1'].Value__c }</apex:outputPanel></li>
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 2'].Value__c }</apex:outputPanel></li>
                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 3'].Value__c }</apex:outputPanel></li>
                                                                                                        </ul>
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                                <apex:actionFunction name="setSameCardsType" onComplete="onPageRender();" reRender="feescosts-block" status="splashStatus">
                                                                                    <apex:param value="" name="cardType" assignto="{! cardType }"/>
                                                                                </apex:actionfunction>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="card-services">
                                                                    <div class="col-lg-12">
                                                                        <apex:outputPanel layout="block">
                                                                            <apex:outputPanel id="pump-samecards-header" styleClass="b-row-header" layout="block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['SAME CARDS SECTION NAME PART 1'].Value__c } {! numberOfCards } {! IF(numberOfCards = 1, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['SAME CARDS SECTION NAME SINGULAR PART 2'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['SAME CARDS SECTION NAME PLURAL PART 2'].Value__c) }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="b-switch-block">
                                                                        <div class="col-lg-2">
                                                                            <div class="onoffswitch outside" id="outsideSwitch">
                                                                                <apex:inputCheckbox value="{! sameCardsMap[1].pumpOutsideCountry }"
                                                                                    styleClass="onoffswitch-checkbox" id="switchPumpOutside" onchange="recalculateFeesCosts()"
                                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), 'tankenImAusland', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"/>
                                                                                <apex:outputLabel styleClass="onoffswitch-label" for="switchPumpOutside">
                                                                                    <span class="onoffswitch-inner"></span>
                                                                                    <span class="onoffswitch-switch"></span>
                                                                                </apex:outputLabel>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-10">
                                                                            <div class="switch-info">
                                                                                <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['LABEL'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                     data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                                <apex:outputPanel layout="block" styleClass="s-desc">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 1'].Value__c }
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="s-add">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 2'].Value__c }
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="b-switch-block">
                                                                        <div class="col-lg-2">
                                                                            <div class="onoffswitch partner" id="partnerSwitch">
                                                                                <apex:inputCheckbox value="{! sameCardsMap[1].pumpAtPartners }"
                                                                                    styleClass="onoffswitch-checkbox" id="switchPumpPartners" onchange="recalculateFeesCosts()"
                                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), 'tankenShellPartnerstationen', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"/>
                                                                                <apex:outputLabel styleClass="onoffswitch-label" for="switchPumpPartners">
                                                                                    <span class="onoffswitch-inner"></span>
                                                                                    <span class="onoffswitch-switch"></span>
                                                                                </apex:outputLabel>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-10">
                                                                            <div class="switch-info">
                                                                                <apex:outputPanel layout="block" styleClass="s-header inline-block">{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['LABEL'].Value__c }</apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="s-desc">{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['REMARK 1'].Value__c }</apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="s-add">{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['REMARK 2'].Value__c }</apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{! activeCardConfigTab = 'diff' }">
                                                        <div class="tab-panel {! IF(activeCardConfigTab = 'diff', 'active', '') }" id="diffCards">
                                                            <div class="row">
                                                                <apex:outputPanel id="diff-category" layout="block" styleClass="diff-cards-category">
                                                                    <div class="col-lg-12">
                                                                        <apex:outputPanel layout="block" styleClass="cards-list ym-hide-content" id="diffCardsList">
                                                                            <script type="text/javascript">
                                                                                diffCardsArray = new Array();
                                                                            </script>
                                                                            <apex:variable var="index" value="{!1}"/>
                                                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                                                <script type="text/javascript">
                                                                                    diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                                                                </script>
                                                                                <div class="card-item">
                                                                                    <apex:outputPanel layout="block" styleClass="b-block-header inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['CARD #']['HEADING'].Value__c }&nbsp;{! index }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="delete" rendered="{! numberOfDiffCards != 1 }">
                                                                                        <apex:commandLink action="{! removeCard }"
                                                                                            oncomplete="showCardsOrderNavigationTabs(); onPageRender();"
                                                                                            reRender="cards-config, counter, feescosts-block, messageBlock, cards-exception"
                                                                                            status="splashStatus"
                                                                                            onclick="analytics_onClickButtonSendUI('click','button: cardsConfigTabs_separated_del', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');">
                                                                                            <apex:param name="cardIndex" value="{! index }"/>
                                                                                        </apex:commandLink>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel rendered="{! diffCardsMap[cardIndx].cardIsConfigurated = true }">
                                                                                        <apex:outputPanel styleClass="edit">
                                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                            <apex:commandLink action="{! editCardConfiguration }"
                                                                                                onComplete="onPageRender();" styleClass="font-11"
                                                                                                value="{! stepPagesMap['CARD CONFIGURATION'].elements['EDIT CONFIG']['VALUE'].Value__c }"
                                                                                                reRender="diffCardsList, messageBlock"
                                                                                                status="splashStatus"
                                                                                                onclick="analytics_onClickButtonSendUI('click','button: cardsConfigTabs_separated_change', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');">
                                                                                                <apex:param name="cardIndex" value="{! index }"/>
                                                                                            </apex:commandLink>
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="b-desc-done">
                                                                                            {! IF(diffCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(diffCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(diffCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, ''))) }{!IF(diffCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(diffCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel rendered="{! cardIndx != numberOfCards }">
                                                                                            <div class="b-card-splitter"></div>
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>

                                                                                    <apex:outputPanel rendered="{! diffCardsMap[cardIndx].cardIsConfigurated = false }">
                                                                                        <apex:outputPanel layout="block">
                                                                                            <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['SECTION NAME SINGULAR'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel styleClass="b-desc" style="margin: 10px 0 20px 30px" layout="block">
                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE TYPE SECTION']['REMARK'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                        <div class="category-list">
                                                                                            <div class="col-lg-12">
                                                                                                <table>
                                                                                                    <tr>
                                                                                                        <td>
                                                                                                            <div class="radio radio-red {! IF(diffCardsMap[cardIndx].categoryCard = 'All vehicle related product', 'selected', '') }" style="padding-left: 11px;">
                                                                                                                <div class="category">
                                                                                                                    <apex:commandLink value="{! IF(stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c = 'Voertuig gerelateerde producten', 'Voertuig gerela-teerde producten', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c) }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" onclick="analytics_onClickRadioSendUI('chosenProd_Fahrzeugbezogene', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" styleClass="category-link {! IF(diffCardsMap[cardIndx].categoryCard == 'All vehicle related product','active','') }" reRender="feescosts-block, diff-category" status="splashStatus">
                                                                                                                        <apex:param value="All vehicle related product" name="cardType" assignto="{! diffCardsMap[cardIndx].categoryCard }"/>
                                                                                                                        <span class="i-helper inline-block" style="margin: 0;" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                                              data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                                    </apex:commandLink>
                                                                                                                    <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                                        <ul class="category-items">
                                                                                                                            <li><apex:outputPanel layout="block">
                                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 1'].Value__c }</apex:outputPanel></li>
                                                                                                                            <li><apex:outputPanel layout="block">
                                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 2'].Value__c }</apex:outputPanel></li>
                                                                                                                            <li><apex:outputPanel layout="block">
                                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 3'].Value__c }</apex:outputPanel></li>
                                                                                                                            <li><apex:outputPanel layout="block">
                                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 4'].Value__c }</apex:outputPanel></li>
                                                                                                                            <li><apex:outputPanel layout="block">
                                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 5'].Value__c }</apex:outputPanel></li>
                                                                                                                        </ul>
                                                                                                                    </apex:outputPanel>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <div class="radio radio-red {! IF(diffCardsMap[cardIndx].categoryCard = 'All fuel types', 'selected', '') }" style="padding-left: 14px;">
                                                                                                                <div class="category">
                                                                                                                    <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" styleClass="category-link {! IF(diffCardsMap[cardIndx].categoryCard == 'All fuel types','active','') }" onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffAlleArten', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" reRender="feescosts-block, diff-category" status="splashStatus">
                                                                                                                        <apex:param value="All fuel types" name="cardType" assignto="{! diffCardsMap[cardIndx].categoryCard }"/>
                                                                                                                        <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                                              data-container="body" data-html="true" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                                    </apex:commandLink>
                                                                                                                    <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                                        <ul class="category-items">
                                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 1'].Value__c }</apex:outputPanel></li>
                                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 2'].Value__c }</apex:outputPanel></li>
                                                                                                                        </ul>
                                                                                                                    </apex:outputPanel>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <div class="radio radio-red {! IF(diffCardsMap[cardIndx].categoryCard = 'Diesel', 'selected', '') }" style="padding-left: 14px;">
                                                                                                                <div class="category">
                                                                                                                    <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c }" action="{! calculateFeesAndCosts }" onComplete="setEvents_cardsOrder(); onPageRender();" styleClass="category-link {! IF(diffCardsMap[cardIndx].categoryCard == 'Diesel','active','') }"
                                                                                                                        reRender="feescosts-block, diff-category" status="splashStatus"
                                                                                                                        onclick="analytics_onClickRadioSendUI('chosenProd_KraftstoffDiesel', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');">
                                                                                                                        <apex:param value="Diesel" name="cardType" assignto="{! diffCardsMap[cardIndx].categoryCard }"/>
                                                                                                                    </apex:commandLink>
                                                                                                                    <apex:outputPanel layout="block" styleClass="category-desc">
                                                                                                                        <ul class="category-items">
                                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 1'].Value__c }</apex:outputPanel></li>
                                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 2'].Value__c }</apex:outputPanel></li>
                                                                                                                            <li><apex:outputPanel layout="block">{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 3'].Value__c }</apex:outputPanel></li>
                                                                                                                        </ul>
                                                                                                                    </apex:outputPanel>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </table>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row">
                                                                                            <apex:outputPanel layout="block" styleClass="card-services">
                                                                                                <div class="col-lg-12">
                                                                                                    <apex:outputPanel layout="block">
                                                                                                        <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['CHOOSE PUMP TYPE SECTION']['DIFF CARDS SECTION NAME'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </apex:outputPanel>
                                                                                        </div>
                                                                                        <div class="row">
                                                                                            <div class="col-lg-12">
                                                                                                <div class="b-switch-block">
                                                                                                    <div class="col-lg-2">
                                                                                                        <div class="onoffswitch outside">
                                                                                                            <apex:inputCheckbox value="{! diffCardsMap[cardIndx].pumpOutsideCountry }" styleClass="onoffswitch-checkbox" id="switchPumpOutside" onchange="recalculateFeesCosts()" onclick="analytics_onClickCheckboxSendUI($j(this), 'tankenImAusland', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"/>
                                                                                                            <apex:outputLabel styleClass="onoffswitch-label" for="switchPumpOutside">
                                                                                                                <span class="onoffswitch-inner"></span>
                                                                                                                <span class="onoffswitch-switch"></span>
                                                                                                            </apex:outputLabel>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="col-lg-10">
                                                                                                        <div class="switch-info">
                                                                                                            <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['LABEL'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                            <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                                                 data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                                                            <apex:outputPanel layout="block" styleClass="s-desc">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 1'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                            <apex:outputPanel layout="block" styleClass="s-add">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK 2'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="b-switch-block">
                                                                                                    <div class="col-lg-2">
                                                                                                        <div class="onoffswitch">
                                                                                                            <apex:inputCheckbox value="{! diffCardsMap[cardIndx].pumpAtPartners }" styleClass="onoffswitch-checkbox" id="switchPumpPartners" onchange="recalculateFeesCosts()" onclick="analytics_onClickCheckboxSendUI($j(this), 'tankenShellPartnerstationen', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"/>
                                                                                                            <apex:outputLabel styleClass="onoffswitch-label" for="switchPumpPartners">
                                                                                                                <span class="onoffswitch-inner"></span>
                                                                                                                <span class="onoffswitch-switch"></span>
                                                                                                            </apex:outputLabel>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="col-lg-10">
                                                                                                        <div class="switch-info">
                                                                                                            <apex:outputPanel layout="block" styleClass="s-header inline-block">{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['LABEL'].Value__c }</apex:outputPanel>
                                                                                                            <apex:outputPanel layout="block" styleClass="s-desc">{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['REMARK 1'].Value__c }</apex:outputPanel>
                                                                                                            <apex:outputPanel layout="block" styleClass="s-add">{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['REMARK 2'].Value__c }</apex:outputPanel>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row">
                                                                                            <div class="buttons center-block" style="width: 88.5%">
                                                                                                <div class="col-lg-3 pull-right">
                                                                                                    <apex:commandLink id="save-card-id" value="{! stepPagesMap['CARD CONFIGURATION'].elements['DIFF CARDS TAB']['SAVE CARD BUTTON'].Value__c }" 
                                                                                                                      action="{! addCard }" 
                                                                                                                      onclick="analytics_onClickButtonSendUI('click','button: cardsConfigTabs_separated_save', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');" 
                                                                                                                      onComplete="onPageRender();" 
                                                                                                                      reRender="diffCardsList, feescosts-block, onlineChatBlock" 
                                                                                                                      styleClass="btn btn-red save-card" 
                                                                                                                      style="margin-top: 15px" 
                                                                                                                      status="splashStatus">
                                                                                                        <apex:param name="cardIndex" value="{! index }"/>
                                                                                                    </apex:commandLink>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                                <apex:variable var="index" value="{! index + 1 }"/>
                                                                            </apex:repeat>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                        </apex:outputPanel>

                                        <!-- BLUE BLOCK -->
                                        <apex:outputPanel id="feescosts-block">
                                            <div class="wrapper blue-block">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <apex:outputPanel layout="block" styleClass="b-block-header">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['FEES AND COSTS']['HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="fees-and-costs">
                                                        <div class="col-lg-6">
                                                            <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                                <div class="fee1">
                                                                    <div class="item" style="{! costItem.style }">
                                                                        <apex:outputPanel layout="block" styleClass="f-item inline-block" style="color:#616566; {! IF(stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c = 'Miesiczna opata za zarzdzanie kontem', 'height: 35px;line-height: 18px; width: 172px;', IF(stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c = 'Opata serwisowa za przelew bankowy', 'height: 35px;line-height: 18px; width: 152px;', '')) }">
                                                                            <apex:outputText value="{! IF(stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c="Miesiczna opata za zarzdzanie kontem",'Miesiczna opata za<br/> zarzdzanie kontem',stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c) }" escape="false"/>
                                                                            <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="f-val inline-block" style="{! IF(OR(stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c = 'Miesiczna opata za zarzdzanie kontem', stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c = 'Opata serwisowa za przelew bankowy'),'margin-top: 11px;','') }">
                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div style="margin: 3px 0 0 30px">
                                                                        <apex:outputPanel layout="block" styleClass="f-desc" rendered="{! costItem.contentName = 'MONTHLY ACCOUNT MANAGEMENT FEE HEADING' }">
                                                                            {! IF(OR(AND(activeCardConfigTab = 'same', numberOfCards = 1), AND(activeCardConfigTab = 'diff', numberOfDiffCards = 1)), stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-PER CARD-'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-PER CARDS-'].Value__c) } {! IF(activeCardConfigTab = 'same', numberOfCards, numberOfDiffCards ) } {! IF(OR(AND(activeCardConfigTab = 'same', numberOfCards = 1), AND(activeCardConfigTab = 'diff', numberOfDiffCards = 1)), stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARD-'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARDS-'].Value__c) }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </apex:repeat>
                                                            <!-- <apex:repeat value="{! costsColumnsMap['DISCOUNT'] }" var="costItem">
                                                                <div class="col-lg-12">
                                                                    <div class="you-save" style="height: 135px; margin: 25px 0 10px 0; width: 110%;">
                                                                        <apex:outputPanel styleClass="b-row-header" layout="block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['HEADING'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="b-row-header" layout="block" style="padding-top: 0px;">
                                                                            {! costItem.discountValue } {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['CURRENCY'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="desc">{! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['MESSAGE'].Value__c }</apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="desc">{! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['ENDNOTE'].Value__c }</apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </apex:repeat> -->
                                                            <div class="collapse-block">
                                                                <div class="link" data-toggle="collapse" data-target="#otherFee">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES HEADING'].Value__c }
                                                                    <div class="expander expend-detail inline-block" ></div>
                                                                </div>
                                                                <div class="row collapse" id="otherFee">
                                                                    <div class="fee3">
                                                                        <apex:outputPanel layout="block" styleClass="font-12">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES SUBHEADING'].Value__c }                                                                            
                                                                        </apex:outputPanel>
                                                                        <apex:repeat value="{! costsColumnsMap['3'] }" var="costItem">
                                                                            <div class="item" style="{! IF(stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c == 'Spniona patno faktury','height: 40px;','') }">
                                                                                <apex:outputPanel layout="block" styleClass="f-item inline-block" style="{! IF(stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c == 'Spniona patno faktury','line-height: 20px; height: 39px;','') }">
                                                                                <apex:outputText value="{! IF(stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c == 'Spniona patno faktury','Spniona patno <br/>faktury',stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c) }" 
                                                                                    escape="false"/>                                                                                
                                                                                    <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                        <div class="item-helper">
                                                                                            <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                                        </div>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="f-val inline-block" style="{! IF(stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c == 'Spniona patno faktury','margin-top: 19px;','') }">
                                                                                {! costItem.costValue } {! costItem.costTariff }
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </apex:repeat>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="fee2">
                                                                <apex:outputPanel layout="block" style="display: inline-block;">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING'].Value__c }
                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                </apex:outputPanel>
                                                                <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                    <div class="item">
                                                                        <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }                                                                            
                                                                            <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                <div class="item-helper">
                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </apex:repeat>
                                                            </div>
                                                            <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                                <div class="fee2" style="margin-top: 28px;">
                                                                    <apex:outputPanel layout="block" style="display: inline-block;">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING'].Value__c }
                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                    </apex:outputPanel>
                                                                    <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                        <div class="item">
                                                                            <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }
                                                                                <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                    <div class="item-helper">
                                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right">?</div>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                            {! costItem.costValue } {! costItem.costTariff }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </apex:repeat>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="col-lg-6 pull-right">
                                                            <apex:outputPanel layout="block" styleClass="vat-not-include">
                                                               {! stepPagesMap['CARD CONFIGURATION'].elements['VAT IS NOT INCLUDED']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="b-splitter"></div>
                                                <div class="row">
                                                    <div class="buttons center-block" style="width: 91%">
                                                        <div class="col-lg-3 pull-left">
                                                            <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                                                onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                action="{! editCreditLimit }"
                                                                                onComplete="toViewport('top-heading-viewport'); setEvents_creditLimit(); onPageRender();"
                                                                                immediate="true"
                                                                                styleClass="btn btn-gray back-button-cls"
                                                                                style="width: 100%"
                                                                                reRender="stepList, orderDetails, formBlock, messageBlock, feescosts-block, onlineChatBlock"
                                                                                status="splashStatus"/>
                                                        </div>
                                                        <div class="col-lg-3 pull-right">
                                                            <!-- UNCOMMENT LATER -->
                                                            <!-- <apex:commandButton id="continue-button"
                                                                                value="{! stepPagesMap['CARD CONFIGURATION'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" 
                                                                                action="{! goToSpecialOffers }"
                                                                                onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                onComplete="toViewport('top-heading-viewport'); onPageRender(); setCollapseBlockEvent(); analytics_CardsContinue();"
                                                                                disabled="{! continueButtonIsDisabled }"
                                                                                reRender="stepList, messageBlock, formBlock, info-block, orderDetails, onlineChatBlock"
                                                                                styleClass="btn btn-red continue btnContinueToOffer"
                                                                                status="splashStatus"/> -->

                                                            <!-- TEMP BLOCK DUE TO "SPECIAL OFFER" STEP REMOVAL (MUST BE REMOVED) -->
                                                            <apex:commandButton id="continue-button"
                                                                                value="{! stepPagesMap['CARD CONFIGURATION'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" 
                                                                                action="{! goToSpecialOffers }"
                                                                                onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_05_Tankkarte_Step_5_Config_CardsConfiguration');"
                                                                                onComplete="toViewport('top-heading-viewport'); setEvents_cardsTechnicalParams(); onPageRender(); setCollapseBlockEvent(); analytics_CardsContinue();"
                                                                                disabled="{! continueButtonIsDisabled }"
                                                                                reRender="stepList, messageBlock, formBlock, info-block, orderDetails, onlineChatBlock"
                                                                                styleClass="btn btn-red continue btnContinueToOffer"
                                                                                status="splashStatus"/>
                                                            <script type="text/javascript">
                                                                $j('.btnContinueToOffer').on( "click", function() {
                                                                    if ('{! activeCardConfigTab }' == 'diff') {
                                                                        //analytics_CardsConfigOnFinish(diffCardsArray);
                                                                        isOffersPage = true;
                                                                    } else
                                                                    if ('{! activeCardConfigTab }' == 'same') {
                                                                        //analytics_CardsConfigOnFinish(sameCardsArray);
                                                                        isOffersPage = true;
                                                                    }
                                                                });
                                                            </script>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <script type="text/javascript">
                                            analytics_CardsConfigOnLoad(paymentMethodAnalytics, isDepositAnalytics, '{! opportunity.E2E_Form_of_Business__c }');
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP SPECIAL OFFERS -->
                                    <!-- <apex:outputPanel layout="block" id="specialOffers" styleClass="special-offers" rendered="{! AND(activeStep = 2, activeSubStep = 'Choosing offer') }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Choosing offer';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }

                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                            }

                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                            </apex:repeat>
                                        </script>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </div>
                                                    <apex:outputPanel rendered="{! nonHomeOffersList.size > 1 }" styleclass="b-desc">
                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <apex:repeat value="{! nonHomeOffersList }" var="nonHomeOffer">
                                                <apex:outputPanel layout="block" styleClass="offer" id="allShellDiscount">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="b-row-header" style="margin-right: 60px">
                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['OFFER NAME'].Value__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="special-desc inline-block">
                                                                <div>
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['OFFER DESCRIPTION'].Value__c }
                                                                </div>
                                                                <apex:outputPanel layout="block" styleClass="fee">
                                                                    <apex:outputPanel style="font-weight: 600">
                                                                        {! nonHomeOffer.offerDiscount }
                                                                    </apex:outputPanel>
                                                                        {! nonHomeOffer.offerDiscountRatePer } {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DISCOUNT LOCATION'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="offer-label inline-block">
                                                                <apex:outputPanel layout="block" styleClass="{! IF(OR(nonHomeOffer.offerRemoveBtnStatus = 'show-enabled', nonHomeOffersList.size = 1), 'arrow-right selected inline-block', 'arrow-right inline-block') }"/>
                                                                <apex:outputPanel layout="block" styleClass="{! IF(OR(nonHomeOffer.offerRemoveBtnStatus = 'show-enabled', nonHomeOffersList.size = 1), 'price-right selected inline-block', 'price-right inline-block') }">
                                                                    <apex:outputPanel layout="block" styleClass="f-box">
                                                                        {! nonHomeOffer.offerDiscount }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="f-box-desc">
                                                                        {! nonHomeOffer.offerDiscountRatePer }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="collapse-block" style="{! IF(AND(nonHomeOffer.offerSelectionBtnStatus != 'show-enabled', nonHomeOffer.offerSelectionBtnStatus != 'show-disabled'), 'margin-bottom: 20px;','') }">
                                                                <div class="link" style="margin: 5px 0 0 30px" data-toggle="collapse" data-target="#shellDiscount">
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DETAILS HEADING'].Value__c }
                                                                    <div class="expander expend-detail inline-block"/>
                                                                </div>
                                                                <div class="row collapse in" id="shellDiscount">
                                                                    <div class="detail-list">
                                                                        <div>
                                                                            <div class="l-detail inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DISCOUNT'].Value__c }
                                                                            </div>
                                                                            <div class="inline-block">
                                                                                {! nonHomeOffer.offerDiscount } {! nonHomeOffer.offerDiscountRatePer }
                                                                            </div>
                                                                        </div>
                                                                        <div>
                                                                            <div class="l-detail inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['TIME'].Value__c }
                                                                            </div>
                                                                            <div class="inline-block">
                                                                                {! nonHomeOffer.offerTime }
                                                                            </div>
                                                                        </div>
                                                                        <apex:outputPanel layout="block" rendered="{! OR(nonHomeOffer.offerIsBased = 'Volume', nonHomeOffer.offerIsBased = 'Fuel + Volume') }">
                                                                            <div class="l-detail inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['VOLUME'].Value__c }
                                                                            </div>
                                                                            <div class="inline-block">
                                                                                {! nonHomeOffer.offerVolume }
                                                                            </div>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" rendered="{! OR(nonHomeOffer.offerIsBased = 'Fuel', nonHomeOffer.offerIsBased = 'Fuel + Volume') }">
                                                                            <div class="l-detail inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['FUEL TYPE'].Value__c }
                                                                            </div>
                                                                            <div class="inline-block">
                                                                                {! IF(AND(nonHomeOffer.offerFuelType != null, nonHomeOffer.offerFuelType != ''), nonHomeOffer.offerFuelType, stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['-UNLIMITED-'].Value__c) }
                                                                            </div>
                                                                        </apex:outputPanel>
                                                                        <div>
                                                                            <div class="l-detail inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['GEOGRAPHY'].Value__c }
                                                                            </div>
                                                                            <div class="inline-block">
                                                                                {! nonHomeOffer.offerCountry }
                                                                            </div>
                                                                        </div>
                                                                        <div>
                                                                            <div class="l-detail inline-block">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['STATION'].Value__c }
                                                                            </div>
                                                                            <div class="inline-block">
                                                                                {! nonHomeOffer.offerStation }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <apex:outputPanel rendered="{! OR(nonHomeOffer.offerSelectionBtnStatus = 'show-enabled', nonHomeOffer.offerSelectionBtnStatus = 'show-disabled') }">
                                                        <div class="row">
                                                            <div class="save-btn">
                                                                <div class="col-lg-12">
                                                                    <div class="offer-buttons center-block">
                                                                        <apex:commandButton action="{! selectOffer }"
                                                                                value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['CONFIRM OFFER BUTTON'].Value__c }"
                                                                                disabled="{! nonHomeOffer.offerSelectionBtnStatus = 'show-disabled' }"
                                                                                styleClass="btn btn-red"
                                                                                onclick="analytics_onClickButtonSendUI('click','button: nonHomeOffer_chosen', 'UI_06_Tankkarte_Step_6_Config_Offer');"
                                                                                reRender="specialOffers"
                                                                                alt="{! nonHomeOffer.productName }"
                                                                                status="splashStatus"
                                                                                oncomplete="selectedOfferAnalytics = this.alt;">
                                                                                <apex:param name="offerSelectionBtnStatus" value="hide" assignTo="{! nonHomeOffer.offerSelectionBtnStatus }"/>
                                                                                <apex:param name="offerRemoveBtnStatus" value="show-enabled" assignTo="{! nonHomeOffer.offerRemoveBtnStatus }"/>
                                                                                <apex:param name="offerName" value="{! nonHomeOffer.productName }"/>
                                                                        </apex:commandButton>
                                                                        <apex:outputPanel styleClass="info font-14" style="margin-left: 15px;" rendered="{! nonHomeOffer.offerSelectionBtnStatus = 'show-disabled' }">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['ALREADY SELECTED OFFER MESSAGE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{! nonHomeOffer.offerRemoveBtnStatus = 'show-enabled' }">
                                                        <div class="row">
                                                            <div class="remove-btn">
                                                                <div class="col-lg-6">
                                                                    <div class="offer-buttons center-block inline-block pull-left" style="margin-top: 25px">
                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['REMOVE OFFER BUTTON'].Value__c }"
                                                                                styleClass="btn btn-gray"
                                                                                action="{! removeOffer }"
                                                                                onclick="analytics_onClickButtonSendUI('click','button: nonHomeOffer_cancelled', 'UI_06_Tankkarte_Step_6_Config_Offer');"
                                                                                reRender="specialOffers" status="splashStatus">
                                                                                <apex:param name="offerSelectionBtnStatus" value="show-enabled" assignTo="{! nonHomeOffer.offerSelectionBtnStatus }"/>
                                                                                <apex:param name="offerRemoveBtnStatus" value="hide" assignTo="{! nonHomeOffer.offerRemoveBtnStatus }"/>
                                                                        </apex:commandLink>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </apex:repeat>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3 pull-left">
                                                        <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                                action="{! backToCardConfiguration }"
                                                                oncomplete="toViewport('top-heading-viewport'); showCardsOrderNavigationTabs(); setEvents_cardsOrder(); onPageRender();"
                                                                styleClass="btn btn-gray back-button-cls"
                                                                onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_06_Tankkarte_Step_6_Config_Offer');"
                                                                style="width: 100%"
                                                                reRender="formBlock, orderDetails, onlineChatBlock"
                                                                status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }"
                                                                action="{! goToTechnicalParameters }"
                                                                onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_06_Tankkarte_Step_6_Config_Offer'); isTechnicalParameters = true;"
                                                                oncomplete="toViewport('top-heading-viewport'); setEvents_cardsTechnicalParams(); onPageRender();"
                                                                styleClass="btn btn-red continue btnContinueToTechParams"
                                                                disabled="{! continueButtonIsDisabled }"
                                                                reRender="stepList, formBlock, orderDetails, onlineChatBlock"
                                                                status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-5 pull-right">
                                                        <apex:outputPanel layout="block" styleClass="button-info font-12" rendered="{! AND(continueButtonIsDisabled, nonHomeOffersList.size != 1 ) }">
                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['REMARK'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            // $j('.btnContinueToTechParams').on( "click", function() {
                                            //     analytics_ConfigOfferOnNext(selectedOfferAnalytics);
                                            // });
                                            if (isOffersPage == undefined) {
                                                isOffersPage = true;
                                            }
                                            if ('{! activeCardConfigTab }' == 'diff' && isOffersPage) {
                                                analytics_ConfigOfferOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                                isOffersPage = false;
                                            } else
                                            if ('{! activeCardConfigTab }' == 'same' && isOffersPage) {
                                                analytics_ConfigOfferOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                                isOffersPage = false;
                                            }
                                        </script>
                                    </apex:outputPanel> -->

                                    <!-- STEP TECHNICAL PARAMS-->
                                    <apex:outputPanel layout="block" id="cardTechParams" styleClass="cards-tech-parameters" rendered="{! AND(activeStep = 2, activeSubStep = 'Technical parameters') }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Technical parameters';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }

                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{! sameCardsMap[1].categoryCard}','quantity': 1 });
                                            }

                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1 });
                                            </apex:repeat>

                                            function changeTypeEmbossing(type, index) {
                                                var finalClass = '.inputHidden' + index + ' input[type="hidden"]';
                                                if ($j(finalClass).val() != type) {
                                                    $j(finalClass).val(type);

                                                    $j('#drv-name' + index).toggleClass('selected');
                                                    $j('#car-number' + index).toggleClass('selected');

                                                    $j('.invalid-feedback-driver').hide();
                                                    $j('.invalid-feedback-car-number').hide();
                                                    $j('.driverNameOrCarNumberInputValue').removeClass('error');
                                                    $j('#drv-name' + index).parent().attr('class',type);
                                                }
                                                var content = $j('.step-content');
                                                var cardTechParamsBlock = content.find('.cards-tech-parameters');
                                                var cardTechParamsItems = cardTechParamsBlock.find('.cards-list .card-item');

                                                var continueButton = cardTechParamsBlock.find('.btn-red.continue');

                                                var isCardOwnerValid = false;
                                                var isCompanyValid = false;

                                                var selectedCardOwnerType = cardTechParamsItems.closest('.card-item').find('.card-owner-type').find('[id$="selectDriverNameOrCarNumber"]').attr('class');
                                                var cardOwnerInput = cardTechParamsBlock.find('.cards-list .card-item .card-param-value input');
                                                if(cardOwnerInput.val() != '' && cardOwnerInput.val() != undefined){
                                                    if(!(selectedCardOwnerType == undefined)){
                                                        if (type == 'driver-name') {
                                                            isCardOwnerValid = validateDriverName(cardOwnerInput, new RegExp(regs.embossingLetters));
                                                        } else if(selectedCardOwnerType.toLowerCase() === 'car-number') {
                                                            isCardOwnerValid = validateCarNumber(cardOwnerInput, new RegExp(regs.carNumberFormat_DE));
                                                        }
                                                    }
                                                }
                                            }

                                            function changeTypeOfCar(typeofcar, index) {
                                                var finalClass = '.inputHiddenTypeOfCar' + index + ' input[type="hidden"]';
                                                if ($j(finalClass).val() != typeofcar) {
                                                    $j(finalClass).val(typeofcar);

                                                    $j('#pkw-type' + index).toggleClass('selected');
                                                    $j('#lkw-type' + index).toggleClass('selected');
                                                }
                                            }
                                        </script>
                                        <style>
                                            .onoffswitch-inner:before {
                                                content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON ON']['LABEL'].Value__c }";
                                                padding-left: 9px;
                                                background-color: #EE3A43;
                                                color: #FFFFFF;
                                                text-align: left;
                                            }
                                            .onoffswitch-inner:after {
                                                content: "{! stepPagesMap['CARD CONFIGURATION'].elements['BUTTON OFF']['LABEL'].Value__c }";
                                                padding-right: 9px;
                                                background-color: #EEEEEE;
                                                color: #505050;
                                                text-align: right;
                                            }
                                        </style>
                                        <div class="wrapper">
                                            <div class="cards-list">
                                                <apex:repeat value="{! finalCardsMap }" var="cardIndx">
                                                    <div class="card-item">
                                                        <apex:outputPanel rendered="{! finalCardsMap[cardIndx].displayTechnicalParamsBlock = false }">
                                                            <div class="row">
                                                                <div class="{! IF(finalCardsMap[cardIndx].techParamsIsConfigurated = true, 'col-lg-6', 'col-lg-12') }">
                                                                    <apex:outputPanel >
                                                                        <apex:outputPanel styleClass="b-block-header inline-block" layout="block">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['CARD #']['HEADING'].Value__c } {! cardIndx }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="edit">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                            <apex:commandLink action="{! editTechnicalParameters }" onComplete="setEvents_cardsTechnicalParams(); onPageRender(); checkCardTechParams();" onclick="analytics_onClickButtonSendUI('click','button: card_change', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');"  styleClass="font-11" reRender="cardTechParams, orderDetails, messageBlock, onlineChatBlock" status="splashStatus">
                                                                            {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['EDIT BUTTON']['BUTTON NAME'].Value__c }
                                                                                <apex:param name="cardindex" value="{! cardIndx }"/>
                                                                            </apex:commandLink>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel styleClass="b-desc-done" layout="block" style="width: 285px;">
                                                                    {! IF(finalCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, ''))) }{!IF(finalCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(finalCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}<br/><br/>
                                                                    {! IF(finalCardsMap[cardIndx].selectedTypeOfCar = 'PKW', stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['PKW TYPE TEASER'].Value__c + ',', stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['LKW TYPE TEASER'].Value__c + ',') }<br/>
                                                                    {! IF(finalCardsMap[cardIndx].needOdometerOptions = true, stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['AGREE ODOMETER TEASER'].Value__c, stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['DISAGREE ODOMETER TEASER'].Value__c) }
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <apex:outputPanel rendered="{! finalCardsMap[cardIndx].techParamsIsConfigurated = true }">
                                                                    <div class="col-lg-6">
                                                                        <div class="card-badge ym-hide-content {! IF(cardIndx > 1, 'additional-card','') }">
                                                                            <div class="card-badge-details">
                                                                                <div class="badge-card-company">
                                                                                    <apex:outputText value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['TYPE OF CARD']['VALUE'].Value__c }"/>
                                                                                </div>
                                                                                <div class="badge-card-number">
                                                                                    <apex:outputText value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['CARD NUMBER']['NUMBER'].Value__c }"/>
                                                                                </div>
                                                                                <div class="badge-customer-info">
                                                                                    <apex:outputText value="{! finalCardsMap[cardIndx].driverNameOrCarNumberInputValue }"/>
                                                                                </div>
                                                                                <div class="badge-company">
                                                                                    <apex:outputText value="{! finalCardsMap[cardIndx].companyNameInputValue }"/>
                                                                                </div>
                                                                                <div class="badge-emit-date">
                                                                                    <apex:outputText value="{! finalCardsMap[cardIndx].emitDate }"/>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{! finalCardsMap[cardIndx].displayTechnicalParamsBlock = true }">
                                                            <div class="card-item">
                                                                <div class="row">
                                                                    <div class="col-lg-12">
                                                                        <apex:outputPanel layout="block" styleClass="margin-top: -20px;">
                                                                            <apex:outputPanel layout="block" styleClass="b-block-header">{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['TECHNICAL PARAM HEADING']['HEADING'].Value__c }&nbsp;{! cardIndx }</apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="b-desc" style="margin: 10px 30px 20px 30px">
                                                                            {! IF(finalCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, ''))) }{!IF(finalCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(finalCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                                <apex:outputPanel rendered="{! LEN(account.Name) > 25 }">
                                                                    <div class="row">
                                                                        <div class="col-lg-12">
                                                                            <div class="b-row-header" style="margin-bottom: 15px;">
                                                                               {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['WHAT TO EMBOSS HEADING']['HEADING'].Value__c } {! cardIndx }{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['WHAT TO EMBOSS HEADING']['-?-'].Value__c }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <div class="row form-group">
                                                                    <apex:outputPanel id="cardCompanyName" layout="block" styleClass="ym-hide-content">
                                                                        <apex:outputPanel styleClass="card-param company-name-label" rendered="{! LEN(account.Name) > 25 }" layout="block">
                                                                            <div class="col-lg-4">
                                                                                <apex:outputPanel styleClass="f-label inline-block">
                                                                                    <apex:outputPanel layout="block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['LABEL 1'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['LABEL 2'].Value__c }
                                                                                        <span class="f-required" style="{! IF(finalCardsMap[cardIndx].displayCompanyNameField = true, 'display: inline-block; vertical-align: 0;','vertical-align: 0;') }">
                                                                                            {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                        </span>
                                                                                    </apex:outputPanel>                                                                                    
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <apex:outputPanel id="company-name-input">
                                                                                <div class="col-lg-7">
                                                                                    <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = true }">
                                                                                        <div class="company-name">
                                                                                            <div class="len-company-name font-11"></div>
                                                                                            <apex:inputText id="companyName" onblur="analytics_onBlurInputSendUI($j(this), 'companyName', 'UI_07_Tankkarte_Step_7_Config_CardsPerson')" onkeyup="sendErrorCardCompanyName();" value="{! finalCardsMap[cardIndx].companyNameInputValue }" styleClass="inline-block form-control required input ym-disable-keys" maxLength="25" style="width: 82%; text-transform: uppercase;"/>
                                                                                            <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-company-card-name" style="width: 82%"><div class="i-error">!</div>
                                                                                                    {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="font-12" style="margin-top: 4px; width: 82%">
                                                                                                    {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['COMPANY NAME'].elementItemsMap['REMARK'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <script>
                                                                                                function sendErrorCardCompanyName() {
                                                                                                    if ($j('.invalid-feedback-company-card-name').is(':visible')) {
                                                                                                        analytics_onErrorSendUI('option_CardCompanyNameNotFilled', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');
                                                                                                    }
                                                                                                }
                                                                                            </script>
                                                                                        </div>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = false}">
                                                                                        <apex:outputPanel layout="block" styleClass="company-name-static">{! finalCardsMap[cardIndx].companyNameInputValue }</apex:outputPanel>
                                                                                        <apex:outputPanel styleClass="edit">
                                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                            <apex:commandLink action="{! editCompanyName }" onclick="analytics_onClickButtonSendUI('click','button: cardCompany_change', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');" onComplete="setEvents_cardsTechnicalParams(); onPageRender();" styleClass="font-11" reRender="company-name-input, messageBlock" status="splashStatus">
                                                                                            {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['EDIT BUTTON']['BUTTON NAME'].Value__c }
                                                                                                <apex:param name="cardindex" value="{! cardIndx }"/>
                                                                                            </apex:commandLink>
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-lg-12">
                                                                        <apex:outputPanel layout="block">
                                                                            <apex:outputPanel styleClass="b-row-header" layout="block" style="{! IF(LEN(account.Name) <= 25, 'margin-top: 0', '') }">
                                                                                {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['WHAT CARD TYPE HEADING']['HEADING'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                                <div class="row form-group">
                                                                    <div class="card-param" style="margin-top: 15px">
                                                                        <div class="col-lg-4">
                                                                            <apex:outputLabel value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                                            <div class="i-helper inline-block"
                                                                                    data-content="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                    data-container="body" data-toggle="popover" data-html="true" data-placement="bottom">?</div>
                                                                        </div>
                                                                        <div class="col-lg-8">
                                                                            <div class="btn-group">
                                                                                <apex:outputPanel id="selectTypeOfCar" styleClass="selectTypeOfCar" style="display: inline-table;">
                                                                                    <div id="pkw-type{! cardIndx }" class="{! IF(finalCardsMap[cardIndx].selectedTypeOfCar = 'PKW', 'btn btn-select selected', 'btn btn-select') }" onclick="analytics_onClickButtonSendUI('click','button: auto_pkw', 'UI_07_Tankkarte_Step_7_Config_CardsPerson'); changeTypeOfCar('PKW', '{! cardIndx }');setEvents_cardsTechnicalParams();">{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['PKW BUTTON'].Value__c }
                                                                                    </div>
                                                                                    <div id="lkw-type{! cardIndx }" class="{! IF(finalCardsMap[cardIndx].selectedTypeOfCar = 'LKW', 'btn btn-select selected', 'btn btn-select') }" onclick="analytics_onClickButtonSendUI('click','button: auto_lkw', 'UI_07_Tankkarte_Step_7_Config_CardsPerson'); changeTypeOfCar('LKW', '{! cardIndx }');setEvents_cardsTechnicalParams();">{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['TYPE OF CAR'].elementItemsMap['LKW BUTTON'].Value__c }
                                                                                    </div>
                                                                                    <div class="inputHiddenTypeOfCar{! cardIndx }">
                                                                                        <apex:inputHidden value="{! finalCardsMap[cardIndx].selectedTypeOfCar }"/>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-lg-12">
                                                                        <div class="b-switch-block">
                                                                            <div class="col-lg-2">
                                                                                <div class="onoffswitch outside">
                                                                                    <apex:inputCheckbox value="{! finalCardsMap[cardIndx].needOdometerOptions }" onclick="analytics_onClickCheckboxSendUI($j(this), 'distanceOpt', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');" styleClass="onoffswitch-checkbox" id="switchOdometerOptions"/>
                                                                                    <apex:outputLabel styleClass="onoffswitch-label" for="switchOdometerOptions">
                                                                                        <span class="onoffswitch-inner"></span>
                                                                                        <span class="onoffswitch-switch"></span>
                                                                                    </apex:outputLabel>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-10">
                                                                                <div class="switch-info">
                                                                                    <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['LABEL'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['HELP'].Value__c }" data-trigger="hover"
                                                                                         data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                                    <apex:outputPanel layout="block" styleClass="s-desc">
                                                                                            {! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].fields['ODOMETER OPTIONS'].elementItemsMap['REMARK'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row form-group">
                                                                    <div class="buttons center-block" style="width: 85%">
                                                                        <div class="col-lg-3 pull-right">
                                                                            <apex:commandLink id="save-param-btn-id" value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['SAVE PARAMS BUTTON']['BUTTON NAME'].Value__c }"
                                                                                              onclick="analytics_onClickButtonSendUI('click','button: card_save', 'UI_07_Tankkarte_Step_7_Config_CardsPerson'); return validateCardsTechParams('{! cardIndx }');"
                                                                                              styleClass="btn btn-red btn-done" style="margin-top: 15px">
                                                                            </apex:commandLink>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="b-card-splitter"></div>
                                                </apex:repeat>
                                                <apex:actionFunction name="saveTechParamForSingleCard" action="{! saveTechParamForSingleCard }"
                                                                     onComplete="setEvents_cardsTechnicalParams(); onPageRender(); return false;"
                                                                     reRender="cardTechParams, goToPaymentOptionsBtn, orderDetails, messageBlock" status="splashStatus">
                                                    <apex:param name="cardindex" value="" assignTo="{! cardindex }"/>
                                                </apex:actionFunction>
                                            </div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%; margin-top: -5px;">
                                                    <div class="col-lg-3">
                                                        <!-- UNCOMMENT LATER -->
                                                        <!-- <apex:commandButton action="{! backToSpecialOffers }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');"
                                                            onComplete="toViewport('top-heading-viewport'); setCollapseBlockEvent();isOffersPage = true;"
                                                            value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            style="width: 100%"
                                                            reRender="formBlock, orderDetails, onlineChatBlock"
                                                            status="splashStatus"/> -->
                                                        
                                                        <!-- TEMP BLOCK DUE TO "SPECIAL OFFER" STEP REMOVAL (MUST BE REMOVED) -->
                                                        <apex:commandButton action="{! backToSpecialOffers }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');"
                                                            onComplete="toViewport('top-heading-viewport'); showCardsOrderNavigationTabs(); setEvents_cardsOrder(); onPageRender();"
                                                            value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            style="width: 100%"
                                                            reRender="formBlock, orderDetails, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:commandButton id="goToPaymentOptionsBtn" value="{! stepPagesMap['CARD CONFIGURATION. TECHNICAL PARAMETERS'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }"
                                                            action="{! goToAdditionalParams }" onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_07_Tankkarte_Step_7_Config_CardsPerson');" 
                                                            onComplete="toViewport('top-heading-viewport'); setEvents_additional(); onPageRender(); onPageLoad();"
                                                            disabled="{! continueButtonIsDisabled }"
                                                            reRender="stepList, formBlock, orderDetails, onlineChatBlock"
                                                            styleClass="btn btn-red continue" status="splashStatus"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            if (isTechnicalParameters == undefined) {
                                                isTechnicalParameters = true;
                                            }
                                            if ('{! activeCardConfigTab }' == 'diff' && isTechnicalParameters) {
                                                analytics_CardsPersonOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                                isTechnicalParameters = false;
                                            } else
                                            if ('{! activeCardConfigTab }' == 'same' && isTechnicalParameters) {
                                                analytics_CardsPersonOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                                isTechnicalParameters = false;
                                            }
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP ADDITIONAL -->
                                    <apex:outputPanel layout="block" id="additional-page" styleClass="additional-page" rendered="{! AND(activeStep = 2, activeSubStep = 'Additional services') }">
                                        <script>
                                            activePageAnalytics = 'Additional services';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }

                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                            }

                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                            </apex:repeat>
                                        </script>
                                        <div class="wrapper">
                                            <apex:outputPanel rendered="{! OR(stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['SHOW SERVICE'].Value__c = 'true', stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['SHOW SERVICE'].Value__c = 'TRUE') }">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="b-grey-block" style="margin-bottom: 0;">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="b-row-header">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['SUBHEADING'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6">
                                                                    <apex:outputPanel layout="block" styleClass="b-text">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['DESCRIPTION'].Value__c }
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <div class="col-lg-6">
                                                                    <apex:outputPanel layout="block" styleClass="b-text-img">
                                                                        <apex:image url="{! URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['IMAGE NAME'].Value__c ) }" style="width: 260px"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-10">
                                                                    <div class="agree">
                                                                        <div class="form-check">
                                                                            <div class="checkbox checkbox-red additional-co2">
                                                                                <apex:inputCheckbox id="checkboxCO2Agree"
                                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), 'co2', 'UI_08_Tankkarte_Step_8_Additional')"
                                                                                    value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['AGREEMENT CHECKBOX VALUE'].Value__c }"
                                                                                    styleClass="form-check-input co2takecareCheckbox"/>
                                                                                <apex:outputLabel value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['AGREEMENT CHECKBOX LABEL'].Value__c }"
                                                                                    styleClass="form-check-label" 
                                                                                    for="checkboxCO2Agree"/>
                                                                            </div>
                                                                            <div class="text">
                                                                                <apex:outputPanel layout="block" styleClass="text-muted">
                                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['AGREEMENT CHECKBOX SUBLABEL'].Value__c }
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <apex:outputPanel styleClass="vat-recovery" rendered="{! AND(OR(stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['SHOW SERVICE'].Value__c = 'true', stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['SHOW SERVICE'].Value__c = 'TRUE'), showInternationalFeesBlock = true) }">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="b-grey-block" style="margin-bottom: 0;">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="b-row-header">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['SUBHEADING'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="b-text-img">
                                                                        <apex:image url="{! URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['IMAGE NAME'].Value__c ) }" style="width: 260px; float: right; margin: 7px 24px 7px 7px;"/>
                                                                        <div class="b-text" style="padding: 0 24px 0 36px;">
                                                                            <apex:outputText escape="false" value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['DESCRIPTION'].Value__c }"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="collapse-block">
                                                                        <div class="link" style="margin: 5px 0 0 20px" data-toggle="collapse" data-target="#additionalServiceDiscount">
                                                                            {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. DETAILS'].Value__c }
                                                                            <div class="expander expend-detail inline-block"/>
                                                                        </div>
                                                                        <div class="row collapse" id="additionalServiceDiscount">
                                                                            <div class="detail-list">
                                                                                <span style="font-weight: 600;">
                                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. HEADING'].Value__c }
                                                                                </span><br/>
                                                                                <span>
                                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. SUBHEADING ITEM 1'].Value__c }
                                                                                </span><br/>
                                                                                <span>
                                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. SUBHEADING ITEM 2'].Value__c }
                                                                                </span> 
                                                                                <div style="font-weight: 600;">
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 HEADING'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 HEADING'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 1'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 1'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 2'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 2'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 3'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 3'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 4'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 4'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 5'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 5'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 6'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 6'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 7'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 7'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 8'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 8'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                                <div>
                                                                                    <div class="l-detail inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 9'].Value__c }
                                                                                    </div>
                                                                                    <div class="inline-block">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 9'].Value__c }
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-11">
                                                                    <div class="agree" style="margin: 15px 0 25px -12px;">
                                                                        <div class="form-check">
                                                                            <div class="checkbox checkbox-red additional-co2">
                                                                                <apex:inputCheckbox id="checkboxVatRecovery"
                                                                                    value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT AGREEMENT CHECKBOX VALUE'].Value__c }"
                                                                                    styleClass="form-check-input vatRecovery" 
                                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), '1', 'UI_08_Tankkarte_Step_8_Additional')"/>
                                                                                <apex:outputLabel value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT AGREEMENT CHECKBOX LABEL'].Value__c }"
                                                                                    styleClass="form-check-label" 
                                                                                    for="checkboxVatRecovery"/>
                                                                            </div>
                                                                        </div>
                                                                        <div class="form-check">
                                                                            <div class="checkbox checkbox-red additional-co2">
                                                                                <apex:inputCheckbox id="checkboxVatRecoveryTC"
                                                                                    value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX VALUE'].Value__c }"
                                                                                    styleClass="form-check-input vatRecoveryTC" 
                                                                                    onclick="analytics_onClickCheckboxSendUI($j(this), '2', 'UI_08_Tankkarte_Step_8_Additional')"/>
                                                                                <apex:outputLabel styleClass="form-check-label" 
                                                                                    for="checkboxVatRecoveryTC">
                                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX LABEL PART 1'].Value__c } 
                                                                                    <apex:commandLink action="{! showTermsAndConditionsVatRecoveryModal }"
                                                                                        onclick="scrollDisableControl('disable'); 
                                                                                                 analytics_onClickButtonSendUI('show','popup', 'UI_08_Tankkarte_Step_8_Additional');"
                                                                                        styleClass="form-check-label"
                                                                                        reRender="modalVatRecoveryTC"
                                                                                        status="splashStatus">
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX LABEL URL'].Value__c }
                                                                                    </apex:commandLink> 
                                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX LABEL PART 2'].Value__c }
                                                                                </apex:outputLabel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="b-splitter" style="margin: 0 24px 25px 20px;"/>
                                                            <div class="row" style="margin-bottom: 20px;">
                                                                <div class="col-lg-8">
                                                                    <apex:outputPanel layout="block" styleClass="b-text" style="font-size: 12px;">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['ATS DESCRIPTION'].Value__c }
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <apex:outputPanel layout="block" styleClass="b-text-img">
                                                                        <apex:image url="{! URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['ATS IMAGE NAME'].Value__c ) }" style="width: 160px"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{! OR(stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['SHOW SERVICE'].Value__c = 'true', stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['SHOW SERVICE'].Value__c = 'TRUE') }">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="b-grey-block" style="margin-bottom: 0;">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="b-block-header">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="b-row-header">
                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['SUBHEADING'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6">
                                                                    <apex:outputPanel layout="block" styleClass="b-text">
                                                                        <apex:outputText value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['DESCRIPTION'].Value__c }" escape="false"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                                <div class="col-lg-6">
                                                                    <apex:outputPanel layout="block" styleClass="b-text-img">
                                                                        <apex:image url="{! URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['IMAGE NAME'].Value__c ) }" style="width: 260px"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-10">
                                                                    <div class="agree">
                                                                        <div class="form-check">
                                                                            <div class="checkbox checkbox-red additional-co2">
                                                                                <apex:inputCheckbox id="telematicsAgree"
                                                                                    value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['AGREEMENT CHECKBOX VALUE'].Value__c }"
                                                                                    styleClass="form-check-input co2takecareCheckbox"/>
                                                                                <apex:outputLabel value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['AGREEMENT CHECKBOX LABEL'].Value__c }"
                                                                                    styleClass="form-check-label" 
                                                                                    for="telematicsAgree"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <div class="b-splitter" style="margin-top: 20px"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3">
                                                        <apex:commandButton action="{! backToTechnicalParams }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_08_Tankkarte_Step_8_Additional'); isTechnicalParameters = true;"
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_cardsTechnicalParams(); onPageRender();"
                                                            value="{! stepPagesMap['ADDITIONAL'].elements['BACK BUTTON']['BUTTON NAME'].Value__c }"
                                                            styleClass="btn btn-gray btnContinueToPaymentOptions back-button-cls"
                                                            status="splashStatus"
                                                            reRender="stepList, formBlock, orderDetails, onlineChatBlock"/>
                                                    </div>
                                                    <div class="col-lg-4 pull-right">
                                                        <apex:commandButton value="{! stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-ORDER-'].Value__c } {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-CARDS-'].Value__c, stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-CARD-'].Value__c) }"
                                                            action="{! goToDocuments }"
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_documents(); setEvents_dateOfBirth(); onPageRender();"
                                                            onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_08_Tankkarte_Step_8_Additional');"
                                                            styleClass="btn btn-red continue" 
                                                            reRender="stepList, formBlock, onlineChatBlock" status="splashStatus"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            // $j('.btnContinueToPaymentOptions').on( "click", function() {
                                            //     analytics_AdditionalOnSelect(selectedOfferAnalytics, $j('.co2takecareCheckbox').is(':checked'));
                                            // });
                                            if ('{! activeCardConfigTab }' == 'diff') {
                                                analytics_AdditionalOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                            } else
                                            if ('{! activeCardConfigTab }' == 'same') {
                                                analytics_AdditionalOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                            }
                                        </script>
                                    </apex:outputPanel>

                                    <!-- ENTER DATE OF BIRTH -->
                                    <apex:outputPanel styleClass="enter-date-of-birth" layout="block" rendered="{! AND(activeStep = 2, activeSubStep = 'Enter Date of Birth') }">
                                        <script>
                                            activePageAnalytics = 'Enter Date of Birth';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }

                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                            }

                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                            </apex:repeat>
                                        </script>                                    
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="b-desc">
                                                        {! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row form-group tax-group" style="margin-top: 32px;">
                                                <div class="col-lg-3">
                                                    <div class="block" style="width: 200px;">
                                                        <apex:outputPanel layout="block" styleClass="s-header inline-block">
                                                            <apex:outputLabel styleClass="f-label" value="{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['LABEL'].Value__c }"/>
                                                            <span class="f-required">{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['ASTERISK'].Value__c }</span>
                                                            <div class="i-helper inline-block" style="margin-right: 10px;" data-html="true" data-content="{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="col-lg-7 col-lg-offset-1">
                                                    <div class="date-of-birth block">
                                                        <apex:inputText id="dateOfBirth"
                                                            value="{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                            styleClass="inline-block form-control required input ym-disable-keys"
                                                            maxLength="10" 
                                                            style="width: 70%" 
                                                            onkeyup="sendErrorBirthDate();" 
                                                            onblur="analytics_onBlurInputSendUI($j(this), 'birthDay', 'UI_09_Tankkarte_Step_9_BD');"/>
                                                        <span class="glyphicon glyphicon-ok" style="display:none"></span>
                                                        <apex:outputPanel layout="block" styleClass="invalid-feedback invalid-feedback-dateOfBirth">
                                                            <div class="i-error">!</div>{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            <script>
                                                                function sendErrorBirthDate() {
                                                                    if ($j('.invalid-feedback-dateOfBirth').is(':visible')) {
                                                                        analytics_onErrorSendUI('BirthDateNotFilled','UI_09_Tankkarte_Step_9_BD');
                                                                    }
                                                                }
                                                            </script>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3 pull-left">
                                                        <apex:commandButton action="{! backToAdditionalFromDOB }"
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_additional(); onPageRender(); onPageLoad();"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_09_Tankkarte_Step_9_BD');"
                                                            value="{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            style="width: 100%"
                                                            reRender="formBlock, orderDetails, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:commandButton id="continueToPumping"
                                                            value="{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_09_Tankkarte_Step_9_BD');"
                                                            action="{! continueToAdditionalParamsFromDob }"
                                                            oncomplete="setEvents_documents(); onPageRender();"
                                                            reRender="stepList, formBlock, orderDetails, onlineChatBlock"
                                                            styleClass="btn btn-red continue continue-fromtax"
                                                            status="splashStatus"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            analytics_DOBOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                        </script>                                        
                                    </apex:outputPanel>

                                    <!-- STEP DOCUMENTS AGREEMENT (CONTRACT ASSIGNMENT + DEPOSIT AGREEMENT) -->
                                    <apex:outputPanel id="docsAgreement" styleClass="docoments-agreement" rendered="{! AND(activeStep = 3, activeSubStep = 'Documents') }">
                                        <script>
                                            activePageAnalytics = 'Documents';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }

                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                            }

                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                            </apex:repeat>
                                        </script>                                    
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['DOCUMENTS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">                                                    
                                                    <div class="b-desc" style="margin: 0 30px 15px 30px;">
                                                        {! stepPagesMap['DOCUMENTS'].elements['LIST DOCUMENTS TO SIGN']['HEADING'].Value__c }
                                                        <ul style="padding-left: 18px;">
                                                            <li style="margin-bottom: 5px;">
                                                                <span class="li-desc" style="font-weight: 700;">
                                                                    {! stepPagesMap['DOCUMENTS'].elements['LIST DOCUMENTS TO SIGN']['CONTRACT DOC HEADING'].Value__c }
                                                                </span><br/>
                                                                {! stepPagesMap['DOCUMENTS'].elements['LIST DOCUMENTS TO SIGN']['CONTRACT DOC DESCRIPTION'].Value__c }
                                                                
                                                            </li>
                                                            <apex:outputPanel rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                                                <li>
                                                                    <span class="li-desc" style="font-weight: 700;">
                                                                        {! stepPagesMap['DOCUMENTS'].elements['LIST DOCUMENTS TO SIGN']['DEPOSIT AGREEMENT DOC HEADING'].Value__c }
                                                                    </span><br/>
                                                                    {! stepPagesMap['DOCUMENTS'].elements['LIST DOCUMENTS TO SIGN']['DEPOSIT AGREEMENT DOC DESCRIPTION'].Value__c }
                                                                </li>
                                                            </apex:outputPanel>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-grey-block" style="margin-top: 10px">
                                                <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 15px 0px 12px 15px;">
                                                    {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['HEADING'].Value__c }
                                                    <!-- <div class="pull-right" style="margin-right: 20px;">
                                                        <a class="btn btn-xs payment-modal" 
                                                           onclick="printDocument('frameDocumentsContent', 'documentsAgreementContentPL', 'docs-agreement-block-inside'); 
                                                                    analytics_onClickButtonSendUI('click','print_doc','UI_10_Tankkarte_Step_10_AttentionSign');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                    <div class="pull-right" style="margin-right: 10px;">
                                                        <a class="btn btn-xs payment-modal" href="{! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['DOWNLOAD URL'].Value__c }" 
                                                           onclick="analytics_onClickButtonSendUI('click','download_doc','UI_10_Tankkarte_Step_10_AttentionSign');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'download.png' )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div> -->
                                                    <div class="pull-right" style="margin-right: 10px;">
                                                        <a class="btn btn-xs payment-modal" 
                                                           onclick="showDocumentsModal(); 
                                                                    scrollDisableControl('disable'); 
                                                                    analytics_onClickButtonSendUI('click','zoom_doc','UI_10_Tankkarte_Step_10_AttentionSign');">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "full-screen.png" )}" height="20px" width="20px"/>
                                                        </a>
                                                    </div>
                                                </apex:outputPanel>
                                                <div class="payment-agreement-block">
                                                    <div style="margin: 0 15px; height:165px;">
                                                        <apex:iframe id="frameDocumentsContent"
                                                            scrolling="true"
                                                            src="{! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['IFRAME URL'].Value__c }" width="100%" height="99.9%">
                                                        </apex:iframe>
                                                    </div>
                                                </div>
                                                <div class="form-check" style="padding: 15px;">
                                                    <div style="font-size: 10px; width: 420px; float: left;">
                                                        {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['DOCUSIGN DESCRIPTION'].Value__c }
                                                    </div>
                                                    <div style="width: 100px; float: right;">
                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'docusign.png' )}" style="width: 100px;"/>
                                                    </div>
                                                    <div style="clear:both;"></div>
                                                </div>
                                            </div>                                            
                                            <apex:outputPanel rendered="{! AND(opportunity.Rechnungsperiode__c = '15', opportunity.Zahlungsziel_Credit__c = '14') }">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="b-switch-block" style="height: 125px;">
                                                            <div class="col-lg-2">
                                                                <div class="onoffswitch invoice" id="invoiceSwitcher">
                                                                    <apex:inputCheckbox id="switchInvoice"
                                                                        value="{! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['VALUE'].Value__c }" 
                                                                        styleClass="onoffswitch-checkbox"  
                                                                        onclick="analytics_onClickCheckboxSendUI($j(this), 'paperCont', 'UI_10_Tankkarte_Step_10_AttentionSign');"/>
                                                                    <apex:outputLabel styleClass="onoffswitch-label" for="switchInvoice">
                                                                        <span class="onoffswitch-inner"></span>
                                                                        <span class="onoffswitch-switch"></span>
                                                                    </apex:outputLabel>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-10">
                                                                <div class="switch-info">
                                                                    <div class="s-header inline-block">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL1'].Value__c }
                                                                    </div>
                                                                    <div class="s-desc">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL2'].Value__c }
                                                                    </div>
                                                                    <div class="s-add">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL3'].Value__c }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <div class="form-check" style="margin: 0 20px 10px 0;">
                                                <div class="checkbox checkbox-red">
                                                    <apex:inputCheckbox id="checkboxDecision"
                                                        value="{! stepPagesMap['DOCUMENTS'].fields['DECISION'].elementItemsMap['VALUE'].Value__c }"
                                                        onclick="analytics_onClickCheckboxSendUI($j(this), '1', 'UI_10_Tankkarte_Step_10_AttentionSign')"
                                                        styleClass="form-check-input"/>
                                                    <apex:outputLabel value="{! stepPagesMap['DOCUMENTS'].fields['DECISION'].elementItemsMap['LABEL PART 1'].Value__c } {! selectedCompany.name } {! stepPagesMap['DOCUMENTS'].fields['DECISION'].elementItemsMap['LABEL PART 2'].Value__c }"
                                                        styleClass="form-check-label" 
                                                        style="line-height: 18px;"
                                                        for="checkboxDecision"/>
                                                </div>
                                            </div>
                                            <div class="form-check">
                                                <div class="checkbox checkbox-red">
                                                    <apex:inputCheckbox id="checkboxTermsAndConditions"
                                                        value="{! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['VALUE'].Value__c }"
                                                        onclick="analytics_onClickCheckboxSendUI($j(this), '2', 'UI_10_Tankkarte_Step_10_AttentionSign')"
                                                        styleClass="form-check-input"/>
                                                    <apex:outputLabel styleClass="form-check-label" 
                                                        style="line-height: 18px;"
                                                        for="checkboxTermsAndConditions">
                                                        {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LABEL PART 1'].Value__c }
                                                        <apex:commandLink action="{! showTermsAndConditionsModal }"
                                                            onclick="scrollDisableControl('disable'); analytics_onClickButtonSendUI('show','popup', 'UI_10_Tankkarte_Step_10_AttentionSign');"
                                                            styleClass="form-check-label"
                                                            reRender="modalTermsAndConditions" 
                                                            status="splashStatus">
                                                            {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LABEL URL'].Value__c }
                                                        </apex:commandLink>
                                                        {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LABEL PART 2'].Value__c }
                                                    </apex:outputLabel>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons center-block" style="width: 91%">
                                                    <div class="col-lg-3">
                                                        <apex:commandButton value="{! stepPagesMap['DOCUMENTS'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                            action="{! backToAdditionalParams }"
                                                            onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_10_Tankkarte_Step_10_AttentionSign');"
                                                            oncomplete="toViewport('top-heading-viewport'); setEvents_additional(); onPageRender(); onPageLoad();"
                                                            style="width: 100%"
                                                            styleClass="btn btn-gray back-button-cls"
                                                            reRender="stepList, formBlock, onlineChatBlock"
                                                            status="splashStatus"/>
                                                    </div>
                                                    <div class="col-lg-3 pull-right">
                                                        <apex:actionFunction name="saveDocumentsStepData" action="{! saveDocumentsStepData }" reRender="stepList, onlineChatBlock" oncomplete="goToSignDocuments();"/>
                                                        <apex:actionFunction name="goToSignDocuments" action="{! goToSignDocuments }" reRender="stepList, onlineChatBlock" oncomplete="endSplash();"/>
                                                        <apex:commandLink value="{! stepPagesMap['DOCUMENTS'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                            onclick="startSplash(); 
                                                                     validateDocumentsStepData(true); 
                                                                     analytics_onClickButtonSendUI('click','button: next', 'UI_10_Tankkarte_Step_10_AttentionSign');"
                                                            styleClass="btn btn-red continue" 
                                                            reRender="stepList, onlineChatBlock">
                                                        </apex:commandLink>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> 
                                        <script>
                                            analytics_DocumentsOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                        </script>                                         
                                    </apex:outputPanel>
                     
                                    <!-- STEP SELECT PAYMENT METHOD (DirectDebitDeposit/BankTransferDeposit)-->
                                    <apex:outputPanel layout="block" id="paymentOptionsStep" styleClass="payment-options" rendered="{! AND(activeStep = 4, OR(activeSubStep = 'DirectDebitDeposit', activeSubStep = 'BankTransferDeposit'))}">
                                        <script type="text/javascript">
                                            activePageAnalytics = '{! activeSubStep }';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }
                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                            }
                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                            </apex:repeat>
                                        </script>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT HEADING']['VALUE'].Value__c }
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-10">
                                                            <div class="b-desc">
                                                                {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT DESCRIPTION']['VALUE'].Value__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- <div class="b-grey-block" style="margin-top:20px;">
                                                        <div class="b-row-header" style="margin: 15px 15px 0px 24px;">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].elements['AMOUNT TO BE PAID']['LABEL'].Value__c } {! stepPagesMap['PAYMENT OPTIONS'].elements['AMOUNT TO BE PAID']['VALUE'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                                        </div>
                                                        <div class="payment-pay-deposit">
                                                             <div class="row">
                                                                <div class="b-row-header" style="margin: 25px 0px 0px 15px;">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT CARDS HEADING']['VALUE'].Value__c }
                                                                </div>
                                                                <div class="payment-description-text">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['DD DEPOSIT CARDS HEADING']['DESCRIPTION'].Value__c }
                                                                </div>
                                                                <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].options }" var="param">
                                                                    <div class="col-lg-4">
                                                                        <div class="radio radio-red">
                                                                            <apex:commandLink value="{! param.value }"
                                                                                action="{! changePaymentMethod }"
                                                                                oncomplete="setEvents_paymentOptions(); onPageRender(); analytics_onClickRadioSendUI('payDeposit_{! selectedPaymentMethod }', 'Tankkarte_Payment_Deposit');"
                                                                                styleClass="category-link {! IF(selectedPaymentMethod == param.value, 'active', '') }"
                                                                                reRender="paymentOptionsStep, paymentFormToSend"
                                                                                status="splashStatus">
                                                                                <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                                            </apex:commandLink>
                                                                            <div class="pay-logo">
                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                                    height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                                    width="{!  stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Width'].Value__c  }" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:repeat>
                                                            </div>
                                                            <div class="row">
                                                                <div class="b-row-header" style="margin: 25px 0px 0px 15px;" >
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['VALUE'].Value__c }
                                                                </div>
                                                                <div class="payment-description-text">
                                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['DESCRIPTION'].Value__c }
                                                                </div>
                                                                <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].options }" var="param">
                                                                    <div class="col-lg-4">
                                                                        <div class="radio radio-red">
                                                                            <apex:commandLink value="{! param.value }"
                                                                                action="{! changePaymentMethod }"
                                                                                oncomplete="setEvents_paymentOptions(); onPageRender(); analytics_onClickRadioSendUI('payDeposit_{! selectedPaymentMethod }', 'Tankkarte_Payment_Deposit');"
                                                                                styleClass="category-link {! IF(selectedPaymentMethod == param.value, 'active', '') }"
                                                                                reRender="paymentOptionsStep, paymentFormToSend"
                                                                                status="splashStatus">
                                                                                <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                                            </apex:commandLink>
                                                                            <div class="pay-logo">
                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                                    height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                                    width="{!  stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Online Bank'].elementItemsMap[param.value&'Width'].Value__c  }" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:repeat>
                                                            </div>
                                                        </div>
                                                        <div class="b-splitter" style="margin: 30px 25px 20px 25px;"></div>
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="col-lg-8">
                                                                    <div class="font-11 payment-deposit-footer" >
                                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT FOOTER']['VALUE'].Value__c }
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div><apex:image url="{!URLFOR($Resource.e2e_images, "ingenico.png" )}" height="55px" width="130px"/> </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> -->





                                                    <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                                    <div class="congratulations">
                                                        <div class="wrapper" style="width: 100%; margin-bottom: 0; padding-bottom: 0; box-shadow: none;">
                                                            <div class="b-grey-block">
                                                                <div class="row">
                                                                    <div class="b-description-block">
                                                                        <div class="b-col-header">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                                        </div>
                                                                        <div class="space-between-text">
                                                                            <div class="inline-block font-15 text-muted" style="width: 195px;">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right" style="color:#1A1A1A;">?</div>
                                                                            </div>
                                                                            <apex:outputPanel styleClass="description-text">
                                                                                {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                        <div class="space-between-text">
                                                                            <div class="inline-block font-15 text-muted" style="width: 195px;">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                            </div>
                                                                            <apex:outputPanel styleClass="description-text">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                        <div class="space-between-text">
                                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="width: 195px;">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel styleClass="description-text">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                        <div class="space-between-text">
                                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="width: 195px;">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel styleClass="description-text">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                        <div class="space-between-text">
                                                                            <apex:outputPanel styleClass="inline-block font-15 text-muted" style="width: 195px;">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel styleClass="description-text">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- PAY INFORMATION FOR PRINT -->
                                                                <div id="paymentInformation">
                                                                    <div>
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                                                                    </div>
                                                                    <br/>
                                                                    <div style="font-size: 18; margin-bottom: 20px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                                    </div>
                                                                    <div style="margin-top: 5px;">
                                                                        <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel >
                                                                            {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div style="margin-top: 5px;">
                                                                        <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel >
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div style="margin-top: 5px;">
                                                                        <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel >
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div style="margin-top: 5px;">
                                                                        <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel >
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div style="margin-top: 5px;">
                                                                        <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel >
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="buttons" style="margin: 0px 25px 48px 19px;">
                                                                        <div class="col-lg-6">
                                                                            <apex:outputPanel layout="inline">
                                                                                <a class="btn btn-xs payment-modal" 
                                                                                    href="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SAVE PAYMENT INFORMATION DOWNLOAD URL'].Value__c }" 
                                                                                    onclick="analytics_onClickButtonSendUI('click','download_doc','UI_11_Tankkarte_Step_11_Payment_Deposit');">
                                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                                </a>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="inline">
                                                                                <a class="btn btn-xs print" 
                                                                                   style="margin-left: 10px;" 
                                                                                   onclick="analytics_onClickButtonSendUI('click','print_doc','UI_11_Tankkarte_Step_11_Payment_Deposit'); 
                                                                                            printPaymentInformation();">
                                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                                </a>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="b-splitter" style="margin-top:30px;" ></div>
                                                </div>
                                                <div class="row">
                                                    <div class="buttons center-block" style="width: 87%">
                                                        <div class="col-lg-3">
                                                            <apex:commandButton value="{! stepPagesMap['PAYMENT OPTIONS'].elements['BACK BUTTON']['LABEL'].Value__c }"
                                                                action="{! backToDocuments }"
                                                                onclick="analytics_onClickButtonSendUI('click','button: back', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"
                                                                oncomplete="setEvents_documents(); onPageRender();"
                                                                styleClass="btn btn-gray back-button-cls"
                                                                reRender="formBlock, onlineChatBlock"
                                                                status="splashStatus"/>
                                                        </div>
                                                        <div class="col-lg-5 pull-right">
                                                            <!-- <apex:commandButton value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL'].Value__c }"
                                                                onclick="analytics_onClickButtonSendUI('next', 'Tankkarte_Payment_Deposit'); startPayment('payment-options');"
                                                                action="{! proceedToCheckout }"
                                                                styleClass="btn btn-red continue"
                                                                reRender="formBlock"
                                                                status="splashStatus"
                                                                oncomplete="sendPaymentTypeToAnalytics();"/>                                                        
                                                            <script type="text/javascript">
                                                                function sendPaymentTypeToAnalytics() {
                                                                    analytics_PaymentDepositOnPay('{! selectedPaymentMethod }');
                                                                }
                                                            </script> -->

                                                            <!-- TEMP BUTTON (MUST BE REMOVED) -->
                                                            <apex:commandButton value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL'].Value__c }"
                                                                onclick="analytics_onClickButtonSendUI('click','button: next', 'UI_11_Tankkarte_Step_11_Payment_Deposit');"
                                                                action="{! proceedToCheckout }"
                                                                styleClass="btn btn-red continue"
                                                                reRender="formBlock, stepList, orderDetails, info-block, pageHeader"
                                                                status="splashStatus"
                                                                oncomplete="toViewport('top-heading-viewport'); onPageRender();"/>                                                        
                                                            <script type="text/javascript">
                                                                function sendPaymentTypeToAnalytics() {
                                                                    analytics_PaymentDepositOnPay('{! selectedPaymentMethod }');
                                                                }
                                                            </script>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            if ('{! activeCardConfigTab }' == 'diff') {
                                                analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, diffCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                            } else
                                            if ('{! activeCardConfigTab }' == 'same') {
                                                analytics_PaymentDepositOnLoad(paymentMethodAnalytics, isDepositAnalytics, sameCardsArray, '{! opportunity.E2E_Form_of_Business__c }');
                                            }
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP CONGRATULATIONS -->
                                    <apex:outputPanel layout="block" id="congratulations" styleClass="congratulations" rendered="{! AND(activeStep = 5, activeSubStep = 'Congratulations') }">
                                        <script type="text/javascript">
                                            activePageAnalytics = 'Congratulations';
                                            if (paymentMethodAnalytics == undefined && isDepositAnalytics == undefined) {
                                                paymentMethodAnalytics = '{! opportunity.Zahlungsart__c }';
                                                isDepositAnalytics = {! IF(opportunity.Security_Amount_To_Pay__c != null && opportunity.Security_Amount_To_Pay__c != 0, true, false) };
                                            }
                                            sameCardsArray = new Array();
                                            for (var i = 1; i <= {! numberOfCards }; i++) {
                                                sameCardsArray.push({'name': 'Karte Nr.' + i,'category': '{!sameCardsMap[1].categoryCard}','quantity': 1});
                                            }

                                            diffCardsArray = new Array();
                                            <apex:variable var="index" value="{!1}"/>
                                            <apex:repeat value="{! diffCardsMap }" var="cardIndx">
                                                diffCardsArray.push({'name': 'Karte Nr.{! index }','category': '{! diffCardsMap[cardIndx].categoryCard }','quantity': 1});
                                            </apex:repeat>
                                        </script>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-2 col-lg-offset-5">
                                                    <div class="end-logo center-block">
                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'tick2.png')}" styleClass="center-block"></apex:image>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-8 col-lg-offset-2">
                                                    <div class="b-header">
                                                        <!-- {! IF(paymentStatus = 'A', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND PAID'].Value__c, IF(opportunity.Security_To_Pay__c != 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c, IF(paymentStatus = 'E', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDER EXCEPTION'].Value__c, IF(OR(paymentStatus = 'D', paymentStatus = 'C'), stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND NOT PAID'].Value__c, '')))) } -->
                                                        {! IF(opportunity.Security_To_Pay__c != 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c, IF(opportunity.Security_To_Pay__c = 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND NOT PAID'].Value__c, '')) }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-8 col-lg-offset-2">
                                                    <!-- Card are ordered. Deposit is successfully paid -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! paymentStatus = 'A'}">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    <!-- Card are ordered. Deposit is not required -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! AND(opportunity.Security_To_Pay__c != 'Kaution', paymentStatus = null) }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.LastName } {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    <!-- Deposit is not paid (CANCEL\DECLINE) -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! OR(paymentStatus = 'D', paymentStatus = 'C') }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    <!-- Deposit is not certainly paid (EXCEPTION) -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! paymentStatus = 'E' }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                                    <!-- Card are ordered. Deposit is not required -->
                                                    <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! opportunity.Security_To_Pay__c != 'Kaution' }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.LastName } {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel>
                                                    <!-- Deposit is not paid -->
                                                    <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel>
                                                </div> 
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <apex:outputPanel layout="block" styleClass="info-address">
                                                        <apex:outputPanel >
                                                            {! selectedCompany.street } {! selectedCompany.housenumber }{! IF(selectedCompany.postcode != null, ', ' + selectedCompany.postcode, '') }{! IF(selectedCompany.city != null, ', ' + selectedCompany.city, '') }{! IF(selectedCompany.country != null, ', ' + selectedCompany.country, '') }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="font-15" style="text-align: center; margin-bottom: 18px;">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE'].Value__c } {! contact.Email }{! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE 2'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>                                       
                                        <!-- <apex:outputPanel rendered="{! AND(opportunity.Security_To_Pay__c = 'Kaution', OR(paymentStatus = 'D', paymentStatus = 'C', paymentStatus = 'E')) }"> -->
                                        <apex:outputPanel rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                            <div class="wrapper">
                                                <div class="row">
                                                    <div class="b-deposit-details">
                                                        <div class="b-block-header">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['TOP HEADING'].Value__c }
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-8">
                                                                <div class="font-15">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DIRECT DEBIT DESCRIPTION BLOCK'].Value__c }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="b-grey-block">
                                                    <div class="row">
                                                        <div class="b-description-block">
                                                            <div class="b-col-header">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                            </div>
                                                            <div class="space-between-text">
                                                                <div class="inline-block font-15 text-muted">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="right" style="color:#1A1A1A;">?</div>
                                                                </div>
                                                                <apex:outputPanel styleClass="description-text">
                                                                    {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="space-between-text">
                                                                <div class="inline-block font-15 text-muted">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                </div>
                                                                <apex:outputPanel styleClass="description-text">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="space-between-text">
                                                                <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="description-text">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="space-between-text">
                                                                <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="description-text">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="space-between-text">
                                                                <apex:outputPanel styleClass="inline-block font-15 text-muted">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="description-text">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- PAY INFORMATION FOR PRINT -->
                                                    <div id="paymentInformation">
                                                        <div>
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                                                        </div>
                                                        <br/>
                                                        <div style="font-size: 18; margin-bottom: 20px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                        </div>
                                                        <div style="margin-top: 5px;">
                                                            <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel >
                                                                {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div style="margin-top: 5px;">
                                                            <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel >
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div style="margin-top: 5px;">
                                                            <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel >
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div style="margin-top: 5px;">
                                                            <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel >
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div style="margin-top: 5px;">
                                                            <apex:outputPanel style="display: inline-block; width: 160px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel >
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="buttons">
                                                            <div class="col-lg-6">
                                                                <apex:outputPanel layout="inline">
                                                                    <apex:outputLink value="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SAVE PAYMENT INFORMATION DOWNLOAD URL'].Value__c }" 
                                                                        styleClass="btn btn-red" 
                                                                        style="max-width: none" 
                                                                        onclick="analytics_onClickButtonSendUI('click','download_doc','UI_11_Tankkarte_Step_12_Success');">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "download-white.png" )}" styleClass="download-img"/>
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SAVE PAYMENT INFORMATION BUTTON'].Value__c }
                                                                    </apex:outputLink>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="inline">
                                                                    <apex:commandLink styleClass="btn btn-xs print" 
                                                                                      onclick="printPaymentInformation(); 
                                                                                               analytics_onClickButtonSendUI('click','print_doc','UI_12_Tankkarte_Step_12_Success');" 
                                                                                      style="margin-left: 15px;">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                    </apex:commandLink>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>

                                        <!-- DIRECT DEBIT MANDATE ACCEPTANCE -->
                                        <apex:outputPanel id="ddMandateAcceptance" rendered="{! opportunity.Zahlungsart__c = 'Lastschrift' }">
                                            <div class="wrapper">
                                                <div class="inside-wrapper">
                                                    <div class="row">
                                                        <div class="col-lg-8">
                                                            <div class="b-block-header" style="margin-left: 0px; margin-top: 10px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['HEADING'].Value__c }
                                                            </div>
                                                            <div class="b-desc" style="margin: 0 30px 15px 0;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DESCRIPTION'].Value__c }
                                                            </div>
                                                            <ul class="need-list font-15">
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 1'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <div class="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 1'].Value__c }
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 2'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <div class="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 2'].Value__c }
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 3'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <div class="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 3'].Value__c }
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 4'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <div class="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 4'].Value__c }
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                            <div class="b-desc" style="margin: 0 30px 15px 0;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['MESSAGE'].Value__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="b-grey-block" style="margin-top: 10px">
                                                    <div class="b-block-header" style="margin: 15px 0px 12px 15px;">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. HEADING'].Value__c }
                                                        <div class="pull-right" style="margin-right: 20px;">
                                                            <a class="btn btn-xs payment-modal" 
                                                               onclick="printDocument('frameDDmandateAcceptance', 'ddMandateAcceptanceContentPL', 'ddmandate-agreement-block-inside'); 
                                                                        analytics_onClickButtonSendUI('click','print_doc','UI_12_Tankkarte_Step_12_Success');">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                            </a>
                                                        </div>
                                                        <div class="pull-right" style="margin-right: 10px;">
                                                            <a class="btn btn-xs payment-modal" 
                                                               onclick="showDDmandateAcceptanceDoc(); 
                                                                        scrollDisableControl('disable'); 
                                                                        analytics_onClickButtonSendUI('click','zoom_doc','UI_12_Tankkarte_Step_12_Success');">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "full-screen.png" )}" height="20px" width="20px"/>
                                                            </a>
                                                        </div>
                                                    </div>

                                                    <div class="ddmandate-agreement-block">
                                                        <div style="margin: 0 15px; height:265px;" class="ddmandate-agreement-block-inside">
                                                            <apex:iframe id="frameDDmandateAcceptance"
                                                                scrolling="true"
                                                                src="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. IFRAME URL'].Value__c }" width="100%" height="99.9%">
                                                            </apex:iframe>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin: 32px 0 0 0;">
                                                    <div class="buttons center-block" style="text-align: right;">
                                                        <div class="col-lg-3 col-lg-offset-4">
                                                            <div>
                                                                <a href="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOWNLOAD URL'].Value__c }" 
                                                                    class="btn btn-red" 
                                                                    onclick="analytics_onClickButtonSendUI('click','download_doc', 'UI_12_Tankkarte_Step_12_Success');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download-white.png" )}" styleClass="download-img"/>
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOWNLOAD BUTTON'].Value__c }
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> 
                                        </apex:outputPanel>
                                         
                                        <div class="wrapper">
                                            <div class="inside-wrapper">
                                                <div class="row">
                                                    <div class="col-lg-8">
                                                        <div class="b-header">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['TOP HEADING'].Value__c }
                                                        </div>
                                                        <ul class="need-list font-15">
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1 VALUE'].Value__c }
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2 VALUE'].Value__c }
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3'].Value__c }
                                                                </apex:outputPanel>
                                                                <div class="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3 VALUE'].Value__c }
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="smart-img">
                                                            <apex:image url="{! URLFOR($Resource.e2e_images, 'shellkarte_pl_web.png') }"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> 
                                        <script type="text/javascript">
                                            if ('{! activeCardConfigTab }' == 'diff') {
                                                analytics_thankYouPage(paymentMethodAnalytics, isDepositAnalytics, '{! opportunity.E2E_Form_of_Business__c }');
                                            } else
                                            if ('{! activeCardConfigTab }' == 'same') {
                                                analytics_thankYouPage(paymentMethodAnalytics, isDepositAnalytics, '{! opportunity.E2E_Form_of_Business__c }');
                                            }
                                        </script>
                                    </apex:outputPanel>

                                    <!-- PROCESS ERROR PAGES -->
                                    <apex:outputPanel id="errorPage" 
                                        layout="block" 
                                        styleClass="error-page" 
                                        rendered="{! 
                                            OR(
                                                activeSubStep = 'Too many reports',
                                                activeSubStep = 'Too high limit. Additional Credit Scoring Allowance',
                                                activeSubStep = 'Risky but manageable',
                                                activeSubStep = 'Too risky',
                                                activeSubStep = 'Report does not exist',
                                                activeSubStep = 'Company not found',
                                                activeSubStep = 'Private entity',
                                                activeSubStep = 'Authorization not granted',
                                                activeSubStep = 'Already in process',
                                                activeSubStep = 'Already a customer',
                                                activeSubStep = 'Black list',
                                                activeSubStep = 'Stop order'
                                            )
                                        }">
                                        <apex:variable var="errorType" value="{! UPPER(activeSubStep) }"/>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['PROCESS ERROR'].elements[errorType]['HEADING'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="error-text">
                                                        <div>
                                                            {! stepPagesMap['PROCESS ERROR'].elements[errorType]['DESCRIPTION'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> 
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons return">
                                                    <div class="col-lg-12" onclick="analytics_onClickButtonSendUI('click','button: toHomePage', 'Tankkarte_Success');">
                                                        <a href="{! stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c }" class="btn btn-gray" style="min-width: 130px">
                                                                {! stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['LABEL'].Value__c }
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <apex:outputPanel rendered="{! AND(activeSubStep != 'Private entity', activeSubStep != 'Too risky', activeSubStep != 'Black list') }">
                                            <div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="b-block-header" style="margin-left: 0;">
                                                            {! stepPagesMap['PROCESS ERROR'].elements[errorType]['FEEDBACK HEADING'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="error-text" style="margin-left: 0;">
                                                            {! stepPagesMap['PROCESS ERROR'].elements[errorType]['PHONE'].Value__c }<br/>
                                                            {! stepPagesMap['PROCESS ERROR'].elements[errorType]['EMAIL'].Value__c }<br/>
                                                            {! stepPagesMap['PROCESS ERROR'].elements[errorType]['WORK TIME'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <script type="text/javascript">
                                            analytics_anyError('{! activeSubStep }', '1','System error');
                                            endSplash();
                                        </script>
                                    </apex:outputPanel>

                                    <!-- SYSTEM ERROR -->
                                    <apex:outputPanel layout="block" styleClass="error-page" rendered="{! activeSubStep = 'System error' }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="error-text">
                                                        <div>
                                                            {! stepPagesMap['SYSTEM ERROR'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="b-splitter"></div>
                                            <div class="row">
                                                <div class="buttons return">
                                                    <div class="col-lg-12">
                                                        <a href="{! stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c }" class="btn btn-gray" style="min-width: 130px">
                                                            {! stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['BUTTON NAME'].Value__c }
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <script type="text/javascript">
                                                analytics_anyError('{! activeSubStep }', '1','{! activeSubStep }');
                                                endSplash();
                                            </script>
                                        </div>
                                        <div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="b-block-header" style="margin-left: 0;">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['FEEDBACK HEADING']['HEADING'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="error-text" style="margin-left: 0;">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['PHONE']['VALUE'].Value__c }<br/>
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['EMAIL']['VALUE'].Value__c }<br/>
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['WORK TIME']['VALUE'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <apex:inputHidden id="activeInnerPageName" value="{! activeInnerPage }"/>
                                    <!-- MODAL AGREE TO TELEPHONE CONTACT -->
                                    <apex:outputPanel layout="block" id="modalAgreeToPhoneContact">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Agree To Phone Contact' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Agree To Phone Contact' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Agree To Phone Contact', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Agree To Phone Contact', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalAgreeToPhoneContact]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable'); 
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_01_Tankkarte_Step_1_Form_Contacts');" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['IFRAME HEADING'].Value__c }
                                                                <a class="btn btn-xs payment-modal" 
                                                                   style="display: none;"
                                                                   id="printPhoneContract"
                                                                   onclick="printDocument('fullFrameAgreeToPhoneContact');
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a class="btn btn-xs payment-modal" 
                                                                   href="{! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['DOWNLOAD URL'].Value__c }" 
                                                                   onclick="analytics_onClickButtonSendUI('click','popup: download','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <script type="text/javascript">
                                                            document.getElementById('fullFrameAgreeToPhoneContact').onload = function() {
                                                                document.getElementById('printPhoneContract').style.display = 'inline-block';
                                                            }
                                                        </script>
                                                        <div class="modal-body agreement-modal-body" style="overflow-y: hidden;">
                                                            <iframe
                                                                id="fullFrameAgreeToPhoneContact"
                                                                name="fullFrameAgreeToPhoneContact"
                                                                src="{! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        id="phoneContactOK"
                                                                        onclick="$j('[id$=modalAgreeToPhoneContact]').hide(); 
                                                                                 $j('[id$=activeInnerPageName]').val(''); 
                                                                                 scrollDisableControl('enable'); 
                                                                                 analytics_onClickButtonSendUI('click','popup: ok','UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                        class="btn btn-red"
                                                                        style="min-width: 120px">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL AGREE TO INFO BY EMAIL -->
                                    <apex:outputPanel layout="block" id="modalAgreeToInfoByEmail">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Agree To Info By Email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Agree To Info By Email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Agree To Info By Email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Agree To Info By Email', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalAgreeToInfoByEmail]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable'); 
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_01_Tankkarte_Step_1_Form_Contacts');" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['IFRAME HEADING'].Value__c }
                                                                <a class="btn btn-xs payment-modal" 
                                                                   style="display: none;"
                                                                   id="printInfoByEmail"
                                                                   onclick="printDocument('fullFrameAgreeToInfoByEmail'); 
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a class="btn btn-xs payment-modal" 
                                                                   href="{! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['DOWNLOAD URL'].Value__c }" 
                                                                   onclick="analytics_onClickButtonSendUI('click','popup: download','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <script type="text/javascript">
                                                            document.getElementById('fullFrameAgreeToInfoByEmail').onload = function() {
                                                                document.getElementById('printInfoByEmail').style.display = 'inline-block';
                                                            }
                                                        </script>
                                                        <div class="modal-body agreement-modal-body" style="overflow-y: hidden;">
                                                            <iframe
                                                                id="fullFrameAgreeToInfoByEmail"
                                                                name="fullFrameAgreeToInfoByEmail"
                                                                src="{! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a 
                                                                        id="infoByEmailOK"
                                                                        onclick="$j('[id$=modalAgreeToInfoByEmail]').hide(); 
                                                                                $j('[id$=activeInnerPageName]').val(''); 
                                                                                scrollDisableControl('enable'); 
                                                                                analytics_onClickButtonSendUI('click','popup: ok','UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                       class="btn btn-red"
                                                                       style="min-width: 120px">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MOBILE MODAL AGREE NEWS -->
                                    <apex:outputPanel layout="block" id="modalAgreeToNews">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Agree To News' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Agree To News' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Agree To News', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Agree To News', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalAgreeToNews]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable'); 
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_01_Tankkarte_Step_1_Form_Contacts');" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['IFRAME HEADING'].Value__c }
                                                                <a class="btn btn-xs payment-modal" 
                                                                   style="display: none;"
                                                                   id="printNews"
                                                                   onclick="printDocument('fullFrameAgreeToNews'); 
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a class="btn btn-xs payment-modal" 
                                                                   href="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['DOWNLOAD URL'].Value__c }" 
                                                                   onclick="analytics_onClickButtonSendUI('click','popup: download','UI_01_Tankkarte_Step_1_Form_Contacts');">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <script type="text/javascript">
                                                            document.getElementById('fullFrameAgreeToNews').onload = function() {
                                                                document.getElementById('printNews').style.display = 'inline-block';
                                                            }
                                                        </script>
                                                        <div class="modal-body agreement-modal-body" style="overflow-y: hidden;">
                                                            <iframe
                                                                id="fullFrameAgreeToNews"
                                                                name="fullFrameAgreeToNews"
                                                                src="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a 
                                                                        id="agreeToNewsOK"
                                                                        onclick="$j('[id$=modalAgreeToNews]').hide(); 
                                                                                $j('[id$=activeInnerPageName]').val(''); 
                                                                                scrollDisableControl('enable'); 
                                                                                analytics_onClickButtonSendUI('click','popup: ok','UI_01_Tankkarte_Step_1_Form_Contacts');"
                                                                       class="btn btn-red"
                                                                       style="min-width: 120px">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL ADDITIONAL CREDIT SCORING ALLOWANCE -->
                                    <apex:actionFunction name="showAdditionalCreditScoringAllowanceDoc" action="{! showAdditionalCreditScoringAllowanceModal }" reRender="modalAdditionalCreditScoring" status="splashStatus"/>
                                    <apex:outputPanel layout="block" id="modalAdditionalCreditScoring">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'ModalAdditionalCreditScoringAllowance' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'ModalAdditionalCreditScoringAllowance' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'ModalAdditionalCreditScoringAllowance', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'ModalAdditionalCreditScoringAllowance', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalAdditionalCreditScoring]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable'); 
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_03_Tankkarte_Step_3_Form_FuelLiters');" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['LIGHTBOX HEADING'].Value__c }
                                                                <!-- <a class="btn btn-xs payment-modal" 
                                                                   onclick="printDocument('fullFrameAdditionalCreditScoring'); 
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_03_Tankkarte_Step_3_Form_FuelLiters');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a class="btn btn-xs payment-modal" 
                                                                   href="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['DOWNLOAD URL'].Value__c }" 
                                                                   onclick="analytics_onClickButtonSendUI('click','popup: download','UI_03_Tankkarte_Step_3_Form_FuelLiters');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a> -->
                                                            </div>
                                                        </div>
                                                        <div class="modal-body sepa-modal-body">
                                                            <iframe
                                                                id="fullFrameAdditionalCreditScoring"
                                                                name="fullFrameAdditionalCreditScoring"
                                                                src="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalAdditionalCreditScoring]').hide(); 
                                                                                 $j('[id$=activeInnerPageName]').val(''); 
                                                                                 scrollDisableControl('enable'); 
                                                                                 analytics_onClickButtonSendUI('click','popup: ok','UI_03_Tankkarte_Step_3_Form_FuelLiters');"
                                                                        class="btn btn-red"
                                                                        style="min-width: 120px">
                                                                        {! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL VAT-RECOVERY PROGRAM (TERMS AND CONDITIONS) -->
                                    <apex:outputPanel layout="block" id="modalVatRecoveryTC">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Vat-Recovery Program TC' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Vat-Recovery Program TC' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Vat-Recovery Program TC', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Vat-Recovery Program TC', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog" style="width: 50%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalVatRecoveryTC]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable'); 
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_08_Tankkarte_Step_8_Additional');" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['TC LIGHTBOX HEADING'].Value__c }
                                                                <a class="btn btn-xs payment-modal" 
                                                                   style="display: none;"
                                                                   id="printVatTC"
                                                                   onclick="printDocument('fullFrameVatRecoveryProgramTC'); 
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_08_Tankkarte_Step_8_Additional');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a class="btn btn-xs payment-modal" 
                                                                   href="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['TC DOWNLOAD URL'].Value__c }" 
                                                                   onclick="analytics_onClickButtonSendUI('click','popup: download','UI_08_Tankkarte_Step_8_Additional');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <script type="text/javascript">
                                                            document.getElementById('fullFrameVatRecoveryProgramTC').onload = function() {
                                                                document.getElementById('printVatTC').style.display = 'inline-block';
                                                            }
                                                        </script>
                                                        <div class="modal-body sepa-modal-body">
                                                            <iframe
                                                                id="fullFrameVatRecoveryProgramTC"
                                                                name="fullFrameVatRecoveryProgramTC"
                                                                src="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['TC IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalVatRecoveryTC]').hide(); 
                                                                                 $j('[id$=activeInnerPageName]').val(''); 
                                                                                 scrollDisableControl('enable'); 
                                                                                 analytics_onClickButtonSendUI('click','popup: ok','UI_08_Tankkarte_Step_8_Additional');"
                                                                        class="btn btn-red"
                                                                        style="min-width: 120px">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['TC LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL DOCUMENTS AGREEMENT (CONTRACT ASSIGNMENT + DEPOSIT AGREEMENT) -->
                                    <apex:actionFunction name="showDocumentsModal" action="{! showDocumentsModal }" reRender="modalDocsAgreement" status="splashStatus"/>
                                    <apex:outputPanel layout="block" id="modalDocsAgreement">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'ModalDocuments' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'ModalDocuments' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'ModalDocuments', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'ModalDocuments', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalDocsAgreement]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable'); 
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_10_Tankkarte_Step_10_AttentionSign')" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['LIGHTBOX HEADING'].Value__c }
                                                                <!-- <a class="btn btn-xs payment-modal" 
                                                                   onclick="printDocument('fullFrameDocuments'); 
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_10_Tankkarte_Step_10_AttentionSign');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a class="btn btn-xs payment-modal" 
                                                                   href="{! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['DOWNLOAD URL'].Value__c }" 
                                                                   onclick="analytics_onClickButtonSendUI('click','popup: download','UI_10_Tankkarte_Step_10_AttentionSign');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a> -->
                                                            </div>
                                                        </div>
                                                        <div class="modal-body sepa-modal-body">
                                                            <iframe
                                                                id="fullFrameDocuments"
                                                                name="fullFrameDocuments"
                                                                src="{! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalDocsAgreement]').hide(); 
                                                                                 $j('[id$=activeInnerPageName]').val(''); 
                                                                                 scrollDisableControl('enable'); 
                                                                                 analytics_onClickButtonSendUI('click','popup: ok','UI_10_Tankkarte_Step_10_AttentionSign');"
                                                                        class="btn btn-red"
                                                                        style="min-width: 120px">
                                                                        {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL TERMS AND CONDITIONS ON DOCUMENTS STEP -->
                                    <apex:outputPanel layout="block" id="modalTermsAndConditions">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'ModalTermsAndConditions' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'ModalTermsAndConditions' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'ModalTermsAndConditions', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'ModalTermsAndConditions', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalTermsAndConditions]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable');
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_10_Tankkarte_Step_10_AttentionSign');" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LIGHTBOX HEADING'].Value__c }
                                                                <a class="btn btn-xs payment-modal" 
                                                                   style="display: none;"
                                                                   id="printTC"
                                                                   onclick="printDocument('frameTermsConditions'); 
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_10_Tankkarte_Step_10_AttentionSign');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a class="btn btn-xs payment-modal" 
                                                                   href="{! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['DOWNLOAD URL'].Value__c }" 
                                                                   onclick="analytics_onClickButtonSendUI('click','popup: download','UI_10_Tankkarte_Step_10_AttentionSign');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <script type="text/javascript">
                                                            document.getElementById('frameTermsConditions').onload = function() {
                                                                document.getElementById('printTC').style.display = 'inline-block';
                                                            }
                                                        </script>
                                                        <div class="modal-body sepa-modal-body">
                                                            <iframe
                                                                id="frameTermsConditions"
                                                                name="frameTermsConditions"
                                                                src="{! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalTermsAndConditions]').hide(); 
                                                                                 $j('[id$=activeInnerPageName]').val(''); 
                                                                                 scrollDisableControl('enable'); 
                                                                                 analytics_onClickButtonSendUI('click','popup: ok','UI_10_Tankkarte_Step_10_AttentionSign');"
                                                                        class="btn btn-red"
                                                                        style="min-width: 120px">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>


                                    <!-- MODAL DIRECT DEBIT MANDATE ACCEPTANCE -->
                                    <apex:actionFunction name="showDDmandateAcceptanceDoc" action="{! showDDmandateAcceptanceDocModal }" reRender="modalDDmandateAcceptance" status="splashStatus"/>
                                    <apex:outputPanel layout="block" id="modalDDmandateAcceptance">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'ModalDDmandateAcceptance' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'ModalDDmandateAcceptance' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'ModalDDmandateAcceptance', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'ModalDDmandateAcceptance', 'display: block; padding-right: 17px;', '')}">
                                                <div class="modal-dialog" style="width: 800px;">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalDDmandateAcceptance]').hide(); 
                                                                        $j('[id$=activeInnerPageName]').val(''); 
                                                                        scrollDisableControl('enable'); 
                                                                        analytics_onClickButtonSendUI('click','popup: close','UI_12_Tankkarte_Step_12_Success');" 
                                                               class="close"/>
                                                            <div class="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. LIGHTBOX HEADING'].Value__c }
                                                                <a class="btn btn-xs payment-modal" 
                                                                   style="display: none;"
                                                                   id="printTC"
                                                                   onclick="printDocument('fullFrameDDmandateAcceptance'); 
                                                                            analytics_onClickButtonSendUI('click','popup: print','UI_12_Tankkarte_Step_12_Success');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "print.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                                <a  class="btn btn-xs payment-modal" 
                                                                    href="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOWNLOAD URL'].Value__c }" 
                                                                    onclick="analytics_onClickButtonSendUI('click','popup: download','UI_12_Tankkarte_Step_12_Success');">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "download.png" )}" height="20px" width="20px"/>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <script type="text/javascript">
                                                            document.getElementById('fullFrameDDmandateAcceptance').onload = function() {
                                                                document.getElementById('printTC').style.display = 'inline-block';
                                                            }
                                                        </script>
                                                        <div class="modal-body sepa-modal-body">
                                                            <iframe
                                                                id="fullFrameDDmandateAcceptance"
                                                                name="fullFrameDDmandateAcceptance"
                                                                src="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. IFRAME URL'].Value__c }"
                                                                width="100%"
                                                                height="100%"
                                                                style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalDDmandateAcceptance]').hide(); 
                                                                                 $j('[id$=activeInnerPageName]').val(''); 
                                                                                 scrollDisableControl('enable'); 
                                                                                 analytics_onClickButtonSendUI('click','popup: ok','UI_12_Tankkarte_Step_12_Success');"
                                                                        class="btn btn-red"
                                                                        style="min-width: 120px">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </div>

                            <!-- RIGHT BLOCK -->
                            <div class="col-lg-4">
                                <apex:outputPanel id="details-info" layout="block" styleClass="details-content">
                                    <!-- STEP 0. INFO BLOCK -->
                                    <apex:outputPanel layout="block" id="step-0" rendered="{! activeStep = 0 && activeSubstep = 'Contact details' }">
                                        <div class="row" style="margin-top: 36px;">
                                            <div class="col-lg-12">
                                                <div class="b-what-need">
                                                    <div class="b-col-header">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['HEADING'].Value__c }
                                                    </div>
                                                    <div class="font-15" style="margin-bottom: 20px;">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['SUBHEADING'].Value__c }
                                                    </div>
                                                    <ul class="need-list font-15">
                                                        <li>
                                                            <div class="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1'].Value__c }
                                                            </div>
                                                            <div class="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1 VALUE'].Value__c }
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2'].Value__c }
                                                            </div>
                                                            <div class="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2 VALUE'].Value__c }
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3'].Value__c }
                                                            </div>
                                                            <div class="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3 VALUE'].Value__c }
                                                            </div>
                                                        </li>
                                                    </ul>
                                                    <div class="b-splitter" style="margin: 20px 0 10px 0;"></div>
                                                    <apex:outputPanel styleClass="warn"><apex:image url="{!URLFOR($Resource.e2e_images, 'warn.png')}"/></apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="font-15 warn-msg">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- ORDER DETAILS -->
                                    <apex:outputPanel id="orderDetails" styleClass="ym-hide-content">
                                        <apex:outputPanel layout="block" styleClass="b-order-details" 
                                            rendered="{! AND(
                                                activeStep != 0, 
                                                activeStep != null, 
                                                activeSubStep != 'Congratulations', 
                                                activeSubStep != 'Private entity', 
                                                activeSubStep != 'Too many reports', 
                                                activeSubStep != 'Authorization not granted', 
                                                activeSubStep != 'Black list', 
                                                activeSubStep != 'System error',
                                                activeSubStep != 'Stop order', 
                                                activeSubStep != 'Too risky', 
                                                activeSubStep != 'Risky but manageable',
                                                activeSubStep != 'Report does not exist',
                                                activeSubStep != 'Company not found',
                                                activeSubStep != 'Already in process',
                                                activeSubStep != 'Already a customer',
                                                activeSubStep != 'Too high limit. Additional Credit Scoring Allowance') }">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="details">
                                                        <apex:outputPanel layout="block" styleClass="b-col-header">
                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['TOP HEADING']['HEADING'].Value__c }</apex:outputPanel>
                                                        <apex:outputPanel rendered="{! AND(numberOfCards != null, numberOfCards != 0) }">
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="fees-costs" style="width: 95%;">
                                                                        <apex:outputPanel rendered="{! activeSubStep != 'Card configuration' }">
                                                                            <div class="detail-header">
                                                                                {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c) }
                                                                            </div>
                                                                            <apex:outputPanel styleClass="edit" rendered="{! AND(activeStep > 1, activeSubStep != 'Card configuration') }">
                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                <apex:commandLink action="{! editCardsFeesAndCosts }"
                                                                                    oncomplete="toViewport('top-heading-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                    onclick="analytics_onClickOrderButtonSendUI('changeCardsConfig', '{! activeSubStep }');"
                                                                                    styleClass="font-11"
                                                                                    style="color: #0093EE;"
                                                                                    reRender="stepList, formBlock, messageBlock, orderDetails, onlineChatBlock"
                                                                                    status="splashStatus">
                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['EDIT BUTTON'].Value__c }
                                                                                </apex:commandLink>
                                                                            </apex:outputPanel>
                                                                            <div class="detail-item">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['CARDS DESCRIPTION'].Value__c }
                                                                            </div>
                                                                            <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                                                <apex:outputPanel rendered="{! costItem.contentName != 'REGULAR BANK TRANSFER HEADING' }">
                                                                                    <div class="detail-item">
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c + ":" }
                                                                                    </div>
                                                                                    <div class="detail-item">
                                                                                        {! costItem.costValue } {! costItem.costTariff } ({! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-PER-'].Value__c } {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c ) })
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </apex:repeat>
                                                                            <div class="collapse-block" style="margin: 10px 0 25px 0; ">
                                                                                <div class="link" data-toggle="collapse" data-target="#moreOrderDetails">
                                                                                    <apex:outputPanel styleClass="more">
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['MORE DETAILS'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel styleClass="less" style="display: none;">
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['MORE DETAILS HIDE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <div class="expander expend-detail inline-block" ></div>
                                                                                </div>
                                                                                <div class="row collapse" id="moreOrderDetails">
                                                                                    <div class="detail-item more">
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['NATIONAL HEADING'].Value__c }
                                                                                        <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                                            <div class="item" style="margin-top: 0; height: auto;">
                                                                                                <div class="f-item inline-block" style="max-width: 200px; height: auto;">
                                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                                </div>
                                                                                                <div class="f-val inline-block">
                                                                                                    {! costItem.costValue } {! costItem.costTariff }
                                                                                                </div>
                                                                                            </div>
                                                                                        </apex:repeat>
                                                                                    </div>
                                                                                    <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                                                        <div class="detail-item more">
                                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['INTERNATIONAL HEADING'].Value__c }
                                                                                            <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                                                <div class="item">
                                                                                                    <div class="f-item inline-block">
                                                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                                    </div>
                                                                                                    <div class="f-val inline-block">
                                                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                                                    </div>
                                                                                                </div>
                                                                                            </apex:repeat>
                                                                                        </div>
                                                                                    </apex:outputPanel>
                                                                                    <div class="detail-item more">
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['TRANSACTION REMARK'].Value__c }
                                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['TRANSACTION REMARK HELP'].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="row" rendered="{! AND(opportunity.CF_Credit_Limit__c != null, opportunity.CF_Credit_Limit__c != 0) }">
                                                            <div class="col-lg-12">
                                                                <div class="card-limit-detail" style="width: 95%;">
                                                                    <div class="detail-header">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['HEADING'].Value__c }
                                                                    </div>
                                                                    <apex:outputPanel styleClass="edit" rendered="{! activeStep > 1 }">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        <apex:commandLink action="{! editCreditLimit }"
                                                                            oncomplete="validateCreditLimit(false); toViewport('top-heading-viewport'); setEvents_creditLimit(); onPageRender();"
                                                                            styleClass="font-11" style="color: #0093EE;"
                                                                            onclick="analytics_onClickOrderButtonSendUI('changePaymentMethod', '{! activeSubStep }');"
                                                                            reRender="stepList, formBlock, messageBlock, orderDetails, feescosts-block, onlineChatBlock"
                                                                            status="splashStatus">
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['EDIT BUTTON'].Value__c }
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                    <div class="detail-item">
                                                                        {! opportunity.CF_Credit_Limit__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                                                    </div>
                                                                    <apex:outputPanel layout="block" styleClass="detail-item" rendered="{! AND(opportunity.Security_Amount_To_Pay__c != 0, opportunity.Security_Amount_To_Pay__c != null) }">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['DEPOSIT REQUIRED'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['UNIT'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="detail-item" rendered="{! OR(opportunity.Security_Amount_To_Pay__c = 0, opportunity.Security_Amount_To_Pay__c = null) }">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['DEPOSIT NOT REQUIRED'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <div class="detail-item">
                                                                        {! IF(opportunity.Rechnungsperiode__c = '7', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['WEEKLY INVOICES'].Value__c, IF(opportunity.Rechnungsperiode__c = '15', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['BI-WEEKLY INVOICES'].Value__c, '')) }
                                                                    </div>
                                                                    <div class="detail-item">
                                                                        {! IF(opportunity.Zahlungsart__c = 'Lastschrift', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['DIRECT DEBIT'].Value__c, IF(opportunity.Zahlungsart__c = 'Bankberweisung', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT LIMIT']['BANK TRANSFER'].Value__c, '')) }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel id="prognosedPumpDetails" layout="block" styleClass="row" rendered="{! AND(opportunity.Total_consumption_l_month__c != null, opportunity.Credit_System_Number__c != null) }">
                                                            <div class="col-lg-12">
                                                                <div class="consumption" style="width: 95%;">
                                                                    <div class="detail-header">
                                                                        <span data-html="true">
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['HEADING PART 1'].Value__c }<br/>
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['HEADING PART 2'].Value__c }
                                                                        </span>
                                                                        <apex:outputPanel styleClass="edit" rendered="{! AND(activeStep > 0, activeSubStep != 'Set total consumption', activeSubStep != 'Search company') }">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                            <apex:commandLink action="{! editTotalConsumption }"
                                                                                oncomplete="toViewport('top-heading-viewport'); setEvents_fuelConsumption(); onPageRender();"
                                                                                styleClass="font-11"
                                                                                onclick="analytics_onClickOrderButtonSendUI('changefuelAmount', '{! activeSubStep }');"
                                                                                style="color: #0093EE; font-family: 'Montserrat'; font-weight: 400;"
                                                                                reRender="stepList, formBlock, messageBlock, feescosts-block, orderDetails, onlineChatBlock"
                                                                                status="splashStatus">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['EDIT BUTTON'].Value__c }
                                                                            </apex:commandLink>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="detail-item">
                                                                        {! opportunity.Total_consumption_l_month__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['UNIT'].Value__c }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="row" rendered="{! AND(selectedCompany.identificationnumber != null, selectedCompany.identificationnumber != 'null') }">
                                                            <div class="col-lg-12">
                                                                <div class="company-detail" style="margin-bottom: 20px">
                                                                    <div class="detail-header">
                                                                        {! selectedCompany.name }
                                                                        <apex:outputPanel styleClass="edit" rendered="{! AND(activeStep > 0, activeSubStep != 'Search company') }">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                            <apex:commandLink action="{! editCompanyDetails }"
                                                                                oncomplete="toViewport('top-heading-viewport'); setEvents_companyDetails(); validateCompanyDetails(false); onPageRender();"
                                                                                styleClass="font-11"
                                                                                onclick="analytics_onClickOrderButtonSendUI('changeCompanyData', '{! activeSubStep }');"
                                                                                style="color: #0093EE; font-family: 'Montserrat'; font-weight: 400;"
                                                                                reRender="stepList, formBlock, info-block, messageBlock, orderDetails, onlineChatBlock" status="splashStatus">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['COMPANY INFO']['EDIT BUTTON'].Value__c }
                                                                            </apex:commandLink>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="detail-item">
                                                                        {! selectedCompany.street } {! selectedCompany.housenumber }{! IF(selectedCompany.postcode != null, ', ' +
                                                                        selectedCompany.postcode, '') }{! IF(selectedCompany.city != null, ', ' +
                                                                        selectedCompany.city, '') }{! IF(selectedCompany.country != null, ', ' +
                                                                        selectedCompany.country, '') }
                                                                    </div>
                                                                    <div class="detail-footer">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['COMPANY INFO']['REMARK'].Value__c }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="row" rendered="{! contact != null }">
                                                            <div class="col-lg-12">
                                                                <div class="contact-person" style="margin-bottom: 20px">
                                                                    <div class="detail-header">
                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['HEADING'].Value__c }
                                                                    </div>
                                                                    <apex:outputPanel styleClass="edit" rendered="{! activeStep > 0 }">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        <apex:commandLink action="{! editContactDetails }"
                                                                            oncomplete="validateContactDetails(false); toViewport('top-heading-viewport'); setEvents_contactDetails();"
                                                                            styleClass="font-11"
                                                                            style="color: #0093EE;"
                                                                            onclick="analytics_onClickOrderButtonSendUI('changeContactsData', '{! activeSubStep }');"
                                                                            reRender="stepList, formBlock, info-block, details-info, messageBlock, orderDetails, onlineChatBlock"
                                                                            status="splashStatus">
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['EDIT BUTTON'].Value__c }
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                    <div class="detail-item">
                                                                        {! IF(contact.Salutation = stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MR API'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MR LABEL'].Value__c, IF(contact.Salutation = stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MRS API'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MRS LABEL'].Value__c, '')) }
                                                                        {! contact.FirstName } {! contact.LastName }
                                                                    </div>
                                                                    <div class="detail-item">{! contact.Email }</div>
                                                                    <div class="detail-item">{! contact.Phone }</div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </div>
                        </div>
                        <apex:outputPanel id="info-block" layout="block" styleClass="addition-info">
                            <!-- STEP 0. ADDITION BLOCK -->
                            <apex:outputPanel layout="block" styleClass="contact-details-info" rendered="{! activeStep = 0 && activeSubStep = 'Contact details'}">
                                <div class="row">
                                    <div class="b-why">
                                        <div class="b-header">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['HEADING'].Value__c }
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="why-info">
                                                <div class="b-col-header">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['SUBHEADING 1'].Value__c }
                                                </div>
                                                <div class="why-desc">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['BODY OF BLOCK 1'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="why-info">
                                                <div class="b-col-header">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['SUBHEADING 2'].Value__c }
                                                </div>
                                                <div class="why-desc">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['BODY OF BLOCK 2'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="why-info">
                                                <div class="b-col-header">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['SUBHEADING 3'].Value__c }
                                                </div>
                                                <div class="why-desc">
                                                    {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 1']['BODY OF BLOCK 3'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-cards-type">
                                        <div class="b-header">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['HEADING'].Value__c }
                                        </div>
                                        <div class="cards-types">
                                            <table class="table table-striped">
                                                <thead>
                                                <tr>
                                                    <th></th>
                                                    <th><div>{! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['TABLE COLUMN 1 NAME'].Value__c }</div></th>
                                                    <th><div>{! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['TABLE COLUMN 2 NAME'].Value__c }</div></th>
                                                    <th><div>{! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 2']['TABLE COLUMN 3 NAME'].Value__c }</div></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                <tr>
                                                    <td><div>{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['CARD TYPE NAME'].Value__c }</div></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['VEHICLE RELATED PRODUCTS'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['ALL FUEL'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                    <td><apex:outputPanel layout="block" rendered="{! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['DIESEL ONLY'].Value__c = 'true' }"><apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/></apex:outputPanel></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-how-pay" style="margin: 20px 15px 0 15px;">
                                        <div class="b-header">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 3']['HEADING'].Value__c }
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="pay-info">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['INFO BLOCK 3']['BODY OF BLOCK'].Value__c }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>

                            <!-- STEP 1. ADDITION BLOCK -->
                            <apex:outputPanel layout="block" styleClass="contact-details-info" rendered="{! AND(activeStep = 1, activeSubStep = 'Search company') }">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="desc font-12" style="margin-top: 30px">
                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 1']['BODY OF BLOCK'].Value__c }
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-what-credit">
                                        <div class="b-header">
                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 2']['HEADING'].Value__c }
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="desc font-15" style="margin-bottom: 25px">
                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 2']['BODY OF BLOCK'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="info">
                                                <div class="b-col-header">
                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 2']['SUBHEADING 1'].Value__c }
                                                </div>
                                                <div class="desc font-15">
                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK 2']['BODY OF SUBBLOCK 1'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>

                            <!-- STEP CONGRATULATION. ADDITION BLOCK -->
                            <apex:outputPanel layout="block" styleClass="congratulations-info" rendered="{! AND(activeStep = 5, activeSubStep = 'Congratulations') }">
                                <div class="row">
                                    <div class="b-assistance">
                                        <div class="b-header">
                                            {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TOP HEADING'].Value__c }
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="font-15">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" >
                                    <div style="margin-top: 20px;">
                                        <div class="col-lg-4">
                                            <div class="b-col-header" style="margin-top: 10px">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 1'].Value__c }
                                            </div>
                                            <div class="font-15">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK SUBBLOCK 1'].Value__c }
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="b-col-header" style="margin-top: 10px">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 2'].Value__c }
                                            </div>
                                            <apex:outputPanel layout="block" styleClass="font-15" rendered="{! OR( opportunity.Garantie_other__c != null, AND(opportunity.Garantie_other__c = null, OR(paymentStatus = 'A', paymentStatus = 'C', paymentStatus = null))) }">
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['PHONE SUBBLOCK 2 SUCCESS'].Value__c }
                                                </div>
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 SUCCESS'].Value__c }
                                                </div>
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['WORK TIME SUBBLOCK 2 SUCCESS'].Value__c }
                                                </div>
                                            </apex:outputPanel>

                                            <apex:outputPanel layout="block" styleClass="font-15" rendered="{! AND(opportunity.Garantie_other__c = null, OR(paymentStatus = 'D', paymentStatus = 'E')) }">
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['PHONE SUBBLOCK 2 UNSUCCESS'].Value__c }
                                                </div>
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 UNSUCCESS'].Value__c }
                                                </div>
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['WORK TIME SUBBLOCK 2 UNSUCCESS'].Value__c }
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </div>
                </div>
            </main>
            <footer>
                <div class="container">
                    <div class="row">
                        <div class="col-lg-5">
                            <div class="fleetcor">
                                <div class="b-page-logo" style="margin: 45px 0 20px 30px">
                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'logo.png')}"/>
                                </div>
                                <div class="fleetcor-desc text-muted">
                                    {! stepPagesMap['FOOTER'].elements['DESCRIPTION']['VALUE'].Value__c }
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="company-links">
                                <div class="footer-col-header font-14" style="width: 225px">
                                    {! stepPagesMap['FOOTER'].elements['OUR COMPANY']['HEADING'].Value__c }
                                </div>
                                <div class="font-13" style="margin: 10px 0">
                                    <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 1'].Value__c }" target="_blank">
                                        {! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 1 LABEL'].Value__c }
                                    </apex:outputLink>
                                </div>
                                <div class="font-13" style="margin: 10px 0">
                                    <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 2'].Value__c }" target="_blank">
                                        {! stepPagesMap['FOOTER'].elements['OUR COMPANY']['URL 2 LABEL'].Value__c }
                                    </apex:outputLink>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="legal-links">
                                <div class="footer-col-header font-14" style="width: 345px">
                                    {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['HEADING'].Value__c }
                                </div>
                                <div class="t">
                                    <div class="t-row">
                                        <div class="t-cell">
                                            <div class="font-13" style="margin: 10px 0 0 0;">
                                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 1'].Value__c }" target="_blank">
                                                    {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 1 LABEL'].Value__c }
                                                </apex:outputLink>
                                            </div>
                                        </div>
                                        <div class="t-cell">
                                            <div class="font-13" style="margin: 10px 0 0 0;">
                                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 2'].Value__c }" target="_blank">
                                                    {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 2 LABEL'].Value__c }
                                                </apex:outputLink>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="t-row">
                                        <div class="t-cell">
                                            <div class="font-13" style="margin: 10px 0 0 0; width: 147px;">
                                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 3'].Value__c }" target="_blank">
                                                    {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 3 LABEL'].Value__c }
                                                </apex:outputLink>
                                            </div>
                                        </div>
                                        <div class="t-cell">
                                            <div class="font-13" style="margin: 10px 0 0 0;">
                                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 4'].Value__c }" target="_blank">
                                                    {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 4 LABEL'].Value__c }
                                                </apex:outputLink>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="t-row">
                                        <div class="t-cell">
                                            <div class="font-13" style="margin: 10px 0 0 0;">
                                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 5'].Value__c }" target="_blank">
                                                    {! stepPagesMap['FOOTER'].elements['LEGAL INFORMATION']['URL 5 LABEL'].Value__c }
                                                </apex:outputLink>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="b-copyright">
                            <div>
                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['COPYRIGHT']['URL'].Value__c }" target="_blank">
                                    {! stepPagesMap['FOOTER'].elements['COPYRIGHT']['VALUE'].Value__c }
                                </apex:outputLink>
                            </div>
                        </div>
                    </div>
                    <!-- CHAT BLOCK -->
                    <div class="chat-button" id="chat-button-offline" style="display: none;" onclick="setupOfflineChat(); return false;">
                        <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
                    </div>
                    <div  class="chat-button" id="chat-button-online" style=" display: none;" onclick="setupOnlineChat(); return false;">
                        <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
                    </div>
                    <div class="chat-box" id="chatOfflineBlock">
                        <span>
                            <div class="no_save no_brand" id="liveAgentClientChatSettings">
                                <div class="liveAgentState" id="liveAgentClientChat">
                                    <div class="chat-header">{! pageMapChat['CHAT'].elements['CHAT HEADING']['TEXT'].Value__c }
                                        <span id="clientChatEndButtonID">
                                            <button class="close liveAgentEndButton" onclick="closeChat('offline'); return false;" />
                                        </span>
                                    </div>
                                    <div class="chat-status">
                                        {! pageMapChat['CHAT'].elements['CHAT OFFLINE']['VALUE'].Value__c }
                                    </div>
                                    <div>
                                        <div>
                                            <span>
                                                <div class="liveAgentAlert" id="liveAgentMessageContainer"></div>
                                            </span>
                                            <div style="word-wrap: break-word; padding-top:1px;">
                                                <span>
                                                    <div class="liveAgentChatElement" id="liveAgentChatLog">
                                                        <div id="liveAgentChatLogText" class="liveAgentChatLogText" style="margin-top:10px;">
                                                            <span class="chat-operator">
                                                                <span class="chat-name"><strong>FLEETCOR</strong>
                                                                    <span class="chat-customDateTime" style="display: inline"></span>
                                                                </span>
                                                                <span class="chat-messageText">
                                                                        {! pageMapChat['CHAT'].elements['CHAT OFFLINE GREETING']['VALUE'].Value__c }
                                                                </span>
                                                            </span>
                                                        </div>
                                                        <span class="chat-operator" id="liveAgentChatLogTyping" style="display: none;"></span>
                                                    </div>
                                                </span>
                                            </div>
                                            <div class="col-xs-9 col-lg-9 col-md-9 col-sm-9" style="padding: 0px;">
                                                <span>
                                                    <div class="liveAgentChatElement liveAgentChatInput" id="liveAgentChatInput">
                                                        <textarea class="liveAgentChatTextArea" id="liveAgentChatTextArea" maxlength="6000"
                                                                  placeholder=" {! pageMapChat['CHAT'].elements['TEXTAREA']['PLACEHOLDER'].Value__c }" wrap="soft" data-uidsfdc="3" />
                                                    </div>
                                                </span>
                                            </div>
                                            <div class="col-xs-3 col-lg-3 col-md-3 col-sm-3" style="padding: 0px;">
                                                <span>
                                                    <button class="liveAgentChatElement liveAgentSendButton" onclick="updateOfflineChat();return false;" > {! pageMapChat['CHAT'].elements['SEND BUTTON']['TEXT'].Value__c} </button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </span>
                    </div>
                    <div class="chat-box" id="chatOnlineBlock">
                        <div class="chat-header" style="margin:0px;">
                              <button class="close liveAgentEndButton"
                                      onclick="closeChat('online'); return false;"
                                      style="position:absolute; right:6px; top:8px;"
                                      id="clientChatEndButtonID" label="x">
                              </button>
                        </div>
                    </div>
                    <div class="lightbox"></div>
                </div>
            </footer>
        </body>
    </apex:form>
    <!-- PAYMENT FORM -->
    <apex:outputPanel id="paymentFormToSend" style="display: none;" >
        <form class="paymentFormToSubmit" method="POST" action="{! paymentURL }" id="paymentFormToSubmit">
            <apex:repeat value="{! paymentParameters }" var="param">
                <input type="hidden"  name="{! param }" value="{! paymentParameters[param] }" />
            </apex:repeat>
        </form>
    </apex:outputPanel>
</apex:page>