<apex:page id="e2eformmobpl" language="en_US" controller="LongFormMobilePLController" action="{! init }" sidebar="false" showHeader="false" standardStylesheets="false" cache="false" docType="html-5.0">
    <apex:form id="form" styleClass="form-horizontal" html-autocomplete="off">
        <head>
            <!-- PRODUCTION GTM -->
            <apex:outputPanel rendered="{! CONTAINS($CurrentPage.URL,'online.fleetcor.pl')  }">
                <!-- Google Tag Manager -->
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-5Q75TR9');</script>
                <!-- End Google Tag Manager -->            
            </apex:outputPanel>

            <!-- SANDBOX GTM -->
            <apex:outputPanel rendered="{! NOT(CONTAINS($CurrentPage.URL,'online.fleetcor.pl')) }">
                <!-- Google Tag Manager after head -->
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-5V5GWZ9');</script>
                <!-- End Google Tag Manager -->                 
            </apex:outputPanel>            

            <!-- scripts -->
            <script src="{!$Resource.E2E_PL_Mobile_Min}"/>
            <!-- to compress -->
            <!-- <apex:includeScript value="{!$Resource.jQuery}"/>          -->
            <!-- <apex:includeScript value="{!$Resource.E2EBootstrap}"/> -->
            <!-- <apex:includeScript value="{!$Resource.e2e_scripts_pl_mobile}"/> -->
            <!-- <apex:includeScript value="{!$Resource.E2E_Analytics_PL_Mobile}"/> -->

            <!-- styles -->
            <link href="{!$Resource.E2E_PL_Mobile_Styles_Min}" rel="stylesheet" type="text/css"/>
            <!-- to compress -->            
            <!-- <apex:stylesheet value="{! URLFOR($Resource.jQueryUI,'jquery-ui-1.12.1/jquery-ui.css') }"/> -->
            <!-- <apex:stylesheet value="{!URLFOR($Resource.bootstrap_3_3_7,'bootstrap-3.3.7/css/bootstrap.min.css')}"/> -->
            <!-- <apex:stylesheet value="{!$Resource.E2EFont}"/> -->
            <!-- <apex:stylesheet value="{!$Resource.e2e_style_pl_desktop}"/> -->
            <!-- <apex:stylesheet value="{!$Resource.e2e_style_pl_mobile}"/> -->
            <!-- <apex:stylesheet value="{!URLFOR($Resource.E2ESpinner, 'spinner.css')}"/>             -->

            <apex:outputPanel id="lazyLoadId">
                <script>
                    function lazyLoadScripts() {
                        if ('{! activeStep }' != '' && '{! activeStep }' != '0') {
                            // slider
                            $j.getScript("{! URLFOR($Resource.jQueryUI,'jquery-ui-1.12.1/jquery-ui.js') }", function() {
                                $j.getScript("{!$Resource.jqueryUiTtouch}", function() {
                                    createSlider('slider', 'creditLimitInput', 'idInputHidden', 100, 100, 600);                                    
                                    setEvents_slider();
                                });    
                            });

                            // chat
                            $j.getScript("{!URLFOR($Resource.e2eLiveAgentDeployment)}", function() {
                                setChatOptions();
                            });
                        }  
                    }
                </script> 
            </apex:outputPanel>

            <!-- <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet"/> -->

            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
            <apex:outputPanel rendered="{! isTablet }">
                <meta name="format-detection" content="telephone=no"/>
            </apex:outputPanel>
            <link rel="shortcut icon" href="{!$Resource.FleetcorFavicon}" type="image/x-icon;"/>
            <title>{! stepPagesMap['HEADER'].elements['TOP HEADING']['VALUE'].Value__c }</title>
            <style type="text/css">
                .i-error {
                    display: inline-block;
                    margin-right: 5px;
                    vertical-align: top;
                    font-family: 'Montserrat';
                    width: 16px;
                    height: 16px;
                    font-weight: 500;
                    line-height: 15px;
                    text-align: center;
                    border-radius: 100%;
                    cursor: default;
                    font-size: 10px;
                    border: 1px solid #EE3A43;
                    color: #EE3A43;
                    opacity: 0.8;
                    text-decoration: none;
                }
                            
                .loadingField {
                    ground-color: #ffffff;
                    background-image: url({!URLFOR($Resource.E2ESpinner, 'field-spinner.gif')}) !important;
                    background-size: 15px 15px;
                    background-position: 90% center;
                    background-repeat: no-repeat;
                }

                .splashStatus .circle {
                    width: 60px;
                    margin: 0 auto;
                    margin-left: -40px;
                } 

                .block-expand {
                    cursor: pointer;
                    width: 10px;
                    height: 12px;
                    background: url({!URLFOR($Resource.e2e_images, 'down.png')}) no-repeat;
                    float: right;
                    margin: 10px 10px;
                }

                .block-collapse {
                    cursor: pointer;
                    width: 10px;
                    height: 12px;
                    background: url({!URLFOR($Resource.e2e_images, 'up.png')}) no-repeat;
                    float: right;
                    margin: 10px 10px;
                }

                @media screen and (max-width: 1367px) {
                    .wrapper-collapsed .collapse-block .block-collapse,
                    .special-offers .block-collapse,
                    .congratulations .block-collapse,
                    .blue-block .block-collapse,
                    .payment-direct-debit-deposit .block-collapse {
                        float: unset;
                        margin: 0 0 -5px 8px;
                        background: url({!URLFOR($Resource.e2e_images, 'collapse-arrow.png')}) no-repeat;
                    }

                    .wrapper-collapsed .collapse-block .block-expand,
                    .special-offers .block-expand,
                    .congratulations .block-expand,
                    .blue-block .block-expand,
                    .payment-direct-debit-deposit .block-expand {
                        float: unset;
                        margin: 0 0 -5px 8px;
                        background: url({!URLFOR($Resource.e2e_images, 'expend-arrow.png')}) no-repeat;
                    }

                    .m-help-info .block-expand,
                    .m-help-info .block-collapse {
                        margin: 8px 7px 10px 0px;
                    }

                    .credit-scoring .block-expand {
                        margin: 15px 10px;
                    }

                    .credit-scoring .block-collapse {
                        margin: 15px 10px;
                    }
                }

                .checkbox label::after {
                    display: inline-block;
                    position: absolute;
                    width: 16px;
                    height: 16px;
                    left: 0;
                    top: 3px;
                    margin-left: -20px;
                    color: #555555;
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                }

                .checkbox label::before {
                    content: "";
                    display: inline-block;
                    position: absolute;
                    width: 18px;
                    height: 18px;
                    left: 0;
                    top: 3px;
                    border: 2px solid #BDBDBD;
                    box-sizing: border-box;
                    margin-left: -20px;
                    background-color: #fff;
                    -webkit-transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
                    -o-transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
                    transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
                }

                .checkbox input[type="checkbox"]:checked + label::after{
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check.png')});
                }

                .radio input[type="radio"]:checked + label::after {
                    content: "";
                    padding-left: 5px;
                    font-size: 11px;
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                }

                .cards-list .card-item .delete a {
                    height: 24px;
                    width: 40px;
                    cursor: pointer;
                    display: inline-block;
                    background: url({!URLFOR($Resource.e2e_images, 'basket.png')}) no-repeat;
                }

                .cards-tech-parameters .card-badge {
                    width: 230px;
                    height: 145px;
                    display: inline-block;
                    margin: 35px 30px 5px 45px;
                    background: url({!URLFOR($Resource.e2e_images, 'card.png')}) no-repeat;
                }

                .modal-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }

                @media screen {
                /* Hide the special layer from the screen. */
                    #paymentInformation { display: none; }
                }

                /* Mobile */
                @media screen and (max-width: 1367px) {
                   .nav-gray .navbar-toggle.collapsed .collapse-bar {
                       margin: 3px 3px;
                       width: 16px;
                       height: 16px;
                       background: url({!URLFOR($Resource.e2e_images, 'nav-open.png')}) no-repeat;
                   }

                   .nav-gray .navbar-toggle .collapse-bar {
                       margin: 2px 4px;
                       width: 16px;
                       height: 16px;
                       background: url({!URLFOR($Resource.e2e_images, 'nav-close.png')}) no-repeat;
                   }                  
                }

                .category-link {
                    font-family: 'Montserrat';
                    font-style: normal;
                    font-weight: 500;
                    line-height: 18px;
                    font-size: 15px;
                    width: 105%;
                    margin: 0 0 15px 0px;
                    word-break: break-word;
                    display: inline-block;
                    position: relative;
                    padding-left: 5px;
                    color: #333 !important;
                }

                .category-link:before {
                    content: "";
                    display: inline-block;
                    position: absolute;
                    width: 18px;
                    height: 18px;
                    left: 0;
                    margin-left: -20px;
                    border-radius: 50%;
                    -webkit-transition: border 0.15s ease-in-out;
                    -o-transition: border 0.15s ease-in-out;
                    transition: border 0.15s ease-in-out;
                    background: rgba(0, 0, 0, 0.0001);
                    border: 2px solid rgba(0, 0, 0, 0.26);
                    box-sizing: border-box;
                }

                .category-link:after {
                    display: inline-block;
                    position: absolute;
                    content: "";
                    width: 18px;
                    height: 18px;
                    left: 3px;
                    top: 0;
                    margin-left: -23px;
                    border-radius: 100%;
                    background-color: #555555;
                    -webkit-transform: scale(0, 0);
                    -ms-transform: scale(0, 0);
                    -o-transform: scale(0, 0);
                    transform: scale(0, 0);
                    -webkit-transition: -webkit-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    -moz-transition: -moz-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    -o-transition: -o-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                    transition: transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
                }

                .category-link.active:before {
                    border-color: #d9534f;
                    content: "";
                    display: inline-block;
                    position: absolute;
                    width: 18px;
                    height: 18px;
                    left: 0;
                    margin-left: -20px;
                    border-radius: 50%;
                    -webkit-transition: border 0.15s ease-in-out;
                    -o-transition: border 0.15s ease-in-out;
                    transition: border 0.15s ease-in-out;
                    background: rgba(0, 0, 0, 0.0001);
                    border: 2px solid rgba(0, 0, 0, 0.26);
                    box-sizing: border-box;
                }

                .category-link.active:after {
                    content: "";
                    background: url({!URLFOR($Resource.e2e_images, 'check-circle.png')});
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                    -webkit-transform: unset;
                    -ms-transform: unset;
                    transform: unset;
                }

                .chat-header .close {
                    width: 15px;
                    height: 15px;
                    color: #3F536E;
                    opacity: 1;
                    margin: 7px 5px 5px 0;
                    background: url({!URLFOR($Resource.e2e_images, 'close.png')}) no-repeat;
                }

                .lightbox {
                    z-index: 1100;
                    opacity: 0.85;
                }

                .limit-info {
                    color: #7F7F7F;
                }

                .popover{
                    max-width: 100%;
                }                             

                .popover-title {
                    float: right;
                    display: inline-block;
                    border: 0;
                }
                
                @media (min-width: 1367px) {
                    .hidden-lgxl {
                        display: none!important;
                    }
                }                 
            </style>
        </head>
        <body class="modal-open" style="overflow: auto">
            <!-- PRODUCTION GTM -->
            <apex:outputPanel rendered="{! CONTAINS($CurrentPage.URL,'online.fleetcor.pl')  }">
                <!-- Google Tag Manager (noscript) -->
                <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5Q75TR9"
                height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
                <!-- End Google Tag Manager (noscript) -->          
            </apex:outputPanel>

            <!-- SANDBOX GTM -->
            <apex:outputPanel rendered="{! NOT(CONTAINS($CurrentPage.URL,'online.fleetcor.pl')) }">
                <!-- Google Tag Manager (noscript) after body -->
                <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5GWZ9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
                <!-- End Google Tag Manager (noscript)-->                 
            </apex:outputPanel> 
            <main>
                <apex:actionStatus id="splashStatus"
                    onstart="startSplash();"
                    onstop="endSplash(); "/>
                <div class="splashStatus" id="splashDiv">
                    <div class="circle">
                        <img src="{!URLFOR($Resource.e2e_images, 'preloader-loop.gif')}"/>
                    </div>
                </div>
                <apex:outputPanel id="onlineChatBlock">
                    <script>
                        function setupOnlineChat() {
                           startOnlineChat('{! chatURL }', '{! chatDeploymentId }', '{! chatDeploymentJsURL }', '{! $Organization.Id }'.slice(0,-3), '{! chatButtonId }', '{! contact.Id }'.slice(0,-3), '{! opportunity.Id }'.slice(0,-3), '{! opportunity.AccountId }'.slice(0,-3), '{! chatFirstMessage }', '{! activeStep }', '{! activeSubStep }','manual');
                           return false;
                        }
                        function setupOnlineAutoChat() {
                           startOnlineChat('{! chatURL }', '{! chatDeploymentId }', '{! chatDeploymentJsURL }', '{! $Organization.Id }'.slice(0,-3), '{! chatButtonId }', '{! contact.Id }'.slice(0,-3), '{! opportunity.Id }'.slice(0,-3), '{! opportunity.AccountId }'.slice(0,-3), '{! chatFirstMessage }', '{! activeStep }', '{! activeSubStep }','automatical');
                           return false;
                        }

                        function executeSetOpportunityFlagChat(modeOfChat){
                            setOpportunityFlagChat('{!opportunity.Id}', '{!activeStep}', '{!activeSubStep}', modeOfChat);
                        }

                        function executeSaveOfflineChat(offlineChatBody){
                            saveOfflineChat('{!opportunity.Id}','{!contact.Id}', '{!activeStep}', '{!activeSubStep}', offlineChatBody);
                        }

                        </script>
                </apex:outputPanel>
                    <script>
                        function setOpportunityFlagChat(oppId, activeStep, activeSubStep, modeOfChat){
                            Visualforce.remoting.Manager.invokeAction(
                                '{!$RemoteAction.LongFormMobilePLController.setFlagChatToOpportunity}',
                                oppId, activeStep, activeSubStep, modeOfChat,
                                function(result, event) {
                                     if (event.status) {

                                    } else if (event.type === 'exception') {
                                        console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                    } else {
                                        console.debug(document.getElementById("responseErrors").innerHTML = event.message);
                                    }
                                }
                            );
                        }

                        function saveOfflineChat(oppId, conId, activeStep, activeSubStep, offlineChatBody){
                            Visualforce.remoting.Manager.invokeAction(
                                '{!$RemoteAction.LongFormMobilePLController.saveOfflineChatLog}',
                                 oppId, conId, activeStep, activeSubStep, offlineChatBody,
                                 function(result, event) {
                                     if (event.status) {

                                    } else if (event.type === 'exception') {
                                        console.debug(event.message + "<br/>\n<pre>" + event.where + "</pre>");
                                    } else {
                                        console.debug(event.message);
                                    }
                                }
                            );
                        }
                    </script>
                <apex:actionFunction id="setupChatInit"
                    name="setupChatInit"
                    oncomplete="setupChatInitialization('{!chatURL}', '{!chatDeploymentId}', '{!$Organization.Id}'.slice(0,-3), '{!chatButtonId}', '', '', '', '', '{!activeStep}', '{!activeSubStep}','');"
                    reRender="setupChatInit" />
                <apex:actionFunction id="viewportInit"
                    name="viewportInit"
                    oncomplete="goToActiveViewport('{! activeStep }', '{! activeSubStep }');"/>

                <span id="top-heading-viewport"></span>
                <div class="container hidden-lgxl">
                    <apex:outputPanel id="pageHeader">
                        <apex:outputPanel rendered="{! activeSubstep != 'Congratulations' }">
                            <div class="row">
                                <nav class="navbar nav-gray">
                                    <div class="container-fluid">
                                        <div class="navbar-header">
                                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" style="{! IF(isTablet,'display: none !important;','') }">
                                                <div class="collapse-bar"></div>
                                            </button>
                                            <div class="b-page-logo">
                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'm-logo.png')}"/>
                                            </div>
                                        </div>
                                        <div class="collapse navbar-collapse" id="navbar">
                                            <ul class="nav navbar-nav menu">
                                                <li class="expanded">
                                                    <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['TOP HEADING'].Value__c }
                                                    </a>
                                                    <ul class="nav-list">
                                                        <li class="nav-item">
                                                            <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 1 LABEL'].Value__c }
                                                            </a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 2'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 1']['URL 2 LABEL'].Value__c }
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="expanded">
                                                    <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['TOP HEADING'].Value__c }
                                                    </a>
                                                    <ul class="nav-list">
                                                        <li class="nav-item">
                                                            <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 2']['URL 1 LABEL'].Value__c }
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="expanded">
                                                    <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['TOP HEADING'].Value__c }
                                                    </a>
                                                    <ul class="nav-list">
                                                        <li class="nav-item">
                                                            <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 1 LABEL'].Value__c }
                                                            </a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 2'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 3']['URL 2 LABEL'].Value__c }
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="expanded">
                                                    <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['TOP HEADING'].Value__c }
                                                    </a>
                                                    <ul class="nav-list">
                                                        <li class="nav-item">
                                                            <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 1'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 1 LABEL'].Value__c }
                                                            </a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 2'].Value__c }">
                                                                {! stepPagesMap['HEADER'].elements['INFO BLOCK 4']['URL 2 LABEL'].Value__c }
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="expanded">
                                                    <a href="{! stepPagesMap['HEADER'].elements['INFO BLOCK 5']['TOP HEADING URL'].Value__c }">
                                                        {! stepPagesMap['HEADER'].elements['INFO BLOCK 5']['TOP HEADING'].Value__c }
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </nav>
                            </div>
                            <div class="row">
                                <div class="b-page-header">
                                    {! stepPagesMap['HEADER'].elements['TOP HEADING']['VALUE'].Value__c }
                                </div>
                            </div>
                        </apex:outputPanel>
                    </apex:outputPanel>

                    <div class="b-block-form">
                        <div class="row">
                            <!-- START PAGE -->
                            <span id="get-started-viewport"></span>
                            <apex:outputPanel layout="block" id="startPage">
                                <apex:outputPanel layout="block" styleClass="col-xs-12 col-sm-12" rendered="{! AND(activeStep = 0, activeSubstep = 'Get started') }">
                                    <apex:outputPanel layout="block" styleClass="details-content">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <div class="b-what-need">
                                                    <apex:outputPanel layout="block" styleClass="b-col-header">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['TOP HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="font-13" style="margin-bottom: 13px;">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['SUBHEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <ul class="need-list font-13">
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 1 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 2 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                        <li>
                                                            <apex:outputPanel styleClass="point-list">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="point">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['ITEM 3 VALUE'].Value__c }
                                                            </apex:outputPanel>
                                                        </li>
                                                    </ul>
                                                    <div class="b-splitter" style="margin: 16px 0px 8px 0;"></div>
                                                    <apex:outputPanel styleClass="warn">
                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'warn.png')}" style="vertical-align: top; padding-top: 4px;"/>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="font-13 warn-msg">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['ONLINE ORDER REQUIREMENTS']['REMARK'].Value__c }
                                                    </apex:outputPanel>
                                                    <div class="row">
                                                        <div class="m-buttons center-block text-center">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <apex:commandButton value="{! stepPagesMap['CONTACT DETAILS'].elements['GET STARTED BUTTON']['VALUE'].Value__c }"
                                                                                    action="{! getStarted }"
                                                                                    reRender="formBlock, startPage, additionInfo, stepList, onlineChatBlock"
                                                                                    onComplete="setEvents_contactDetails();phoneMask('pl-js-phone', '+48', 11);"
                                                                                    styleClass="btn btn-red"
                                                                                    status="splashStatus"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            analytics_ZeroStepOnLoad();
                                        </script>                                        
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>

                            <!-- LEFT BLOCK -->
                            <div class="col-xs-12 col-sm-12">
                                <apex:outputPanel layout="block" styleClass="step-content" id="formBlock">
                                    <apex:outputPanel id="collapsedBlock"
                                        rendered="{! AND(
                                            activeStep != 5,
                                            activeSubStep != 'System error',
                                            activeSubStep != 'Stop order',
                                            activeSubStep != 'Too many reports',
                                            activeSubStep != 'Risky but manageable',
                                            activeSubStep != 'Too high limit. Additional Credit Scoring Allowance',
                                            activeSubStep != 'Report does not exist',
                                            activeSubStep != 'Company not found',
                                            activeSubStep != 'Private entity',
                                            activeSubStep != 'Authorization not granted',
                                            activeSubStep != 'Already in process',
                                            activeSubStep != 'Already a customer',
                                            activeSubStep != 'Black list',
                                            activeSubStep != 'Too risky'
                                        ) }">
                                        <!-- COLLAPSED CONTACT DETAILS -->
                                        <apex:outputPanel layout="block" id="contactDetailsCollapsed" styleClass="contact-details-collapsed ym-hide-content" rendered="{! AND(activeStep != null, activeStep > 0) }">
                                            <div class="wrapper-collapsed">
                                                <div class="row">
                                                    <div class="col-xs-10 col-sm-10">
                                                        <div class="b-step">
                                                            <div class="b-step-header">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[1].Step_Name__c }
                                                            </div>
                                                            <div class="b-step-details">
                                                                {! IF(contact.Salutation = stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MR API'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MR LABEL'].Value__c, IF(contact.Salutation = stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MRS API'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['CONTACT PERSON']['MRS LABEL'].Value__c, '')) } {! contact.FirstName } {! contact.LastName }, {! contact.Email }, {! contact.Phone }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2 col-sm-2">
                                                        <apex:outputPanel styleClass="edit">
                                                            <apex:commandLink action="{! editContactDetails }"
                                                                oncomplete="toViewport('contact-details-viewport'); setEvents_contactDetails(); onPageRender();phoneMask('pl-js-phone', '+48', 11);"
                                                                styleClass="font-11"
                                                                reRender="stepList, formBlock, onlineChatBlock"
                                                                status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>

                                        <!-- COLLAPSED COMPANY DETAILS -->
                                        <apex:outputPanel layout="block" id="companyDetailsCollapsed" styleClass="company-details-collapsed" rendered="{! AND(activeStep > 0, activeSubstep != 'Search company', activeSubstep != 'Set total consumption', activeSubstep != 'Additional Credit Scoring Allowance') }">
                                            <div style="background: #e0eded;">
                                                <div class="b-steps-splitter"></div>
                                            </div>
                                            <div class="wrapper-collapsed">
                                                <div class="row">
                                                    <div class="col-xs-10 col-sm-10">
                                                        <div class="b-step">
                                                            <div class="b-step-header">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[2].Step_Name__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2 col-sm-2">
                                                        <apex:outputPanel styleClass="edit">
                                                            <apex:commandLink action="{! editCompanyDetails }"
                                                                oncomplete="toViewport('order-details-viewport'); setEvents_companyDetails(); onPageRender();isCompanyDetails = true;analytics_SearchCompanyOnLoad('{! opportunity.E2E_Form_of_Business__c }');"
                                                                styleClass="font-11"
                                                                reRender="stepList, formBlock, onlineChatBlock"
                                                                status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-step-details">
                                                            {! selectedCompany.name }, {! selectedCompany.street } {! selectedCompany.housenumber }{! IF(selectedCompany.postcode != null, ', ' +
                                                            selectedCompany.postcode, '') }{! IF(selectedCompany.city != null, ', ' +
                                                            selectedCompany.city, '') }{! IF(selectedCompany.country != null, ', ' +
                                                            selectedCompany.country, '') }
                                                            <div class="info">
                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['COMPANY INFO']['REMARK'].Value__c }
                                                            </div>
                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['LABEL'].Value__c }: {! opportunity.Total_consumption_l_month__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['PROGNOSED CONSUMPTION']['UNIT'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>

                                        <!-- COLLAPSED CREDIT LINE -->
                                        <apex:outputPanel layout="block" id="creditLineCollapsed" styleClass="credit-line-collapsed" rendered="{! activeStep > 1 }">
                                            <div style="background: #e0eded;">
                                                <div class="b-steps-splitter"></div>
                                            </div>
                                            <div class="wrapper-collapsed">
                                                <div class="row">
                                                    <div class="col-xs-10 col-sm-10">
                                                        <div class="b-step">
                                                            <div class="b-step-header">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[3].Step_Name__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2 col-sm-2">
                                                        <apex:outputPanel styleClass="edit">
                                                            <apex:commandLink action="{! editCreditScoreData }"
                                                                oncomplete="toViewport('order-details-viewport'); setEvents_creditLimit(); setEvents_slider(); onPageRender();"
                                                                styleClass="font-11"
                                                                reRender="stepList, formBlock, onlineChatBlock"
                                                                status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-step-details">
                                                            {! opportunity.CF_Credit_Limit__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['UNIT'].Value__c },<br/>
                                                            <apex:outputPanel rendered="{! AND(opportunity.Security_Amount_To_Pay__c != 0, opportunity.Security_Amount_To_Pay__c != null)  }">
                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['DEPOSIT REQUIRED LABEL'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['UNIT'].Value__c }<br/>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{! OR(opportunity.Security_Amount_To_Pay__c = 0, opportunity.Security_Amount_To_Pay__c = null) }">
                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['REMARK NOT REQUIRED DEPOSIT'].Value__c },<br/>
                                                            </apex:outputPanel>
                                                                {! IF(opportunity.Zahlungsart__c = 'Lastschrift', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['DIRECT DEBIT'].Value__c,
                                                                    IF(opportunity.Zahlungsart__c = 'Banküberweisung', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['BANK TRANSFER'].Value__c, '')) },

                                                                {! IF(opportunity.Rechnungsperiode__c = '7', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['WEEKLY INVOICES'].Value__c,
                                                                    IF(opportunity.Rechnungsperiode__c = '15', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['BI-WEEKLY INVOICES'].Value__c,
                                                                        IF(opportunity.Rechnungsperiode__c = '30', stepPagesMap['ORDER DETAIL BLOCK'].elements['CREDIT SCORE RESULT']['MONTHLY INVOICES'].Value__c, ''))) }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>

                                        <!-- COLLAPSED CARDS CONFIGURATIONS -->
                                        <apex:outputPanel layout="block" id="cardConfigurationCollapsed" styleClass="card-configuration-collapsed" rendered="{! AND(activeStep > 1, activeSubstep != 'Card configuration', activeSubstep != 'Technical parameters') }">
                                            <div class="b-steps-splitter"></div>
                                            <div class="wrapper-collapsed">
                                                <div class="row">
                                                    <div class="col-xs-10 col-sm-10">
                                                        <div class="b-step">
                                                            <div class="b-step-header">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[4].Step_Name__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2 col-sm-2">
                                                        <apex:outputPanel styleClass="edit">
                                                            <apex:commandLink action="{! editCardConfiguration }"
                                                                oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                styleClass="font-11"
                                                                reRender="stepList, formBlock, onlineChatBlock"
                                                                status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-step-details">
                                                            {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c) }
                                                        </div>
                                                        <div class="collapse-block">
                                                            <div class="link" data-toggle="collapse" data-target="#feesAndCostsTop">
                                                                <apex:outputPanel styleClass="font-13">
                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['MORE DETAILS'].Value__c }
                                                                    <div class="fees-and-cost-expander block-expand inline-block"></div>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="row collapse" id="feesAndCostsTop">
                                                                <div class="inner-block">
                                                                    <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                                        <div class="fees-and-costs">
                                                                            <div class="item" style="height: 20px;">
                                                                                <div class="f-item inline-block">
                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                </div>
                                                                                <div class="f-val inline-block">
                                                                                    <apex:outputText styleClass="currencyFormat" value="{! costItem.costValue }"/> {! costItem.costTariff }
                                                                                </div>
                                                                            </div>
                                                                            <apex:outputPanel rendered="{! costItem.contentName != 'REGULAR BANK TRANSFER HEADING' }">
                                                                                <div class="f-desc">
                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-PER-'].Value__c } {! numberOfCards } {! IF(numberOfCards = 1, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARD-'].Value__c, stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['-CARDS-'].Value__c) }
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </apex:repeat>

                                                                    <div class="fee-national-header">
                                                                        <div>
                                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['NATIONAL HEADING'].Value__c }
                                                                            <div class="i-helper inline-block"
                                                                                data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['NATIONAL HEADING HELP'].Value__c }"
                                                                                data-trigger="hover"
                                                                                data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                        </div>
                                                                    </div>
                                                                    <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                        <div class="fees-and-costs">
                                                                            <div class="item">
                                                                                <div class="f-item inline-block" >
                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                    <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                                <div class="f-val inline-block">
                                                                                    {! costItem.costValue } {! costItem.costTariff }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </apex:repeat>
                                                                    <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                                        <div class="fee-international-header">
                                                                            <div>
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['INTERNATIONAL HEADING'].Value__c }
                                                                                <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['INTERNATIONAL HEADING HELP'].Value__c }" data-trigger="hover"
                                                                                     data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                            </div>
                                                                        </div>
                                                                        <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                            <div class="fees-and-costs">
                                                                                <div class="item">
                                                                                    <div class="f-item inline-block" >
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                        <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                            <div class="i-helper inline-block" data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                    <div class="f-val inline-block">
                                                                                        {! costItem.costValue } {! costItem.costTariff }
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </apex:repeat>
                                                                    </apex:outputPanel>

                                                                    <div class="fee-other">
                                                                        <div class="collapse-block">
                                                                            <div class="link" style="font-size: 13px;" data-toggle="collapse" data-target="#otherPossibleFees">
                                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['OTHER FEES HEADING'].Value__c }
                                                                                <div class="expander block-expand inline-block"></div>
                                                                            </div>
                                                                            <div class="row collapse" style="margin-left: 0px;" id="otherPossibleFees">
                                                                                <div class="fees-inner-block">
                                                                                    <div style="padding-top: 10px;">
                                                                                        {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO']['OTHER FEES SUBHEADING'].Value__c }
                                                                                    </div>
                                                                                    <apex:repeat value="{! costsColumnsMap['3'] }" var="costItem">
                                                                                        <div class="fees-and-costs">
                                                                                            <div class="item" style="margin-top: 7px;">
                                                                                                <div class="f-item inline-block">
                                                                                                    {! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentName].Value__c }
                                                                                                    <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                                        <div class="i-helper inline-block"
                                                                                                            data-content="{! stepPagesMap['ORDER DETAIL BLOCK'].elements['FEES AND COSTS INFO'][costItem.contentHelp].Value__c }"
                                                                                                            data-trigger="hover"
                                                                                                            data-html="true"
                                                                                                            data-container="body"
                                                                                                            data-toggle="popover"
                                                                                                            data-placement="top">?</div>
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                                <div class="f-val inline-block">
                                                                                                    {! costItem.costValue } <span class="fees-euro-symbol">{! costItem.costTariff }</span>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </apex:repeat>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>

                                        <!-- COLLAPSED SPECIAL OFFERS -->
                                        <apex:outputPanel layout="block" id="specialOffersCollapsed" styleClass="special-offers-collapsed" rendered="{! AND(activeStep > 2, activeSubstep != 'Additional services') }">
                                            <div style="background: #e0eded;">
                                                <div class="b-steps-splitter"></div>
                                            </div>
                                            <div class="wrapper-collapsed">
                                                <div class="row">
                                                    <div class="col-xs-10 col-sm-10">
                                                        <div class="b-step">
                                                            <div class="b-step-header">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[5].Step_Name__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2 col-sm-2">
                                                        <apex:outputPanel styleClass="edit">
                                                            <!-- UNCOMMENT LATER -->
                                                            <!-- <apex:commandLink action="{! editSpecialOffers }"
                                                                oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); isOffers = true; analytics_SpecialOfferOnLoad();"
                                                                styleClass="font-11"
                                                                reRender="stepList, formBlock, onlineChatBlock"
                                                                status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                            </apex:commandLink> -->

                                                            <!-- TEMP BLOCK DUE TO "SPECIAL OFFER" STEP REMOVAL (MUST BE REMOVED) -->
                                                            <apex:commandLink action="{! editSpecialOffers }"
                                                                oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); setValidCurrencyFormat(); onPageRender();"
                                                                styleClass="font-11"
                                                                reRender="stepList, formBlock, onlineChatBlock"
                                                                status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <!-- <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:repeat value="{! nonHomeOffersList }" var="offer">
                                                            <apex:outputPanel rendered="{! offer.productName = opportunity.Product__c }">
                                                                <div class="b-step-details">
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['OFFER NAME'].Value__c }
                                                                </div>
                                                                <div class="font-13 text-muted">
                                                                    {! offer.offerDiscount } {! offer.offerDiscountRatePer }
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:repeat>
                                                    </div>
                                                </div>
                                                <apex:repeat value="{! nonHomeOffersList }" var="offer">
                                                    <apex:outputPanel rendered="{! offer.productName = opportunity.Product__c }">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="collapse-block" style="margin: 5px 0 0 0;">
                                                                    <div class="link" data-toggle="collapse" data-target="#stationDetails">
                                                                        <apex:outputPanel styleClass="font-13" style="color: #0093ee;">
                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['DETAILS HEADING'].Value__c }
                                                                            <div class="expander block-expand inline-block"></div>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="row collapse" id="stationDetails" style="margin: 12px 0 0 0;">
                                                                        <div class="detail-list">
                                                                            <apex:outputPanel layout="block" styleClass="font-11" style="line-height: 1.91;">
                                                                                <apex:outputPanel layout="block">
                                                                                    <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['DISCOUNT'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerDiscount } {! offer.offerDiscountRatePer }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block">
                                                                                    <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TIME'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerTime }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" rendered="{! OR(offer.offerIsBased = 'Volume', offer.offerIsBased = 'Fuel + Volume') }">
                                                                                    <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['VOLUME'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerVolume }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" rendered="{! OR(offer.offerIsBased = 'Fuel', offer.offerIsBased = 'Fuel + Volume') }">
                                                                                    <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['FUEL TYPE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerFuelType }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block">
                                                                                    <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['GEOGRAPHY'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerCountry }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block">
                                                                                    <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['STATION'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! offer.offerStation }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block">
                                                                                    <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['FUEL PRICE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['FUEL PRICE VALUE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:repeat> -->
                                            </div>
                                        </apex:outputPanel>

                                        <!-- COLLAPSED DOCUMENTS -->
                                        <apex:outputPanel layout="block" id="contractAssigmentCollapsed" styleClass="contract-assigment-collapsed" rendered="{! activeStep > 3 }">
                                            <div style="background: #e0eded;">
                                                <div class="b-steps-splitter"></div>
                                            </div>
                                            <div class="wrapper-collapsed">
                                                <div class="row">
                                                    <div class="col-xs-10 col-sm-10">
                                                        <div class="b-step">
                                                            <div class="b-step-header">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/>
                                                                {! menuItemsMap[6].Step_Name__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2 col-sm-2">
                                                        <apex:outputPanel styleClass="edit">
                                                            <apex:commandLink action="{! editDocuments }"
                                                                oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder();"
                                                                styleClass="font-11"
                                                                reRender="stepList, formBlock, onlineChatBlock"
                                                                status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-step-details">
                                                            {! stepPagesMap['ORDER DETAIL BLOCK'].elements['DOCUMENTS INFO']['CONTRACT'].Value__c  } <br/>
                                                            <apex:outputPanel rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                                                {! stepPagesMap['ORDER DETAIL BLOCK'].elements['DOCUMENTS INFO']['DEPOSIT AGREEMENT'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>

                                    </apex:outputPanel>

                                    <!-- ORDER DETAILS LINK -->
                                    <span id="order-details-viewport"></span>
                                    <apex:outputPanel layout="block"
                                        rendered="{! AND(
                                            activeStep != 0,
                                            activeSubstep != 'System error',
                                            activeSubStep != 'Stop order',
                                            activeSubStep != 'Too many reports',
                                            activeSubstep != 'Congratulations',
                                            activeSubStep != 'Risky but manageable',
                                            activeSubStep != 'Too high limit. Additional Credit Scoring Allowance',
                                            activeSubStep != 'Report does not exist',
                                            activeSubStep != 'Company not found',
                                            activeSubStep != 'Private entity',
                                            activeSubStep != 'Authorization not granted',
                                            activeSubStep != 'Already in process',
                                            activeSubStep != 'Already a customer',
                                            activeSubStep != 'Black list',
                                            activeSubStep != 'Too risky'
                                        ) }">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12">
                                                <apex:outputPanel layout="block" styleClass="order-details-link">
                                                    <a href="" id="order"> &#8593; {! stepPagesMap['ORDER DETAIL BLOCK'].elements['TOP HEADING']['HEADING'].Value__c } </a>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- STEP CONTACT DETAILS -->
                                    <span id="contact-details-viewport"></span>
                                    <apex:outputPanel layout="block" id="contactDetails" styleClass="contact-details" rendered="{! AND(activeStep = 0, activeSubstep = 'Contact details') }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="b-desc">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="salutation block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel id="salutationBlock">
                                                            <div class="btn-group btn-group-justified">
                                                                <div class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected salutation-mr', 'btn btn-select salutation-mr') }"
                                                                    onclick="$j(this).val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON API'].Value__c }');
                                                                             $j('.salutation-mr').toggleClass('selected'); $j('.salutation-mrs').toggleClass('selected');">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MR BUTTON LABEL'].Value__c }
                                                                </div>
                                                                <div class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected salutation-mrs', 'btn btn-select salutation-mrs') }"
                                                                    onclick="$j('[id$=sltn-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON API'].Value__c }');
                                                                             $j('.salutation-mr').toggleClass('selected'); $j('.salutation-mrs').toggleClass('selected');">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['MRS BUTTON LABEL'].Value__c }
                                                                </div>
                                                                <apex:inputHidden id="sltn-dflt" value="{! stepPagesMap['CONTACT DETAILS'].fields['SALUTATION'].elementItemsMap['DEFAULT VALUE'].Value__c }"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="first-name block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:inputText id="firstName" value="{! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" 
                                                                                styleClass="inline-block form-control required input ym-disable-keys" maxLength="40" html-autocomplete="off" 
                                                                                onkeydown="if (event.keyCode === 13) {$j('html, body').animate({scrollTop: $j('.lastName-input').offset().top - 10}, 100);}"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                    </apex:outputLabel>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['FIRST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="last-name block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container" for="lastName">
                                                                        <span class="column">
                                                                            <apex:inputText id="lastName" value="{! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                                required="false" styleClass="inline-block form-control required input ym-disable-keys lastName-input" maxLength="80" html-autocomplete="off"
                                                                                onkeydown="if (event.keyCode === 13) {$j('html, body').animate({scrollTop: $j('.phone-input').offset().top - 10}, 100);}"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                    </apex:outputLabel>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['LAST NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="phone block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container" for="phone">
                                                                        <span class="column">
                                                                            <apex:inputText id="phone" value="{! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" 
                                                                                styleClass="pl-js-phone inline-block form-control required input ym-disable-keys phone-input" maxLength="12" html-autocomplete="off"
                                                                                onkeydown="if (event.keyCode === 13) {$j('html, body').animate({scrollTop: $j('.email-input').offset().top - 10}, 100);}"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                    </apex:outputLabel>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['MOBILE NUMBER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="email block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container" for="email">
                                                                        <span class="column">
                                                                            <apex:inputText id="email" value="{! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                                required="false" styleClass="inline-block form-control required input ym-disable-keys email-input" maxLength="80" html-autocomplete="off"
                                                                                onkeydown="if (event.keyCode === 13) {$j('html, body').animate({scrollTop: $j('.numberofcards-input').offset().top - 10}, 100);}"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                            </apex:outputPanel>
                                                                        </span>
                                                                    </apex:outputLabel>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['EMAIL ADDRESS'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <apex:outputPanel styleClass="row form-group" rendered="{! NOT(AND(opportunity != null, opportunity.Anzahl_der_Karten__c != null)) }" layout="block">
                                                <div class="number-of-cards block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container" for="numberofcardscontactdetails">
                                                                        <span class="column">
                                                                            <apex:inputText id="numberofcardscontactdetails" 
                                                                                value="{! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['DEFAULT VALUE'].Value__c }"
                                                                                required="false" 
                                                                                styleClass="inline-block form-control required input ym-disable-keys not-empty numberofcards-input" 
                                                                                html-type="number"
                                                                                html-min="1" 
                                                                                html-max="50" 
                                                                                onkeyup="validateNumberOfCards(this);"/>
                                                                            <apex:outputPanel styleClass="input-label">
                                                                                {! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                            </apex:outputPanel>
                                                                            <script>
                                                                                function validateNumberOfCards(numberOfCards) {
                                                                                    numberOfCards.value = numberOfCards.value.replace(/[^0-9\.]/g,'');
                                                                                    if(numberOfCards.value.split('.').length > 2) numberOfCards.value = numberOfCards.value.replace(/\.+$/,"");
                                                                                }                  
                                                                            </script>                                                                             
                                                                        </span>
                                                                    </apex:outputLabel>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <div class="row form-group">
                                                <div class="block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputLabel value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['LABEL'].Value__c }" styleClass="f-container company-form" style="font-weight: normal; padding-bottom: 5px;">
                                                            <span class="f-required">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['ASTERISK'].Value__c }
                                                            </span>
                                                        </apex:outputLabel>
                                                        <apex:outputPanel id="companyFormBlock">
                                                            <div class="btn-group btn-group-justified">
                                                                <div id="company-btn"
                                                                    class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected companyFormClass', 'btn btn-select companyFormClass') }"
                                                                    onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON API'].Value__c }');
                                                                             $j('[id$=company-btn]').addClass('selected');
                                                                             $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                             $j('[id$=private-btn]').removeClass('selected');isPrivateEntity = false;"
                                                                    style="font-size: 12px;">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['COMPANY BUTTON LABEL'].Value__c }
                                                                    </div>
                                                                <div id="solo-trader-btn"
                                                                    class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected soloTraderClass', 'btn btn-select soloTraderClass') }"
                                                                    onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON API'].Value__c }');
                                                                             $j('[id$=solo-trader-btn]').addClass('selected');
                                                                             $j('[id$=company-btn]').removeClass('selected');
                                                                             $j('[id$=private-btn]').removeClass('selected');isPrivateEntity = false;"
                                                                    style="font-size: 12px;">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['SOLO-TRADER BUTTON LABEL'].Value__c }
                                                                </div>
                                                                <div id="private-btn"
                                                                    class="{! IF(stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c = stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected privateEntityClass', 'btn btn-select privateEntityClass') }"
                                                                    onclick="$j('[id$=company-form-dflt]').val('{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON API'].Value__c }');
                                                                             $j('[id$=private-btn]').addClass('selected');
                                                                             $j('[id$=solo-trader-btn]').removeClass('selected');
                                                                             $j('[id$=company-btn]').removeClass('selected');isPrivateEntity = true;"
                                                                    style="font-size: 12px;">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['PRIVATE ENTITY BUTTON LABEL'].Value__c }
                                                                    </div>
                                                                <apex:inputHidden id="company-form-dflt" value="{! stepPagesMap['CONTACT DETAILS'].fields['COMPANY FORM'].elementItemsMap['DEFAULT VALUE'].Value__c }"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-md-12">
                                                    <div class="b-checkbox">
                                                        <div class="form-check">
                                                            <div class="checkbox checkbox-red">
                                                                <apex:inputCheckbox value="{! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }"  styleClass="form-check-input phoneContact" id="phoneContact"/>
                                                                <apex:outputLabel styleClass="form-check-label" for="phoneContact">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['LABEL'].Value__c }
                                                                    <apex:commandLink action="{! showAgreeToPhoneContact }"
                                                                        styleClass="form-check-label"
                                                                        reRender="modalAgreeToPhoneContact"
                                                                        status="splashStatus">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['LABEL URL'].Value__c }
                                                                    </apex:commandLink>
                                                                </apex:outputLabel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-md-12">
                                                    <div class="b-checkbox">
                                                        <div class="form-check">
                                                            <div class="checkbox checkbox-red">
                                                                <apex:inputCheckbox value="{! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }"  styleClass="form-check-input infoByEmail" id="infoByEmail"/>
                                                                <apex:outputLabel styleClass="form-check-label" for="infoByEmail">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['LABEL'].Value__c }
                                                                    <apex:commandLink action="{! showAgreeToInfoByEmail }"
                                                                        styleClass="form-check-label"
                                                                        reRender="modalAgreeToInfoByEmail"
                                                                        status="splashStatus">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['LABEL URL'].Value__c }
                                                                    </apex:commandLink>
                                                                </apex:outputLabel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-md-12">
                                                    <div class="b-checkbox">
                                                        <div class="form-check">
                                                            <div class="checkbox checkbox-red">
                                                                <apex:inputCheckbox value="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['DEFAULT VALUE'].Value__c }"  styleClass="form-check-input news" id="news"/>
                                                                <apex:outputLabel styleClass="form-check-label" for="news">
                                                                    {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['LABEL'].Value__c }
                                                                    <apex:commandLink action="{! showAgreeNews }"
                                                                        styleClass="form-check-label"
                                                                        reRender="modalAgreeToNews"
                                                                        status="splashStatus">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['LABEL URL'].Value__c }
                                                                    </apex:commandLink>
                                                                </apex:outputLabel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="m-buttons center-block text-center">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:actionFunction name="mGoToCreditScoring" action="{! goToCompanyDetails }" oncomplete="toViewPortCreditScoring(); setEvents_companyDetails(); onPageRender(); lazyLoadScripts(); endSplash();" reRender="formBlock, stepList, additionInfo, onlineChatBlock, lazyLoadId"/>
                                                        <apex:commandLink value="{! stepPagesMap['CONTACT DETAILS'].elements['CONTINUE BUTTON']['VALUE'].Value__c }"
                                                                        onclick="startSplash();return validateContactDetails(true);"
                                                                        styleClass="btn btn-red"
                                                                        reRender="none"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script src="{!$Resource.PhoneMask}" async="async"/>
                                        <script>
                                            isCompanyDetails = true;
                                            analytics_ContactDetailsOnLoad();
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP COMPANY DETAILS -->
                                    <apex:outputPanel layout="block" id="creditScoring" styleClass="credit-scoring" rendered="{! AND(activeStep = 1, OR(activeSubstep = 'Search company', activeSubstep = 'Set total consumption', activeSubstep = 'Enter VAT Number', activeSubstep = 'Additional Credit Scoring Allowance')) }">
                                        <span id="company-name-viewport"></span>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="b-desc" style="width: 90%;">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="country block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div >
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['LABEL'].Value__c }" styleClass="f-label"/>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="font-15" style="margin-top: 3px">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['DEFAULT VALUE'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="country-msg">
                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COUNTRY'].elementItemsMap['REMARK'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>        
                                            <div class="row form-group">
                                                <div class="company block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:inputText id="company" 
                                                                                value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                                required="false" 
                                                                                styleClass="inline-block form-control required input companyAndTax ym-disable-keys" 
                                                                                maxLength="255" style="width: 83%;"/>
                                                                            <apex:outputLabel styleClass="input-label" for="company">
                                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                            </apex:outputLabel>
                                                                        </span>
                                                                    </apex:outputLabel>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row form-group">
                                                <div class="tax-id block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:inputText id="tax" 
                                                                                value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                                required="false" 
                                                                                styleClass="inline-block form-control required input taxIdInput companyAndTax ym-disable-keys" 
                                                                                maxLength="50" 
                                                                                onkeyup="decimalOnlyChecker(this);"
                                                                                style="width: 70%;"/>
                                                                            <div class="i-helper inline-block pull-right" 
                                                                                data-content="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['HELP'].Value__c }" 
                                                                                data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom"
                                                                                style="margin-top: 20px;">?</div>
                                                                            <apex:outputLabel styleClass="input-label" for="tax" style="text-decoration: none;">
                                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>                                                                                  
                                                                            </apex:outputLabel>
                                                                        </span>
                                                                    </apex:outputLabel>
                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                <script>
                                                                    function decimalOnlyChecker(taxValue) {
                                                                        taxValue.value = taxValue.value.replace(/[^0-9\.]/g,'');
                                                                        if(taxValue.value.split('.').length > 2) taxValue.value = taxValue.value.replace(/\.+$/,"");
                                                                    }                  
                                                                </script>
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].fields['TAX ID'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="m-buttons center-block text-center">
                                                        <apex:actionFunction name="mDoSaveCompany" action="{! doSaveCompanyDetailsData }" onComplete="validateCompanyDetails(false); setEvents_companyDetails(); onPageRender(); mDoSearchCompany();" reRender="formBlock"/>
                                                        <apex:actionFunction name="mDoSearchCompany" action="{! doSearchCompany }" onComplete="scrollDisableControl('disable'); setEvents_companyDetails(); onPageRender(); endSplash();" reRender="stepList, formBlock, additionInfo, modalCompanySelection"/>
                                                        <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SEARCH BUTTON']['VALUE'].Value__c }"
                                                                        onclick="return validateCompanyDetailsForSearch();"
                                                                        reRender="formBlock"
                                                                        styleClass="btn btn-red search"
                                                                        status="splashStatus"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <apex:outputPanel rendered="{! AND(activeStep = 1, activeSubstep = 'Search company') }">
                                                <div class="b-splitter" style="margin: 40px 12px 10px 12px;"></div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12" style="margin: 0 15px 0 15px; color: #00000080; font-size: 11px;">
                                                        {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['INFO BLOCK']['BODY OF BLOCK'].Value__c }
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <script>
                                                activePageAnalytics = 'Search company';
                                            </script>

                                            <span id="your-company-viewport"></span>
                                            <!-- ENTER VAT NUMBER -->
                                            <apex:outputPanel styleClass="enter-vat-id" layout="block" rendered="{! AND(activeStep = 1, activeSubStep = 'Enter VAT Number') }">
                                                <div class="wrapper">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="b-warning-block" style="padding: 1px 0 20px 0;">
                                                                <div class="b-inside-warning" style="padding: 0;">
                                                                    <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 10px 16px 0px 12px;">
                                                                        <apex:outputPanel styleClass="warn"><apex:image url="{!URLFOR($Resource.e2e_images, 'warn.png')}"/></apex:outputPanel>
                                                                        {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['TOP HEADING']['HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="b-desc">
                                                                        {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <div class="row form-group vat-group">
                                                                        <div class="vat-id block" style="margin: 15px 12px 0px 12px;">
                                                                            <div class="col-xs-12 col-sm-12">
                                                                                <div class="b-form-field">
                                                                                    <div class="form-field">
                                                                                        <div class="f-input">
                                                                                            <apex:outputLabel styleClass="f-container">
                                                                                                <span class="column">
                                                                                                    <apex:inputText id="vatid" 
                                                                                                    value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                                                    required="false" 
                                                                                                    styleClass="inline-block form-control required input vatNumberInput ym-disable-keys" 
                                                                                                    maxLength="12" 
                                                                                                    style="width: 90%; text-transform: uppercase"/>
                                                                                                    <apex:outputLabel styleClass="input-label" for="vatid">
                                                                                                        {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['LABEL'].Value__c }
                                                                                                        <span class="f-required">
                                                                                                            {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['ASTERISK'].Value__c }
                                                                                                        </span>
                                                                                                    </apex:outputLabel>
                                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['HELP'].Value__c }"
                                                                                                        data-trigger="hover" data-container="body" data-toggle="popover" data-placement="bottom">?</div>
                                                                                                </span>
                                                                                            </apex:outputLabel>
                                                                                            <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                                        </div>
                                                                                    </div>
                                                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                                        {! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['VAT NUMBER'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row" style="margin-top: 10px;">
                                                                        <div class="col-xs-12 col-md-12">
                                                                            <div class="b-checkbox">
                                                                                <div class="form-check">
                                                                                    <div class="checkbox checkbox-red">
                                                                                        <apex:inputCheckbox id="no-vat-checkbox"
                                                                                            value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['NO VAT'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                                            onclick="if(this.checked) {
                                                                                                    document.getElementById('{!$Component.vatid}').value = ''; 
                                                                                                    document.getElementById('{!$Component.noVatLabel}').style.color = 'black';
                                                                                                    $j('.vat-group input').removeClass('error'); 
                                                                                                    $j('.vat-group input').prop('disabled', true);
                                                                                                    $j('.vat-group').find('.invalid-feedback').hide();
                                                                                                    $j('.vat-group').find('.glyphicon').hide();
                                                                                                    $j('.enter-vat-id .btn-red').attr('disabled', false);
                                                                                                } else {
                                                                                                    $j('.vat-group input').prop('disabled', false);
                                                                                                    setEvents_vatNumber();
                                                                                                }"
                                                                                            styleClass="form-check-input"/>
                                                                                        <apex:outputLabel id="noVatLabel"
                                                                                            value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].fields['NO VAT'].elementItemsMap['LABEL'].Value__c }"
                                                                                            styleClass="form-check-label" 
                                                                                            for="no-vat-checkbox" 
                                                                                            escape="false"/>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="m-buttons center-block text-center">
                                                                        <apex:outputPanel layout="block">
                                                                            <apex:commandButton id="validateVat"
                                                                                value="{! stepPagesMap['CREDIT SCORE. INPUT VAT ID'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                action="{! updateVatNumber }"
                                                                                oncomplete="setEvents_companyDetails(); doValidateVatId();"
                                                                                reRender="stepList, formBlock, additionInfo, systemError, onlineChatBlock"
                                                                                status="splashStatus"
                                                                                styleClass="btn btn-red continue continue-fromvat"/>
                                                                        </apex:outputPanel>
                                                                        <script>
                                                                            function doValidateVatId() {
                                                                                if ({! isVatIdValid }) {
                                                                                    $j('.vat-group input').removeClass('error');
                                                                                    $j('.vat-group input').addClass('success');
                                                                                    $j('.vat-group').find('.invalid-feedback').hide();
                                                                                    $j('.vat-group').find('.glyphicon').show();
                                                                                    $j('.continue-fromvat').attr('disabled', false);
                                                                                } else {
                                                                                    onPageRender();
                                                                                    $j('.vat-group input').removeClass('success');
                                                                                    $j('.vat-group input').addClass('error');
                                                                                    $j('.vat-group').find('.invalid-feedback').show();
                                                                                    $j('.vat-group').find('.glyphicon').hide();
                                                                                    $j('.continue-fromvat').attr('disabled', true);
                                                                                    toViewport('your-company-viewport');
                                                                                    setEvents_vatNumber();
                                                                                }
                                                                            }
                                                                        </script>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>

                                            <!-- SET TOTAL CONSUMPTION -->
                                            <apex:outputPanel id="pump-block">
                                                <apex:outputPanel layout="block" styleClass="fuel-consumption" rendered="{! AND(activeStep = 1, activeSubstep != 'Search company', activeSubstep != 'Enter VAT Number') }">
                                                    <script>
                                                        activePageAnalytics = 'Set total consumption';
                                                    </script>
                                                    <div class="credit-scoring-sub">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="b-collapsed-company">
                                                                    <apex:outputPanel layout="block" styleClass="inline-block collapsed-company">
                                                                        <apex:outputPanel layout="block" styleClass="b-col-header" >
                                                                            {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['SELECTED COMPANY HEADING'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="font-11">
                                                                            {! selectedCompany.name }, {! selectedCompany.street } {! selectedCompany.housenumber }{! IF(selectedCompany.postcode != null, ', ' +
                                                                            selectedCompany.postcode, '') }{! IF(selectedCompany.city != null, ', ' +
                                                                            selectedCompany.city, '') }{! IF(selectedCompany.country != null, ', ' +
                                                                            selectedCompany.country, '') }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="i-image inline-block" >
                                                                        <div
                                                                            onclick="toViewport('company-name-viewport');"
                                                                            class="font-11">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:outputPanel layout="block" styleClass="b-fuel-consumption">
                                                                <apex:outputPanel layout="block" styleClass="font-13">
                                                                    {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['TOP HEADING']['HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="row form-group">
                                                        <div class="pump block">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="b-form-field">
                                                                    <div class="form-field">
                                                                        <div class="f-input">
                                                                            <apex:outputLabel styleClass="f-container">
                                                                                <span class="column" id="total-consumption-viewport">
                                                                                    <apex:inputText id="pump" 
                                                                                        value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['DEFAULT VALUE'].Value__c }" 
                                                                                        required="false" 
                                                                                        maxLength="5"
                                                                                        styleClass="inline-block form-control required input pumpInput ym-disable-keys"/>
                                                                                    <span class="litters" style="display:none;">
                                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['UNIT'].Value__c }
                                                                                    </span>
                                                                                    <apex:outputLabel styleClass="input-label" for="pump">
                                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['LABEL'].Value__c }
                                                                                        <span class="f-required">
                                                                                            {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['ASTERISK'].Value__c }
                                                                                        </span>
                                                                                    </apex:outputLabel>
                                                                                </span>
                                                                            </apex:outputLabel>
                                                                            <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                        </div>
                                                                    </div>
                                                                    <apex:outputPanel layout="block" styleClass="limit-info font-12">
                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['REMARK'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback consumption-warning1">
                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 1'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="invalid-feedback consumption-warning2">
                                                                        {! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].fields['TOTAL CONSUMPTION'].elementItemsMap['WARN MESSAGE 2'].Value__c }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="m-buttons center-block text-center">                                        
                                                                    <apex:actionFunction name="goToOfferCreditLine"
                                                                        action="{! doCalculateCreditScoring }"
                                                                        reRender="stepList, formBlock, additionInfo, onlineChatBlock, modalCSAllowance"
                                                                        oncomplete="toViewport('order-details-viewport'); setEvents_creditLimit(); setEvents_slider(); onPageRender();"
                                                                        status="splashStatus"/>
                                                                    <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. TOTAL CONSUMPTION'].elements['CONTINUE BUTTON']['VALUE'].Value__c }"
                                                                        onclick="return validatePumpDetails();"
                                                                        reRender="stepList, formBlock, onlineChatBlock"
                                                                        styleClass="btn btn-red"
                                                                        status="splashStatus"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <script>
                                                        analytics_TotalConsumptionOnLoad('{! opportunity.E2E_Form_of_Business__c }');
                                                    </script>
                                                </apex:outputPanel>
                                            </apex:outputPanel>

                                            <apex:outputPanel rendered="{! AND(activeStep = 1, activeSubstep != 'Search company', activeSubstep != 'Enter VAT Number') }">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="text-center">
                                                            <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                                <apex:outputPanel layout="block">
                                                                    <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                        onclick="scrollDisableControl('disable');"
                                                                        value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                        styleClass="font-13"
                                                                        reRender="saveAndContinueLater"
                                                                        status="splashStatus"/>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                   {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <script>
                                                analytics_SearchCompanyOnLoad('{! opportunity.E2E_Form_of_Business__c }');
                                            </script>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- STEP CREDIT LINE -->
                                    <apex:outputPanel layout="block" id="creditLine" styleClass="credit-line" rendered="{! AND(activeStep = 1, activeSubstep = 'Calculating credit score') }">
                                        <script>
                                            activePageAnalytics = 'Calculating credit score';
                                        </script>                                    
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <div class="m-under-header">
                                                        <apex:outputPanel layout="block" styleClass="font-13">
                                                            {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="payment-method block" style="margin-top: 23px;">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="btn-group">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['LABEL'].Value__c }" styleClass="font-14" style="margin-bottom: 8px;"/>
                                                            <apex:outputPanel layout="block" id="payMethodBlock" styleClass="m-debit-block">
                                                                <apex:commandButton id="dd" style="font-size: 12px;"
                                                                    value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD LABEL'].Value__c }"
                                                                    styleClass="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD API NAME'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                    onclick="$j('[id$=payMethod-dflt]').val('{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD API NAME'].Value__c }');
                                                                             $j('[id$=dd]').addClass('selected');
                                                                             $j('[id$=bt]').removeClass('selected');"
                                                                    oncomplete="onPageRender();"
                                                                    reRender="payMethod-dflt, paymentDescriptionBlock, credit-output,deposit-block"/>
                                                                <apex:commandButton id="bt" style="font-size: 12px;"
                                                                    value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT LABEL'].Value__c }"
                                                                    styleClass="{! IF(stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT API NAME'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c, 'btn btn-select selected', 'btn btn-select') }"
                                                                    onclick="$j('[id$=payMethod-dflt]').val('{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT API NAME'].Value__c }');
                                                                             $j('[id$=bt]').addClass('selected');
                                                                             $j('[id$=dd]').removeClass('selected');"
                                                                    oncomplete="onPageRender();"
                                                                    reRender="payMethod-dflt, paymentDescriptionBlock, credit-output,deposit-block"/>
                                                                <apex:inputhidden id="payMethod-dflt" value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c }"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <apex:outputPanel id="paymentDescriptionBlock" layout="block" styleClass="pay-method-msg font-11 text-muted">
                                                            <apex:outputPanel rendered="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DD API NAME'].Value__c }">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DIRECT DEBIT DESCRIPTION'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['DEFAULT VALUE'].Value__c = stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BT API NAME'].Value__c }">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['PAYMENT METHOD'].elementItemsMap['BANK TRANSFER DESCRIPTION'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="billing-period block" style="margin-top: 22px;">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="btn-group">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['LABEL'].Value__c }" styleClass="font-14" style="margin-bottom: 9px;"/>
                                                            <apex:outputPanel layout="block" id="billingPeriodBlock" styleClass="m-calendar-deposit">
                                                                <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['WEEKLY BUTTON NAME + 7'].Value__c }" 
                                                                    action="{! changeBillingPeriod }" 
                                                                    onComplete="onPageRender(); setEvents_creditLimit(); setEvents_slider(); $j('.remark7').show(); $j('.remark14').hide();" 
                                                                    rerender="billingPeriodBlock, credit-output, depositBlock, payMethodBlock, hidden-elements, creditLimitRequired" 
                                                                    styleClass="{! IF(AND(defaultBillingPeriod = 7, defaultPaymentTerms = 7), 'btn btn-select selected', 'btn btn-select') }" 
                                                                    status="splashStatus" 
                                                                    style="font-size: 12px; padding: 6px 4px; min-width: 148px;">
                                                                    <apex:param name="billingPeriod" value="7" assignTo="{! defaultBillingPeriod }"/>
                                                                    <apex:param name="paymentTerms" value="7" assignTo="{! defaultPaymentTerms }"/>
                                                                    <apex:param name="creditLimit" value="{! creditLimit7_Plus7 }" assignTo="{! creditLimit }"/>
                                                                </apex:commandButton>
                                                                
                                                                <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['BI-WEEKLY BUTTON NAME + 14'].Value__c }" 
                                                                    action="{! changeBillingPeriod }" 
                                                                    onComplete="onPageRender(); setEvents_creditLimit(); setEvents_slider(); $j('.remark7').hide(); $j('.remark14').show();" 
                                                                    rerender="billingPeriodBlock, credit-output, depositBlock, payMethodBlock, hidden-elements, creditLimitRequired" 
                                                                    styleClass="{! IF(AND(defaultBillingPeriod = 15, defaultPaymentTerms = 14), 'btn btn-select selected', 'btn btn-select') }" 
                                                                    status="splashStatus" 
                                                                    style="font-size: 12px; padding: 6px 4px; min-width: 148px;">
                                                                    <apex:param name="billingPeriod" value="15" assignTo="{! defaultBillingPeriod }"/>
                                                                    <apex:param name="paymentTerms" value="14" assignTo="{! defaultPaymentTerms }"/>
                                                                    <apex:param name="creditLimit" value="{! creditLimit15_Plus14 }" assignTo="{! creditLimit }"/>
                                                                </apex:commandButton>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <apex:outputPanel layout="block" 
                                                            styleClass="billing-period-msg font-11 text-muted remark7" 
                                                            style="{! IF(defaultPaymentTerms != 7, 'display: none', '') }">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['REMARK 7'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" 
                                                            styleClass="billing-period-msg font-11 text-muted remark14" 
                                                            style="{! IF(defaultPaymentTerms  != 14, 'display: none', '') }">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['BILLING PERIOD'].elementItemsMap['REMARK 14'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <apex:outputPanel layout="block" styleClass="choose-credit-limit">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="m-block-around">
                                                            <apex:outputPanel layout="block" styleClass="m-row-header">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="font-11" style="margin-top: 5px;">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CREDIT LIMIT SELECTION BLOCK']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                            <div class="row form-group">
                                                <div class="credit-limit block" style="margin-top: 20px;">
                                                    <apex:actionFunction name="recalculateDepositValue" action="{! doRecalculateDeposit }"
                                                                         reRender="depositBlock, idInputHidden, payMethodBlock, credit-limit-actions"
                                                                         onComplete="setEvents_creditLimit(); setEvents_slider(); onPageRender(); return false;"
                                                                         status="splashStatus">
                                                        <apex:param name="creditLimit" assignTo="{! creditLimitValue }" value="" />
                                                        <apex:param name="minCreditLimit" assignTo="{! minCreditLimit }" value="" />
                                                        <apex:param name="maxCreditLimit" assignTo="{! maxCreditLimit }" value="" />
                                                    </apex:actionFunction>
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel styleClass="m-credit-output" id="credit-output">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['LABEL'].Value__c }" styleClass="font-13 credit-limit-label" style="margin-bottom: 4px;">
                                                                <span class="f-required" style="{! IF(minCreditLimit = maxValue, 'display: none;','') }">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['ASTERISK'].Value__c }
                                                                </span>
                                                            </apex:outputLabel>
                                                            <div class="m-credit-value" style="{! IF(minCreditLimit = maxValue, 'margin-bottom: 0','')}">
                                                                <apex:outputPanel id="credit-limit-actions" layout="block" styleClass="inline-block" rendered="{! minCreditLimit != maxValue}">
                                                                    <apex:outputPanel styleClass="btn-group" layout="block">
                                                                        <apex:outputPanel styleClass="btn btn-select credit-value-block">
                                                                            <apex:outputText id="creditLimitInput" value="{! creditLimit }"
                                                                                            style="margin-right: 5px; padding: 0px 0px 15px;"
                                                                                            styleClass="limit-value inline-block font-15" />
                                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['UNIT'].Value__c }" style="font-weight: normal;"/>
                                                                        </apex:outputPanel>
                                                                        <apex:commandButton value="-" styleClass="btn btn-select action-btn" disabled="{! NOT(creditLimit > minCreditLimit) }" onclick="decreaseCreditLimit(); return false;"/>
                                                                        <apex:commandButton value="+" styleClass="btn btn-select action-btn" disabled="{! NOT(creditLimit < maxValue) }" onclick="increaseCreditLimit(); return false;"/>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{! minCreditLimit = maxValue}">
                                                                    <apex:outputText value="{! creditLimit }"
                                                                                        style="margin-right: 5px; padding: 0px 0px 15px;"
                                                                                        styleClass="limit-value inline-block font-15" />
                                                                        <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['CREDIT LIMIT'].elementItemsMap['UNIT'].Value__c }" style="font-weight: normal;"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel id="hidden-elements">
                                                            <apex:outputPanel layout="none" rendered="{! minCreditLimit != maxValue}">
                                                                <div data-role="range-slider" class="range-slider">
                                                                    <div id="slider"/>
                                                                    <div class="deposit-numbers" >
                                                                        <apex:outputPanel id="minCreditLimit" styleClass="min-limit slider-label-first">
                                                                            {! minCreditLimit }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel id="maxCreditLimit" styleClass="max-limit slider-label-last" style="float: right; margin-top: 2px;">
                                                                            {! maxValue }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <apex:inputHidden value="{! creditLimit }" id="idInputHidden"/>
                                                                    <apex:inputHidden value="{! minCreditLimit }" id="minLimit"/>
                                                                    <apex:inputHidden value="{! maxCreditLimit }" id="maxLimit"/>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <script type="text/javascript">
                                                        function recalculateDeposit() {
                                                            var creditLimitValue = document.getElementById('{!$Component.idInputHidden}').value;
                                                            var minLimitValue = document.getElementById('{!$Component.minLimit}').value;
                                                            var maxLimitValue = document.getElementById('{!$Component.maxLimit}').value;
                                                            recalculateDepositValue(creditLimitValue, minLimitValue, maxLimitValue);
                                                        }
                                                    </script>
                                                </div>
                                            </div>
                                            <apex:outputPanel styleClass="row" layout="block" id="deposit-block">
                                                <div class="deposit block" style="{! IF(minCreditLimit != maxCreditLimit,'margin-top: 22px;','margin-top: 0;')}">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel id="depositBlock">
                                                            <apex:outputLabel value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['LABEL'].Value__c }" styleClass="font-13 text-muted" style="margin-bottom: 4px;"/>
                                                            <apex:outputPanel layout="block" rendered="{! AND(deposit != 0, deposit != null) }">
                                                                <apex:outputPanel layout="block">
                                                                    <apex:outputPanel layout="block" styleClass="inline-block font-15" style="vertical-align: middle">
                                                                        <span class="deposit-value">{! deposit }</span>
                                                                        <apex:outputPanel >
                                                                            <span style="font-weight: normal;">
                                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['UNIT'].Value__c }
                                                                            </span>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP REQUIRED DEPOSIT'].Value__c }" data-trigger="hover"
                                                                         data-container="body" data-toggle="popover" data-placement="top" style="margin: 2px 0 0 5px;">?</div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="font-15">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK REQUIRED DEPOSIT'].Value__c }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" rendered="{! OR(deposit = 0, deposit = null) }">
                                                                <apex:outputPanel layout="block">
                                                                    <apex:outputPanel layout="block" styleClass="font-15 inline-block" style="vertical-align: middle">
                                                                        {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['REMARK NOT REQUIRED DEPOSIT'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].fields['DEPOSIT'].elementItemsMap['HELP NOT REQUIRED DEPOSIT'].Value__c }" data-trigger="hover"
                                                                         data-container="body" data-toggle="popover" data-placement="top" style="margin-top: 2px;">?</div>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <div class="row">
                                                <div class="text-center" style="margin-top: 24px;">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:actionFunction name="goToCardsOrder" action="{! goToCardsConfig }" reRender="stepList, formBlock, systemError, onlineChatBlock" status="splashStatus" oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"/>
                                                        <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['CONTINUE BUTTON']['BUTTON NAME'].Value__c }" onclick="return validateCreditLimit(true, '{! opportunity.E2E_Form_of_Business__c }');" reRender="formBlock, systemError" styleClass="btn btn-red" status="splashStatus"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="text-center" style="margin: 24px 0;">
                                                        <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                            <apex:outputPanel layout="block">
                                                                <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                    value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                    styleClass="font-13"
                                                                    reRender="saveAndContinueLater"
                                                                    status="splashStatus"/>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="collapse-block">
                                                        <div class="link" data-toggle="collapse" data-target="#creditLine">
                                                            <apex:outputPanel styleClass="m-row-header" style="color: #1a1a1a;">
                                                                {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['TOP HEADING'].Value__c } 
                                                                <div class="expander block-expand inline-block" style="float: right;"></div>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="row collapse" id="creditLine" style="margin: 12px 0 0 0;">
                                                            <div class="credit-line-collapse">
                                                                <apex:outputPanel layout="block" styleClass="font-13 block-gap">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['DESCRIPTION'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="m-row-header block-gap">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['SUBBLOCK HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="font-13">
                                                                    {! stepPagesMap['CREDIT SCORE. SCORING RESULT'].elements['INFO BLOCK']['BODY OF SUBBLOCK'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            analytics_PaymentMethodOnLoad('{! opportunity.E2E_Form_of_Business__c }');
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP CARDS ORDER -->
                                    <apex:outputPanel layout="block" id="cardsOrder" styleClass="cards-order" rendered="{! AND(activeStep = 2, OR(activeSubstep = 'Card configuration', activeSubstep = 'Technical parameters')) }">
                                        <script>
                                            activePageAnalytics = 'Card configuration';
                                        </script>                                    
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['TOP HEADING']['VALUE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="cards-count block">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="b-form-field">
                                                            <div class="form-field">
                                                                <div class="f-input">
                                                                    <apex:outputLabel styleClass="f-container">
                                                                        <span class="column">
                                                                            <apex:input id="counter"
                                                                                type="number"
                                                                                value="{! numberOfCards }"
                                                                                required="false"
                                                                                onchange="changeNumberOfCards();"
                                                                                styleClass="inline-block form-control required input"
                                                                                html-min="1"
                                                                                html-max="50"
                                                                                onkeypress="return event.charCode >= 48 && event.charCode <= 57"/>
                                                                            <apex:actionFunction name="changeNumberOfCards"
                                                                                action="{! changeNumberOfCards }"
                                                                                onComplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                reRender="counter, configuration, cards-exception"
                                                                                status="splashStatus"/>
                                                                            <apex:outputLabel styleClass="input-label" for="counter">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['LABEL'].Value__c }
                                                                                <span class="f-required">
                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['ASTERISK'].Value__c }
                                                                                </span>
                                                                            </apex:outputLabel>
                                                                        </span>
                                                                        <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                    </apex:outputLabel>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel id="cards-exception">
                                                                <apex:outputPanel rendered="{! activeInnerPage = 'Remove extra cards' }" styleClass="invalidcards-feedback">
                                                                    <div class="i-error">!</div>{! stepPagesMap['CARD CONFIGURATION'].fields['NUMBER OF CARDS'].elementItemsMap['WARN MESSAGE TYPE 1'].Value__c }
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <apex:outputPanel layout="block" id="configuration" styleClass="configurations">
                                            <div class="wrapper">
                                                <div class="cards-list">
                                                    <apex:variable var="index" value="{!1}"/>
                                                    <apex:repeat value="{! finalCardsMap }" var="cardIndx">
                                                        <div class="card-item">
                                                            <apex:outputPanel rendered="{! AND(finalCardsMap[cardIndx].cardIsConfigurated = true, finalCardsMap[cardIndx].techParamsIsConfigurated = true) }">
                                                                <div class="row">
                                                                    <div class="col-xs-10 col-sm-10">
                                                                        <apex:outputPanel layout="block" styleClass="b-block-header font-15">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['-CARD #-']['LABEL'].Value__c } {! cardIndx }
                                                                            <apex:outputPanel styleClass="edit">
                                                                                <apex:commandLink action="{! editCardConfigurationMobile }"
                                                                                    onComplete="onPageRender(); goToConfiguredCardViewport();"
                                                                                    styleClass="font-11"
                                                                                    reRender="configuration, cards-exception"
                                                                                    status="splashStatus">
                                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                    <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                </apex:commandLink>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        <script>
                                                                            function goToConfiguredCardViewport() {
                                                                                toViewport('edit-card-viewport');
                                                                            }
                                                                        </script>
                                                                    </div>
                                                                    <div class="col-xs-2 col-sm-2">
                                                                        <apex:outputPanel styleClass="delete" rendered="{! numberOfCards != 1 }">
                                                                            <apex:commandLink action="{! removeCard }"
                                                                                oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                reRender="configuration, counter, systemError, cards-exception"
                                                                                status="splashStatus">
                                                                                <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                            </apex:commandLink>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <apex:outputPanel layout="block" styleClass="config-desc font-13">
                                                                            {! IF(finalCardsMap[cardIndx].categoryCard == 'All vehicle related product', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'All fuel types', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c, IF(finalCardsMap[cardIndx].categoryCard == 'Diesel', stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c, ''))) }{!IF(finalCardsMap[cardIndx].pumpOutsideCountry = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP OUTSIDE COUNTRY TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['PUMP INSIDE COUNTRY TEASER'].Value__c)}{!IF(finalCardsMap[cardIndx].pumpAtPartners = true, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP AT SHELL PARTNERS TEASER'].Value__c, ', ' + stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['PUMP ONLY AT SHELL TEASER'].Value__c)}<br/><br/>
                                                                            {! IF(finalCardsMap[cardIndx].selectedTypeOfCar = 'PKW', stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW TYPE TEASER'].Value__c + ',', stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW TYPE TEASER'].Value__c + ',') }<br/>
                                                                            {! IF(finalCardsMap[cardIndx].needOdometerOptions = true, stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['AGREE ODOMETER TEASER'].Value__c, stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['DISAGREE ODOMETER TEASER'].Value__c) }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                                <apex:outputPanel rendered="{! cardIndx != numberOfCards }">
                                                                    <div class="b-splitter"></div>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            <span id="edit-card-viewport"></span>
                                                            <span id="not-configured-card-{! cardIndx }-viewport"></span>
                                                            <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].techParamsIsConfigurated = false  }" styleClass="{! IF(continueButtonStatus = 'show-feesAgreementButton', 'config-cards-shadow','') }">
                                                                <div class="row">
                                                                    <div class="col-xs-10 col-sm-10">
                                                                        <apex:outputPanel layout="block" styleClass="b-block-header font-15">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['-CARD #-']['LABEL'].Value__c } {! cardIndx }
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="col-xs-2 col-sm-2">
                                                                        <apex:outputPanel layout="block" styleClass="delete" rendered="{! numberOfCards != 1 }">
                                                                            <apex:commandLink action="{! removeCard }"
                                                                                oncomplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                reRender="configuration, counter"
                                                                                status="splashStatus">
                                                                                <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                            </apex:commandLink>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <apex:outputPanel layout="block" id="configBlock" styleClass="b-configs-block">
                                                                            <div class="config-list" id="confList">
                                                                                <div id="categoryLink" class="config {! IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Category', 'active', 'blue')}">
                                                                                    <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['CATEGORY TAB']['TAB NAME'].Value__c }  "
                                                                                        reRender="configBlock, save-config-btn"
                                                                                        styleClass="link"
                                                                                        status="splashStatus"
                                                                                        style="width: 70px; display: inline-block;"
                                                                                        oncomplete="changeLink(this); toViewport('edit-card-viewport'); setEvents_cardsOrder(); onPageRender();">
                                                                                            <apex:param name="categoryTabName" value="Category" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                    </apex:commandLink>
                                                                                </div>
                                                                                <div id="optionLink" class="config {! IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Options', 'active', IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing','blue','disabled')) }">
                                                                                    <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['OPTIONS TAB']['TAB NAME'].Value__c }  "
                                                                                        reRender="configBlock, save-config-btn"
                                                                                        styleClass="link"
                                                                                        status="splashStatus"
                                                                                        style="width: 70px; display: inline-block; margin-left: 0;"
                                                                                        oncomplete="changeLink(this); toViewport('edit-card-viewport'); setEvents_cardsOrder(); onPageRender();">
                                                                                            <apex:param name="optionsTabName" value="Options" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                            <apex:param name="continueButtonStatusValue" value="show-goToEmbossingButton" assignTo="{! continueButtonStatus }"/>
                                                                                    </apex:commandLink>
                                                                                </div>
                                                                                <div id="embossingLink" class="config {! IF(finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing', 'active', 'disabled')}" style="{! IF(LEN(account.Name) <= 25, 'display: none', '') }">
                                                                                    <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['TAB NAME'].Value__c }  "
                                                                                        reRender="configBlock, save-config-btn"
                                                                                        styleClass="link"
                                                                                        status="splashStatus"
                                                                                        style="width: 70px; display: inline-block;"
                                                                                        oncomplete="changeLink(this); toViewport('edit-card-viewport');">
                                                                                            <apex:param name="embossingTabName" value="Embossing" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                    </apex:commandLink>
                                                                                </div>
                                                                            </div>
                                                                            <apex:outputPanel layout="block" id="configSteps">
                                                                                <apex:outputPanel layout="block" styleClass="b-category" rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Category' }">
                                                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['CATEGORY TAB']['DESCRIPTION'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <div class="category-list">
                                                                                        <div class="radio radio-red">
                                                                                            <div class="category">
                                                                                                <input type="radio"
                                                                                                    id="radio4"
                                                                                                    value="All vehicle related product"
                                                                                                    name="category{! cardIndx }"
                                                                                                    onclick="$j('.hiddenRadioValue{! cardIndx } input').val('All vehicle related product');"/>
                                                                                                <label for="radio4">
                                                                                                    <apex:outputPanel styleClass="select-item">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['TYPE NAME'].Value__c }
                                                                                                        <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['HELP'].Value__c }" data-html="true" data-trigger="hover"
                                                                                                             data-container="body" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                    </apex:outputPanel><br/>
                                                                                                    <ul class="font-11">
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                        <li><apex:outputPanel >
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 4'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 1'].elementItemsMap['ITEM 5'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                    </ul>
                                                                                                </label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="b-splitter"></div>
                                                                                        <div class="radio radio-red">
                                                                                            <div class="category">
                                                                                                <input type="radio"
                                                                                                    id="radio5"
                                                                                                    value="All fuel types"
                                                                                                    onclick="$j('.hiddenRadioValue{! cardIndx } input').val('All fuel types');"
                                                                                                    name="category{! cardIndx }"/>
                                                                                                <label for="radio5">
                                                                                                    <apex:outputPanel styleClass="select-item">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['TYPE NAME'].Value__c }
                                                                                                        <span class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['HELP'].Value__c }" data-html="true" data-trigger="hover"
                                                                                                            data-container="body" data-toggle="popover" data-placement="bottom">?</span>
                                                                                                    </apex:outputPanel><br/>
                                                                                                    <ul class="font-11">
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 2'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                    </ul>
                                                                                                </label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="b-splitter"></div>

                                                                                        <div class="radio radio-red">
                                                                                            <div class="category">
                                                                                                <input type="radio"
                                                                                                    id="radio6"
                                                                                                    value="Diesel"
                                                                                                    onclick="$j('.hiddenRadioValue{! cardIndx } input').val('Diesel');"
                                                                                                    name="category{! cardIndx }"/>
                                                                                                <label for="radio6">
                                                                                                    <apex:outputPanel styleClass="select-item">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['TYPE NAME'].Value__c }
                                                                                                    </apex:outputPanel><br/>
                                                                                                    <ul class="font-11">
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 1'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 2'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <apex:outputPanel >
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['CARD TYPE 3'].elementItemsMap['ITEM 3'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </li>
                                                                                                    </ul>
                                                                                                </label>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="hiddenRadioValue{! cardIndx }">
                                                                                        <apex:inputHidden value="{! finalCardsMap[cardIndx].categoryCard }"/>
                                                                                        <script>
                                                                                            $j('input[name="category' + {! cardIndx } + '"][value="' + $j('.hiddenRadioValue{! cardIndx } input').val() + '"]').prop('checked', true);
                                                                                        </script>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="center-block text-center" style="margin-top: 24px;">
                                                                                            <div class="col-xs-12 col-sm-12">
                                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['CATEGORY TAB']['NEXT BUTTON'].Value__c }"
                                                                                                    action="{! goToOptions }"
                                                                                                    reRender="configBlock"
                                                                                                    oncomplete="goToLastNotConfiguredCardViewport(); setEvents_cardsOrder(); onPageRender();"
                                                                                                    styleClass="btn btn-red"
                                                                                                    status="splashStatus">
                                                                                                        <apex:param name="optionsTabName" value="Options" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                                </apex:commandLink>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <script>
                                                                                        analytics_CardConfigurationOnLoad('{! opportunity.Zahlungsart__c }', '{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }','{! opportunity.E2E_Form_of_Business__c }');
                                                                                    </script>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="b-option" rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Options' }">
                                                                                    <div class="options">
                                                                                        <div class="item">
                                                                                            <div class="b-checkbox">
                                                                                                <div class="form-check">
                                                                                                    <div class="checkbox checkbox-red">
                                                                                                        <apex:inputCheckbox value="{! finalCardsMap[cardIndx].pumpOutsideCountry }" styleClass="form-check-input" id="checkbox2"/>
                                                                                                        <apex:outputLabel for="checkbox2" value="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['LABEL'].Value__c }" styleClass="form-check-label"/>
                                                                                                        <apex:outputPanel layout="block" styleClass="desc">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP LOCATION'].elementItemsMap['REMARK'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="b-splitter"></div>
                                                                                        </div>
                                                                                        <div class="item">
                                                                                            <div class="b-checkbox">
                                                                                                <div class="form-check">
                                                                                                    <div class="checkbox checkbox-red">
                                                                                                        <apex:inputCheckbox value="{! finalCardsMap[cardIndx].pumpAtPartners }" styleClass="form-check-input" id="checkbox3"/>
                                                                                                        <apex:outputLabel for="checkbox3" value="{! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['LABEL'].Value__c }" styleClass="form-check-label"/>
                                                                                                        <apex:outputPanel layout="block" styleClass="desc">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['REMARK 1'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                        <apex:outputPanel layout="block" styleClass="desc" style="padding-top: 5px;">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['PUMP PARTNERS'].elementItemsMap['REMARK 2'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="b-splitter"></div>
                                                                                        </div>
                                                                                        <div class="item">
                                                                                            <div class="b-checkbox">
                                                                                                <div class="form-check">
                                                                                                    <div class="checkbox checkbox-red">
                                                                                                        <apex:inputCheckbox value="{! finalCardsMap[cardIndx].needOdometerOptions }" styleClass="form-check-input" id="checkbox4"/>
                                                                                                        <apex:outputLabel value="{! stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['LABEL'].Value__c }" styleClass="form-check-label" for="checkbox4">
                                                                                                            <span
                                                                                                                class="i-helper inline-block"
                                                                                                                data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['HELP'].Value__c }"
                                                                                                                data-html="true"
                                                                                                                data-trigger="hover"
                                                                                                                data-container="body"
                                                                                                                data-toggle="popover"
                                                                                                                data-placement="bottom">
                                                                                                                ?
                                                                                                            </span>
                                                                                                        </apex:outputLabel>
                                                                                                        <apex:outputPanel layout="block" styleClass="desc">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['ODOMETER OPTIONS'].elementItemsMap['REMARK'].Value__c }
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row">
                                                                                            <div class="col-lg-12">
                                                                                                <apex:outputPanel layout="block">
                                                                                                    <apex:outputPanel layout="block" style="margin-top: 13px;">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LABEL'].Value__c }
                                                                                                        <span
                                                                                                            class="i-helper inline-block"
                                                                                                            data-content="{! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['HELP'].Value__c }"
                                                                                                            data-html="true"
                                                                                                            data-trigger="hover"
                                                                                                            data-container="body"
                                                                                                            data-toggle="popover"
                                                                                                            data-placement="bottom">
                                                                                                            ?
                                                                                                        </span>
                                                                                                    </apex:outputPanel>
                                                                                                </apex:outputPanel>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row form-group">
                                                                                            <div class="car-type">
                                                                                                <div class="col-xs-12 col-sm-12">
                                                                                                    <div class="btn-group btn-group-justified">
                                                                                                        <apex:outputPanel id="selectTypeOfCar">
                                                                                                            <div class="btn-group btn-group-justified">
                                                                                                                <div id="pkw" style="width: 50%"
                                                                                                                    class="{! IF(stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW BUTTON API'].Value__c = finalCardsMap[cardIndx].selectedTypeOfCar, 'btn btn-select selected', 'btn btn-select') }"
                                                                                                                    onclick="$j('[id$=car-type-dflt]').val('{! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW BUTTON API'].Value__c }');
                                                                                                                             $j('[id$=pkw]').addClass('selected');
                                                                                                                             $j('[id$=lkw]').removeClass('selected');">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['PKW BUTTON LABEL'].Value__c }
                                                                                                                </div>
                                                                                                                <div id="lkw" style="width: 50%"
                                                                                                                    class="{! IF(stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW BUTTON API'].Value__c = finalCardsMap[cardIndx].selectedTypeOfCar, 'btn btn-select selected', 'btn btn-select') }"
                                                                                                                    onclick="$j('[id$=car-type-dflt]').val('{! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW BUTTON API'].Value__c }');
                                                                                                                             $j('[id$=lkw]').addClass('selected');
                                                                                                                             $j('[id$=pkw]').removeClass('selected');">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['TYPE OF CAR'].elementItemsMap['LKW BUTTON LABEL'].Value__c }
                                                                                                                </div>
                                                                                                                <apex:inputHidden id="car-type-dflt" value="{! finalCardsMap[cardIndx].selectedTypeOfCar }"/>
                                                                                                            </div>
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="center-block text-center" style="margin-top: 24px;">
                                                                                            <div class="col-xs-12 col-sm-12">
                                                                                                <!-- if account name > 25 symbols -->
                                                                                                <apex:commandLink action="{! goToEmbossing }"
                                                                                                    value="{! stepPagesMap['CARD CONFIGURATION'].elements['OPTIONS TAB']['NEXT BUTTON'].Value__c }"
                                                                                                    reRender="configBlock, save-config-btn, cards-exception"
                                                                                                    rendered="{! continueButtonStatus = 'show-goToEmbossingButton' }"
                                                                                                    oncomplete="setEvents_cardsOrder(); goToLastNotConfiguredCardViewport();"
                                                                                                    status="splashStatus"
                                                                                                    styleClass="btn btn-red">
                                                                                                        <apex:param name="embossingTabName" value="Embossing" assignTo="{! finalCardsMap[cardIndx].activeCardConfigStepMobile }"/>
                                                                                                </apex:commandLink>
                                                                                                <!-- if 1 card only and account name > 25 symbols -->
                                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['CONTINUE BUTTON'].Value__c }"
                                                                                                    action="{! goToFeesAndCosts }"
                                                                                                    oncomplete="toViewport('fees-snd-costs-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                                    reRender="configuration, cards-exception"
                                                                                                    styleClass="btn btn-red"
                                                                                                    rendered="{! continueButtonStatus = 'show-saveContinueButton' }"
                                                                                                    status="splashStatus">
                                                                                                        <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                                </apex:commandLink>
                                                                                                <!-- if more than 2 cards and account name > 25 symbols -->
                                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['SAVE BUTTON'].Value__c }"
                                                                                                    action="{! saveCard }"
                                                                                                    onComplete="goToLastNotConfiguredCardViewport(); onPageRender();"
                                                                                                    reRender="configuration, systemError, cards-exception"
                                                                                                    rendered="{! continueButtonStatus = 'show-saveSingleCardButton' }"
                                                                                                    styleClass="btn btn-red"
                                                                                                    status="splashStatus">
                                                                                                        <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                                </apex:commandLink>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <script>
                                                                                        analytics_CardConfigurationOptionsOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }", '{! opportunity.E2E_Form_of_Business__c }');
                                                                                    </script>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="b-embossing" rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing' }">
                                                                                    <apex:outputPanel layout="block" styleClass="font-13">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['DESCRIPTION'].Value__c }{! cardIndx }{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['DESCRIPTION 1'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel id="company-name-input">
                                                                                        <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = true }">
                                                                                            <div class="row form-group">
                                                                                                <div class="company-name block ym-hide-content">
                                                                                                    <div class="col-xs-12 col-sm-12">
                                                                                                        <div class="b-form-field">
                                                                                                            <div class="form-field">
                                                                                                                <div class="f-input">
                                                                                                                    <apex:outputLabel styleClass="f-container">
                                                                                                                        <span class="column">
                                                                                                                            <apex:inputText id="companyName"
                                                                                                                                value="{! finalCardsMap[cardIndx].companyNameInputValue }"
                                                                                                                                required="false"
                                                                                                                                styleClass="inline-block form-control required input ym-disable-keys"
                                                                                                                                style="text-transform: uppercase;"
                                                                                                                                maxLength="25"
                                                                                                                                html-autocomplete="off"/>
                                                                                                                            <span class="len-company-name font-11"></span>
                                                                                                                            <apex:outputLabel styleClass="input-label" for="companyName">
                                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                                                                <span class="f-required">
                                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                                                                </span>
                                                                                                                            </apex:outputLabel>
                                                                                                                        </span>
                                                                                                                    </apex:outputLabel>
                                                                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                                                                </div>
                                                                                                                <apex:outputPanel layout="block" styleClass="font-11 text-muted" style="margin-top: 7px; display: flex;">
                                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['REMARK'].Value__c }
                                                                                                                    <span style="min-width: 21px; display: inline-block;"></span>
                                                                                                                </apex:outputPanel>
                                                                                                            </div>
                                                                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                                                                {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                                                            </apex:outputPanel>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </apex:outputPanel>

                                                                                        <apex:outputPanel layout="block" rendered="{! finalCardsMap[cardIndx].displayCompanyNameField = false }">
                                                                                            <div class="row">
                                                                                                <div class="col-xs-12 col-sm-12">
                                                                                                    <apex:outputLabel styleClass="font-13 text-muted" style="margin: 24px 0 4px 0;">
                                                                                                        {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['LABEL'].Value__c }
                                                                                                        <span class="f-required">
                                                                                                            {! stepPagesMap['CARD CONFIGURATION'].fields['COMPANY NAME'].elementItemsMap['ASTERISK'].Value__c }
                                                                                                        </span>
                                                                                                    </apex:outputLabel>
                                                                                                    <div class="m-company-value ym-hide-content">
                                                                                                        <apex:outputText id="companyInput"
                                                                                                            value="{! finalCardsMap[cardIndx].companyNameInputValue }"
                                                                                                            styleClass="company-value inline-block font-15"/>
                                                                                                        <apex:outputPanel styleClass="edit">
                                                                                                            <apex:commandLink action="{! editCompanyName }"
                                                                                                                onComplete="setEvents_cardsOrder(); onPageRender();"
                                                                                                                styleClass="font-11"
                                                                                                                reRender="company-name-input"
                                                                                                                status="splashStatus">
                                                                                                                <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                                                                <apex:param name="cardindex" value="{! cardIndx }"/>
                                                                                                            </apex:commandLink>
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <script>
                                                                                        analytics_CardConfigurationPersonOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }", '{! opportunity.E2E_Form_of_Business__c }');
                                                                                    </script>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>

                                                                <apex:outputPanel id="save-config-btn">
                                                                    <apex:outputPanel rendered="{! finalCardsMap[cardIndx].activeCardConfigStepMobile = 'Embossing' }">
                                                                        <apex:outputPanel rendered="{! LEN(account.Name) > 25 }">
                                                                            <div class="row">
                                                                                <div class="center-block text-center" style="margin-top: 24px;">
                                                                                    <div class="col-xs-12 col-sm-12">
                                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['SAVE BUTTON'].Value__c }"
                                                                                            action="{! saveCard }"
                                                                                            onclick="if (! checkCompanyName()) return false;"
                                                                                            onComplete="goToLastNotConfiguredCardViewport(); onPageRender();"
                                                                                            reRender="configuration, systemError"
                                                                                            rendered="{! continueButtonStatus = 'show-saveSingleCardButton' }"
                                                                                            styleClass="btn btn-red"
                                                                                            status="splashStatus">
                                                                                                <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                        </apex:commandLink>
                                                                                        <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION'].elements['EMBOSSING TAB']['CONTINUE BUTTON'].Value__c }"
                                                                                            action="{! goToFeesAndCosts }"
                                                                                            onclick="if (! checkCompanyName()) return false;"
                                                                                            oncomplete="toViewport('fees-snd-costs-viewport'); setEvents_cardsOrder(); onPageRender();"
                                                                                            reRender="configuration"
                                                                                            styleClass="btn btn-red"
                                                                                            rendered="{! continueButtonStatus = 'show-saveContinueButton' }"
                                                                                            status="splashStatus">
                                                                                            <apex:param name="cardIndex" value="{! cardIndx }"/>
                                                                                        </apex:commandLink>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-xs-12 col-sm-12">
                                                                                    <div class="text-center">
                                                                                        <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                                                            <apex:outputPanel layout="block">
                                                                                                <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                                                    value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                                                    styleClass="font-13"
                                                                                                    reRender="saveAndContinueLater"
                                                                                                    status="splashStatus"/>
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                                                {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </div>
                                                                            </div> 
                                                                        </apex:outputPanel> 
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>  
                                                                <script>
                                                                    function goToLastNotConfiguredCardViewport() { 
                                                                        var cardIndxJs = + '{! cardIndx }';
                                                                        toViewport('not-configured-card-' + cardIndxJs + '-viewport');
                                                                    }
                                                                </script>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </apex:repeat>
                                                </div>
                                            </div>
                                            
                                            <apex:repeat value="{! finalCardsMap }" var="cardIndx">
                                                <apex:outputPanel layout="block" styleClass="col-xs-12 col-sm-12" rendered="{! AND(finalCardsMap[cardIndx].techParamsIsConfigurated = true, finalCardsMap[cardIndx].cardIsConfigurated = false) }">
                                                    <div class="card-item">
                                                        <div class="row">
                                                            <div class="b-steps-list-cards">
                                                                <apex:outputPanel layout="block" styleClass="li">
                                                                    <apex:outputPanel styleClass="li-text" layout="block">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['-CARD #-']['LABEL'].Value__c } {! cardIndx }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:repeat>

                                            <span id="fees-snd-costs-viewport"></span>
                                            <apex:outputPanel layout="block" styleClass="col-xs-12 col-sm-12" rendered="{! OR(continueButtonStatus = 'show-saveSingleCardButton', continueButtonStatus = 'show-saveContinueButton') }">
                                                <div class="row">
                                                    <div class="b-steps-list-cards">
                                                        <apex:outputPanel layout="block" styleClass="li" style="border: none;">
                                                            <apex:outputPanel styleClass="li-text" layout="block">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['FEES AND COSTS']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{! continueButtonStatus = 'show-feesAgreementButton' }">
                                                <div class="wrapper blue-block">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin-bottom: 0px;">
                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['FEES AND COSTS']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="inner-block">
                                                                <apex:repeat value="{! costsColumnsMap['1'] }" var="costItem">
                                                                    <apex:outputPanel layout="block" styleClass="fees-and-costs">
                                                                        <apex:outputPanel layout="block" styleClass="item" style="{! costItem.style }">
                                                                            <apex:outputPanel layout="block" styleClass="f-item inline-block" style="{! IF(costItem.contentName = 'MONTHLY ACCOUNT MANAGEMENT FEE HEADING', 'padding-right: 0;', '') } height: auto; width: 156px; line-height: 18px; margin-top: 5px;">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE'][costItem.contentName].Value__c }
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="f-val inline-block" style="margin-top: 17px;">
                                                                                {! costItem.costValue } {! costItem.costTariff }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="f-desc" rendered="{! costItem.contentName = 'MONTHLY ACCOUNT MANAGEMENT FEE HEADING' }">
                                                                            {! IF(numberOfCards = 1, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-PER CARD-'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-PER CARDS-'].Value__c) } {! numberOfCards } {! IF(numberOfCards = 1, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARD-'].Value__c, stepPagesMap['CARD CONFIGURATION'].elements['SERVICE FEE']['-CARDS-'].Value__c) }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:repeat>

                                                                <apex:outputPanel layout="block" styleClass="fee-national-header" style="margin: 21px 12px 9px 12px;">
                                                                    <apex:outputPanel layout="block">
                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING'].Value__c }
                                                                        <div class="i-helper inline-block"
                                                                            data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['NATIONAL HEADING HELP'].Value__c }"
                                                                            data-trigger="hover"
                                                                            data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <apex:repeat value="{! costsColumnsMap['2_1'] }" var="costItem">
                                                                    <apex:outputPanel layout="block" styleClass="fees-and-costs">
                                                                        <apex:outputPanel layout="block" styleClass="item">
                                                                            <apex:outputPanel layout="block" styleClass="f-item inline-block" >
                                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }
                                                                                <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                    <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                                {! costItem.costValue } {! costItem.costTariff }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:repeat>

                                                                <apex:outputPanel rendered="{! showInternationalFeesBlock }">
                                                                    <apex:outputPanel layout="block" styleClass="fee-international-header">
                                                                        <apex:outputPanel layout="block">
                                                                            {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING'].Value__c }
                                                                            <div class="i-helper inline-block"
                                                                                data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE']['INTERNATIONAL HEADING HELP'].Value__c }" data-trigger="hover"
                                                                                data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:repeat value="{! costsColumnsMap['2_2'] }" var="costItem">
                                                                        <apex:outputPanel layout="block" styleClass="fees-and-costs">
                                                                            <apex:outputPanel layout="block" styleClass="item">
                                                                                <apex:outputPanel layout="block" styleClass="f-item inline-block" >
                                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentName].Value__c }
                                                                                    <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                        <div class="i-helper inline-block" data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['TRANSACTION FEE'][costItem.contentHelp].Value__c }" data-trigger="hover" data-container="body" data-toggle="popover" data-placement="top">?</div>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                                    {! costItem.costValue } {! costItem.costTariff }
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </apex:repeat>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="f-item inline-block font-11" style="padding-right: 12px; color: #00000080; float: right;">
                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['VAT IS NOT INCLUDED']['REMARK'].Value__c }
                                                                </apex:outputPanel>

                                                                <div class="row">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <div class="collapse-block">
                                                                            <div class="link" data-toggle="collapse" data-target="#otherPossibleFees">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES HEADING'].Value__c }
                                                                                <div class="expander block-expand inline-block"></div>
                                                                            </div>
                                                                            <div class="row collapse" id="otherPossibleFees" style="margin-top: 12px;">
                                                                                <div class="fees-inner-block">
                                                                                    <apex:outputPanel layout="block" styleClass="font-15 fees-inner-text">
                                                                                        {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE']['OTHER FEES SUBHEADING'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                    <apex:repeat value="{! costsColumnsMap['3'] }" var="costItem">
                                                                                        <apex:outputPanel layout="block" styleClass="fees-and-costs" style="{! costItem.style }">
                                                                                            <apex:outputPanel layout="block" styleClass="item" style="margin-top: 7px;">
                                                                                                <apex:outputPanel layout="block" styleClass="f-item inline-block">
                                                                                                    {! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentName].Value__c }
                                                                                                    <apex:outputPanel rendered="{! costItem.showHelpItem }">
                                                                                                        <div class="i-helper inline-block"
                                                                                                            data-content="{! stepPagesMap['CARD CONFIGURATION'].elements['OTHER FEE'][costItem.contentHelp].Value__c }"
                                                                                                            data-trigger="hover"
                                                                                                            data-html="true"
                                                                                                            data-container="body"
                                                                                                            data-toggle="popover"
                                                                                                            data-placement="top">?</div>
                                                                                                    </apex:outputPanel>
                                                                                                </apex:outputPanel>
                                                                                                <apex:outputPanel layout="block" styleClass="f-val inline-block">
                                                                                                    {! costItem.costValue } <span class="fees-euro-symbol">{! costItem.costTariff }</span>
                                                                                                </apex:outputPanel>
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                    </apex:repeat>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- <apex:repeat value="{! costsColumnsMap['DISCOUNT'] }" var="costItem">
                                                                    <div class="row">
                                                                        <div class="col-xs-12 col-sm-12">
                                                                            <div class="b-block-header" style="margin: 28px 12px 5px 12px;">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['HEADING'].Value__c } {! costItem.discountValue } {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['CURRENCY'].Value__c }
                                                                            </div>
                                                                            <div class="font-11" style="margin: 0 0 0 12px;">
                                                                                {! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['MESSAGE'].Value__c }
                                                                                <ul class="font-11 discount-ul">
                                                                                    <li>
                                                                                        <span>{! stepPagesMap['CARD CONFIGURATION'].elements['DISCOUNT BLOCK']['ENDNOTE'].Value__c }</span>
                                                                                    </li>
                                                                                </ul>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:repeat> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="center-block text-center" style="margin-top: 22px;">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <!-- UNCOMMENT LATER -->
                                                                <!-- <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                    action="{! goToSpecialOffers }"
                                                                    onComplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); setEvents_additional(); onPageRender();"
                                                                    reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                    status="splashStatus"
                                                                    styleClass="btn btn-red"
                                                                    style="width: 220px;"/> -->
                                                                
                                                                <!-- TEMP BLOCK DUE TO "SPECIAL OFFER" STEP REMOVAL (MUST BE REMOVED) -->
                                                                <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                    action="{! goToSpecialOffers }"
                                                                    onComplete="toViewport('order-details-viewport'); setEvents_cardsOrder(); setEvents_additional(); onPageRender(); setValidCurrencyFormat();"
                                                                    reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                    status="splashStatus"
                                                                    styleClass="btn btn-red"
                                                                    style="width: 220px;"/>
                                                                <script>
                                                                    isOffers = true;
                                                                    analytics_CardConfigurationSummaryOnLoad('{! opportunity.Zahlungsart__c }', "{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }", '{! opportunity.E2E_Form_of_Business__c }');
                                                                </script>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="text-center">
                                                                <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                            onclick="scrollDisableControl('disable');"
                                                                            value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                            styleClass="font-13"
                                                                            reRender="saveAndContinueLater"
                                                                            status="splashStatus"/>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- STEP SPECIAL OFFERS -->
                                    <!-- <apex:outputPanel rendered="{! AND(activeStep = 2, activeSubstep = 'Choosing offer') }"> 
                                        <apex:outputPanel layout="block" id="specialOffers" styleClass="special-offers">
                                            <div class="wrapper">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel layout="block" styleClass="m-offer" >
                                                            <apex:outputPanel layout="block" styleClass="b-col-header">
                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <apex:outputPanel layout="block" id="blockSpecialOffers">
                                                <div class="b-splitter" style="margin-bottom: 10px; margin-left: 12px;"></div>
                                                    <apex:repeat value="{! nonHomeOffersList }" var="nonHomeOffer">
                                                        <apex:outputPanel layout="block" styleClass="offer" id="allShellDiscount">
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <apex:outputPanel layout="block" styleClass="font-15" style="margin-bottom: 6px;">
                                                                        {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['OFFER NAME'].Value__c }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <apex:outputPanel layout="block" styleClass="price-tag-text inline-block">
                                                                        <apex:outputPanel layout="block" styleClass="font-11">
                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['OFFER DESCRIPTION'].Value__c }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <div class="offer-label inline-block">
                                                                        <apex:outputPanel layout="block" styleClass="{! IF(OR(nonHomeOffer.offerRemoveBtnStatus = 'show-enabled', nonHomeOffersList.size = 1), 'arrow-right selected inline-block', 'arrow-right inline-block') }"/>
                                                                        <apex:outputPanel layout="block" styleClass="{! IF(OR(nonHomeOffer.offerRemoveBtnStatus = 'show-enabled', nonHomeOffersList.size = 1), 'price-right selected inline-block', 'price-right inline-block') }">
                                                                            <apex:outputPanel layout="block" styleClass="tag-font-15">
                                                                                {! nonHomeOffer.offerDiscount }
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="tag-font-13">
                                                                                {! nonHomeOffer.offerDiscountRatePer }
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <div class="collapse-block" style="margin-bottom: 24px;">
                                                                        <div class="link" data-toggle="collapse" data-target="#shellDiscount" aria-expanded="true">
                                                                            <apex:outputPanel styleClass="font-13" style="color: #0093ee;">
                                                                                {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DETAILS HEADING'].Value__c }<div class="expander inline-block block-collapse"></div>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                        <div class="row collapse in" id="shellDiscount" style="margin: 12px 0 0 0;" aria-expanded="true">
                                                                            <div class="detail-list">
                                                                                <apex:outputPanel layout="block" styleClass="font-11">
                                                                                    <apex:outputPanel layout="block">
                                                                                        <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['DISCOUNT'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                            {! nonHomeOffer.offerDiscount } {! nonHomeOffer.offerDiscountRatePer }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block">
                                                                                        <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['TIME'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                            {! nonHomeOffer.offerTime }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" rendered="{! OR(nonHomeOffer.offerIsBased = 'Volume', nonHomeOffer.offerIsBased = 'Fuel + Volume') }">
                                                                                        <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                           {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['VOLUME'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                            {! nonHomeOffer.offerVolume }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" rendered="{! OR(nonHomeOffer.offerIsBased = 'Fuel', nonHomeOffer.offerIsBased = 'Fuel + Volume') }">
                                                                                        <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['FUEL TYPE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="inline-block collapsable-body" style="line-height: 1; margin-top: 5px;">
                                                                                            {! nonHomeOffer.offerFuelType }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block">
                                                                                        <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['GEOGRAPHY'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                            {! nonHomeOffer.offerCountry }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block">
                                                                                        <apex:outputPanel layout="block" styleClass="collapsable-head inline-block">
                                                                                           {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['STATION'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="inline-block collapsable-body">
                                                                                            {! nonHomeOffer.offerStation }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <apex:outputPanel rendered="{! OR(nonHomeOffer.offerSelectionBtnStatus = 'show-enabled', nonHomeOffer.offerSelectionBtnStatus = 'show-disabled') }">
                                                                <div class="row">
                                                                    <div class="save-btn">
                                                                        <div class="col-xs-12 col-sm-12">
                                                                            <div class="offer-buttons center-block">
                                                                                <apex:commandButton action="{! selectOffer }"
                                                                                    value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['CONFIRM OFFER BUTTON'].Value__c }"
                                                                                    disabled="{! nonHomeOffer.offerSelectionBtnStatus = 'show-disabled' }"
                                                                                    styleClass="btn btn-red"
                                                                                    reRender="specialOffers, modalError"
                                                                                    alt="{! nonHomeOffer.productName }"
                                                                                    status="splashStatus"
                                                                                    oncomplete="selectedOfferAnalytics = this.alt;">
                                                                                    <apex:param name="offerSelectionBtnStatus" value="hide" assignTo="{! nonHomeOffer.offerSelectionBtnStatus }"/>
                                                                                    <apex:param name="offerRemoveBtnStatus" value="show-enabled" assignTo="{! nonHomeOffer.offerRemoveBtnStatus }"/>
                                                                                    <apex:param name="offerName" value="{! nonHomeOffer.productName }"/>
                                                                                </apex:commandButton>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{! nonHomeOffer.offerRemoveBtnStatus = 'show-enabled' }">
                                                                <div class="row">
                                                                    <div class="remove-btn">
                                                                        <div class="col-xs-12 col-sm-12">
                                                                            <div class="offer-buttons center-block inline-block pull-left">
                                                                                <apex:commandLink value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[nonHomeOffer.offerContentKey]['REMOVE OFFER BUTTON'].Value__c }"
                                                                                    styleClass="btn btn-gray"
                                                                                    action="{! removeOffer }"
                                                                                    reRender="specialOffers" status="splashStatus">
                                                                                    <apex:param name="offerSelectionBtnStatus" value="show-enabled" assignTo="{! nonHomeOffer.offerSelectionBtnStatus }"/>
                                                                                    <apex:param name="offerRemoveBtnStatus" value="hide" assignTo="{! nonHomeOffer.offerRemoveBtnStatus }"/>
                                                                                </apex:commandLink>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <div class="b-splitter" style="margin-bottom: 20px;"></div>
                                                        </apex:outputPanel>
                                                    </apex:repeat>

                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="text-center" id="specialOffersContinueBlock">
                                                                <apex:outputPanel layout="block" styleClass="button-info font-11" style="color: #777;" rendered="{! AND(continueButtonStatus = 'show-disabled', nonHomeOffersList.size != 1 ) }">
                                                                    {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="bottom-continue-btn" >
                                                                    <div class="bottom-continue-btn">
                                                                        <apex:commandButton value="{! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                            action="{! goToAdditionalParams }"
                                                                            disabled="{! continueButtonStatus != 'show-enabled' }"
                                                                            onComplete="toViewport('additional-viewport'); setEvents_cardsOrder(); setEvents_additional(); onPageRender();"
                                                                            styleClass="btn btn-red continue"
                                                                            reRender="formBlock, systemError,onlineChatBlock"
                                                                            status="splashStatus"/>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                            <script>
                                                analytics_SpecialOfferOnLoad('{! opportunity.Zahlungsart__c }', '{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }','{! opportunity.E2E_Form_of_Business__c }');
                                            </script>
                                        </apex:outputPanel>
                                    </apex:outputPanel> -->

                                    <!-- STEP ADDITIONAL SERVICES BLOCK -->
                                    <apex:outputPanel id="additional-page" styleClass="additional-page special-offers" rendered="{! AND(activeStep = 2, activeSubstep = 'Additional services') }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="m-offer" >
                                                        <apex:outputPanel layout="block" styleClass="b-col-header">
                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <apex:outputPanel layout="block" id="blockCharityOffer">
                                                <!-- <apex:outputPanel styleClass="top-gray-block" layout="block">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <apex:outputPanel layout="block" styleClass="b-shell-header">
                                                                <apex:repeat value="{! nonHomeOffersList }" var="offer">
                                                                    <apex:outputPanel layout="block" styleClass="inline-block" style="width: 75%;" rendered="{! offer.productName = opportunity.Product__c }">
                                                                        <apex:outputPanel styleClass="b-semibold-header" layout="block">
                                                                            {! stepPagesMap['CARD CONFIGURATION. SPECIAL OFFERS'].elements[offer.offerContentKey]['TEASER'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel styleClass="font-11" layout="block">
                                                                           {! offer.offerDiscount } {! offer.offerDiscountRatePer }
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:repeat>
                                                                <apex:outputPanel layout="block" styleClass="edit-special-offer inline-block pull-right">
                                                                    <apex:outputPanel styleClass="edit">
                                                                        <apex:commandLink action="{! editSpecialOffers }"
                                                                            styleClass="font-11"
                                                                            onClick="isOffers = true;"
                                                                            reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                            status="splashStatus">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, 'pen.png')}" style="width: 15px;"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel> -->

                                                <span id="additional-viewport"></span>
                                                <apex:outputPanel layout="block" rendered="{! AND(activeStep = 2, activeSubStep = 'Additional services') }">
                                                    <apex:outputPanel styleClass="offer scroll-to-additional" layout="block" rendered="{! OR(stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['SHOW SERVICE'].Value__c = 'true', stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['SHOW SERVICE'].Value__c = 'TRUE') }">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputPanel layout="block" styleClass="m-nature-block">
                                                                    <apex:outputPanel layout="block" styleClass="b-small-header">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="font-13">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['SUBHEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputPanel layout="block" styleClass="b-text-img" >
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['IMAGE NAME'].Value__c)}" styleClass="eco-img"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <apex:outputPanel layout="block" styleClass="text-under-picture">
                                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['DESCRIPTION'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="agree" style="margin-top: 7px;">
                                                                    <div class="form-check inline-block">
                                                                        <div class="checkbox checkbox-red">
                                                                            <apex:inputCheckbox value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['AGREEMENT CHECKBOX VALUE'].Value__c }" styleClass="form-check-input" id="checkboxCareAdditional1Block"/>
                                                                            <apex:outputLabel for="checkboxCareAdditional1Block">
                                                                                <apex:outputPanel styleClass="font-11">
                                                                                    <apex:outputPanel >
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['AGREEMENT CHECKBOX LABEL'].Value__c }
                                                                                    </apex:outputPanel><br/>
                                                                                    <apex:outputPanel >
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #1']['AGREEMENT CHECKBOX SUBLABEL'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </apex:outputLabel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>

                                                    <apex:outputPanel styleClass="offer scroll-to-additional" layout="block" rendered="{! AND(OR(stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['SHOW SERVICE'].Value__c = 'true', stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['SHOW SERVICE'].Value__c = 'TRUE'), showInternationalFeesBlock = true) }">
                                                        <div class="b-splitter" style="margin-bottom: 10px; margin-top: 10px;"></div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputPanel layout="block" styleClass="m-nature-block">
                                                                    <apex:outputPanel layout="block" styleClass="b-small-header">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="font-13">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['SUBHEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputPanel layout="block" styleClass="b-text-img" >
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['IMAGE NAME'].Value__c)}" styleClass="eco-img"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputText styleClass="text-under-picture font-11" escape="false" value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['DESCRIPTION'].Value__c }"/>
                                                            </div>
                                                        </div>

                                                        <div class="row" style="padding-right: 10px;">
                                                            <div class="col-xs-12">
                                                                <div class="collapse-block">
                                                                    <div class="link" data-toggle="collapse" data-target="#additionalServiceDiscount" style="font-size: 12px; margin-top: -13px;">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. DETAILS'].Value__c }
                                                                        <div class="expander expend-detail inline-block block-expand"/>
                                                                    </div>
                                                                    <div class="row collapse" id="additionalServiceDiscount" style="font-size: 11px;">
                                                                        <div class="inline-block" style="margin-top: 10px;">
                                                                            <div class="col-xs-12" style="font-weight: bold; margin-bottom: 5px;">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. HEADING'].Value__c }
                                                                            </div><br/>
                                                                            <div class="col-xs-12">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. SUBHEADING ITEM 1'].Value__c }
                                                                            </div><br/>
                                                                            <div class="col-xs-12">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. SUBHEADING ITEM 2'].Value__c }
                                                                            </div> 
                                                                            <div class="col-xs-12" style="margin-bottom: 5px; margin-top: 5px;">
                                                                                <div class="col-xs-6" style="font-weight: bold; padding: 0;">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 HEADING'].Value__c }
                                                                                </div>
                                                                                <div class="col-xs-6" style="font-weight: bold; padding: 0;">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 HEADING'].Value__c }
                                                                            </div>
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 1'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 1'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 2'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 2'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 3'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 3'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 4'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 4'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 5'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 5'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 6'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 6'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 7'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 7'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 8'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 8'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 1 ITEM 9'].Value__c }
                                                                            </div>
                                                                            <div class="col-xs-6">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['COLLAPSED BLOCK. COLUMN 2 ITEM 9'].Value__c }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="agree" style="margin-top: 7px;">
                                                                    <div class="form-check inline-block">
                                                                        <div class="checkbox checkbox-red">
                                                                            <apex:inputCheckbox value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT AGREEMENT CHECKBOX VALUE'].Value__c }" styleClass="form-check-input vatRecovery" id="checkboxVatRecovery"/>
                                                                            <apex:outputLabel value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT AGREEMENT CHECKBOX LABEL'].Value__c }"
                                                                                styleClass="form-check-label" 
                                                                                for="checkboxVatRecovery"
                                                                                style="font-size: 11px;"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-check inline-block">
                                                                        <div class="checkbox checkbox-red">
                                                                            <apex:inputCheckbox value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX VALUE'].Value__c }" styleClass="form-check-input vatRecoveryTC" id="checkboxVatRecoveryTC"/>
                                                                            <apex:outputLabel styleClass="form-check-label" 
                                                                                for="checkboxVatRecoveryTC"
                                                                                style="font-size: 11px;">
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX LABEL PART 1'].Value__c }
                                                                                <apex:commandLink action="{! showTermsAndConditionsVatRecoveryModal }"
                                                                                    onclick="scrollDisableControl('disable');"
                                                                                    styleClass="form-check-label"
                                                                                    reRender="modalVatRecoveryTC"
                                                                                    status="splashStatus"
                                                                                    style="font-size: 11px;">
                                                                                    {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX LABEL URL'].Value__c }
                                                                                </apex:commandLink> 
                                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['VAT TC AGREEMENT CHECKBOX LABEL PART 2'].Value__c }
                                                                            </apex:outputLabel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div class="container" style="margin-top: 16px;">
                                                        <div class="col-xs-8 col-sm-8" style="padding-left: 0px;">
                                                            {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['ATS DESCRIPTION'].Value__c }
                                                        </div>
                                                        <div class="col-xs-4 col-sm-4">
                                                            <div class="pull-right">
                                                                <apex:image url="{! URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['ATS IMAGE NAME'].Value__c ) }" style="height: 25px; width: 100px;"/>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <apex:outputPanel styleClass="offer scroll-to-additional" layout="block" rendered="{! OR(stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['SHOW SERVICE'].Value__c = 'true', stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['SHOW SERVICE'].Value__c = 'TRUE') }">
                                                        <div class="b-splitter" style="margin-bottom: 10px; margin-top: 20px;"></div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputPanel layout="block" styleClass="m-nature-block">
                                                                    <apex:outputPanel layout="block" styleClass="b-small-header">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="font-13">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['SUBHEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12" style="padding-right: 12px;">
                                                                <apex:outputPanel layout="block" styleClass="b-text-img" >
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['IMAGE NAME'].Value__c)}" styleClass="eco-img"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <apex:outputPanel layout="block" styleClass="text-under-picture">
                                                                    <apex:outputPanel layout="block" styleClass="font-11">
                                                                        <apex:outputText value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['DESCRIPTION'].Value__c }" escape="false"/>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="agree" style="margin-top: 7px;">
                                                                    <div class="form-check inline-block">
                                                                        <div class="checkbox checkbox-red">
                                                                            <apex:inputCheckbox value="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['AGREEMENT CHECKBOX VALUE'].Value__c }" styleClass="form-check-input" id="telematicsAgree"/>
                                                                            <apex:outputLabel for="telematicsAgree">
                                                                                <apex:outputPanel styleClass="font-11">
                                                                                    <apex:outputPanel >
                                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #3']['AGREEMENT CHECKBOX LABEL'].Value__c }
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                            </apex:outputLabel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>

                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="text-center" style="margin-top: 24px;">
                                                                <apex:outputPanel layout="block" styleClass="bottom-continue-btn" >
                                                                    <apex:commandButton value="{! stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-ORDER-'].Value__c } {! numberOfCards } {! IF(numberOfCards > 1, stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-CARDS-'].Value__c, stepPagesMap['ADDITIONAL'].elements['ORDER CARDS BUTTON']['-CARD-'].Value__c) }"
                                                                        action="{! goToDocuments }"
                                                                        oncomplete="isDocuments = true; toViewport('order-details-viewport'); onPageRender(); setEvents_cardsOrder(); setEvents_documents(); setEvents_dateOfBirth();"
                                                                        styleClass="btn btn-red"
                                                                        reRender="stepList, formBlock, systemError, onlineChatBlock"
                                                                        status="splashStatus"/>
                                                                </apex:outputPanel>

                                                                <apex:outputPanel layout="block" style="margin-bottom: 4px;">
                                                                    <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                        onclick="scrollDisableControl('disable');"
                                                                        value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                        styleClass="font-13"
                                                                        reRender="saveAndContinueLater"
                                                                        status="splashStatus"/>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="font-11 notification-email">
                                                                    {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <script>
                                                        isPaymentDetails = true;
                                                        analytics_AdditionalOnLoad('{! opportunity.Zahlungsart__c }', '{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }','{! opportunity.E2E_Form_of_Business__c }');
                                                    </script>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                    </apex:outputPanel>

                                    <!-- ENTER DATE OF BIRTH -->
                                    <span id="date-of-bitrh-viewport"></span>
                                    <apex:outputPanel styleClass="enter-date-of-birth" layout="block" rendered="{! AND(activeStep = 2, activeSubStep = 'Enter Date of Birth') }">
                                        <apex:includeScript value="{!$Resource.jqueryInputMask}"/>
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="b-warning-block">
                                                        <div class="b-inside-warning">
                                                           <apex:outputPanel layout="block" styleClass="b-block-header">
                                                                <apex:outputPanel styleClass="warn"><apex:image url="{!URLFOR($Resource.e2e_images, 'warn.png')}"/></apex:outputPanel>
                                                                {! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].elements['TOP HEADING']['HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="b-desc">
                                                                {! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].elements['TOP HEADING']['SUBHEADING'].Value__c }
                                                            </apex:outputPanel>
                                                            <div class="row form-group vat-group">
                                                                <div class="vat-id block">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <div class="b-form-field">
                                                                            <div class="form-field">
                                                                                <div class="f-input">
                                                                                    <apex:outputLabel styleClass="f-container">
                                                                                        <span class="column">
                                                                                            <apex:inputText id="dateOfBirth" value="{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['DEFAULT VALUE'].Value__c }" required="false" styleClass="inline-block form-control required input dateOfBirthInput ym-disable-keys" maxLength="10" style="width: 90%" html-type="tel"/>
                                                                                            <apex:outputLabel styleClass="input-label" for="dateOfBirth">
                                                                                                {! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['LABEL'].Value__c }
                                                                                                <span class="f-required">
                                                                                                    {! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['ASTERISK'].Value__c }
                                                                                                </span>
                                                                                            </apex:outputLabel>
                                                                                        </span>
                                                                                    </apex:outputLabel>
                                                                                    <span class="additional" style="display: none"><apex:image url="{!URLFOR($Resource.e2e_images, 'i-checked.png')}"/></span>
                                                                                </div>
                                                                            </div>
                                                                            <apex:outputPanel layout="block" styleClass="invalid-feedback">
                                                                                {! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].fields['DATE OF BIRTH'].elementItemsMap['WARN MESSAGE'].Value__c }
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="m-buttons center-block text-center">
                                                                <apex:outputPanel layout="block">
                                                                    <apex:commandButton value="{! stepPagesMap['ADDITIONAL. ENTER DATE OF BIRTH'].elements['CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                        action="{! continueToDocumentsFromDateOfBirth }"
                                                                        oncomplete="isDocuments = true; toViewport('order-details-viewport'); setEvents_documents(); setEvents_specialOffers(); onPageRender(); endSplash();"
                                                                        reRender="stepList, formBlock, additionInfo, systemError, onlineChatBlock"
                                                                        styleClass="btn btn-red continue-date-of-birth"
                                                                        status="splashStatus"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            var dateOfBirthInput = $j('.step-content').find('.enter-date-of-birth').find('.dateOfBirthInput');
                                            dateOfBirthInput.inputmask({mask:"99.99.9999", "placeholder": "" });                                            
                                            analytics_DBOnLoad('{! opportunity.Zahlungsart__c }', '{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }','{! opportunity.E2E_Form_of_Business__c }');
                                        </script>                                        
                                    </apex:outputPanel>

                                    <!-- STEP DOCUMENTS AGREEMENT (CONTRACT ASSIGNMENT + DEPOSIT AGREEMENT) -->
                                    <apex:outputPanel layout="block" id="docsAgreement" styleClass="documents-agreement" rendered="{! AND(activeStep = 3, activeSubStep = 'Documents') }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['DOCUMENTS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <div style="margin: 14px 12px 0px 12px; font-size: 13px;">
                                                        {! stepPagesMap['DOCUMENTS'].elements['DESCRIPTION']['TOP VALUE'].Value__c }
                                                    </div>
                                                    <div class="m-grey-block" style="margin: 12px;">
                                                        <div class="b-description-block">
                                                            <div style="margin: 14px 12px 0px 12px;">
                                                                <!-- <apex:outputPanel layout="block" styleClass="pull-right" style="margin-right: 5px;">
                                                                    <apex:commandLink action="{! showSendDocuments }"
                                                                        styleClass="btn btn-xs payment-modal"
                                                                        reRender="sendDocuments, modalDocuments" status="splashStatus">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                                    </apex:commandLink>
                                                                </apex:outputPanel> -->
                                                                <span id="show-sepa-btn">
                                                                    <apex:outputPanel layout="block" styleClass="pull-right" style="margin-right: 5px;">
                                                                        <apex:commandLink action="{! showDocumentsModal }"
                                                                            styleClass="btn btn-xs payment-modal"
                                                                            reRender="modalDocuments" 
                                                                            status="splashStatus">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "full-screen.png" )}" height="17px" width="17px"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel>
                                                                </span>
                                                            </div>
                                                            <ul style="margin-top: 10px; margin-right: 12px; padding-left: 30px;">
                                                                <li style="font-weight: bold; font-size: 15px;">{! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['CONTRACT HEADING'].Value__c }</li>
                                                                {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['CONTRACT DESCRIPTION'].Value__c }
                                                            </ul>
                                                            <apex:outputPanel rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                                                <ul style="margin-right: 12px; padding-left: 30px;">
                                                                    <li style="font-weight: bold; font-size: 15px;">{! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['DEPOSIT HEADING'].Value__c }</li>
                                                                    {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['DEPOSIT DESCRIPTION'].Value__c }
                                                                </ul>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <apex:outputPanel rendered="{! AND(opportunity.Rechnungsperiode__c = '15', opportunity.Zahlungsziel_Credit__c = '14') }">
                                                        <div class="row form-group">
                                                            <div class="invoices block">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <apex:outputPanel layout="block" styleClass="f-label" style="margin-top: -25px;">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL4'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="f-value">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL5'].Value__c }
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-check" style="margin-right: 12px;">
                                                            <div class="checkbox checkbox-red">
                                                                <apex:inputCheckbox value="{! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['VALUE'].Value__c }" styleClass="form-check-input paper-invoices" id="checkboxDocumentsPaperInvoice"/>
                                                                <apex:outputLabel for="checkboxDocumentsPaperInvoice">
                                                                    <span class="form-check-labelHeader">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL1'].Value__c }
                                                                    </span><br/>
                                                                    <span class="font-11">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL2'].Value__c }
                                                                    </span><br/>
                                                                    <span class="font-11" style="color: #9299a2;">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['PAPER INVOICE'].elementItemsMap['LABEL3'].Value__c }
                                                                    </span>
                                                                </apex:outputLabel>
                                                            </div>
                                                        </div>
                                                        <div class="b-splitter" style="margin-top: 10px; margin-bottom: 10px;"></div>
                                                    </apex:outputPanel>
                                                    <div class="form-check" style="margin-right: 12px;">
                                                        <div class="checkbox checkbox-red">
                                                            <apex:inputCheckbox value="{! stepPagesMap['DOCUMENTS'].fields['DECISION'].elementItemsMap['VALUE'].Value__c }" styleClass="form-check-input paper-invoices decision" id="checkboxDecision"/>
                                                            <apex:outputLabel value="{! stepPagesMap['DOCUMENTS'].fields['DECISION'].elementItemsMap['LABEL PART 1'].Value__c } {! selectedCompany.name } {! stepPagesMap['DOCUMENTS'].fields['DECISION'].elementItemsMap['LABEL PART 2'].Value__c }"
                                                                for="checkboxDecision"/>
                                                        </div>
                                                    </div>
                                                    <div class="form-check">
                                                        <div class="checkbox checkbox-red">
                                                            <apex:inputCheckbox id="checkboxTermsAndConditions"
                                                                value="{! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['VALUE'].Value__c }"
                                                                styleClass="form-check-input termsAndConditions"/>
                                                            <apex:outputLabel styleClass="form-check-label" 
                                                                for="checkboxTermsAndConditions">
                                                                {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LABEL PART 1'].Value__c }
                                                                <apex:commandLink action="{! showTermsAndConditionsModal }"
                                                                    styleClass="form-check-label"
                                                                    reRender="modalTermsAndConditions"
                                                                    status="splashStatus">
                                                                    {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LABEL URL'].Value__c }
                                                                </apex:commandLink>
                                                                {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LABEL PART 2'].Value__c }
                                                            </apex:outputLabel>
                                                        </div>
                                                    </div>
                                                    <div class="b-splitter" style="margin: 20px 10px;"></div>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="col-xs-4 col-sm-4 ingenico pull-right">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "docusign-logo.png" )}" height="30px" width="100px"/>
                                                            </div>
                                                            <div class="font-11 payment-deposit-footer">
                                                                {! stepPagesMap['DOCUMENTS'].elements['DESCRIPTION']['BOTTOM VALUE'].Value__c }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="row">
                                                            <div class="modal-buttons">
                                                                <apex:actionFunction name="saveDocumentsStepData" action="{! saveDocumentsStepData }" oncomplete="goToSignDocuments();"/>
                                                                <apex:actionFunction name="goToSignDocuments" action="{! goToSignDocuments }" oncomplete="endSplash();"/>
                                                                <apex:commandLink value="{! stepPagesMap['DOCUMENTS'].elements['SIGN BUTTON']['LABEL'].Value__c }"
                                                                    onclick="startSplash(); validateDocumentsStepData(true);"
                                                                    reRender="formBlock"
                                                                    styleClass="btn btn-red sign">
                                                                </apex:commandLink>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="text-center">
                                                                <apex:outputPanel layout="block" styleClass="save-and-continue">
                                                                    <apex:outputPanel layout="block">
                                                                        <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                            onclick="scrollDisableControl('disable');"
                                                                            value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                            styleClass="font-13"
                                                                            reRender="saveAndContinueLater"
                                                                            status="splashStatus"/>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                       {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            analytics_DocumentsOnLoad('{! opportunity.Zahlungsart__c }', '{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }','{! opportunity.E2E_Form_of_Business__c }');
                                        </script>                                        
                                    </apex:outputPanel>

                                    <!-- STEP SELECT PAYMENT METHOD (DirectDebitDeposit/BankTransferDeposit)-->
                                    <apex:outputPanel layout="block" id="payment-options" styleClass="payment-options-block payment-direct-debit-deposit"
                                                      rendered="{! AND(activeStep = 4, OR(activeSubStep = 'DirectDebitDeposit', activeSubStep = 'BankTransferDeposit')) }">
                                        <script>
                                            activePageAnalytics = '{! activeSubStep }';
                                        </script>                                                        
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="m-row-header margin-borders">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT HEADING']['VALUE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="payment-amount block" style="margin-top: 0px;">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel layout="block" styleClass="f-label">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['AMOUNT TO BE PAID'].elementItemsMap['LABEL'].Value__c }
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="f-value">
                                                            {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['PAYMENT OPTIONS'].fields['AMOUNT TO BE PAID'].elementItemsMap['UNIT'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-desc" style="margin-top:16px;">
                                                        <apex:outputPanel layout="block" styleClass="font-11">
                                                            {! stepPagesMap['PAYMENT OPTIONS'].fields['AMOUNT TO BE PAID'].elementItemsMap['DESCRIPTION'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <!-- <div class="payment-pay-deposit">
                                                <apex:outputPanel layout="block" styleClass="m-row-header">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['VALUE'].Value__c }
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="font-11" style="margin-bottom:16px">
                                                    {! stepPagesMap['PAYMENT OPTIONS'].elements['ONLINE PAYMENT BANK']['DESCRIPTION'].Value__c }
                                                </apex:outputPanel>
                                                 <apex:repeat value="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].options }" var="param">
                                                    <div class="row">
                                                        <div class="col-xs-5 col-sm-5">
                                                            <div class="radio radio-red">
                                                                <apex:commandLink value="{! param.value }"
                                                                    action="{! changePaymentMethod }"
                                                                    onComplete="onPageRender();"
                                                                    styleClass="category-link {! IF(selectedPaymentMethod = param.value, 'active', '') }"
                                                                    reRender="payment-options, paymentFormToSend, systemError"
                                                                    status="splashStatus">
                                                                    <apex:param value="{! param.value }" name="paymentMethod" assignto="{! selectedPaymentMethod }"/>
                                                                </apex:commandLink>
                                                            </div>
                                                        </div>
                                                        <div class="col-xs-7 col-sm-7 pull-right">
                                                            <apex:outputPanel styleClass="pay-logo" >
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, param.label)}"
                                                                            height="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Height'].Value__c }"
                                                                            width="{! stepPagesMap['PAYMENT OPTIONS'].fields['PaymentMethod Cards'].elementItemsMap[param.value&'Width'].Value__c  }"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="b-splitter"></div>
                                                </apex:repeat>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="col-xs-4 col-sm-4 ingenico pull-right">
                                                        <div style="float:right;">
                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "ingenico.png" )}" height="40px" width="100px"/>
                                                        </div>
                                                    </div>
                                                    <div class="font-11 payment-deposit-footer">
                                                        {! stepPagesMap['PAYMENT OPTIONS'].elements['DEPOSIT FOOTER']['VALUE'].Value__c }
                                                    </div>
                                                </div>
                                            </div> -->




                                            <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                            <div class="congratulations">
                                                <div class="wrapper" style="box-shadow: none;">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-12">
                                                            <div class="m-grey-block">
                                                                <div class="b-description-block">
                                                                    <apex:outputPanel styleClass="b-col-header inline-block" layout="block">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <!-- <apex:outputPanel layout="block" styleClass="inline-block pull-right">
                                                                        <apex:commandLink action="{! showSendHowToPayDocument }"
                                                                            styleClass="btn btn-xs payment-modal"
                                                                            reRender="sendHowToPayToEmail" status="splashStatus">
                                                                            <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                                        </apex:commandLink>
                                                                    </apex:outputPanel> -->
                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel layout="block" styleClass="font-15" style="margin-top: 4px;">
                                                                            {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                            <div class="i-helper inline-block" style="margin-bottom: 3px;"
                                                                                data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }"
                                                                                data-trigger="hover"
                                                                                data-container="body"
                                                                                data-toggle="popover"
                                                                                data-placement="top">?
                                                                            </div>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <div class="row">
                                                                        <div class="col-xs-12 col-sm-12">
                                                                            <div class="collapse-block">
                                                                                <div class="link" data-toggle="collapse" data-target="#depositDetails">
                                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SHOW DEPOSIT DETAILS LABEL'].Value__c }<div class="expander block-expand inline-block"></div>
                                                                                </div>
                                                                                <div class="row collapse" id="depositDetails" style="margin-left: 0px;">
                                                                                    <div class="detail-list">
                                                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                            <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="font-15" style="width: 100%;">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                            <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="font-15" style="width: 100%;">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                            <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="font-15" style="width: 100%;">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                            <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                            <apex:outputPanel layout="block" styleClass="font-15" style="width: 100%;">
                                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>






                                            <div class="b-splitter" style="margin: 16px 12px;"></div>
                                            <div class="row">
                                                <div class="m-buttons center-block text-center" style="margin-top: 9px;">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <!-- <apex:commandButton action="{! proceedToCheckout }"
                                                            value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL PART 1'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL PART 2'].Value__c }"
                                                            onclick="startPayment('payment-direct-debit-deposit');"
                                                            styleClass="btn btn-red continue"
                                                            reRender="formBlock, pageHeader, systemError"
                                                            status="splashStatus"/> -->

                                                        <!-- TEMP BUTTON (MUST BE REMOVED) -->
                                                        <apex:commandButton action="{! proceedToCheckout }"
                                                            value="{! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL PART 1'].Value__c } {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['PAYMENT OPTIONS'].elements['PROCEED TO CHECKOUT BUTTON']['LABEL PART 2'].Value__c }"
                                                            styleClass="btn btn-red continue"
                                                            oncomplete="setEvents_cardsOrder(); onPageRender();"
                                                            reRender="formBlock, pageHeader, additionInfo, systemError"
                                                            status="splashStatus"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="text-center">
                                                        <apex:outputPanel layout="block" styleClass="save-and-continue" style="margin-top:20px;">
                                                            <apex:outputPanel layout="block" style="margin-bottom: 4px;">
                                                                <apex:commandLink action="{! showSaveAndContinueLaterModal }"
                                                                    value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['LABEL'].Value__c }"
                                                                    styleClass="font-13"
                                                                    reRender="saveAndContinueLater"
                                                                    status="splashStatus"/>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="text-center text-muted font-11">
                                                                {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['SAVE AND CONTINUE BUTTON']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            analytics_PaymentDetailsDepositOnLoad('{! opportunity.Zahlungsart__c }', '{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }','{! opportunity.E2E_Form_of_Business__c }');
                                        </script>
                                    </apex:outputPanel>

                                    <!-- STEP CONGRATULATIONS -->
                                    <span id="congratulations-viewport"></span>
                                    <apex:outputPanel layout="block" id="congratulations" styleClass="congratulations" rendered="{! AND(activeStep = 5, activeSubStep == 'Congratulations') }">
                                        <script>
                                            activePageAnalytics = 'Congratulations';
                                        </script>                                       
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="end-logo center-block">
                                                        <apex:image url="{!URLFOR($Resource.e2e_images, 'tick2.png')}" styleClass="center-block"></apex:image>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-header">
                                                        <!-- {! IF(paymentStatus = 'A', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND PAID'].Value__c, IF(opportunity.Security_To_Pay__c != 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c, IF(paymentStatus = 'E', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDER EXCEPTION'].Value__c, IF(OR(paymentStatus = 'D', paymentStatus = 'C'), stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND NOT PAID'].Value__c, '')))) } -->
                                                        {! IF(opportunity.Security_To_Pay__c != 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED'].Value__c, IF(opportunity.Security_To_Pay__c = 'Kaution', stepPagesMap['CONGRATULATIONS'].elements['HEADING ORDER']['CARD ORDERED AND NOT PAID'].Value__c, '')) }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <!-- Card are ordered. Deposit is successfully paid -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="font-13" rendered="{! paymentStatus = 'A'}">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED AND PAID']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    <!-- Card are ordered. Deposit is not required -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="font-13" rendered="{! AND(opportunity.Security_To_Pay__c != 'Kaution', paymentStatus = null) }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    <!-- Deposit is not paid (CANCEL\DECLINE) -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="font-13" rendered="{! OR(paymentStatus = 'D', paymentStatus = 'C') }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) }
                                                        <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    <!-- Deposit is not certainly paid (EXCEPTION) -->
                                                    <!-- <apex:outputPanel layout="block" styleClass="font-13" rendered="{! paymentStatus = 'E' }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) }
                                                        <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING EXCEPTION']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel> -->

                                                    
                                                    <!-- TEMP BLOCK (MUST BE REMOVED) -->
                                                    <!-- Card are ordered. Deposit is not required -->
                                                    <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! opportunity.Security_To_Pay__c != 'Kaution' }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['-MRS-'].Value__c, ''))} {! contact.LastName } {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDERED']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel>
                                                     <!-- Deposit is not paid -->
                                                    <apex:outputPanel layout="block" styleClass="info center-block" rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                                        {! IF(OR(contact.Salutation = 'Herr', contact.Salutation = 'Mr'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK 2'].Value__c + ' ' + stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MR-'].Value__c, IF(OR(contact.Salutation = 'Frau', contact.Salutation = 'Mrs'),stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['HI BLOCK'].Value__c + ' ' +  stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['-MRS-'].Value__c, ''))} {! contact.LastName }{! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARD'].Value__c, IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 1'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['THANKS BLOCK FOR CARDS CASE 2'].Value__c)) } <apex:outputPanel style="padding-left: 5px;" rendered="{! numberOfCards > 1 }">{! numberOfCards }</apex:outputPanel>
                                                        {! IF(numberOfCards = 1, stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARD BLOCK'].Value__c, 
                                                            IF(AND(numberOfCards >= 2, numberOfCards <= 4), stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 1'].Value__c, 
                                                                stepPagesMap['CONGRATULATIONS'].elements['SUBHEADING ORDER NOT PAID']['CARDS BLOCK CASE 2'].Value__c)) }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="font-15 middle-border">
                                                        <apex:outputPanel layout="block" styleClass="inline-block">
                                                            {! selectedCompany.street } {! selectedCompany.housenumber }{! IF(selectedCompany.postcode != null, ', ' + selectedCompany.postcode, '') }{! IF(selectedCompany.city != null, ', ' + selectedCompany.city, '') }{! IF(selectedCompany.country != null, ', ' + selectedCompany.country, '') }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="font-13 bottom-border">
                                                        <apex:outputPanel layout="inline">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE PART 1'].Value__c } {! contact.Email }{! stepPagesMap['CONGRATULATIONS'].elements['COPY OF ORDER']['VALUE PART 2'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <apex:outputPanel rendered="{! AND(opportunity.Security_To_Pay__c = 'Kaution', OR(paymentStatus = 'D', paymentStatus = 'C', paymentStatus = 'E')) }"> -->
                                        <apex:outputPanel rendered="{! opportunity.Security_To_Pay__c = 'Kaution' }">
                                            <div class="wrapper">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel styleClass="m-header" layout="block">
                                                            <apex:outputPanel styleClass="b-col-header" layout="block" >
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['TOP HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel styleClass="font-13" layout="block">
                                                            {! IF (opportunity.Zahlungsart__c = 'Banküberweisung', stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK TRANSFER DESCRIPTION BLOCK'].Value__c, stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DIRECT DEBIT DESCRIPTION BLOCK'].Value__c) }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <div class="m-grey-block">
                                                            <div class="b-description-block">
                                                                <apex:outputPanel styleClass="b-col-header inline-block" layout="block">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PAYMENT DETAILS BT HEADING'].Value__c }
                                                                </apex:outputPanel>
                                                                <!-- <apex:outputPanel layout="block" styleClass="inline-block pull-right">
                                                                    <apex:commandLink action="{! showSendHowToPayDocument }"
                                                                        styleClass="btn btn-xs payment-modal"
                                                                        reRender="sendHowToPayToEmail" status="splashStatus">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                                    </apex:commandLink>
                                                                </apex:outputPanel> -->
                                                                <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                    <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="font-15" style="margin-top: 4px;">
                                                                        {! opportunity.Security_Amount_To_Pay__c } {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID UNIT'].Value__c }
                                                                        <div class="i-helper inline-block" style="margin-bottom: 3px;"
                                                                            data-content="{! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['DEPOSIT TO BE PAID HELP'].Value__c }"
                                                                            data-trigger="hover"
                                                                            data-container="body"
                                                                            data-toggle="popover"
                                                                            data-placement="top">?
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <div class="row">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <div class="collapse-block">
                                                                            <div class="link" data-toggle="collapse" data-target="#depositDetails">
                                                                                {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['SHOW DEPOSIT DETAILS LABEL'].Value__c }<div class="expander block-expand inline-block"></div>
                                                                            </div>
                                                                            <div class="row collapse" id="depositDetails" style="margin-left: 0px;">
                                                                                <div class="detail-list">
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT OWNER VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['PURPOSE OF PAYMENT VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['ACCOUNT NUMBER VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel layout="block" styleClass="space-between-text">
                                                                                        <apex:outputPanel layout="block" styleClass="font-13 text-muted">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block" styleClass="font-15">
                                                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO PAY BLOCK']['BANK NAME VALUE'].Value__c }
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>                                       
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="m-header">
                                                        <apex:outputPanel layout="block" styleClass="b-col-header" style="margin-bottom: 12px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['TOP HEADING'].Value__c }
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="smart-img center-block">
                                                        <apex:image url="{! URLFOR($Resource.e2e_images, 'shellkarte_pl_web.png') }"/>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="m-inside-wrapper">
                                                        <ul class="need-list font-13">
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 1 VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </li>
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 2 VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </li>
                                                            <li>
                                                                <apex:outputPanel styleClass="point-list">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3'].Value__c }
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" styleClass="point">
                                                                    {! stepPagesMap['CONGRATULATIONS'].elements['HOW TO START BLOCK']['ITEM 3 VALUE'].Value__c }
                                                                </apex:outputPanel>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- DIRECT DEBIT MANDATE ACCEPTANCE -->
                                        <apex:outputPanel rendered="{! opportunity.Zahlungsart__c = 'Lastschrift' }">
                                            <div class="wrapper">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12" style="margin: 10px 0 10px 0;">
                                                        <div class="col-xs-11 col-sm-11" style="padding-left: 0; font-family: 'Montserrat'; font-weight: 700; font-size: 17px; font-weight: bold; font-style: normal; font-stretch: normal; line-height: normal; letter-spacing: -0.2px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['HEADING'].Value__c }
                                                            <!-- <apex:outputPanel layout="block" styleClass="pull-right" style="margin-right: 5px;">
                                                                    <apex:commandLink action="{! showDDMandateDocument }"
                                                                        styleClass="btn btn-xs payment-modal"
                                                                        reRender="sendDDMandateAcceptance, modalDDMandate" status="splashStatus">
                                                                        <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                                    </apex:commandLink>
                                                                </apex:outputPanel> -->
                                                        </div>
                                                        <div class="col-xs-1 col-sm-1">
                                                            <div class="pull-right">
                                                                <apex:commandLink action="{! showDDMandateModal }"
                                                                    styleClass="btn btn-xs payment-modal"
                                                                    reRender="modalDDMandate"
                                                                    status="splashStatus" 
                                                                    style="padding-right: 0px;">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, "full-screen.png" )}" height="17px" width="17px"/>
                                                                </apex:commandLink>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <apex:outputPanel layout="block" styleClass="font-13">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DESCRIPTION'].Value__c }
                                                        </apex:outputPanel>
                                                        <div class="m-inside-wrapper">
                                                            <ul class="need-list font-13">
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 1'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 1'].Value__c }
                                                                    </apex:outputPanel>
                                                                </li>
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 2'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 2'].Value__c }
                                                                    </apex:outputPanel>
                                                                </li>
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 3'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 3'].Value__c }
                                                                    </apex:outputPanel>
                                                                </li>
                                                                <li>
                                                                    <apex:outputPanel styleClass="point-list">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['ITEM 4'].Value__c }
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel layout="block" styleClass="point">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['STEP 4'].Value__c }
                                                                    </apex:outputPanel>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="font-13" style="margin-top: -15px; margin-bottom: 15px;">
                                                            {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['MESSAGE'].Value__c }
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <script>
                                            $j(document).ready(function() {
                                                $j(this).scrollTop(0);
                                            });
                                            analytics_CongratsOnLoad('{! opportunity.Zahlungsart__c }', '{! IF(opportunity.Security_Amount_To_Pay__c != null, '1', '0') }','{! opportunity.E2E_Form_of_Business__c }');
                                        </script>
                                    </apex:outputPanel>

                                    <!--PROCESS ERROR PAGES -->
                                    <apex:outputPanel layout="block"
                                        styleClass="mobile-error-page"
                                        rendered="{! OR(
                                            activeSubStep = 'Too many reports',
                                            activeSubStep = 'Risky but manageable',
                                            activeSubStep = 'Too high limit. Additional Credit Scoring Allowance',
                                            activeSubStep = 'Report does not exist',
                                            activeSubStep = 'Company not found',
                                            activeSubStep = 'Private entity',
                                            activeSubStep = 'Authorization not granted',
                                            activeSubStep = 'Already in process',
                                            activeSubStep = 'Already a customer',
                                            activeSubStep = 'Black list',
                                            activeSubStep = 'Too risky',
                                            activeSubStep = 'Stop order')
                                        }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {!  IF(activeSubStep = 'Too many reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['HEADING'].Value__c,
                                                                IF(activeSubStep = 'Risky but manageable', stepPagesMap['PROCESS ERROR'].elements['RISKY BUT MANAGEABLE']['HEADING'].Value__c,
                                                                    IF(activeSubStep = 'Too high limit. Additional Credit Scoring Allowance', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT. ADDITIONAL CREDIT SCORING ALLOWANCE']['HEADING'].Value__c,
                                                                        IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['HEADING'].Value__c,
                                                                            IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['HEADING'].Value__c,
                                                                                IF(activeSubStep = 'Private entity', stepPagesMap['PROCESS ERROR'].elements['PRIVATE ENTITY']['HEADING'].Value__c,
                                                                                    IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['HEADING'].Value__c,
                                                                                        IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['HEADING'].Value__c,
                                                                                            IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['HEADING'].Value__c,
                                                                                                IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['HEADING'].Value__c, 
                                                                                                    IF(activeSubStep = 'Too risky', stepPagesMap['PROCESS ERROR'].elements['TOO RISKY']['HEADING'].Value__c, 
                                                                                                        IF(activeSubStep = 'Stop order', stepPagesMap['PROCESS ERROR'].elements['STOP ORDER']['HEADING'].Value__c, '')))))))))))) }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="font-13 b-error-text">
                                                        {!  IF(activeSubStep = 'Too many reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['DESCRIPTION'].Value__c,
                                                                IF(activeSubStep = 'Risky but manageable', stepPagesMap['PROCESS ERROR'].elements['RISKY BUT MANAGEABLE']['DESCRIPTION'].Value__c,
                                                                    IF(activeSubStep = 'Too high limit. Additional Credit Scoring Allowance', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT. ADDITIONAL CREDIT SCORING ALLOWANCE']['DESCRIPTION'].Value__c,
                                                                        IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['DESCRIPTION'].Value__c,
                                                                            IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['DESCRIPTION'].Value__c,
                                                                                IF(activeSubStep = 'Private entity', stepPagesMap['PROCESS ERROR'].elements['PRIVATE ENTITY']['DESCRIPTION'].Value__c,
                                                                                    IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['DESCRIPTION'].Value__c,
                                                                                        IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['DESCRIPTION'].Value__c,
                                                                                            IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['DESCRIPTION'].Value__c,
                                                                                                IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['DESCRIPTION'].Value__c, 
                                                                                                    IF(activeSubStep = 'Too risky', stepPagesMap['PROCESS ERROR'].elements['TOO RISKY']['DESCRIPTION'].Value__c, 
                                                                                                        IF(activeSubStep = 'Stop order', stepPagesMap['PROCESS ERROR'].elements['STOP ORDER']['DESCRIPTION'].Value__c, '')))))))))))) }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="buttons text-center">
                                                    <div class="col-xs-12 col-sm-12">
                                                        <a href="{! IF(isTablet, '/kiosk?obn='+opportunity.ESI__c,stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c) }" class="btn btn-gray">
                                                            {! stepPagesMap['PROCESS ERROR'].elements['RETURN TO SITE BUTTON']['LABEL'].Value__c }
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            activePageAnalytics = "{! IF(activeSubStep != 'Private entity', activeSubStep, '') }";
                                            analytics_AddError('{! activeStep }', activePageAnalytics, '{! activeSubStep }');
                                            endSplash();
                                        </script>
                                    </apex:outputPanel>

                                    <!--SYSTEM ERROR -->
                                    <apex:outputPanel layout="block"
                                        styleClass="mobile-error-page"
                                        rendered="{! activeSubStep = 'System error' }">
                                        <div class="wrapper">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <apex:outputPanel layout="block" styleClass="b-block-header">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['TOP HEADING']['HEADING'].Value__c }
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="font-13 b-error-text">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12">
                                                    <div class="font-13 b-error-text">
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['FEEDBACK HEADING']['HEADING'].Value__c }<br/>
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['PHONE']['VALUE'].Value__c }<br/>
                                                        <!-- {! stepPagesMap['SYSTEM ERROR'].elements['EMAIL']['VALUE'].Value__c }<br/> -->
                                                        {! stepPagesMap['SYSTEM ERROR'].elements['WORK TIME']['VALUE'].Value__c }
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="buttons text-center">
                                                    <div class="col-lg-12">
                                                        <div class="error-text">
                                                            <a href="{! IF(isTablet, '/kiosk?obn='+opportunity.ESI__c,stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['URL'].Value__c) }" class="btn btn-gray" style="min-width: 130px">
                                                                {! stepPagesMap['SYSTEM ERROR'].elements['RETURN TO SITE BUTTON']['BUTTON NAME'].Value__c }
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            analytics_AddError('{! activeStep }', activePageAnalytics, 'SystemError');
                                        </script>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <apex:outputPanel id="modalShowLocator" styleClass="modalWindows">
                                    <!-- MODAL SAVE AND CONTINUE -->
                                    <apex:outputPanel layout="block" id="saveAndContinueLater">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Save and continue later' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Save and continue later' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Save and continue later', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Save and continue later', 'display: block;', '')}">
                                                <div class="modal-dialog" style="width: 100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                    <p>
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                    </p>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons" style="margin-bottom: 15px;">
                                                                    <apex:commandButton value="{! stepPagesMap['SAVE AND CONTINUE LATER'].elements['CONFIRM SAVE BUTTON']['LABEL'].Value__c }"
                                                                        action="{! doSaveAndContinueLater }"
                                                                        style="min-width: 222px;"
                                                                        immediate="true"
                                                                        styleClass="btn btn-red"
                                                                        reRender="saveAndContinueLater"
                                                                        status="splashStatus"/>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=saveAndContinueLater]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SAVE AND CONTINUE LATER'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL SEND HOW TO PAY TO THE EMAIL -->
                                    <!-- <apex:outputPanel layout="block" id="sendHowToPayToEmail">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send How to Pay to email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send How to Pay to email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send How to Pay to email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Send How to Pay to email', 'display: block;', '')}">
                                                <div class="modal-dialog" style="width: 100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">{! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                    <p>
                                                                        {! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                    </p>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <apex:commandButton value="{! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                        action="{! sendHowToPayToEmail }"
                                                                        onclick="scrollDisableControl('disable');"
                                                                        style="min-width: 222px;"
                                                                        immediate="true"
                                                                        styleClass="btn btn-red"
                                                                        reRender="sendHowToPayToEmail"
                                                                        status="splashStatus"/>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=sendHowToPayToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND HOW TO PAY TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel> -->

                                    <!-- MODAL SEND VAT TC TO THE EMAIL -->
                                    <!-- <apex:outputPanel layout="block" id="sendVatTCToEmail">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send Vat TC to email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send Vat TC to email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send Vat TC to email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Send Vat TC to email', 'display: block;', '')}">
                                                <div class="modal-dialog" style="width: 100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">{! stepPagesMap['SEND VAT TC TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                    <p>
                                                                        {! stepPagesMap['SEND VAT TC TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                    </p>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <apex:commandButton value="{! stepPagesMap['SEND VAT TC TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                        action="{! sendVatTcToEmail }"
                                                                        style="min-width: 222px;"
                                                                        immediate="true"
                                                                        styleClass="btn btn-red"
                                                                        reRender="sendVatTCToEmail"
                                                                        status="splashStatus"/>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=sendVatTCToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND VAT TC TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel> -->

                                    <!-- MODAL CS ALLOWANCE TO THE EMAIL -->
                                    <!-- <apex:outputPanel layout="block" id="sendCSAllowanceToEmail">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send CS Allowance to email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send CS Allowance to email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send CS Allowance to email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Send CS Allowance to email', 'display: block;', '')}">
                                                <div class="modal-dialog" style="width: 100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">{! stepPagesMap['SEND CS ALLOWANCE TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                    <p>
                                                                        {! stepPagesMap['SEND CS ALLOWANCE TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                    </p>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <apex:commandButton value="{! stepPagesMap['SEND CS ALLOWANCE TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                        action="{! sendCSAllowanceToEmail }"
                                                                        style="min-width: 222px;"
                                                                        immediate="true"
                                                                        styleClass="btn btn-red"
                                                                        reRender="sendCSAllowanceToEmail"
                                                                        status="splashStatus"/>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=sendCSAllowanceToEmail]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND CS ALLOWANCE TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel> -->

                                    <!-- MODAL DD MANDATE TO THE EMAIL -->
                                    <!-- <apex:outputPanel layout="block" id="sendDDMandateAcceptance">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send ddMandateAggrement to email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send ddMandateAggrement to email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send ddMandateAggrement to email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Send ddMandateAggrement to email', 'display: block;', '')}">
                                                <div class="modal-dialog" style="width: 100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">{! stepPagesMap['SEND DD MANDATE ACCEPTANCE TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                    <p>
                                                                        {! stepPagesMap['SEND DD MANDATE ACCEPTANCE TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                    </p>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <apex:commandButton value="{! stepPagesMap['SEND DD MANDATE ACCEPTANCE TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                        action="{! sendDDMandateAcceptance }"
                                                                        style="min-width: 222px;"
                                                                        immediate="true"
                                                                        styleClass="btn btn-red"
                                                                        reRender="sendDDMandateAcceptance"
                                                                        status="splashStatus"/>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=sendDDMandateAcceptance]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND DD MANDATE ACCEPTANCE TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel> -->

                                    <!-- MODAL DOCUMENTS TO THE EMAIL -->
                                    <!-- <apex:outputPanel layout="block" id="sendDocuments">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send documents to email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send documents to email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send documents to email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Send documents to email', 'display: block;', '')}">
                                                <div class="modal-dialog" style="width: 100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">{! stepPagesMap['SEND DOCUMENTS TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                    <p>
                                                                        {! stepPagesMap['SEND DOCUMENTS TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                    </p>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <apex:commandButton value="{! stepPagesMap['SEND DOCUMENTS TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                        action="{! sendDocuments }"
                                                                        style="min-width: 222px;"
                                                                        immediate="true"
                                                                        styleClass="btn btn-red"
                                                                        reRender="sendDocuments"
                                                                        status="splashStatus"/>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=sendDocuments]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND DOCUMENTS TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel> -->

                                    <!-- MODAL VAT-RECOVERY PROGRAM (TERMS AND CONDITIONS) -->
                                    <apex:outputPanel layout="block" id="modalVatRecoveryTC">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Vat-Recovery Program TC' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Vat-Recovery Program TC' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Vat-Recovery Program TC', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Vat-Recovery Program TC', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog lg-modal" style="width: 100%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalVatRecoveryTC]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <div class="b-block-header" style="margin: 0px 15px 0px 0px;">
                                                                {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['TC LIGHTBOX HEADING'].Value__c }
                                                            <!-- <apex:commandLink action="{! showSendVatTcDocument }"
                                                                onclick="scrollDisableControl('disable');"
                                                                styleClass="btn btn-xs payment-modal"
                                                                reRender="sendVatTCToEmail,modalVatRecoveryTC" status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink> -->
                                                            </div>
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe name="frameTermConditions" width="100%" height="100%"
                                                                    style="border: 0px; -webkit-overflow-scrolling:touch; overflow-y: scroll;"  src="{! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['TC IFRAME URL'].Value__c }">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalVatRecoveryTC]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['ADDITIONAL'].elements['ADDITIONAL SERVICE #2']['TC LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MOBILE MODAL DOCUMENTS -->
                                    <apex:outputPanel layout="block" id="modalDocuments">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Documents' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Documents' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Documents', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Documents', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog" style="width:100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalDocuments]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['LIGHTBOX HEADING'].Value__c }
                                                            <!-- <apex:commandLink action="{! showSendDocuments }"
                                                                onclick="scrollDisableControl('disable');"
                                                                styleClass="btn btn-xs payment-modal"
                                                                reRender="sendDocuments, modalDocuments" status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink> -->
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe id="fullFrameDocuments"
                                                                    src="{! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['IFRAME URL'].Value__c }"
                                                                    name="fullFrameDocuments"
                                                                    width="100%"
                                                                    height="100%"
                                                                    style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalDocuments]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['DOCUMENTS'].elements['DOCUMENTS BLOCK']['LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MOBILE MODAL ADDITIONAL CREDIT SCORING ALOWANCE -->
                                    <apex:outputPanel layout="block" id="modalCSAllowance">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Additional Credit Scoring Allowance' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Additional Credit Scoring Allowance' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Additional Credit Scoring Allowance', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Additional Credit Scoring Allowance', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog" style="width:100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalCSAllowance]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable'); setEvents_companyDetails();" class="close"/>
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                            {! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['LIGHTBOX HEADING'].Value__c }
                                                            <!-- <apex:commandLink action="{! showCSAllowanceDocument }"
                                                                onclick="scrollDisableControl('disable');"
                                                                styleClass="btn btn-xs payment-modal"
                                                                reRender="sendCSAllowanceToEmail, modalCSAllowance" status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink> -->
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body">
                                                            {! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['LIGHTBOX SUBHEADING'].Value__c }
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe id="fullFrameContract"
                                                                    src="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['DOCUMENT']['IFRAME URL'].Value__c }"
                                                                    onload="return false;"
                                                                    name="fullFrameContract"
                                                                    width="100%"
                                                                    height="100%"
                                                                    style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <apex:commandLink value="{! stepPagesMap['CREDIT SCORE. ADDITIONAL CREDIT SCORING'].elements['SIGN BUTTON']['LABEL'].Value__c }"
                                                                        action="{! goToSignDocuments }"
                                                                        reRender="formBlock"
                                                                        styleClass="btn btn-red"
                                                                        status="splashStatus">
                                                                    </apex:commandLink>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MOBILE MODAL DD MANDATE -->
                                    <apex:outputPanel layout="block" id="modalDDMandate">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal ddMandate' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal ddMandate' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal ddMandate', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal ddMandate', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog" style="width:100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalDDMandate]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. LIGHTBOX HEADING'].Value__c }
                                                            <!-- <apex:commandLink action="{! showDDMandateDocument }"
                                                                onclick="scrollDisableControl('disable');"
                                                                styleClass="btn btn-xs payment-modal"
                                                                reRender="sendDDMandateAcceptance, modalDDMandate" status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink> -->
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe id="fullFrameContract"
                                                                    src="{! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. IFRAME URL'].Value__c }"
                                                                    name="fullFrameContract"
                                                                    width="100%"
                                                                    height="100%"
                                                                    style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalDDMandate]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['CONGRATULATIONS'].elements['DIRECT DEBIT MANDATE ACCEPTANCE BLOCK']['DOCUMENT. LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MOBILE MODAL Agree to telephone contact -->
                                    <apex:outputPanel layout="block" id="modalAgreeToPhoneContact">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Agree To Phone Contact' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Agree To Phone Contact' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Agree To Phone Contact', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Agree To Phone Contact', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog lg-modal" style="width: 100%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header" style="font-family: Arial Unicode MS,sans-serif;">
                                                            <a onclick="$j('[id$=modalAgreeToPhoneContact]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['IFRAME HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe name="frameTermConditions" width="100%" height="100%"
                                                                    style="border: 0px; -webkit-overflow-scrolling:touch; overflow-y: scroll;"  src="{! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalAgreeToPhoneContact]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['PHONE CONTACT AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MOBILE MODAL Agree to info by email -->
                                    <apex:outputPanel layout="block" id="modalAgreeToInfoByEmail">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Agree To Info By Email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Agree To Info By Email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Agree To Info By Email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Agree To Info By Email', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog lg-modal" style="width: 100%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header" style="font-family: Arial Unicode MS,sans-serif;">
                                                            <a onclick="$j('[id$=modalAgreeToInfoByEmail]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['IFRAME HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe name="frameTermConditions" width="100%" height="100%"
                                                                    style="border: 0px; -webkit-overflow-scrolling:touch; overflow-y: scroll;"  src="{! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalAgreeToInfoByEmail]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['RECEIVE COMM INFO BY EMAIL AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MOBILE MODAL Agree news -->
                                    <apex:outputPanel layout="block" id="modalAgreeToNews">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Agree To News' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Agree To News' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Agree To News', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Agree To News', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog lg-modal" style="width: 100%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header" style="font-family: Arial Unicode MS,sans-serif;">
                                                            <a onclick="$j('[id$=modalAgreeToNews]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['IFRAME HEADING'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe name="frameTermConditions" width="100%" height="100%"
                                                                    style="border: 0px; -webkit-overflow-scrolling:touch; overflow-y: scroll;"  src="{! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['IFRAME URL'].Value__c }">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalAgreeToNews]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['CONTACT DETAILS'].fields['NEWS AGREEMENT'].elementItemsMap['BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL TERMS AND CONDITIONS ON DOCUMENTS STEP -->
                                    <apex:outputPanel layout="block" id="modalTermsAndConditions">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Modal Terms And Conditions' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Modal Terms And Conditions' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Modal Terms And Conditions', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Modal Terms And Conditions', 'display: block; padding: 40px 0 24px 0; bottom:auto;', '')}">
                                                <div class="modal-dialog" style="width:100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <a onclick="$j('[id$=modalTermsAndConditions]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <apex:outputPanel layout="block" styleClass="b-block-header" style="margin: 0px;">
                                                                {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LIGHTBOX HEADING'].Value__c }
                                                            <!-- <apex:commandLink action="{! showSendTermsAndConditions }"
                                                                onclick="scrollDisableControl('disable');"
                                                                styleClass="btn btn-xs payment-modal"
                                                                reRender="sendTC, modalTermsAndConditions" status="splashStatus">
                                                                <apex:image url="{!URLFOR($Resource.e2e_images, "email-arrow.png" )}" height="17px" width="26px"/>
                                                            </apex:commandLink> -->
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body payment-modal-body">
                                                            <iframe id="fullFrameContract"
                                                                    src="{! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['IFRAME URL'].Value__c }"
                                                                    name="fullFrameContract"
                                                                    width="100%"
                                                                    height="100%"
                                                                    style="border: 0px;">
                                                                Error loading
                                                            </iframe>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=modalTermsAndConditions]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['DOCUMENTS'].fields['ACCEPT TERMS AND CONDITIONS'].elementItemsMap['LIGHTBOX BACK BUTTON'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                    <!-- MODAL SEND TERMS AND CONDITIONS TO THE EMAIL -->
                                    <!-- <apex:outputPanel layout="block" id="sendTC">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Send TC to email' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Send TC to email' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Send TC to email', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Send TC to email', 'display: block;', '')}">
                                                <div class="modal-dialog" style="width: 100%">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">{! stepPagesMap['SEND TC TO THE EMAIL'].elements['TOP HEADING']['HEADING'].Value__c }</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <apex:outputPanel layout="block" styleClass="font-13 modal-text">
                                                                    <p>
                                                                        {! stepPagesMap['SEND TC TO THE EMAIL'].elements['DESCRIPTION']['VALUE'].Value__c }
                                                                    </p>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <apex:commandButton value="{! stepPagesMap['SEND TC TO THE EMAIL'].elements['SEND BUTTON']['LABEL'].Value__c }"
                                                                        action="{! sendTC }"
                                                                        style="min-width: 222px;"
                                                                        immediate="true"
                                                                        styleClass="btn btn-red"
                                                                        reRender="sendTC"
                                                                        status="splashStatus"/>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="modal-buttons">
                                                                    <a
                                                                        onclick="$j('[id$=sendTC]').hide(); $j('[id$=activeInnerPage]').val(''); scrollDisableControl('enable');"
                                                                        class="btn btn-gray"
                                                                        style="min-width: 222px; font-size: 12px;">
                                                                        {! stepPagesMap['SEND TC TO THE EMAIL'].elements['BACK TO FORM BUTTON']['LABEL'].Value__c }
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel> -->

                                    <!-- MODAL COMPANY SELECTION -->
                                    <apex:actionFunction name="validateVatId" 
                                        action="{! validateVatId }" 
                                        reRender="modalCompanySelection, stepList, formBlock, additionInfo, systemError, onlineChatBlock"
                                        oncomplete=" endSplash(); if({! AND(activeSubstep != 'Too many reports', activeSubstep != 'Authorization not granted', activeSubstep != 'Black list', activeSubstep != 'Report does not exist', activeSubstep != 'Already a customer', activeSubstep != 'Already in process') }) {toViewport('your-company-viewport')}; setEvents_companyDetails(); setEvents_vatNumber(); onPageRender(); scrollDisableControl('enable');"/>
                                    <apex:inputHidden id="selected-company-id" value="{! selectedCompany.identificationnumber }"/>
                                    <apex:outputPanel layout="block" id="modalCompanySelection">
                                        <apex:outputPanel layout="block" styleClass="modal-backdrop fade in" rendered="{! activeInnerPage = 'Select company' }"/>
                                        <apex:outputPanel layout="block" styleClass="modal-info" rendered="{! activeInnerPage = 'Select company' }">
                                            <apex:outputPanel layout="block" styleClass="{! IF(activeInnerPage = 'Select company', 'modal fade in','modal fade')}"
                                                              style="{! IF(activeInnerPage = 'Select company', 'display: block; margin: 12px 0 0;', '')}">
                                                <div class="modal-dialog" style="position: absolute; width: 100%;">
                                                    <div class="modal-content ym-hide-content ym-hide-content">
                                                        <div class="modal-header" style="padding-bottom: 16px;">
                                                            <a onclick="$j('[id$=modalCompanySelection]').hide(); $j('[id$=activeInnerPageName]').val(''); scrollDisableControl('enable');" class="close"/>
                                                            <h4 class="modal-title">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['HEADING'].Value__c }
                                                            </h4>
                                                            <apex:outputPanel styleClass="font-11" layout="block">
                                                                {! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['REMARK'].Value__c }
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="modal-body" style="padding: 0;background-color: #f8f8f8;" id="modalCompanyChoice">
                                                            <div class="row" >
                                                                <apex:outputPanel layout="block" styleClass="select-company">
                                                                    <div class="col-xs-12 col-sm-12">
                                                                        <apex:outputPanel layout="block" id="cf-companies">
                                                                            <div class="cf-companies-list" style="height: 380px;">
                                                                                <apex:repeat value="{! foundCompaniesList.companiesMap }" var="companyId">
                                                                                    <div class="radio radio-red">
                                                                                        <div class="cf-company">
                                                                                            <input
                                                                                                id="{! companyId }"
                                                                                                type="radio"
                                                                                                name="company"
                                                                                                onclick="$j('[id$=selected-company-id]').val('{! companyId }');
                                                                                                         $j('.save-company-btn').attr('disabled', false);"/>
                                                                                            <label for="{! companyId }">
                                                                                                <apex:outputPanel styleClass="select-item">
                                                                                                    {! foundCompaniesList.companiesMap[companyId].name }
                                                                                                </apex:outputPanel>
                                                                                                <br/>
                                                                                                <apex:outputPanel styleClass="font-11">
                                                                                                    {! foundCompaniesList.companiesMap[companyId].street } {! foundCompaniesList.companiesMap[companyId].housenumber }
                                                                                                    {! IF(foundCompaniesList.companiesMap[companyId].postcode != null, ', ' +
                                                                                                    foundCompaniesList.companiesMap[companyId].postcode, '') }
                                                                                                    {! IF(foundCompaniesList.companiesMap[companyId].city != null, ', ' +
                                                                                                    foundCompaniesList.companiesMap[companyId].city, '') }
                                                                                                    {! IF(foundCompaniesList.companiesMap[companyId].country != null, ', ' +
                                                                                                    foundCompaniesList.companiesMap[companyId].country, '') }
                                                                                                </apex:outputPanel>
                                                                                            </label>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="b-splitter"></div>
                                                                                </apex:repeat>
                                                                            </div>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>

                                                        <div class="modal-footer" style="margin-top: 16px; margin-bottom: 16px;">
                                                            <div class="row">
                                                                <div class="col-xs-12 col-sm-12">
                                                                    <div class="center-block text-center">
                                                                        <apex:commandButton value="{! stepPagesMap['CREDIT SCORE. SEARCH COMPANY'].elements['SELECT COMPANY BLOCK']['CONTINUE BUTTON'].Value__c }"
                                                                            action="{! deleteReportsForPreviousCompany }"
                                                                            styleClass="btn btn-red continue save-company-btn"
                                                                            onclick="startSplash();"
                                                                            oncomplete="goToSetTotalConsumption();"
                                                                            reRender=""/>

                                                                        <apex:actionFunction name="goToSetTotalConsumption" 
                                                                            action="{! goToSetTotalConsumption }" 
                                                                            reRender=""
                                                                            oncomplete="validateVatId();"/>
                                                                        <script>
                                                                            $j('.save-company-btn').attr('disabled', true);
                                                                        </script>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <script>
                                                analytics_CompaniesListOnLoad('{! opportunity.E2E_Form_of_Business__c }');
                                            </script>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </div>

                            <!-- STEPS LIST -->
                            <apex:outputPanel id="stepList">
                                <apex:outputPanel layout="block"
                                    styleClass="col-xs-12 col-sm-12"
                                    rendered="{! AND(
                                        activeSubstep != 'Get started',
                                        activeSubStep != 'Too many reports',
                                        activeSubStep != 'Risky but manageable',
                                        activeSubStep != 'Too high limit. Additional Credit Scoring Allowance',
                                        activeSubStep != 'Report does not exist',
                                        activeSubStep != 'Company not found',
                                        activeSubStep != 'Private entity',
                                        activeSubStep != 'Authorization not granted',
                                        activeSubStep != 'Already in process',
                                        activeSubStep != 'Already a customer',
                                        activeSubStep != 'Black list',
                                        activeSubStep != 'System error',
                                        activeSubStep != 'Stop order',
                                        activeSubStep != 'Too risky'
                                    ) }">
                                    <div class="row">
                                        <div class="b-steps-list">
                                            <apex:outputPanel layout="block" styleClass="li" rendered="{! activeStep < 1 }">
                                                <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[2].Step_Name__c }</apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="li" rendered="{! AND(activeStep < 2, activeSubstep != 'Calculating credit score') }">
                                                <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[3].Step_Name__c }</apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="li" rendered="{! activeStep < 2 }">
                                                <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[4].Step_Name__c }</apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="li" rendered="{! AND(activeStep < 3, activeSubstep != 'Choosing offer', activeSubstep != 'Additional services') }">
                                                <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[5].Step_Name__c }</apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="li" rendered="{! AND(activeStep < 4, activeSubstep != 'Documents') }">
                                                <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[6].Step_Name__c }</apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="li" rendered="{! activeStep < 4 }">
                                                <apex:outputPanel styleClass="li-text" layout="block">{! menuItemsMap[7].Step_Name__c }</apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </div>

                        <!-- BOTTOM ADDITION BLOCK -->
                        <apex:outputPanel layout="block" styleClass="addition-info" id="additionInfo">
                            <!-- STEP 0. ADDITION BLOCK -->
                            <apex:outputPanel layout="block" styleClass="contact-details-info" rendered="{! AND(activeStep = 0, activeSubstep = 'Get started') }">
                                <div class="row">
                                    <div class="b-why m-help-info">
                                        <div class="b-header">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['TOP HEADING'].Value__c }
                                        </div>
                                        <div class="col-xs-12 col-sm-12">
                                            <div class="why-info">
                                                <div class="collapse-block addition">
                                                    <div class="link" data-toggle="collapse" data-target="#vatRefund">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['SUBHEADING 1'].Value__c }
                                                        <div class="expander block-expand inline-block"></div>
                                                    </div>
                                                    <div class="row collapse" id="vatRefund">
                                                        <div class="desc font-13">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['BODY OF BLOCK 1'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-12">
                                            <div class="why-info">
                                                <div class="collapse-block addition">
                                                    <div class="link" data-toggle="collapse" data-target="#accounting">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['SUBHEADING 2'].Value__c }
                                                        <div class="expander block-expand inline-block"></div>
                                                    </div>
                                                    <div class="row collapse" id="accounting">
                                                        <div class="desc font-13">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['BODY OF BLOCK 2'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-12">
                                            <div class="why-info">
                                                <div class="collapse-block addition">
                                                    <div class="link" data-toggle="collapse" data-target="#spending">
                                                        {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['SUBHEADING 3'].Value__c }
                                                        <div class="expander block-expand inline-block"></div>
                                                    </div>
                                                    <div class="row collapse" id="spending">
                                                        <div class="desc font-13">
                                                            {! stepPagesMap['CONTACT DETAILS'].elements['WHY FUEL CARDS INFO BLOCK']['BODY OF BLOCK 3'].Value__c }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-cards-type m-help-info">
                                        <div class="b-header">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TOP HEADING'].Value__c }
                                        </div>
                                        <div class="col-xs-12 col-sm-12">
                                            <div class="cards-types">
                                                <div class="div-table">
                                                    <div class="div-table-heading">
                                                        <div class="div-table-row">
                                                            <div class="div-table-head"></div>
                                                            <div class="div-table-head font-11">
                                                                <div class="first-div">
                                                                    <div style="width: 82px; {! IF(isTablet, 'margin-left: 15px;', '') }">
                                                                       {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TABLE COLUMN 1 NAME'].Value__c }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="div-table-head font-11">
                                                                <div class="first-div">
                                                                    <div style="width: 38px; {! IF(isTablet, 'margin-left: 15px;', '') }">
                                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TABLE COLUMN 2 NAME'].Value__c }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="div-table-head font-11">
                                                                <div class="first-div">
                                                                    <div style="{! IF(isTablet, 'margin-left: 15px;', '') }">
                                                                        {! stepPagesMap['CONTACT DETAILS'].elements['TYPE OF CARD INFO BLOCK']['TABLE COLUMN 3 NAME'].Value__c }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="div-table-body">
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 1']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 2']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 3']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 4']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 5']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 6']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 7']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                        <div class="div-table-row">
                                                            <div class="div-table-cell font-11">
                                                                {! stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['CARD TYPE NAME'].Value__c }
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['VEHICLE RELATED PRODUCTS'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['VEHICLE RELATED PRODUCTS'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['ALL FUEL'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['ALL FUEL'].Value__c = 'TRUE')}">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div class="div-table-cell">
                                                                <apex:outputPanel layout="block" rendered="{! OR(stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['DIESEL ONLY'].Value__c = 'true', stepPagesMap['CONTACT DETAILS'].elements['CARD TYPE 8']['DIESEL ONLY'].Value__c = 'TRUE') }">
                                                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'path.png')}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="b-how-pay m-help-info">
                                        <apex:outputPanel layout="block" styleClass="b-header">
                                            {! stepPagesMap['CONTACT DETAILS'].elements['HOW TO PAY INFO BLOCK']['TOP HEADING'].Value__c }
                                        </apex:outputPanel>
                                        <div class="col-xs-12 col-sm-12">
                                            <div class="pay-info font-13" style="border-bottom: unset; padding-top: 0;">
                                                {! stepPagesMap['CONTACT DETAILS'].elements['HOW TO PAY INFO BLOCK']['BODY OF BLOCK'].Value__c }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>

                            <!-- STEP CONGRATULATION. ADDITION BLOCK -->
                            <apex:outputPanel id="congratulationsInfo" layout="block" styleClass="congratulations-info" rendered="{! AND(activeStep = 5, activeSubstep = 'Congratulations') }" style="padding: 0px 10px 0px 10px;">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="info-block">
                                            <div class="b-col-header">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TOP HEADING'].Value__c }
                                            </div>
                                            <div class="font-13">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK'].Value__c }
                                            </div>
                                            <div>
                                                <div class="font-15" style="margin-bottom: 4px;">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 1'].Value__c }
                                                </div>
                                                <div class="font-13">
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['TEXT BLOCK SUBBLOCK 1'].Value__c }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="info-block">
                                            <div class="font-15">
                                                {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['SUBBLOCK HEADING 2'].Value__c }
                                            </div>
                                            <apex:outputPanel layout="block" styleClass="font-13 customer-care" rendered="{! OR( opportunity.Garantie_other__c != null, AND(opportunity.Garantie_other__c = null, OR(paymentStatus = 'A', paymentStatus = 'C', paymentStatus = null))) }">
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['WORK TIME SUBBLOCK 2 SUCCESS'].Value__c }
                                                </div>
                                                <div class="assistance-info">
                                                    <apex:outputPanel layout="block" style="{! IF(isTablet, 'color: #333;','') }">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['PHONE SUBBLOCK 2 SUCCESS'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                                <apex:outputPanel layout="block">
                                                    <a style="{! IF(isTablet, 'color: #333;','') }" href="mailto:{! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 SUCCESS'].Value__c }">{! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 SUCCESS'].Value__c }</a>
                                                </apex:outputPanel>
                                            </apex:outputPanel>

                                            <apex:outputPanel layout="block" styleClass="font-13 customer-care" rendered="{! AND(opportunity.Garantie_other__c = null, OR(paymentStatus = 'D', paymentStatus = 'E')) }">
                                                <div>
                                                    {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['WORK TIME SUBBLOCK 2 UNSUCCESS'].Value__c }
                                                </div>
                                                <div class="assistance-info">
                                                    <apex:outputPanel layout="block" style="{! IF(isTablet, 'color: #333;','') }">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['PHONE SUBBLOCK 2 UNSUCCESS'].Value__c }
                                                    </apex:outputPanel>
                                                </div>
                                                <apex:outputPanel layout="block">
                                                    <a style="{! IF(isTablet, 'color: #333;','') }" href="mailto:{! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 UNSUCCESS'].Value__c }">{! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['EMAIL SUBBLOCK 2 UNSUCCESS'].Value__c }</a>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="buttons-block">
                                            <div class="buttons text-center">
                                                <div style="padding-top: 20px;">
                                                    <a href="{! IF(isTablet, '/kiosk?obn=' + opportunity.ESI__c,stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['RETURN TO SITE URL'].Value__c) }" class="btn btn-gray" style="line-height: 16px;">
                                                        {! stepPagesMap['CONGRATULATIONS'].elements['ADDITIONAL INFO BLOCK']['RETURN TO SITE BUTTON'].Value__c }
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>

                            <!-- STEP MOBILE ERROR PAGE -->
                            <apex:outputPanel layout="block"
                                styleClass="mobile-error-info"
                                rendered="{! OR(
                                    activeSubStep = 'Too many reports',
                                    activeSubStep = 'Risky but manageable',
                                    activeSubStep = 'Too high limit. Additional Credit Scoring Allowance',
                                    activeSubStep = 'Report does not exist',
                                    activeSubStep = 'Company not found',
                                    activeSubStep = 'Authorization not granted',
                                    activeSubStep = 'Already in process',
                                    activeSubStep = 'Already a customer', 
                                    activeSubStep = 'Too risky',
                                    activeSubStep = 'Stop order')
                                }">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12">
                                        <div class="b-block-header">
                                            {!  IF(activeSubStep = 'Too many reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['FEEDBACK HEADING'].Value__c,
                                                    IF(activeSubStep = 'Risky but manageable', stepPagesMap['PROCESS ERROR'].elements['RISKY BUT MANAGEABLE']['FEEDBACK HEADING'].Value__c,
                                                        IF(activeSubStep = 'Too high limit. Additional Credit Scoring Allowance', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT. ADDITIONAL CREDIT SCORING ALLOWANCE']['FEEDBACK HEADING'].Value__c,
                                                            IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['FEEDBACK HEADING'].Value__c,
                                                                IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['FEEDBACK HEADING'].Value__c,
                                                                    IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['FEEDBACK HEADING'].Value__c,
                                                                        IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['FEEDBACK HEADING'].Value__c,
                                                                            IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['FEEDBACK HEADING'].Value__c,
                                                                                IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['FEEDBACK HEADING'].Value__c, 
                                                                                    IF(activeSubStep = 'Too risky', stepPagesMap['PROCESS ERROR'].elements['TOO RISKY']['FEEDBACK HEADING'].Value__c,  
                                                                                        IF(activeSubStep = 'Stop order', stepPagesMap['PROCESS ERROR'].elements['STOP ORDER']['FEEDBACK HEADING'].Value__c, ''))))))))))) }
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-7 col-sm-7">
                                        <div class="font-13 customer-care">
                                            <div>
                                                {!  IF(activeSubStep = 'Too many reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['WORK TIME'].Value__c,
                                                        IF(activeSubStep = 'Risky but manageable', stepPagesMap['PROCESS ERROR'].elements['RISKY BUT MANAGEABLE']['WORK TIME'].Value__c,
                                                            IF(activeSubStep = 'Too high limit. Additional Credit Scoring Allowance', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT. ADDITIONAL CREDIT SCORING ALLOWANCE']['WORK TIME'].Value__c,
                                                                IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['WORK TIME'].Value__c,
                                                                    IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['WORK TIME'].Value__c,
                                                                        IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['WORK TIME'].Value__c,
                                                                            IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['WORK TIME'].Value__c,
                                                                                IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['WORK TIME'].Value__c,
                                                                                    IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['WORK TIME'].Value__c, 
                                                                                        IF(activeSubStep = 'Too risky', stepPagesMap['PROCESS ERROR'].elements['TOO RISKY']['WORK TIME'].Value__c, 
                                                                                            IF(activeSubStep = 'Stop order', stepPagesMap['PROCESS ERROR'].elements['STOP ORDER']['WORK TIME'].Value__c, ''))))))))))) }
                                            </div>
                                            <div class="assistance-info">
                                                <apex:outputPanel layout="block" style="{! IF(isTablet, 'color: #333;','') }">
                                                    {!  IF(activeSubStep = 'Too many reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['PHONE'].Value__c,
                                                            IF(activeSubStep = 'Risky but manageable', stepPagesMap['PROCESS ERROR'].elements['RISKY BUT MANAGEABLE']['PHONE'].Value__c,
                                                                IF(activeSubStep = 'Too high limit. Additional Credit Scoring Allowance', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT. ADDITIONAL CREDIT SCORING ALLOWANCE']['PHONE'].Value__c,
                                                                    IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['PHONE'].Value__c,
                                                                        IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['PHONE'].Value__c,
                                                                            IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['PHONE'].Value__c,
                                                                                IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['PHONE'].Value__c,
                                                                                    IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['PHONE'].Value__c,
                                                                                        IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['PHONE'].Value__c, 
                                                                                            IF(activeSubStep = 'Too risky', stepPagesMap['PROCESS ERROR'].elements['TOO RISKY']['PHONE'].Value__c, 
                                                                                                IF(activeSubStep = 'Stop order', stepPagesMap['PROCESS ERROR'].elements['STOP ORDER']['PHONE'].Value__c, ''))))))))))) }
                                                </apex:outputPanel>
                                                <div>
                                                    <apex:outputLink style="{! IF(isTablet, 'color: #333;','') }">
                                                        {!  IF(activeSubStep = 'Too many reports', stepPagesMap['PROCESS ERROR'].elements['TOO MANY REPORTS']['EMAIL'].Value__c,
                                                                IF(activeSubStep = 'Risky but manageable', stepPagesMap['PROCESS ERROR'].elements['RISKY BUT MANAGEABLE']['EMAIL'].Value__c,
                                                                    IF(activeSubStep = 'Too high limit. Additional Credit Scoring Allowance', stepPagesMap['PROCESS ERROR'].elements['TOO HIGH LIMIT. ADDITIONAL CREDIT SCORING ALLOWANCE']['EMAIL'].Value__c,
                                                                        IF(activeSubStep = 'Report does not exist', stepPagesMap['PROCESS ERROR'].elements['NO REPORT']['EMAIL'].Value__c,
                                                                            IF(activeSubStep = 'Company not found', stepPagesMap['PROCESS ERROR'].elements['COMPANY NOT FOUND']['EMAIL'].Value__c,
                                                                                IF(activeSubStep = 'Authorization not granted', stepPagesMap['PROCESS ERROR'].elements['AUTHORIZATION NOT GRANTED']['EMAIL'].Value__c,
                                                                                    IF(activeSubStep = 'Already in process', stepPagesMap['PROCESS ERROR'].elements['ALREADY IN PROCESS']['EMAIL'].Value__c,
                                                                                        IF(activeSubStep = 'Already a customer', stepPagesMap['PROCESS ERROR'].elements['ALREADY A CUSTOMER']['EMAIL'].Value__c,
                                                                                            IF(activeSubStep = 'Black list', stepPagesMap['PROCESS ERROR'].elements['BLACK LIST']['EMAIL'].Value__c, 
                                                                                                IF(activeSubStep = 'Too risky', stepPagesMap['PROCESS ERROR'].elements['TOO RISKY']['EMAIL'].Value__c,  
                                                                                                    IF(activeSubStep = 'Stop order', stepPagesMap['PROCESS ERROR'].elements['STOP ORDER']['EMAIL'].Value__c, ''))))))))))) }
                                                    </apex:outputLink>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>
                            <!-- BACK TO TOP -->
                            <apex:outputPanel layout="block"
                                rendered="{! AND(
                                    activeStep != 0,
                                    activeSubstep != 'Get started'
                                )}">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12">
                                        <apex:outputPanel layout="block" styleClass="back-to-top">
                                            <a href="" id="top"> &#8593; {! stepPagesMap['FOOTER'].elements['BACK TO THE TOP BUTTON']['LABEL'].Value__c } </a>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </div>
                </div>
            </main>
            <footer style="{! IF(isTablet, 'height: 120px', '') }">
                <div class="container hidden-lgxl">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12">
                            <div class="fleetcor">
                                <div class="b-page-logo" style="margin: 13px 0 10px 0px;">
                                    <apex:image url="{!URLFOR($Resource.e2e_images, 'm-logo.png')}"/>
                                </div>
                                <apex:outputPanel layout="block" styleClass="fleetcor-desc text-muted">
                                    {! stepPagesMap['FOOTER'].elements['DESCRIPTION']['VALUE'].Value__c }
                                </apex:outputPanel>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="b-copyright">
                            <div>
                                <apex:outputLink value="{! stepPagesMap['FOOTER'].elements['COPYRIGHT']['URL'].Value__c }" target="_blank" style="{! IF(isTablet,'display: none !important;','') }">
                                    {! stepPagesMap['FOOTER'].elements['COPYRIGHT']['VALUE'].Value__c }
                                </apex:outputLink>
                                <apex:outputText value="{! stepPagesMap['FOOTER'].elements['COPYRIGHT']['VALUE'].Value__c }" style="{! IF(isTablet,'','display: none !important;') }"/>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- CHAT BLOCK -->
                <div class="chat-button" id="chat-button-offline" style="display: none;" onclick="setupOfflineChat(); return false;">
                    <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
                </div>
                <div  class="chat-button" id="chat-button-online" style=" display: none;" onclick="setupOnlineChat(); return false;">
                    <apex:image url="{!URLFOR($Resource.e2e_images, 'chat.png')}" />
                </div>
                <div class="chat-box" id="chatOfflineBlock">
                    <span>
                        <div class="no_save no_brand" id="liveAgentClientChatSettings">
                            <div class="liveAgentState" id="liveAgentClientChat">
                                 <div class="chat-header">{! pageMapChat['CHAT'].elements['CHAT HEADING']['TEXT'].Value__c }
                                    <span id="clientChatEndButtonID">
                                        <button class="close liveAgentEndButton" onclick="closeChat('offline'); return false;" />
                                    </span>
                                 </div>
                                <div class="chat-status">
                                    {! pageMapChat['CHAT'].elements['CHAT OFFLINE']['VALUE'].Value__c }
                                </div>
                                <div>
                                    <div>
                                        <span>
                                            <div class="liveAgentAlert" id="liveAgentMessageContainer"></div>
                                        </span>
                                        <div style="word-wrap: break-word; padding-top:1px;">
                                            <span>
                                                <div class="liveAgentChatElement" id="liveAgentChatLog">
                                                    <div id="liveAgentChatLogText" class="liveAgentChatLogText" style="margin-top:10px;">
                                                        <span class="chat-operator">
                                                            <span class="chat-name"><strong>FLEETCOR</strong>
                                                                <span class="chat-customDateTime" style="display: inline"></span>
                                                            </span>
                                                            <span class="chat-messageText">
                                                                 {! pageMapChat['CHAT'].elements['CHAT OFFLINE GREETING']['VALUE'].Value__c }
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <span class="chat-operator" id="liveAgentChatLogTyping" style="display: none;"></span>
                                                </div>
                                            </span>
                                        </div>
                                        <div class="col-xs-9 col-lg-9 col-md-9 col-sm-9" style="padding: 0px;">
                                            <span>
                                                <div class="liveAgentChatElement liveAgentChatInput" id="liveAgentChatInput">
                                                     <textarea class="liveAgentChatTextArea" id="liveAgentChatTextArea" maxlength="6000"
                                                              placeholder="{!pageMapChat['CHAT'].elements['TEXTAREA']['PLACEHOLDER'].Value__c }" wrap="soft" data-uidsfdc="3" />
                                                </div>
                                            </span>
                                        </div>
                                        <div class="col-xs-3 col-lg-3 col-md-3 col-sm-3" style="padding: 0px;">
                                            <span>
                                                 <button class="liveAgentChatElement liveAgentSendButton" onclick="updateOfflineChat();return false;" > {! pageMapChat['CHAT'].elements['SEND BUTTON']['TEXT'].Value__c} </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </span>
                </div>
                <div class="chat-box" id="chatOnlineBlock">
                    <div class="chat-header" style="margin:0px;">
                        <button class="close liveAgentEndButton"
                                onclick="closeChat('online'); return false;"
                                style="position:absolute; right:6px; top:8px;"
                                id="clientChatEndButtonID" label="x">
                        </button>
                    </div>
                </div>
                <div class="lightbox"></div>
            </footer>
        </body>
    </apex:form>
    <!-- PAYMENT FORM -->
    <apex:outputPanel id="paymentFormToSend" style="display: none;" >
        <form class="paymentFormToSubmit" method="POST" action="{! paymentURL }" id="paymentFormToSubmit">
            <apex:repeat value="{! paymentParameters }" var="param">
                <input type="hidden"  name="{! param }" value="{! paymentParameters[param] }" />
            </apex:repeat>
        </form>
    </apex:outputPanel>
</apex:page>